{"version":3,"sources":["webpack:///./node_modules/@theia/callhierarchy/src/browser/index.ts","webpack:///./node_modules/@theia/file-search/src/common/file-search-service.ts","webpack:///./node_modules/@theia/monaco/src/browser/textmate/index.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/connection.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/editor-options.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/object-identifier.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-message-reader.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-message-writer.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/types.ts","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/hosted-plugin-watcher.ts","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/hosted-plugin.ts","webpack:///./node_modules/@theia/plugin-ext/lib/hosted/browser/worker/worker-main.js","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/callhierarchy/callhierarchy-type-converters.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/clipboard-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/command-registry-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/commands.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/connection-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/debug/debug-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-adapter-contribution.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-service.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-session-contribution-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-session-factory.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/decorations/decorations-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/dialogs-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/dialogs/modal-notification.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/editors-and-documents-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/env-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/file-system-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/in-plugin-filesystem-watcher-manager.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/keybindings/keybindings-contribution-handler.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/language-provider/language-client-contribution-provider-impl.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/language-provider/language-client-contribution-provider.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/language-provider/plugin-language-client-provider.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/languages-contribution-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/languages-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/main-context.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/message-registry-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/notification-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/output-channel-registry-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-contribution-handler.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-ext-deploy-command.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-ext-frontend-module.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-ext-widget.tsx","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-frontend-contribution.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-frontend-view-contribution.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-icon-theme-service.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-storage.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/plugin-worker.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/preference-registry-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/quick-open-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/selection-provider-command.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/status-bar-message-registry-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/tasks-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/terminal-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/text-editor-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/text-editor-model-service.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/text-editors-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/view-column-service.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/view/plugin-tree-view-node-label-provider.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/view/plugin-view-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/view/tree-views-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/webview/webview-widget-factory.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/webviews-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/window-state-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/workspace-main.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/common/plugin-paths-protocol.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin-ext-frontend-module.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/dialogs/style/modal-notification.css?d8b0","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/style/index.css?577e","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/style/test.svg","webpack:///./node_modules/@theia/plugin-ext/src/main/style/status-bar.css?3f18","webpack:///./node_modules/@theia/scm/src/browser/decorations/scm-decorations-service.ts","webpack:///./node_modules/@theia/task/src/browser/index.ts","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/dialogs/style/modal-notification.css","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/style/index.css","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/style/plugin-sidebar.css","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/style/tree.css","webpack:///./node_modules/@theia/plugin-ext/src/main/browser/style/webview.css","webpack:///./node_modules/@theia/plugin-ext/src/main/style/status-bar.css"],"names":[],"mappings":"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","file":"58.bundle.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './callhierarchy';\nexport * from './callhierarchy-contribution';\nexport * from './callhierarchy-frontend-module';\nexport * from './callhierarchy-service';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CancellationToken } from '@theia/core';\n\nexport const fileSearchServicePath = '/services/search';\n\n/**\n * The JSON-RPC file search service interface.\n */\nexport interface FileSearchService {\n\n    /**\n     * finds files by a given search pattern.\n     * @return the matching file uris\n     */\n    find(searchPattern: string, options: FileSearchService.Options, cancellationToken?: CancellationToken): Promise<string[]>;\n\n}\n\nexport const FileSearchService = Symbol('FileSearchService');\nexport namespace FileSearchService {\n    export interface BaseOptions {\n        useGitIgnore?: boolean\n        includePatterns?: string[]\n        excludePatterns?: string[]\n    }\n    export interface RootOptions {\n        [rootUri: string]: BaseOptions\n    }\n    export interface Options extends BaseOptions {\n        rootUris?: string[]\n        rootOptions?: RootOptions\n        fuzzyMatch?: boolean\n        limit?: number\n        /**\n         * when `undefined`, no excludes will apply, when empty array, default excludes will apply\n         *\n         * @deprecated since 0.5.0 use `excludePatterns` instead\n         */\n        defaultIgnorePatterns?: string[]\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './textmate-registry';\nexport * from './textmate-contribution';\nexport * from './monaco-textmate-service';\nexport * from './monaco-textmate-frontend-bindings';\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable } from './disposable-util';\nimport { PluginMessageReader } from './plugin-message-reader';\nimport { PluginMessageWriter } from './plugin-message-writer';\nimport { MessageReader, MessageWriter, Message } from 'vscode-jsonrpc';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\n\n/**\n * The interface for describing the connection between plugins and main side.\n */\nexport interface Connection extends Disposable {\n    readonly reader: MessageReader;\n    readonly writer: MessageWriter;\n    /**\n     * Allows to forward messages to another connection.\n     *\n     * @param to the connection to forward messages\n     * @param map the function in which the message can be changed before forwarding\n     */\n    forward(to: Connection, map?: (message: Message) => Message): void;\n}\n\n/**\n * The container for message reader and writer which can be used to create connection between plugins and main side.\n */\nexport class PluginConnection implements Connection {\n    constructor(\n        readonly reader: PluginMessageReader,\n        readonly writer: PluginMessageWriter,\n        readonly dispose: () => void) {\n    }\n\n    forward(to: Connection, map: (message: Message) => Message = message => message): void {\n        this.reader.listen(input => {\n            const output = map(input);\n            to.writer.write(output);\n        });\n    }\n}\n\n/**\n * [IWebSocket](#IWebSocket) implementation over RPC.\n */\nexport class PluginWebSocketChannel implements IWebSocket {\n    constructor(protected readonly connection: PluginConnection) { }\n\n    send(content: string): void {\n        this.connection.writer.write(content);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(cb: (data: any) => void): void {\n        this.connection.reader.listen(cb);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onError(cb: (reason: any) => void): void {\n        this.connection.reader.onError(e => cb(e));\n    }\n\n    onClose(cb: (code: number, reason: string) => void): void {\n        this.connection.reader.onClose(() => cb(-1, 'closed'));\n    }\n\n    dispose(): void {\n        this.connection.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): 'line' | 'block' | 'underline' | 'line-thin' | 'block-outline' | 'underline-thin' {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { es5ClassCompat } from './types';\nimport { AbstractMessageReader, DataCallback } from 'vscode-jsonrpc/lib/messageReader';\n\n/**\n * Support for reading string message through RPC protocol.\n */\nexport class PluginMessageReader extends es5ClassCompat(AbstractMessageReader) {\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor() {\n        super();\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n\n    readMessage(message: string): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    fireClose(): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { es5ClassCompat } from './types';\nimport { AbstractMessageWriter, MessageWriter } from 'vscode-jsonrpc/lib/messageWriter';\nimport { ConnectionMain, ConnectionExt } from './plugin-api-rpc';\nimport { Message } from 'vscode-jsonrpc';\n\n/**\n * Support for writing string message through RPC protocol.\n */\nexport class PluginMessageWriter extends es5ClassCompat(AbstractMessageWriter) implements MessageWriter {\n    constructor(\n        protected readonly id: string,\n        protected readonly proxy: ConnectionMain | ConnectionExt) {\n        super();\n    }\n\n    write(message: string): void;\n    write(message: Message): void;\n    write(arg: string | Message): void {\n        const content = JSON.stringify(arg);\n        this.proxy.$sendMessage(this.id, content);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/types.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/**\n * Returns `true` if the parameter has type \"object\" and not null, an array, a regexp, a date.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isObject(obj: any): boolean {\n    return typeof obj === 'object'\n        && obj !== null // eslint-disable-line @typescript-eslint/no-explicit-any\n        && !Array.isArray(obj)\n        && !(obj instanceof RegExp)\n        && !(obj instanceof Date);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n    if (!isObject(destination)) {\n        return source;\n    }\n\n    if (isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (key in destination) {\n                if (overwrite) {\n                    if (isObject(destination[key]) && isObject(source[key])) {\n                        mixin(destination[key], source[key], overwrite);\n                    } else {\n                        destination[key] = source[key];\n                    }\n                }\n            } else {\n                destination[key] = source[key];\n            }\n        });\n    }\n    return destination;\n}\n\nexport enum LogType {\n    Info,\n    Error\n}\n\nexport interface LogPart {\n    data: string;\n    type: LogType;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface KeysToAnyValues { [key: string]: any }\nexport interface KeysToKeysToAnyValue { [key: string]: KeysToAnyValues }\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/** copied from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostTypes.ts#L18-L27 */\nexport function es5ClassCompat<T extends Function>(target: T): T {\n    // @ts-ignore\n    function _(): any { return Reflect.construct(target, arguments, this.constructor); }\n    Object.defineProperty(_, 'name', Object.getOwnPropertyDescriptor(target, 'name')!);\n    Object.setPrototypeOf(_, target);\n    Object.setPrototypeOf(_.prototype, target.prototype);\n    return _ as unknown as T;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\nconst _typeof = {\n    number: 'number',\n    string: 'string',\n    undefined: 'undefined',\n    object: 'object',\n    function: 'function'\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n    if (Array.isArray) {\n        return Array.isArray(array);\n    }\n\n    if (array && typeof (array.length) === _typeof.number && array.constructor === Array) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: any): obj is undefined {\n    return typeof (obj) === _typeof.undefined;\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: any): obj is undefined | null {\n    return isUndefined(obj) || obj === null; // eslint-disable-line no-null/no-null\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { HostedPluginClient } from '../../common/plugin-protocol';\nimport { LogPart } from '../../common/types';\n\n@injectable()\nexport class HostedPluginWatcher {\n    private onPostMessage = new Emitter<string[]>();\n    private onLogMessage = new Emitter<LogPart>();\n\n    private readonly onDidDeployEmitter = new Emitter<void>();\n    readonly onDidDeploy = this.onDidDeployEmitter.event;\n\n    getHostedPluginClient(): HostedPluginClient {\n        const messageEmitter = this.onPostMessage;\n        const logEmitter = this.onLogMessage;\n        return {\n            postMessage(message: string): Promise<void> {\n                messageEmitter.fire(JSON.parse(message));\n                return Promise.resolve();\n            },\n            log(logPart: LogPart): Promise<void> {\n                logEmitter.fire(logPart);\n                return Promise.resolve();\n            },\n            onDidDeploy: () => this.onDidDeployEmitter.fire(undefined)\n        };\n    }\n\n    get onPostMessageEvent(): Event<string[]> {\n        return this.onPostMessage.event;\n    }\n\n    get onLogMessageEvent(): Event<LogPart> {\n        return this.onLogMessage.event;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/da5fb7d5b865aa522abc7e82c10b746834b98639/src/vs/workbench/api/node/extHostExtensionService.ts\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport debounce = require('lodash.debounce');\nimport { UUID } from '@phosphor/coreutils';\nimport { injectable, inject, interfaces, named, postConstruct } from 'inversify';\nimport { PluginWorker } from '../../main/browser/plugin-worker';\nimport { PluginMetadata, getPluginId, HostedPluginServer, DeployedPlugin } from '../../common/plugin-protocol';\nimport { HostedPluginWatcher } from './hosted-plugin-watcher';\nimport { MAIN_RPC_CONTEXT, PluginManagerExt, ConfigStorage, UIKind } from '../../common/plugin-api-rpc';\nimport { setUpPluginApi } from '../../main/browser/main-context';\nimport { RPCProtocol, RPCProtocolImpl } from '../../common/rpc-protocol';\nimport {\n    Disposable, DisposableCollection,\n    ILogger, ContributionProvider, CommandRegistry, WillExecuteCommandEvent,\n    CancellationTokenSource, JsonRpcProxy, ProgressService\n} from '@theia/core';\nimport { PreferenceServiceImpl, PreferenceProviderProvider } from '@theia/core/lib/browser/preferences';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { PluginContributionHandler } from '../../main/browser/plugin-contribution-handler';\nimport { getQueryParameters } from '../../main/browser/env-main';\nimport { MainPluginApiProvider } from '../../common/plugin-ext-api-contribution';\nimport { PluginPathsService } from '../../main/common/plugin-paths-protocol';\nimport { getPreferences } from '../../main/browser/preference-registry-main';\nimport { PluginServer } from '../../common/plugin-protocol';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { DebugSessionManager } from '@theia/debug/lib/browser/debug-session-manager';\nimport { DebugConfigurationManager } from '@theia/debug/lib/browser/debug-configuration-manager';\nimport { WaitUntilEvent } from '@theia/core/lib/common/event';\nimport { FileSystem } from '@theia/filesystem/lib/common';\nimport { FileSearchService } from '@theia/file-search/lib/common/file-search-service';\nimport { Emitter, isCancelled } from '@theia/core';\nimport { FrontendApplicationStateService } from '@theia/core/lib/browser/frontend-application-state';\nimport { PluginViewRegistry } from '../../main/browser/view/plugin-view-registry';\nimport { TaskProviderRegistry, TaskResolverRegistry } from '@theia/task/lib/browser/task-contribution';\nimport { WebviewEnvironment } from '../../main/browser/webview/webview-environment';\nimport { WebviewWidget } from '../../main/browser/webview/webview';\nimport { WidgetManager } from '@theia/core/lib/browser/widget-manager';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport URI from '@theia/core/lib/common/uri';\nimport { FrontendApplicationConfigProvider } from '@theia/core/lib/browser/frontend-application-config-provider';\nimport { environment } from '@theia/application-package/lib/environment';\nimport { JsonSchemaStore } from '@theia/core/lib/browser/json-schema-store';\n\nexport type PluginHost = 'frontend' | string;\nexport type DebugActivationEvent = 'onDebugResolve' | 'onDebugInitialConfigurations' | 'onDebugAdapterProtocolTracker';\n\nexport const PluginProgressLocation = 'plugin';\n\n@injectable()\nexport class HostedPluginSupport {\n\n    protected readonly clientId = UUID.uuid4();\n\n    protected container: interfaces.Container;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(HostedPluginServer)\n    private readonly server: JsonRpcProxy<HostedPluginServer>;\n\n    @inject(HostedPluginWatcher)\n    private readonly watcher: HostedPluginWatcher;\n\n    @inject(PluginContributionHandler)\n    private readonly contributionHandler: PluginContributionHandler;\n\n    @inject(ContributionProvider)\n    @named(MainPluginApiProvider)\n    protected readonly mainPluginApiProviders: ContributionProvider<MainPluginApiProvider>;\n\n    @inject(PluginServer)\n    protected readonly pluginServer: PluginServer;\n\n    @inject(PreferenceProviderProvider)\n    protected readonly preferenceProviderProvider: PreferenceProviderProvider;\n\n    @inject(PreferenceServiceImpl)\n    private readonly preferenceServiceImpl: PreferenceServiceImpl;\n\n    @inject(PluginPathsService)\n    private readonly pluginPathsService: PluginPathsService;\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(DebugSessionManager)\n    protected readonly debugSessionManager: DebugSessionManager;\n\n    @inject(DebugConfigurationManager)\n    protected readonly debugConfigurationManager: DebugConfigurationManager;\n\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    @inject(FileSearchService)\n    protected readonly fileSearchService: FileSearchService;\n\n    @inject(FrontendApplicationStateService)\n    protected readonly appState: FrontendApplicationStateService;\n\n    @inject(PluginViewRegistry)\n    protected readonly viewRegistry: PluginViewRegistry;\n\n    @inject(TaskProviderRegistry)\n    protected readonly taskProviderRegistry: TaskProviderRegistry;\n\n    @inject(TaskResolverRegistry)\n    protected readonly taskResolverRegistry: TaskResolverRegistry;\n\n    @inject(ProgressService)\n    protected readonly progressService: ProgressService;\n\n    @inject(WebviewEnvironment)\n    protected readonly webviewEnvironment: WebviewEnvironment;\n\n    @inject(WidgetManager)\n    protected readonly widgets: WidgetManager;\n\n    @inject(TerminalService)\n    protected readonly terminalService: TerminalService;\n\n    @inject(EnvVariablesServer)\n    protected readonly envServer: EnvVariablesServer;\n\n    @inject(JsonSchemaStore)\n    protected readonly jsonSchemaStore: JsonSchemaStore;\n\n    private theiaReadyPromise: Promise<any>;\n\n    protected readonly managers = new Map<string, PluginManagerExt>();\n\n    private readonly contributions = new Map<string, PluginContributions>();\n\n    protected readonly activationEvents = new Set<string>();\n\n    protected readonly onDidChangePluginsEmitter = new Emitter<void>();\n    readonly onDidChangePlugins = this.onDidChangePluginsEmitter.event;\n\n    protected readonly deferredWillStart = new Deferred<void>();\n    /**\n     * Resolves when the initial plugins are loaded and about to be started.\n     */\n    get willStart(): Promise<void> {\n        return this.deferredWillStart.promise;\n    }\n\n    protected readonly deferredDidStart = new Deferred<void>();\n    /**\n     * Resolves when the initial plugins are started.\n     */\n    get didStart(): Promise<void> {\n        return this.deferredDidStart.promise;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.theiaReadyPromise = Promise.all([this.preferenceServiceImpl.ready, this.workspaceService.roots]);\n        this.workspaceService.onWorkspaceChanged(() => this.updateStoragePath());\n\n        const modeService = monaco.services.StaticServices.modeService.get();\n        for (const modeId of Object.keys(modeService['_instantiatedModes'])) {\n            const mode = modeService['_instantiatedModes'][modeId];\n            this.activateByLanguage(mode.getId());\n        }\n        modeService.onDidCreateMode(mode => this.activateByLanguage(mode.getId()));\n        this.commands.onWillExecuteCommand(event => this.ensureCommandHandlerRegistration(event));\n        this.debugSessionManager.onWillStartDebugSession(event => this.ensureDebugActivation(event));\n        this.debugSessionManager.onWillResolveDebugConfiguration(event => this.ensureDebugActivation(event, 'onDebugResolve', event.debugType));\n        this.debugConfigurationManager.onWillProvideDebugConfiguration(event => this.ensureDebugActivation(event, 'onDebugInitialConfigurations'));\n        this.viewRegistry.onDidExpandView(id => this.activateByView(id));\n        this.taskProviderRegistry.onWillProvideTaskProvider(event => this.ensureTaskActivation(event));\n        this.taskResolverRegistry.onWillProvideTaskResolver(event => this.ensureTaskActivation(event));\n        this.widgets.onDidCreateWidget(({ factoryId, widget }) => {\n            if (factoryId === WebviewWidget.FACTORY_ID && widget instanceof WebviewWidget) {\n                const storeState = widget.storeState.bind(widget);\n                const restoreState = widget.restoreState.bind(widget);\n                widget.storeState = () => {\n                    if (this.webviewRevivers.has(widget.viewType)) {\n                        return storeState();\n                    }\n                    return {};\n                };\n                widget.restoreState = oldState => {\n                    if (oldState.viewType) {\n                        restoreState(oldState);\n                        this.preserveWebview(widget);\n                    } else {\n                        widget.dispose();\n                    }\n                };\n            }\n        });\n    }\n\n    get plugins(): PluginMetadata[] {\n        const plugins: PluginMetadata[] = [];\n        this.contributions.forEach(contributions => plugins.push(contributions.plugin.metadata));\n        return plugins;\n    }\n\n    getPlugin(id: string): DeployedPlugin | undefined {\n        const contributions = this.contributions.get(id);\n        return contributions && contributions.plugin;\n    }\n\n    /** do not call it, except from the plugin frontend contribution */\n    onStart(container: interfaces.Container): void {\n        this.container = container;\n        this.load();\n        this.watcher.onDidDeploy(() => this.load());\n        this.server.onDidOpenConnection(() => this.load());\n    }\n\n    protected loadQueue: Promise<void> = Promise.resolve(undefined);\n    load = debounce(() => this.loadQueue = this.loadQueue.then(async () => {\n        try {\n            await this.progressService.withProgress('', PluginProgressLocation, () => this.doLoad());\n        } catch (e) {\n            console.error('Failed to load plugins:', e);\n        }\n    }), 50, { leading: true });\n\n    protected async doLoad(): Promise<void> {\n        const toDisconnect = new DisposableCollection(Disposable.create(() => { /* mark as connected */ }));\n        toDisconnect.push(Disposable.create(() => this.preserveWebviews()));\n        this.server.onDidCloseConnection(() => toDisconnect.dispose());\n\n        // process empty plugins as well in order to properly remove stale plugin widgets\n        await this.syncPlugins();\n\n        // it has to be resolved before awaiting layout is initialized\n        // otherwise clients can hang forever in the initialization phase\n        this.deferredWillStart.resolve();\n\n        // make sure that the previous state, including plugin widgets, is restored\n        // and core layout is initialized, i.e. explorer, scm, debug views are already added to the shell\n        // but shell is not yet revealed\n        await this.appState.reachedState('initialized_layout');\n\n        if (toDisconnect.disposed) {\n            // if disconnected then don't try to load plugin contributions\n            return;\n        }\n        const contributionsByHost = this.loadContributions(toDisconnect);\n\n        await this.viewRegistry.initWidgets();\n        // remove restored plugin widgets which were not registered by contributions\n        this.viewRegistry.removeStaleWidgets();\n        await this.theiaReadyPromise;\n\n        if (toDisconnect.disposed) {\n            // if disconnected then don't try to init plugin code and dynamic contributions\n            return;\n        }\n        await this.startPlugins(contributionsByHost, toDisconnect);\n\n        this.deferredDidStart.resolve();\n\n        this.restoreWebviews();\n    }\n\n    /**\n     * Sync loaded and deployed plugins:\n     * - undeployed plugins are unloaded\n     * - newly deployed plugins are initialized\n     */\n    protected async syncPlugins(): Promise<void> {\n        let initialized = 0;\n        const syncPluginsMeasurement = this.createMeasurement('syncPlugins');\n\n        const toUnload = new Set(this.contributions.keys());\n        try {\n            const pluginIds: string[] = [];\n            const deployedPluginIds = await this.server.getDeployedPluginIds();\n            for (const pluginId of deployedPluginIds) {\n                toUnload.delete(pluginId);\n                if (!this.contributions.has(pluginId)) {\n                    pluginIds.push(pluginId);\n                }\n            }\n            for (const pluginId of toUnload) {\n                const contribution = this.contributions.get(pluginId);\n                if (contribution) {\n                    contribution.dispose();\n                }\n            }\n            if (pluginIds.length) {\n                const plugins = await this.server.getDeployedPlugins({ pluginIds });\n                for (const plugin of plugins) {\n                    const pluginId = plugin.metadata.model.id;\n                    const contributions = new PluginContributions(plugin);\n                    this.contributions.set(pluginId, contributions);\n                    contributions.push(Disposable.create(() => this.contributions.delete(pluginId)));\n                    initialized++;\n                }\n            }\n        } finally {\n            if (initialized || toUnload.size) {\n                this.onDidChangePluginsEmitter.fire(undefined);\n            }\n        }\n\n        this.logMeasurement('Sync', initialized, syncPluginsMeasurement);\n    }\n\n    /**\n     * Always synchronous in order to simplify handling disconnections.\n     * @throws never\n     */\n    protected loadContributions(toDisconnect: DisposableCollection): Map<PluginHost, PluginContributions[]> {\n        let loaded = 0;\n        const loadPluginsMeasurement = this.createMeasurement('loadPlugins');\n\n        const hostContributions = new Map<PluginHost, PluginContributions[]>();\n        for (const contributions of this.contributions.values()) {\n            const plugin = contributions.plugin.metadata;\n            const pluginId = plugin.model.id;\n\n            if (contributions.state === PluginContributions.State.INITIALIZING) {\n                contributions.state = PluginContributions.State.LOADING;\n                contributions.push(Disposable.create(() => console.log(`[${pluginId}]: Unloaded plugin.`)));\n                contributions.push(this.contributionHandler.handleContributions(this.clientId, contributions.plugin));\n                contributions.state = PluginContributions.State.LOADED;\n                console.log(`[${this.clientId}][${pluginId}]: Loaded contributions.`);\n                loaded++;\n            }\n\n            if (contributions.state === PluginContributions.State.LOADED) {\n                contributions.state = PluginContributions.State.STARTING;\n                const host = plugin.model.entryPoint.frontend ? 'frontend' : plugin.host;\n                const dynamicContributions = hostContributions.get(plugin.host) || [];\n                dynamicContributions.push(contributions);\n                hostContributions.set(host, dynamicContributions);\n                toDisconnect.push(Disposable.create(() => {\n                    contributions!.state = PluginContributions.State.LOADED;\n                    console.log(`[${this.clientId}][${pluginId}]: Disconnected.`);\n                }));\n            }\n        }\n\n        this.logMeasurement('Load contributions', loaded, loadPluginsMeasurement);\n\n        return hostContributions;\n    }\n\n    protected async startPlugins(contributionsByHost: Map<PluginHost, PluginContributions[]>, toDisconnect: DisposableCollection): Promise<void> {\n        let started = 0;\n        const startPluginsMeasurement = this.createMeasurement('startPlugins');\n\n        const [hostLogPath, hostStoragePath, hostGlobalStoragePath] = await Promise.all([\n            this.pluginPathsService.getHostLogPath(),\n            this.getStoragePath(),\n            this.getHostGlobalStoragePath()\n        ]);\n        if (toDisconnect.disposed) {\n            return;\n        }\n        const thenable: Promise<void>[] = [];\n        const configStorage: ConfigStorage = {\n            hostLogPath,\n            hostStoragePath,\n            hostGlobalStoragePath\n        };\n        for (const [host, hostContributions] of contributionsByHost) {\n            const manager = await this.obtainManager(host, hostContributions, toDisconnect);\n            if (!manager) {\n                return;\n            }\n            const plugins = hostContributions.map(contributions => contributions.plugin.metadata);\n            thenable.push((async () => {\n                try {\n                    const activationEvents = [...this.activationEvents];\n                    await manager.$start({ plugins, configStorage, activationEvents });\n                    if (toDisconnect.disposed) {\n                        return;\n                    }\n                    for (const contributions of hostContributions) {\n                        started++;\n                        const plugin = contributions.plugin;\n                        const id = plugin.metadata.model.id;\n                        contributions.state = PluginContributions.State.STARTED;\n                        console.log(`[${this.clientId}][${id}]: Started plugin.`);\n                        toDisconnect.push(contributions.push(Disposable.create(() => {\n                            console.log(`[${this.clientId}][${id}]: Stopped plugin.`);\n                            manager.$stop(id);\n                        })));\n\n                        this.activateByWorkspaceContains(manager, plugin);\n                    }\n                } catch (e) {\n                    console.error(`Failed to start plugins for '${host}' host`, e);\n                }\n            })());\n        }\n        await Promise.all(thenable);\n        if (toDisconnect.disposed) {\n            return;\n        }\n        this.logMeasurement('Start', started, startPluginsMeasurement);\n    }\n\n    protected async obtainManager(host: string, hostContributions: PluginContributions[], toDisconnect: DisposableCollection): Promise<PluginManagerExt | undefined> {\n        let manager = this.managers.get(host);\n        if (!manager) {\n            const pluginId = getPluginId(hostContributions[0].plugin.metadata.model);\n            const rpc = this.initRpc(host, pluginId);\n            toDisconnect.push(rpc);\n\n            manager = rpc.getProxy(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT);\n            this.managers.set(host, manager);\n            toDisconnect.push(Disposable.create(() => this.managers.delete(host)));\n\n            const [extApi, globalState, workspaceState, webviewResourceRoot, webviewCspSource, defaultShell, jsonValidation] = await Promise.all([\n                this.server.getExtPluginAPI(),\n                this.pluginServer.getAllStorageValues(undefined),\n                this.pluginServer.getAllStorageValues({\n                    workspace: this.workspaceService.workspace,\n                    roots: this.workspaceService.tryGetRoots()\n                }),\n                this.webviewEnvironment.resourceRoot(),\n                this.webviewEnvironment.cspSource(),\n                this.terminalService.getDefaultShell(),\n                this.jsonSchemaStore.schemas\n            ]);\n            if (toDisconnect.disposed) {\n                return undefined;\n            }\n\n            await manager.$init({\n                preferences: getPreferences(this.preferenceProviderProvider, this.workspaceService.tryGetRoots()),\n                globalState,\n                workspaceState,\n                env: {\n                    queryParams: getQueryParameters(),\n                    language: navigator.language,\n                    shell: defaultShell,\n                    uiKind: environment.electron.is() ? UIKind.Desktop : UIKind.Web,\n                    appName: FrontendApplicationConfigProvider.get().applicationName\n                },\n                extApi,\n                webview: {\n                    webviewResourceRoot,\n                    webviewCspSource\n                },\n                jsonValidation\n            });\n            if (toDisconnect.disposed) {\n                return undefined;\n            }\n        }\n        return manager;\n    }\n\n    protected initRpc(host: PluginHost, pluginId: string): RPCProtocol {\n        const rpc = host === 'frontend' ? new PluginWorker().rpc : this.createServerRpc(pluginId, host);\n        setUpPluginApi(rpc, this.container);\n        this.mainPluginApiProviders.getContributions().forEach(p => p.initialize(rpc, this.container));\n        return rpc;\n    }\n\n    private createServerRpc(pluginID: string, hostID: string): RPCProtocol {\n        return new RPCProtocolImpl({\n            onMessage: this.watcher.onPostMessageEvent,\n            send: message => {\n                const wrappedMessage: any = {};\n                wrappedMessage['pluginID'] = pluginID;\n                wrappedMessage['content'] = message;\n                this.server.onMessage(JSON.stringify(wrappedMessage));\n            }\n        }, hostID);\n    }\n\n    private async updateStoragePath(): Promise<void> {\n        const path = await this.getStoragePath();\n        for (const manager of this.managers.values()) {\n            manager.$updateStoragePath(path);\n        }\n    }\n\n    protected async getStoragePath(): Promise<string | undefined> {\n        const roots = await this.workspaceService.roots;\n        return this.pluginPathsService.getHostStoragePath(this.workspaceService.workspace, roots);\n    }\n\n    protected async getHostGlobalStoragePath(): Promise<string> {\n        const configDirUri = await this.envServer.getConfigDirUri();\n        const globalStorageFolderUri = new URI(configDirUri).resolve('globalStorage').toString();\n\n        // Make sure that folder by the path exists\n        if (!await this.fileSystem.exists(globalStorageFolderUri)) {\n            await this.fileSystem.createFolder(globalStorageFolderUri);\n        }\n        const globalStorageFolderFsPath = await this.fileSystem.getFsPath(globalStorageFolderUri);\n        if (!globalStorageFolderFsPath) {\n            throw new Error(`Could not resolve the FS path for URI: ${globalStorageFolderUri}`);\n        }\n        return globalStorageFolderFsPath;\n    }\n\n    async activateByEvent(activationEvent: string): Promise<void> {\n        if (this.activationEvents.has(activationEvent)) {\n            return;\n        }\n        this.activationEvents.add(activationEvent);\n        const activation: Promise<void>[] = [];\n        for (const manager of this.managers.values()) {\n            activation.push(manager.$activateByEvent(activationEvent));\n        }\n        await Promise.all(activation);\n    }\n\n    async activateByViewContainer(viewContainerId: string): Promise<void> {\n        await Promise.all(this.viewRegistry.getContainerViews(viewContainerId).map(viewId => this.activateByView(viewId)));\n    }\n\n    async activateByView(viewId: string): Promise<void> {\n        await this.activateByEvent(`onView:${viewId}`);\n    }\n\n    async activateByLanguage(languageId: string): Promise<void> {\n        await this.activateByEvent(`onLanguage:${languageId}`);\n    }\n\n    async activateByCommand(commandId: string): Promise<void> {\n        await this.activateByEvent(`onCommand:${commandId}`);\n    }\n\n    protected ensureCommandHandlerRegistration(event: WillExecuteCommandEvent): void {\n        const activation = this.activateByCommand(event.commandId);\n        if (this.commands.getCommand(event.commandId) &&\n            (!this.contributionHandler.hasCommand(event.commandId) ||\n                this.contributionHandler.hasCommandHandler(event.commandId))) {\n            return;\n        }\n        const waitForCommandHandler = new Deferred<void>();\n        const listener = this.contributionHandler.onDidRegisterCommandHandler(id => {\n            if (id === event.commandId) {\n                listener.dispose();\n                waitForCommandHandler.resolve();\n            }\n        });\n        const p = Promise.all([\n            activation,\n            waitForCommandHandler.promise\n        ]);\n        p.then(() => listener.dispose(), () => listener.dispose());\n        event.waitUntil(p);\n    }\n\n    protected ensureTaskActivation(event: WaitUntilEvent): void {\n        event.waitUntil(this.activateByCommand('workbench.action.tasks.runTask'));\n    }\n\n    protected ensureDebugActivation(event: WaitUntilEvent, activationEvent?: DebugActivationEvent, debugType?: string): void {\n        event.waitUntil(this.activateByDebug(activationEvent, debugType));\n    }\n\n    async activateByDebug(activationEvent?: DebugActivationEvent, debugType?: string): Promise<void> {\n        const promises = [this.activateByEvent('onDebug')];\n        if (activationEvent) {\n            promises.push(this.activateByEvent(activationEvent));\n            if (debugType) {\n                promises.push(this.activateByEvent(activationEvent + ':' + debugType));\n            }\n        }\n        await Promise.all(promises);\n    }\n\n    protected async activateByWorkspaceContains(manager: PluginManagerExt, plugin: DeployedPlugin): Promise<void> {\n        const activationEvents = plugin.contributes && plugin.contributes.activationEvents;\n        if (!activationEvents) {\n            return;\n        }\n        const paths: string[] = [];\n        const includePatterns: string[] = [];\n        // should be aligned with https://github.com/microsoft/vscode/blob/da5fb7d5b865aa522abc7e82c10b746834b98639/src/vs/workbench/api/node/extHostExtensionService.ts#L460-L469\n        for (const activationEvent of activationEvents) {\n            if (/^workspaceContains:/.test(activationEvent)) {\n                const fileNameOrGlob = activationEvent.substr('workspaceContains:'.length);\n                if (fileNameOrGlob.indexOf('*') >= 0 || fileNameOrGlob.indexOf('?') >= 0) {\n                    includePatterns.push(fileNameOrGlob);\n                } else {\n                    paths.push(fileNameOrGlob);\n                }\n            }\n        }\n        const activatePlugin = () => manager.$activateByEvent(`onPlugin:${plugin.metadata.model.id}`);\n        const promises: Promise<boolean>[] = [];\n        if (paths.length) {\n            promises.push(this.workspaceService.containsSome(paths));\n        }\n        if (includePatterns.length) {\n            const tokenSource = new CancellationTokenSource();\n            const searchTimeout = setTimeout(() => {\n                tokenSource.cancel();\n                // activate eagerly if took to long to search\n                activatePlugin();\n            }, 7000);\n            promises.push((async () => {\n                try {\n                    const result = await this.fileSearchService.find('', {\n                        rootUris: this.workspaceService.tryGetRoots().map(r => r.uri),\n                        includePatterns,\n                        limit: 1\n                    }, tokenSource.token);\n                    return result.length > 0;\n                } catch (e) {\n                    if (!isCancelled(e)) {\n                        console.error(e);\n                    }\n                    return false;\n                } finally {\n                    clearTimeout(searchTimeout);\n                }\n            })());\n        }\n        if (promises.length && await Promise.all(promises).then(exists => exists.some(v => v))) {\n            await activatePlugin();\n        }\n    }\n\n    async activatePlugin(id: string): Promise<void> {\n        const activation = [];\n        for (const manager of this.managers.values()) {\n            activation.push(manager.$activatePlugin(id));\n        }\n        await Promise.all(activation);\n    }\n\n    protected createMeasurement(name: string): () => number {\n        const startMarker = `${name}-start`;\n        const endMarker = `${name}-end`;\n        performance.clearMeasures(name);\n        performance.clearMarks(startMarker);\n        performance.clearMarks(endMarker);\n\n        performance.mark(startMarker);\n        return () => {\n            performance.mark(endMarker);\n            performance.measure(name, startMarker, endMarker);\n\n            const entries = performance.getEntriesByName(name);\n            const duration = entries.length > 0 ? entries[0].duration : Number.NaN;\n\n            performance.clearMeasures(name);\n            performance.clearMarks(startMarker);\n            performance.clearMarks(endMarker);\n            return duration;\n        };\n    }\n\n    protected logMeasurement(prefix: string, count: number, measurement: () => number): void {\n        const duration = measurement();\n        if (duration === Number.NaN) {\n            // Measurement was prevented by native API, do not log NaN duration\n            return;\n        }\n\n        const pluginCount = `${count} plugin${count === 1 ? '' : 's'}`;\n        console.log(`[${this.clientId}] ${prefix} of ${pluginCount} took: ${duration.toFixed(1)} ms`);\n    }\n\n    protected readonly webviewsToRestore = new Set<WebviewWidget>();\n    protected readonly webviewRevivers = new Map<string, (webview: WebviewWidget) => Promise<void>>();\n\n    registerWebviewReviver(viewType: string, reviver: (webview: WebviewWidget) => Promise<void>): void {\n        if (this.webviewRevivers.has(viewType)) {\n            throw new Error(`Reviver for ${viewType} already registered`);\n        }\n        this.webviewRevivers.set(viewType, reviver);\n    }\n\n    unregisterWebviewReviver(viewType: string): void {\n        this.webviewRevivers.delete(viewType);\n    }\n\n    protected preserveWebviews(): void {\n        for (const webview of this.widgets.getWidgets(WebviewWidget.FACTORY_ID)) {\n            this.preserveWebview(webview as WebviewWidget);\n        }\n    }\n\n    protected preserveWebview(webview: WebviewWidget): void {\n        if (!this.webviewsToRestore.has(webview)) {\n            this.webviewsToRestore.add(webview);\n            webview.disposed.connect(() => this.webviewsToRestore.delete(webview));\n        }\n    }\n\n    protected restoreWebviews(): void {\n        for (const webview of this.webviewsToRestore) {\n            this.restoreWebview(webview);\n        }\n        this.webviewsToRestore.clear();\n    }\n\n    protected async restoreWebview(webview: WebviewWidget): Promise<void> {\n        await this.activateByEvent(`onWebviewPanel:${webview.viewType}`);\n        const restore = this.webviewRevivers.get(webview.viewType);\n        if (!restore) {\n            /* eslint-disable max-len */\n            webview.setHTML(this.getDeserializationFailedContents(`\n            <p>The extension providing '${webview.viewType}' view is not capable of restoring it.</p>\n            <p>Want to help fix this? Please inform the extension developer to register a <a href=\"https://code.visualstudio.com/api/extension-guides/webview#serialization\">reviver</a>.</p>\n            `));\n            /* eslint-enable max-len */\n            return;\n        }\n        try {\n            await restore(webview);\n        } catch (e) {\n            webview.setHTML(this.getDeserializationFailedContents(`\n            An error occurred while restoring '${webview.viewType}' view. Please check logs.\n            `));\n            console.error('Failed to restore the webview', e);\n        }\n    }\n\n    protected getDeserializationFailedContents(message: string): string {\n        return `<!DOCTYPE html>\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\">\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none';\">\n\t\t\t</head>\n\t\t\t<body>${message}</body>\n\t\t</html>`;\n    }\n\n}\n\nexport class PluginContributions extends DisposableCollection {\n    constructor(\n        readonly plugin: DeployedPlugin\n    ) {\n        super();\n    }\n    state: PluginContributions.State = PluginContributions.State.INITIALIZING;\n}\nexport namespace PluginContributions {\n    export enum State {\n        INITIALIZING = 0,\n        LOADING = 1,\n        LOADED = 2,\n        STARTING = 3,\n        STARTED = 4\n    }\n}\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"worker-ext.78aba179fed5b8eebbbf.js\");\n};","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Definition as CallHierarchyDefinition, Caller as CallHierarchyCaller } from '@theia/callhierarchy/lib/browser';\nimport * as model from '../../../common/plugin-api-rpc-model';\nimport * as rpc from '../../../common/plugin-api-rpc';\nimport * as callhierarchy from 'vscode-languageserver-types';\nimport { URI } from 'vscode-uri';\nimport { UriComponents } from '../../../common/uri-components';\nimport { Location } from 'vscode-languageserver-types';\n\nexport function toUriComponents(uri: string): UriComponents {\n    return URI.parse(uri);\n}\n\nexport function fromUriComponents(uri: UriComponents): string {\n    return URI.revive(uri).toString();\n}\n\nexport function fromLocation(location: Location): model.Location {\n    return <model.Location>{\n        uri: URI.parse(location.uri),\n        range: fromRange(location.range)\n    };\n}\n\nexport function toLocation(uri: UriComponents, range: model.Range): Location {\n    return <Location>{\n        uri: URI.revive(uri).toString(),\n        range: toRange(range)\n    };\n}\n\nexport function fromPosition(position: callhierarchy.Position): rpc.Position {\n    return <rpc.Position>{\n        lineNumber: position.line,\n        column: position.character\n    };\n}\n\nexport function fromRange(range: callhierarchy.Range): model.Range {\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line,\n        startColumn: start.character,\n        endLineNumber: end.line,\n        endColumn: end.character\n    };\n}\n\nexport function toRange(range: model.Range): callhierarchy.Range {\n    return callhierarchy.Range.create(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n}\n\nexport namespace SymbolKindConverter {\n    // tslint:disable-next-line:no-null-keyword\n    const fromMapping: { [kind: number]: model.SymbolKind } = Object.create(null);\n    fromMapping[callhierarchy.SymbolKind.File] = model.SymbolKind.File;\n    fromMapping[callhierarchy.SymbolKind.Module] = model.SymbolKind.Module;\n    fromMapping[callhierarchy.SymbolKind.Namespace] = model.SymbolKind.Namespace;\n    fromMapping[callhierarchy.SymbolKind.Package] = model.SymbolKind.Package;\n    fromMapping[callhierarchy.SymbolKind.Class] = model.SymbolKind.Class;\n    fromMapping[callhierarchy.SymbolKind.Method] = model.SymbolKind.Method;\n    fromMapping[callhierarchy.SymbolKind.Property] = model.SymbolKind.Property;\n    fromMapping[callhierarchy.SymbolKind.Field] = model.SymbolKind.Field;\n    fromMapping[callhierarchy.SymbolKind.Constructor] = model.SymbolKind.Constructor;\n    fromMapping[callhierarchy.SymbolKind.Enum] = model.SymbolKind.Enum;\n    fromMapping[callhierarchy.SymbolKind.Interface] = model.SymbolKind.Interface;\n    fromMapping[callhierarchy.SymbolKind.Function] = model.SymbolKind.Function;\n    fromMapping[callhierarchy.SymbolKind.Variable] = model.SymbolKind.Variable;\n    fromMapping[callhierarchy.SymbolKind.Constant] = model.SymbolKind.Constant;\n    fromMapping[callhierarchy.SymbolKind.String] = model.SymbolKind.String;\n    fromMapping[callhierarchy.SymbolKind.Number] = model.SymbolKind.Number;\n    fromMapping[callhierarchy.SymbolKind.Boolean] = model.SymbolKind.Boolean;\n    fromMapping[callhierarchy.SymbolKind.Array] = model.SymbolKind.Array;\n    fromMapping[callhierarchy.SymbolKind.Object] = model.SymbolKind.Object;\n    fromMapping[callhierarchy.SymbolKind.Key] = model.SymbolKind.Key;\n    fromMapping[callhierarchy.SymbolKind.Null] = model.SymbolKind.Null;\n    fromMapping[callhierarchy.SymbolKind.EnumMember] = model.SymbolKind.EnumMember;\n    fromMapping[callhierarchy.SymbolKind.Struct] = model.SymbolKind.Struct;\n    fromMapping[callhierarchy.SymbolKind.Event] = model.SymbolKind.Event;\n    fromMapping[callhierarchy.SymbolKind.Operator] = model.SymbolKind.Operator;\n    fromMapping[callhierarchy.SymbolKind.TypeParameter] = model.SymbolKind.TypeParameter;\n\n    export function fromSymbolKind(kind: callhierarchy.SymbolKind): model.SymbolKind {\n        return fromMapping[kind] || model.SymbolKind.Property;\n    }\n\n    // tslint:disable-next-line:no-null-keyword\n    const toMapping: { [kind: number]: callhierarchy.SymbolKind } = Object.create(null);\n    toMapping[model.SymbolKind.File] = callhierarchy.SymbolKind.File;\n    toMapping[model.SymbolKind.Module] = callhierarchy.SymbolKind.Module;\n    toMapping[model.SymbolKind.Namespace] = callhierarchy.SymbolKind.Namespace;\n    toMapping[model.SymbolKind.Package] = callhierarchy.SymbolKind.Package;\n    toMapping[model.SymbolKind.Class] = callhierarchy.SymbolKind.Class;\n    toMapping[model.SymbolKind.Method] = callhierarchy.SymbolKind.Method;\n    toMapping[model.SymbolKind.Property] = callhierarchy.SymbolKind.Property;\n    toMapping[model.SymbolKind.Field] = callhierarchy.SymbolKind.Field;\n    toMapping[model.SymbolKind.Constructor] = callhierarchy.SymbolKind.Constructor;\n    toMapping[model.SymbolKind.Enum] = callhierarchy.SymbolKind.Enum;\n    toMapping[model.SymbolKind.Interface] = callhierarchy.SymbolKind.Interface;\n    toMapping[model.SymbolKind.Function] = callhierarchy.SymbolKind.Function;\n    toMapping[model.SymbolKind.Variable] = callhierarchy.SymbolKind.Variable;\n    toMapping[model.SymbolKind.Constant] = callhierarchy.SymbolKind.Constant;\n    toMapping[model.SymbolKind.String] = callhierarchy.SymbolKind.String;\n    toMapping[model.SymbolKind.Number] = callhierarchy.SymbolKind.Number;\n    toMapping[model.SymbolKind.Boolean] = callhierarchy.SymbolKind.Boolean;\n    toMapping[model.SymbolKind.Array] = callhierarchy.SymbolKind.Array;\n    toMapping[model.SymbolKind.Object] = callhierarchy.SymbolKind.Object;\n    toMapping[model.SymbolKind.Key] = callhierarchy.SymbolKind.Key;\n    toMapping[model.SymbolKind.Null] = callhierarchy.SymbolKind.Null;\n    toMapping[model.SymbolKind.EnumMember] = callhierarchy.SymbolKind.EnumMember;\n    toMapping[model.SymbolKind.Struct] = callhierarchy.SymbolKind.Struct;\n    toMapping[model.SymbolKind.Event] = callhierarchy.SymbolKind.Event;\n    toMapping[model.SymbolKind.Operator] = callhierarchy.SymbolKind.Operator;\n    toMapping[model.SymbolKind.TypeParameter] = callhierarchy.SymbolKind.TypeParameter;\n\n    export function toSymbolKind(kind: model.SymbolKind): callhierarchy.SymbolKind {\n        return toMapping[kind] || model.SymbolKind.Property;\n    }\n}\n\nexport function toDefinition(definition: model.CallHierarchyDefinition): CallHierarchyDefinition;\nexport function toDefinition(definition: model.CallHierarchyDefinition | undefined): CallHierarchyDefinition | undefined;\nexport function toDefinition(definition: model.CallHierarchyDefinition | undefined): CallHierarchyDefinition | undefined {\n    if (!definition) {\n        return undefined;\n    }\n    return {\n        location: {\n            uri: fromUriComponents(definition.uri),\n            range: toRange(definition.range)\n        },\n        selectionRange: toRange(definition.selectionRange),\n        symbolName: definition.name,\n        symbolKind: SymbolKindConverter.toSymbolKind(definition.kind),\n        containerName: undefined\n    };\n}\n\nexport function fromDefinition(definition: CallHierarchyDefinition): model.CallHierarchyDefinition {\n    return {\n        uri: toUriComponents(definition.location.uri),\n        range: fromRange(definition.location.range),\n        selectionRange: fromRange(definition.selectionRange),\n        name: definition.symbolName,\n        kind: SymbolKindConverter.fromSymbolKind(definition.symbolKind)\n    };\n}\n\nexport function toCaller(caller: model.CallHierarchyReference): CallHierarchyCaller {\n    return {\n        callerDefinition: toDefinition(caller.callerDefinition),\n        references: caller.references.map(toRange)\n    };\n}\n\nexport function fromCaller(caller: CallHierarchyCaller): model.CallHierarchyReference {\n    return <model.CallHierarchyReference>{\n        callerDefinition: fromDefinition(caller.callerDefinition),\n        references: caller.references.map(fromRange)\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2019 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { ClipboardMain } from '../../common';\nimport { ClipboardService } from '@theia/core/lib/browser/clipboard-service';\n\nexport class ClipboardMainImpl implements ClipboardMain {\n\n    protected readonly clipboardService: ClipboardService;\n\n    constructor(container: interfaces.Container) {\n        this.clipboardService = container.get(ClipboardService);\n    }\n\n    async $readText(): Promise<string> {\n        const result = await this.clipboardService.readText();\n        return result;\n    }\n\n    async $writeText(value: string): Promise<void> {\n        await this.clipboardService.writeText(value);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { CommandRegistry } from '@theia/core/lib/common/command';\nimport * as theia from '@theia/plugin';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryMain, CommandRegistryExt, MAIN_RPC_CONTEXT } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { KeybindingRegistry } from '@theia/core/lib/browser';\nimport { PluginContributionHandler } from './plugin-contribution-handler';\n\nexport class CommandRegistryMainImpl implements CommandRegistryMain, Disposable {\n    private readonly proxy: CommandRegistryExt;\n    private readonly commands = new Map<string, Disposable>();\n    private readonly handlers = new Map<string, Disposable>();\n    private readonly delegate: CommandRegistry;\n    private readonly keyBinding: KeybindingRegistry;\n    private readonly contributions: PluginContributionHandler;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT);\n        this.delegate = container.get(CommandRegistry);\n        this.keyBinding = container.get(KeybindingRegistry);\n        this.contributions = container.get(PluginContributionHandler);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    $registerCommand(command: theia.CommandDescription): void {\n        const id = command.id;\n        this.commands.set(id, this.contributions.registerCommand(command));\n        this.toDispose.push(Disposable.create(() => this.$unregisterCommand(id)));\n    }\n    $unregisterCommand(id: string): void {\n        const command = this.commands.get(id);\n        if (command) {\n            command.dispose();\n            this.commands.delete(id);\n        }\n    }\n\n    $registerHandler(id: string): void {\n        this.handlers.set(id, this.contributions.registerCommandHandler(id, (...args) =>\n            this.proxy.$executeCommand(id, ...args)\n        ));\n        this.toDispose.push(Disposable.create(() => this.$unregisterHandler(id)));\n    }\n    $unregisterHandler(id: string): void {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            handler.dispose();\n            this.handlers.delete(id);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $executeCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        if (!this.delegate.getCommand(id)) {\n            throw new Error(`Command with id '${id}' is not registered.`);\n        }\n        try {\n            return await this.delegate.executeCommand(id, ...args);\n        } catch (e) {\n            // Command handler may be not active at the moment so the error must be caught. See https://github.com/eclipse-theia/theia/pull/6687#discussion_r354810079\n            if ('code' in e && e['code'] === 'NO_ACTIVE_HANDLER') {\n                return;\n            } else {\n                throw e;\n            }\n        }\n    }\n\n    $getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        try {\n            const keyBindings = this.keyBinding.getKeybindingsForCommand(commandId);\n            if (keyBindings) {\n                // transform inner type to CommandKeyBinding\n                return Promise.resolve(keyBindings.map(keyBinding => ({ id: commandId, value: keyBinding.keybinding })));\n            } else {\n                return Promise.resolve(undefined);\n            }\n\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n\n    $getCommands(): PromiseLike<string[]> {\n        return Promise.resolve(this.delegate.commandIds);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Command, CommandService } from '@theia/core/lib/common/command';\nimport { AbstractDialog } from '@theia/core/lib/browser';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\n\n@injectable()\nexport class OpenUriCommandHandler {\n    public static readonly COMMAND_METADATA: Command = {\n        id: 'theia.open'\n    };\n\n    private openNewTabDialog: OpenNewTabDialog;\n\n    constructor(\n        @inject(WindowService)\n        protected readonly windowService: WindowService,\n        @inject(CommandService)\n        protected readonly commandService: CommandService\n    ) {\n        this.openNewTabDialog = new OpenNewTabDialog(windowService);\n    }\n\n    public execute(resource: URI | string | undefined): void {\n        if (!resource) {\n            return;\n        }\n\n        const uriString = resource.toString();\n        if (uriString.startsWith('http://') || uriString.startsWith('https://')) {\n            this.openWebUri(uriString);\n        } else {\n            this.commandService.executeCommand('editor.action.openLink', uriString);\n        }\n    }\n\n    private openWebUri(uri: string): void {\n        try {\n            this.windowService.openNewWindow(uri);\n        } catch (err) {\n            // browser has blocked opening of a new tab\n            this.openNewTabDialog.showOpenNewTabDialog(uri);\n        }\n    }\n}\n\nclass OpenNewTabDialog extends AbstractDialog<string> {\n    protected readonly windowService: WindowService;\n    protected readonly openButton: HTMLButtonElement;\n    protected readonly messageNode: HTMLDivElement;\n    protected readonly linkNode: HTMLAnchorElement;\n    value: string;\n\n    constructor(windowService: WindowService) {\n        super({\n            title: 'Your browser prevented opening of a new tab'\n        });\n        this.windowService = windowService;\n\n        this.linkNode = document.createElement('a');\n        this.linkNode.target = '_blank';\n        this.linkNode.setAttribute('style', 'color: var(--theia-editorWidget-foreground);');\n        this.contentNode.appendChild(this.linkNode);\n\n        const messageNode = document.createElement('div');\n        messageNode.innerText = 'You are going to open: ';\n        messageNode.appendChild(this.linkNode);\n        this.contentNode.appendChild(messageNode);\n\n        this.appendCloseButton();\n        this.openButton = this.appendAcceptButton('Open');\n    }\n\n    showOpenNewTabDialog(uri: string): void {\n        this.value = uri;\n\n        this.linkNode.innerHTML = uri;\n        this.linkNode.href = uri;\n        this.openButton.onclick = () => {\n            this.windowService.openNewWindow(uri);\n        };\n\n        // show dialog window to user\n        this.open();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { MAIN_RPC_CONTEXT, ConnectionMain, ConnectionExt } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PluginConnection } from '../../common/connection';\nimport { PluginMessageReader } from '../../common/plugin-message-reader';\nimport { PluginMessageWriter } from '../../common/plugin-message-writer';\n\n/**\n * Implementation of connection system of the plugin API.\n * Creates holds the connections to the plugins. Allows to send a message to the plugin by getting already created connection via id.\n */\nexport class ConnectionMainImpl implements ConnectionMain, Disposable {\n\n    private readonly proxy: ConnectionExt;\n    private readonly connections = new Map<string, PluginConnection>();\n    private readonly toDispose = new DisposableCollection();\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.CONNECTION_EXT);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    /**\n     * Gets the connection between plugin by id and sends string message to it.\n     *\n     * @param id connection's id\n     * @param message incoming message\n     */\n    async $sendMessage(id: string, message: string): Promise<void> {\n        if (this.connections.has(id)) {\n            this.connections.get(id)!.reader.readMessage(message);\n        } else {\n            console.warn('It is not possible to read message. Connection missed.');\n        }\n    }\n\n    /**\n     * Instantiates a new connection by the given id.\n     * @param id the connection id\n     */\n    async $createConnection(id: string): Promise<void> {\n        await this.doEnsureConnection(id);\n    }\n\n    /**\n     * Deletes a connection.\n     * @param id the connection id\n     */\n    async $deleteConnection(id: string): Promise<void> {\n        this.connections.delete(id);\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async ensureConnection(id: string): Promise<PluginConnection> {\n        const connection = await this.doEnsureConnection(id);\n        await this.proxy.$createConnection(id);\n        return connection;\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async doEnsureConnection(id: string): Promise<PluginConnection> {\n        const connection = this.connections.get(id) || await this.doCreateConnection(id);\n        this.connections.set(id, connection);\n        return connection;\n    }\n\n    protected async doCreateConnection(id: string): Promise<PluginConnection> {\n        const reader = new PluginMessageReader();\n        const writer = new PluginMessageWriter(id, this.proxy);\n        const connection = new PluginConnection(\n            reader,\n            writer,\n            () => {\n                this.connections.delete(id);\n                if (!toClose.disposed) {\n                    this.proxy.$deleteConnection(id);\n                }\n            });\n        const toClose = new DisposableCollection(Disposable.create(() => reader.fireClose()));\n        this.toDispose.push(toClose);\n        return connection;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { interfaces } from 'inversify';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport {\n    DebugMain,\n    DebugExt,\n    MAIN_RPC_CONTEXT\n} from '../../../common/plugin-api-rpc';\nimport { DebugSessionManager } from '@theia/debug/lib/browser/debug-session-manager';\nimport { Breakpoint, WorkspaceFolder } from '../../../common/plugin-api-rpc-model';\nimport { LabelProvider } from '@theia/core/lib/browser';\nimport { EditorManager } from '@theia/editor/lib/browser';\nimport { BreakpointManager, BreakpointsChangeEvent } from '@theia/debug/lib/browser/breakpoint/breakpoint-manager';\nimport { DebugSourceBreakpoint } from '@theia/debug/lib/browser/model/debug-source-breakpoint';\nimport { URI as Uri } from 'vscode-uri';\nimport { DebugConsoleSession } from '@theia/debug/lib/browser/console/debug-console-session';\nimport { SourceBreakpoint, FunctionBreakpoint } from '@theia/debug/lib/browser/breakpoint/breakpoint-marker';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\nimport { ConnectionMainImpl } from '../connection-main';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { DebugConfigurationManager } from '@theia/debug/lib/browser/debug-configuration-manager';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { MessageClient } from '@theia/core/lib/common/message-service-protocol';\nimport { OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { DebugPreferences } from '@theia/debug/lib/browser/debug-preferences';\nimport { PluginDebugAdapterContribution } from './plugin-debug-adapter-contribution';\nimport { PluginDebugSessionContributionRegistrator, PluginDebugSessionContributionRegistry } from './plugin-debug-session-contribution-registry';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { PluginDebugSessionFactory } from './plugin-debug-session-factory';\nimport { PluginWebSocketChannel } from '../../../common/connection';\nimport { PluginDebugAdapterContributionRegistrator, PluginDebugService } from './plugin-debug-service';\nimport { FileSystem } from '@theia/filesystem/lib/common';\nimport { HostedPluginSupport } from '../../../hosted/browser/hosted-plugin';\nimport { DebugFunctionBreakpoint } from '@theia/debug/lib/browser/model/debug-function-breakpoint';\n\nexport class DebugMainImpl implements DebugMain, Disposable {\n    private readonly debugExt: DebugExt;\n\n    private readonly sessionManager: DebugSessionManager;\n    private readonly labelProvider: LabelProvider;\n    private readonly editorManager: EditorManager;\n    private readonly breakpointsManager: BreakpointManager;\n    private readonly debugConsoleSession: DebugConsoleSession;\n    private readonly configurationManager: DebugConfigurationManager;\n    private readonly terminalService: TerminalService;\n    private readonly messages: MessageClient;\n    private readonly outputChannelManager: OutputChannelManager;\n    private readonly debugPreferences: DebugPreferences;\n    private readonly sessionContributionRegistrator: PluginDebugSessionContributionRegistrator;\n    private readonly adapterContributionRegistrator: PluginDebugAdapterContributionRegistrator;\n    private readonly fileSystem: FileSystem;\n    private readonly pluginService: HostedPluginSupport;\n\n    private readonly debuggerContributions = new Map<string, DisposableCollection>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, readonly connectionMain: ConnectionMainImpl, container: interfaces.Container) {\n        this.debugExt = rpc.getProxy(MAIN_RPC_CONTEXT.DEBUG_EXT);\n        this.sessionManager = container.get(DebugSessionManager);\n        this.labelProvider = container.get(LabelProvider);\n        this.editorManager = container.get(EditorManager);\n        this.breakpointsManager = container.get(BreakpointManager);\n        this.debugConsoleSession = container.get(DebugConsoleSession);\n        this.configurationManager = container.get(DebugConfigurationManager);\n        this.terminalService = container.get(TerminalService);\n        this.messages = container.get(MessageClient);\n        this.outputChannelManager = container.get(OutputChannelManager);\n        this.debugPreferences = container.get(DebugPreferences);\n        this.adapterContributionRegistrator = container.get(PluginDebugService);\n        this.sessionContributionRegistrator = container.get(PluginDebugSessionContributionRegistry);\n        this.fileSystem = container.get(FileSystem);\n        this.pluginService = container.get(HostedPluginSupport);\n\n        const fireDidChangeBreakpoints = ({ added, removed, changed }: BreakpointsChangeEvent<SourceBreakpoint | FunctionBreakpoint>) => {\n            this.debugExt.$breakpointsDidChange(\n                this.toTheiaPluginApiBreakpoints(added),\n                removed.map(b => b.id),\n                this.toTheiaPluginApiBreakpoints(changed)\n            );\n        };\n        this.debugExt.$breakpointsDidChange(this.toTheiaPluginApiBreakpoints(this.breakpointsManager.getBreakpoints()), [], []);\n        this.debugExt.$breakpointsDidChange(this.toTheiaPluginApiBreakpoints(this.breakpointsManager.getFunctionBreakpoints()), [], []);\n\n        this.toDispose.pushAll([\n            this.breakpointsManager.onDidChangeBreakpoints(fireDidChangeBreakpoints),\n            this.breakpointsManager.onDidChangeFunctionBreakpoints(fireDidChangeBreakpoints),\n            this.sessionManager.onDidCreateDebugSession(debugSession => this.debugExt.$sessionDidCreate(debugSession.id)),\n            this.sessionManager.onDidDestroyDebugSession(debugSession => this.debugExt.$sessionDidDestroy(debugSession.id)),\n            this.sessionManager.onDidChangeActiveDebugSession(event => this.debugExt.$sessionDidChange(event.current && event.current.id)),\n            this.sessionManager.onDidReceiveDebugSessionCustomEvent(event => this.debugExt.$onSessionCustomEvent(event.session.id, event.event, event.body))\n        ]);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $appendToDebugConsole(value: string): Promise<void> {\n        this.debugConsoleSession.append(value);\n    }\n\n    async $appendLineToDebugConsole(value: string): Promise<void> {\n        this.debugConsoleSession.appendLine(value);\n    }\n\n    async $registerDebuggerContribution(description: DebuggerDescription): Promise<void> {\n        const debugType = description.type;\n        const terminalOptionsExt = await this.debugExt.$getTerminalCreationOptions(debugType);\n        if (this.toDispose.disposed) {\n            return;\n        }\n\n        const debugSessionFactory = new PluginDebugSessionFactory(\n            this.terminalService,\n            this.editorManager,\n            this.breakpointsManager,\n            this.labelProvider,\n            this.messages,\n            this.outputChannelManager,\n            this.debugPreferences,\n            async (sessionId: string) => {\n                const connection = await this.connectionMain.ensureConnection(sessionId);\n                return new PluginWebSocketChannel(connection);\n            },\n            this.fileSystem,\n            terminalOptionsExt\n        );\n\n        const toDispose = new DisposableCollection(\n            Disposable.create(() => this.debuggerContributions.delete(debugType))\n        );\n        this.debuggerContributions.set(debugType, toDispose);\n        toDispose.pushAll([\n            this.adapterContributionRegistrator.registerDebugAdapterContribution(\n                new PluginDebugAdapterContribution(description, this.debugExt, this.pluginService)\n            ),\n            this.sessionContributionRegistrator.registerDebugSessionContribution({\n                debugType: description.type,\n                debugSessionFactory: () => debugSessionFactory\n            })\n        ]);\n        this.toDispose.push(Disposable.create(() => this.$unregisterDebuggerConfiguration(debugType)));\n    }\n\n    async $unregisterDebuggerConfiguration(debugType: string): Promise<void> {\n        const disposable = this.debuggerContributions.get(debugType);\n        if (disposable) {\n            disposable.dispose();\n        }\n    }\n\n    async $addBreakpoints(breakpoints: Breakpoint[]): Promise<void> {\n        const newBreakpoints = new Map<string, Breakpoint>();\n        breakpoints.forEach(b => newBreakpoints.set(b.id, b));\n        this.breakpointsManager.findMarkers({\n            dataFilter: data => {\n                // install only new breakpoints\n                if (newBreakpoints.has(data.id)) {\n                    newBreakpoints.delete(data.id);\n                }\n                return false;\n            }\n        });\n        let addedFunctionBreakpoints = false;\n        const functionBreakpoints = this.breakpointsManager.getFunctionBreakpoints();\n        for (const breakpoint of functionBreakpoints) {\n            // install only new breakpoints\n            if (newBreakpoints.has(breakpoint.id)) {\n                newBreakpoints.delete(breakpoint.id);\n            }\n        }\n        for (const breakpoint of newBreakpoints.values()) {\n            if (breakpoint.location) {\n                const location = breakpoint.location;\n                const column = breakpoint.location.range.startColumn;\n                this.breakpointsManager.addBreakpoint({\n                    id: breakpoint.id,\n                    uri: Uri.revive(location.uri).toString(),\n                    enabled: breakpoint.enabled,\n                    raw: {\n                        line: breakpoint.location.range.startLineNumber + 1,\n                        column: column > 0 ? column + 1 : undefined,\n                        condition: breakpoint.condition,\n                        hitCondition: breakpoint.hitCondition,\n                        logMessage: breakpoint.logMessage\n                    }\n                });\n            } else if (breakpoint.functionName) {\n                addedFunctionBreakpoints = true;\n                functionBreakpoints.push({\n                    id: breakpoint.id,\n                    enabled: breakpoint.enabled,\n                    raw: {\n                        name: breakpoint.functionName\n                    }\n                });\n            }\n        }\n        if (addedFunctionBreakpoints) {\n            this.breakpointsManager.setFunctionBreakpoints(functionBreakpoints);\n        }\n    }\n\n    async $removeBreakpoints(breakpoints: string[]): Promise<void> {\n        const { labelProvider, breakpointsManager, editorManager } = this;\n        const session = this.sessionManager.currentSession;\n\n        const ids = new Set<string>(breakpoints);\n        for (const origin of this.breakpointsManager.findMarkers({ dataFilter: data => ids.has(data.id) })) {\n            const breakpoint = new DebugSourceBreakpoint(origin.data, { labelProvider, breakpoints: breakpointsManager, editorManager, session });\n            breakpoint.remove();\n        }\n        for (const origin of this.breakpointsManager.getFunctionBreakpoints()) {\n            if (ids.has(origin.id)) {\n                const breakpoint = new DebugFunctionBreakpoint(origin, { labelProvider, breakpoints: breakpointsManager, editorManager, session });\n                breakpoint.remove();\n            }\n        }\n    }\n\n    async $customRequest(sessionId: string, command: string, args?: any): Promise<DebugProtocol.Response> {\n        const session = this.sessionManager.getSession(sessionId);\n        if (session) {\n            return session.sendCustomRequest(command, args);\n        }\n\n        throw new Error(`Debug session '${sessionId}' not found`);\n    }\n\n    async $startDebugging(folder: WorkspaceFolder | undefined, nameOrConfiguration: string | DebugConfiguration): Promise<boolean> {\n        let configuration: DebugConfiguration | undefined;\n\n        if (typeof nameOrConfiguration === 'string') {\n            for (const options of this.configurationManager.all) {\n                if (options.configuration.name === nameOrConfiguration) {\n                    configuration = options.configuration;\n                }\n            }\n        } else {\n            configuration = nameOrConfiguration;\n        }\n\n        if (!configuration) {\n            console.error(`There is no debug configuration for ${nameOrConfiguration}`);\n            return false;\n        }\n\n        const session = await this.sessionManager.start({\n            configuration,\n            workspaceFolderUri: folder && Uri.revive(folder.uri).toString()\n        });\n\n        return !!session;\n    }\n\n    private toTheiaPluginApiBreakpoints(breakpoints: (SourceBreakpoint | FunctionBreakpoint)[]): Breakpoint[] {\n        return breakpoints.map(b => this.toTheiaPluginApiBreakpoint(b));\n    }\n\n    private toTheiaPluginApiBreakpoint(breakpoint: SourceBreakpoint | FunctionBreakpoint): Breakpoint {\n        if ('uri' in breakpoint) {\n            const raw = breakpoint.raw;\n            return {\n                id: breakpoint.id,\n                enabled: breakpoint.enabled,\n                condition: breakpoint.raw.condition,\n                hitCondition: breakpoint.raw.hitCondition,\n                logMessage: raw.logMessage,\n                location: {\n                    uri: Uri.parse(breakpoint.uri),\n                    range: {\n                        startLineNumber: raw.line - 1,\n                        startColumn: (raw.column || 1) - 1,\n                        endLineNumber: raw.line - 1,\n                        endColumn: (raw.column || 1) - 1\n                    }\n                }\n            };\n        }\n        return {\n            id: breakpoint.id,\n            enabled: breakpoint.enabled,\n            functionName: breakpoint.raw.name\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugExt, } from '../../../common/plugin-api-rpc';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { HostedPluginSupport } from '../../../hosted/browser/hosted-plugin';\n\n/**\n * Plugin [DebugAdapterContribution](#DebugAdapterContribution).\n */\nexport class PluginDebugAdapterContribution {\n    constructor(\n        protected readonly description: DebuggerDescription,\n        protected readonly debugExt: DebugExt,\n        protected readonly pluginService: HostedPluginSupport) { }\n\n    get type(): string {\n        return this.description.type;\n    }\n\n    get label(): MaybePromise<string | undefined> {\n        return this.description.label;\n    }\n\n    async provideDebugConfigurations(workspaceFolderUri: string | undefined): Promise<DebugConfiguration[]> {\n        return this.debugExt.$provideDebugConfigurations(this.type, workspaceFolderUri);\n    }\n\n    async resolveDebugConfiguration(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration | undefined> {\n        return this.debugExt.$resolveDebugConfigurations(config, workspaceFolderUri);\n    }\n\n    async resolveDebugConfigurationWithSubstitutedVariables(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration | undefined> {\n        return this.debugExt.$resolveDebugConfigurationWithSubstitutedVariables(config, workspaceFolderUri);\n    }\n\n    async createDebugSession(config: DebugConfiguration): Promise<string> {\n        await this.pluginService.activateByDebug('onDebugAdapterProtocolTracker', config.type);\n        return this.debugExt.$createDebugSession(config);\n    }\n\n    async terminateDebugSession(sessionId: string): Promise<void> {\n        this.debugExt.$terminateDebugSession(sessionId);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugService, DebuggerDescription, DebugPath } from '@theia/debug/lib/common/debug-service';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\nimport { IJSONSchema, IJSONSchemaSnippet } from '@theia/core/lib/common/json-schema';\nimport { PluginDebugAdapterContribution } from './plugin-debug-adapter-contribution';\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { WebSocketConnectionProvider } from '@theia/core/lib/browser/messaging/ws-connection-provider';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { DebuggerContribution } from '../../../common/plugin-protocol';\n\n/**\n * Debug adapter contribution registrator.\n */\nexport interface PluginDebugAdapterContributionRegistrator {\n    /**\n     * Registers [PluginDebugAdapterContribution](#PluginDebugAdapterContribution).\n     * @param contrib contribution\n     */\n    registerDebugAdapterContribution(contrib: PluginDebugAdapterContribution): Disposable;\n\n    /**\n     * Unregisters [PluginDebugAdapterContribution](#PluginDebugAdapterContribution).\n     * @param debugType the debug type\n     */\n    unregisterDebugAdapterContribution(debugType: string): void;\n}\n\n/**\n * Debug service to work with plugin and extension contributions.\n */\n@injectable()\nexport class PluginDebugService implements DebugService, PluginDebugAdapterContributionRegistrator {\n\n    protected readonly debuggers: DebuggerContribution[] = [];\n    protected readonly contributors = new Map<string, PluginDebugAdapterContribution>();\n    protected readonly toDispose = new DisposableCollection();\n\n    // maps session and contribution\n    protected readonly sessionId2contrib = new Map<string, PluginDebugAdapterContribution>();\n    protected delegated: DebugService;\n\n    @inject(WebSocketConnectionProvider)\n    protected readonly connectionProvider: WebSocketConnectionProvider;\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    @postConstruct()\n    protected init(): void {\n        this.delegated = this.connectionProvider.createProxy<DebugService>(DebugPath);\n        this.toDispose.pushAll([\n            Disposable.create(() => this.delegated.dispose()),\n            Disposable.create(() => {\n                for (const sessionId of this.sessionId2contrib.keys()) {\n                    const contrib = this.sessionId2contrib.get(sessionId)!;\n                    contrib.terminateDebugSession(sessionId);\n                }\n                this.sessionId2contrib.clear();\n            })]);\n    }\n\n    registerDebugAdapterContribution(contrib: PluginDebugAdapterContribution): Disposable {\n        const { type } = contrib;\n\n        if (this.contributors.has(type)) {\n            console.warn(`Debugger with type '${type}' already registered.`);\n            return Disposable.NULL;\n        }\n\n        this.contributors.set(type, contrib);\n        return Disposable.create(() => this.unregisterDebugAdapterContribution(type));\n    }\n\n    unregisterDebugAdapterContribution(debugType: string): void {\n        this.contributors.delete(debugType);\n    }\n\n    async debugTypes(): Promise<string[]> {\n        const debugTypes = new Set(await this.delegated.debugTypes());\n        for (const contribution of this.debuggers) {\n            debugTypes.add(contribution.type);\n        }\n        for (const debugType of this.contributors.keys()) {\n            debugTypes.add(debugType);\n        }\n        return [...debugTypes];\n    }\n\n    async provideDebugConfigurations(debugType: string, workspaceFolderUri: string | undefined): Promise<DebugConfiguration[]> {\n        const contributor = this.contributors.get(debugType);\n        if (contributor) {\n            return contributor.provideDebugConfigurations && contributor.provideDebugConfigurations(workspaceFolderUri) || [];\n        } else {\n            return this.delegated.provideDebugConfigurations(debugType, workspaceFolderUri);\n        }\n    }\n\n    async resolveDebugConfiguration(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration> {\n        let resolved = config;\n\n        // we should iterate over all to handle configuration providers for `*`\n        for (const contributor of this.contributors.values()) {\n            if (contributor) {\n                try {\n                    const next = await contributor.resolveDebugConfiguration(resolved, workspaceFolderUri);\n                    if (next) {\n                        resolved = next;\n                    } else {\n                        return resolved;\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            }\n        }\n\n        return this.delegated.resolveDebugConfiguration(resolved, workspaceFolderUri);\n    }\n\n    async resolveDebugConfigurationWithSubstitutedVariables(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration> {\n        let resolved = config;\n\n        // we should iterate over all to handle configuration providers for `*`\n        for (const contributor of this.contributors.values()) {\n            if (contributor) {\n                try {\n                    const next = await contributor.resolveDebugConfigurationWithSubstitutedVariables(resolved, workspaceFolderUri);\n                    if (next) {\n                        resolved = next;\n                    } else {\n                        return resolved;\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            }\n        }\n\n        return this.delegated.resolveDebugConfigurationWithSubstitutedVariables(resolved, workspaceFolderUri);\n    }\n\n    registerDebugger(contribution: DebuggerContribution): Disposable {\n        this.debuggers.push(contribution);\n        return Disposable.create(() => {\n            const index = this.debuggers.indexOf(contribution);\n            if (index !== -1) {\n                this.debuggers.splice(index, 1);\n            }\n        });\n    }\n\n    async getDebuggersForLanguage(language: string): Promise<DebuggerDescription[]> {\n        const debuggers = await this.delegated.getDebuggersForLanguage(language);\n\n        for (const contributor of this.debuggers) {\n            const languages = contributor.languages;\n            if (languages && languages.indexOf(language) !== -1) {\n                const { label, type } = contributor;\n                debuggers.push({ type, label: label || type });\n            }\n        }\n\n        return debuggers;\n    }\n\n    async getSchemaAttributes(debugType: string): Promise<IJSONSchema[]> {\n        let schemas = await this.delegated.getSchemaAttributes(debugType);\n        for (const contribution of this.debuggers) {\n            if (contribution.configurationAttributes &&\n                (contribution.type === debugType || contribution.type === '*' || debugType === '*')) {\n                schemas = schemas.concat(contribution.configurationAttributes);\n            }\n        }\n        return schemas;\n    }\n\n    async getConfigurationSnippets(): Promise<IJSONSchemaSnippet[]> {\n        let snippets = await this.delegated.getConfigurationSnippets();\n\n        for (const contribution of this.debuggers) {\n            if (contribution.configurationSnippets) {\n                snippets = snippets.concat(contribution.configurationSnippets);\n            }\n        }\n\n        return snippets;\n    }\n\n    async createDebugSession(config: DebugConfiguration): Promise<string> {\n        const contributor = this.contributors.get(config.type);\n        if (contributor) {\n            const sessionId = await contributor.createDebugSession(config);\n            this.sessionId2contrib.set(sessionId, contributor);\n            return sessionId;\n        } else {\n            return this.delegated.createDebugSession(config);\n        }\n    }\n\n    async terminateDebugSession(sessionId: string): Promise<void> {\n        const contributor = this.sessionId2contrib.get(sessionId);\n        if (contributor) {\n            this.sessionId2contrib.delete(sessionId);\n            return contributor.terminateDebugSession(sessionId);\n        } else {\n            return this.delegated.terminateDebugSession(sessionId);\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugSessionContributionRegistry, DebugSessionContribution } from '@theia/debug/lib/browser/debug-session-contribution';\nimport { injectable, inject, named, postConstruct } from 'inversify';\nimport { ContributionProvider } from '@theia/core/lib/common/contribution-provider';\nimport { Disposable } from '@theia/core/lib/common/disposable';\n\n/**\n * Debug session contribution registrator.\n */\nexport interface PluginDebugSessionContributionRegistrator {\n    /**\n     * Registers [DebugSessionContribution](#DebugSessionContribution).\n     * @param contrib contribution\n     */\n    registerDebugSessionContribution(contrib: DebugSessionContribution): Disposable;\n\n    /**\n     * Unregisters [DebugSessionContribution](#DebugSessionContribution).\n     * @param debugType the debug type\n     */\n    unregisterDebugSessionContribution(debugType: string): void;\n}\n\n/**\n * Plugin debug session contribution registry implementation with functionality\n * to register / unregister plugin contributions.\n */\n@injectable()\nexport class PluginDebugSessionContributionRegistry implements DebugSessionContributionRegistry, PluginDebugSessionContributionRegistrator {\n    protected readonly contribs = new Map<string, DebugSessionContribution>();\n\n    @inject(ContributionProvider) @named(DebugSessionContribution)\n    protected readonly contributions: ContributionProvider<DebugSessionContribution>;\n\n    @postConstruct()\n    protected init(): void {\n        for (const contrib of this.contributions.getContributions()) {\n            this.contribs.set(contrib.debugType, contrib);\n        }\n    }\n\n    get(debugType: string): DebugSessionContribution | undefined {\n        return this.contribs.get(debugType);\n    }\n\n    registerDebugSessionContribution(contrib: DebugSessionContribution): Disposable {\n        const { debugType } = contrib;\n\n        if (this.contribs.has(debugType)) {\n            console.warn(`Debug session contribution already registered for ${debugType}`);\n            return Disposable.NULL;\n        }\n\n        this.contribs.set(debugType, contrib);\n        return Disposable.create(() => this.unregisterDebugSessionContribution(debugType));\n    }\n\n    unregisterDebugSessionContribution(debugType: string): void {\n        this.contribs.delete(debugType);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DefaultDebugSessionFactory, } from '@theia/debug/lib/browser/debug-session-contribution';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { EditorManager } from '@theia/editor/lib/browser/editor-manager';\nimport { BreakpointManager } from '@theia/debug/lib/browser/breakpoint/breakpoint-manager';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { MessageClient } from '@theia/core/lib/common/message-service-protocol';\nimport { OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { DebugPreferences } from '@theia/debug/lib/browser/debug-preferences';\nimport { DebugSessionOptions } from '@theia/debug/lib/browser/debug-session-options';\nimport { DebugSession } from '@theia/debug/lib/browser/debug-session';\nimport { DebugSessionConnection } from '@theia/debug/lib/browser/debug-session-connection';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\nimport { FileSystem } from '@theia/filesystem/lib/common';\nimport { TerminalWidgetOptions, TerminalWidget } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { TerminalOptionsExt } from '../../../common/plugin-api-rpc';\n\nexport class PluginDebugSession extends DebugSession {\n    constructor(\n        readonly id: string,\n        readonly options: DebugSessionOptions,\n        protected readonly connection: DebugSessionConnection,\n        protected readonly terminalServer: TerminalService,\n        protected readonly editorManager: EditorManager,\n        protected readonly breakpoints: BreakpointManager,\n        protected readonly labelProvider: LabelProvider,\n        protected readonly messages: MessageClient,\n        protected readonly fileSystem: FileSystem,\n        protected readonly terminalOptionsExt: TerminalOptionsExt | undefined) {\n        super(id, options, connection, terminalServer, editorManager, breakpoints, labelProvider, messages, fileSystem);\n    }\n\n    protected async doCreateTerminal(terminalWidgetOptions: TerminalWidgetOptions): Promise<TerminalWidget> {\n        terminalWidgetOptions = Object.assign({}, terminalWidgetOptions, this.terminalOptionsExt);\n        return super.doCreateTerminal(terminalWidgetOptions);\n    }\n}\n\n/**\n * Session factory for a client debug session that communicates with debug adapter contributed as plugin.\n * The main difference is to use a connection factory that creates [IWebSocket](#IWebSocket) over Rpc channel.\n */\nexport class PluginDebugSessionFactory extends DefaultDebugSessionFactory {\n    constructor(\n        protected readonly terminalService: TerminalService,\n        protected readonly editorManager: EditorManager,\n        protected readonly breakpoints: BreakpointManager,\n        protected readonly labelProvider: LabelProvider,\n        protected readonly messages: MessageClient,\n        protected readonly outputChannelManager: OutputChannelManager,\n        protected readonly debugPreferences: DebugPreferences,\n        protected readonly connectionFactory: (sessionId: string) => Promise<IWebSocket>,\n        protected readonly fileSystem: FileSystem,\n        protected readonly terminalOptionsExt: TerminalOptionsExt | undefined\n    ) {\n        super();\n    }\n\n    get(sessionId: string, options: DebugSessionOptions): DebugSession {\n        const connection = new DebugSessionConnection(\n            sessionId,\n            this.connectionFactory,\n            this.getTraceOutputChannel());\n\n        return new PluginDebugSession(\n            sessionId,\n            options,\n            connection,\n            this.terminalService,\n            this.editorManager,\n            this.breakpoints,\n            this.labelProvider,\n            this.messages,\n            this.fileSystem,\n            this.terminalOptionsExt);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    DecorationData,\n    DecorationProvider,\n    DecorationsExt,\n    DecorationsMain,\n    MAIN_RPC_CONTEXT\n} from '../../../common/plugin-api-rpc';\n\nimport { interfaces } from 'inversify';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Tree, TreeDecoration } from '@theia/core/lib/browser';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { ScmDecorationsService } from '@theia/scm/lib/browser/decorations/scm-decorations-service';\n\nexport class DecorationsMainImpl implements DecorationsMain, Disposable {\n\n    private readonly proxy: DecorationsExt;\n    // TODO: why it is SCM specific? VS Code apis about any decorations for the explorer\n    private readonly scmDecorationsService: ScmDecorationsService;\n\n    protected readonly emitter = new Emitter<(tree: Tree) => Map<string, TreeDecoration.Data>>();\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.DECORATIONS_EXT);\n        this.scmDecorationsService = container.get(ScmDecorationsService);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    // TODO: why it is never used?\n    protected readonly providers = new Map<number, DecorationProvider>();\n\n    async $dispose(id: number): Promise<void> {\n        // TODO: What about removing decorations when a provider is gone?\n        this.providers.delete(id);\n    }\n\n    async $registerDecorationProvider(id: number, provider: DecorationProvider): Promise<number> {\n        this.providers.set(id, provider);\n        this.toDispose.push(Disposable.create(() => this.$dispose(id)));\n        return id;\n    }\n\n    async $fireDidChangeDecorations(id: number, arg: string | string[] | undefined): Promise<void> {\n        if (Array.isArray(arg)) {\n            const result: Map<string, DecorationData> = new Map();\n            for (const uri of arg) {\n                const data = await this.proxy.$provideDecoration(id, uri);\n                if (data) {\n                    result.set(uri, data);\n                }\n            }\n            this.scmDecorationsService.fireNavigatorDecorationsChanged(result);\n        } else if (arg) {\n            // TODO: why to make a remote call instead of sending decoration to `$fireDidChangeDecorations` in first place?\n            this.proxy.$provideDecoration(id, arg);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { OpenDialogOptionsMain, SaveDialogOptionsMain, DialogsMain, UploadDialogOptionsMain } from '../../common/plugin-api-rpc';\nimport { DirNode, OpenFileDialogProps, SaveFileDialogProps, OpenFileDialogFactory, SaveFileDialogFactory, SaveFileDialog } from '@theia/filesystem/lib/browser';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { FileSystem, FileStat } from '@theia/filesystem/lib/common';\nimport { UriSelection } from '@theia/core/lib/common/selection';\nimport URI from '@theia/core/lib/common/uri';\nimport { FileUploadService } from '@theia/filesystem/lib/browser/file-upload-service';\n\nexport class DialogsMainImpl implements DialogsMain {\n\n    private workspaceService: WorkspaceService;\n    private fileSystem: FileSystem;\n\n    private openFileDialogFactory: OpenFileDialogFactory;\n    private saveFileDialogFactory: SaveFileDialogFactory;\n    private uploadService: FileUploadService;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.workspaceService = container.get(WorkspaceService);\n        this.fileSystem = container.get(FileSystem);\n\n        this.openFileDialogFactory = container.get(OpenFileDialogFactory);\n        this.saveFileDialogFactory = container.get(SaveFileDialogFactory);\n        this.uploadService = container.get(FileUploadService);\n    }\n\n    protected async getRootUri(defaultUri: string | undefined): Promise<FileStat | undefined> {\n        let rootStat;\n\n        // Try to use default URI as root\n        if (defaultUri) {\n            rootStat = await this.fileSystem.getFileStat(defaultUri);\n        }\n\n        // Try to use as root the parent folder of existing file URI/non existing URI\n        if (rootStat && !rootStat.isDirectory || !rootStat) {\n            rootStat = await this.fileSystem.getFileStat(new URI(defaultUri).parent.toString());\n        }\n\n        // Try to use workspace service root if there is no preconfigured URI\n        if (!rootStat) {\n            rootStat = (await this.workspaceService.roots)[0];\n        }\n\n        // Try to use current user home if root folder is still not taken\n        if (!rootStat) {\n            rootStat = await this.fileSystem.getCurrentUserHome();\n        }\n\n        return rootStat;\n    }\n\n    async $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined> {\n        const rootStat = await this.getRootUri(options.defaultUri ? options.defaultUri : undefined);\n\n        // Fail if root not fount\n        if (!rootStat) {\n            throw new Error('Unable to find the rootStat');\n        }\n\n        // Take the info for root node\n        const rootNode = DirNode.createRoot(rootStat);\n\n        try {\n            // Determine proper title for the dialog\n            const canSelectFiles = typeof options.canSelectFiles === 'boolean' ? options.canSelectFiles : true;\n            const canSelectFolders = typeof options.canSelectFolders === 'boolean' ? options.canSelectFolders : true;\n\n            let title;\n            if (canSelectFiles && canSelectFolders) {\n                title = 'Open';\n            } else {\n                if (canSelectFiles) {\n                    title = 'Open File';\n                } else {\n                    title = 'Open Folder';\n                }\n\n                if (options.canSelectMany) {\n                    title += '(s)';\n                }\n            }\n\n            // Create open file dialog props\n            const dialogProps = {\n                title: title,\n                openLabel: options.openLabel,\n                canSelectFiles: options.canSelectFiles,\n                canSelectFolders: options.canSelectFolders,\n                canSelectMany: options.canSelectMany,\n                filters: options.filters\n            } as OpenFileDialogProps;\n\n            // Show open file dialog\n            const dialog = this.openFileDialogFactory(dialogProps);\n            dialog.model.navigateTo(rootNode);\n            const result = await dialog.open();\n\n            // Return the result\n            return UriSelection.getUris(result).map(uri => uri.path.toString());\n        } catch (error) {\n            console.error(error);\n        }\n\n        return undefined;\n    }\n\n    async $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined> {\n        const rootStat = await this.getRootUri(options.defaultUri ? options.defaultUri : undefined);\n\n        // Fail if root not found\n        if (!rootStat) {\n            throw new Error('Unable to find the rootStat');\n        }\n\n        // Take the info for root node\n        const rootNode = DirNode.createRoot(rootStat);\n\n        // File name field should be empty unless the URI is a file\n        let fileNameValue = '';\n        if (options.defaultUri) {\n            const defaultURIStat = await this.fileSystem.getFileStat(options.defaultUri);\n            if (defaultURIStat && !defaultURIStat.isDirectory || !defaultURIStat) {\n                fileNameValue = new URI(options.defaultUri).path.base;\n            }\n        }\n\n        try {\n            // Create save file dialog props\n            const dialogProps = {\n                title: 'Save',\n                saveLabel: options.saveLabel,\n                filters: options.filters,\n                inputValue: fileNameValue\n            } as SaveFileDialogProps;\n\n            // Show save file dialog\n            const dialog: SaveFileDialog = this.saveFileDialogFactory(dialogProps);\n            dialog.model.navigateTo(rootNode);\n            const result = await dialog.open();\n\n            // Return the result\n            if (result) {\n                return result.path.toString();\n            }\n\n            return undefined;\n        } catch (error) {\n            console.error(error);\n        }\n\n        return undefined;\n    }\n\n    async $showUploadDialog(options: UploadDialogOptionsMain): Promise<string[] | undefined> {\n        const rootStat = await this.getRootUri(options.defaultUri);\n\n        // Fail if root not fount\n        if (!rootStat) {\n            throw new Error('Failed to resolve base directory where files should be uploaded');\n        }\n\n        const uploadResult = await this.uploadService.upload(rootStat.uri);\n\n        if (uploadResult) {\n            return uploadResult.uploaded;\n        }\n\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Message } from '@phosphor/messaging';\nimport { Key } from '@theia/core/lib/browser';\nimport { AbstractDialog } from '@theia/core/lib/browser/dialogs';\nimport '../../../../src/main/browser/dialogs/style/modal-notification.css';\nimport { MainMessageItem } from '../../../common/plugin-api-rpc';\n\nexport enum MessageType {\n    Error = 'error',\n    Warning = 'warning',\n    Info = 'info'\n}\n\nconst NOTIFICATION = 'modal-Notification';\nconst ICON = 'icon';\nconst TEXT = 'text';\n\n@injectable()\nexport class ModalNotification extends AbstractDialog<string | undefined> {\n\n    protected actionTitle: string | undefined;\n\n    constructor() {\n        super({ title: 'Theia' });\n    }\n\n    protected onCloseRequest(msg: Message): void {\n        this.actionTitle = undefined;\n        this.accept();\n    }\n\n    get value(): string | undefined {\n        return this.actionTitle;\n    }\n\n    showDialog(messageType: MessageType, text: string, actions: MainMessageItem[]): Promise<string | undefined> {\n        this.contentNode.appendChild(this.createMessageNode(messageType, text, actions));\n        return this.open();\n    }\n\n    protected createMessageNode(messageType: MessageType, text: string, actions: MainMessageItem[]): HTMLElement {\n        const messageNode = document.createElement('div');\n        messageNode.classList.add(NOTIFICATION);\n\n        const iconContainer = messageNode.appendChild(document.createElement('div'));\n        iconContainer.classList.add(ICON);\n        const iconElement = iconContainer.appendChild(document.createElement('i'));\n        iconElement.classList.add('fa', this.toIconClass(messageType), 'fa-fw', messageType.toString());\n\n        const textContainer = messageNode.appendChild(document.createElement('div'));\n        textContainer.classList.add(TEXT);\n        const textElement = textContainer.appendChild(document.createElement('p'));\n        textElement.textContent = text;\n\n        actions.forEach((action: MainMessageItem) => {\n            const button = this.createButton(action.title);\n            button.classList.add('main');\n            this.controlPanel.appendChild(button);\n            this.addKeyListener(button,\n                Key.ENTER,\n                () => {\n                    this.actionTitle = action.title;\n                    this.accept();\n                },\n                'click');\n        });\n        if (!actions.some(action => action.isCloseAffordance === true)) {\n            this.appendCloseButton('close');\n        }\n\n        return messageNode;\n    }\n\n    protected toIconClass(icon: MessageType): string {\n        if (icon === MessageType.Error) {\n            return 'fa-times-circle';\n        }\n        if (icon === MessageType.Warning) {\n            return 'fa-warning';\n        }\n        return 'fa-info-circle';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport {\n    MAIN_RPC_CONTEXT,\n    EditorsAndDocumentsExt,\n    EditorsAndDocumentsDelta,\n    ModelAddedData,\n    TextEditorAddData,\n    EditorPosition\n} from '../../common/plugin-api-rpc';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { EditorModelService } from './text-editor-model-service';\nimport { MonacoEditorModel } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { TextEditorMain } from './text-editor-main';\nimport { Emitter } from '@theia/core';\nimport { DisposableCollection } from '@theia/core';\nimport { EditorManager, EditorWidget } from '@theia/editor/lib/browser';\n\nexport class EditorsAndDocumentsMain implements Disposable {\n\n    private readonly proxy: EditorsAndDocumentsExt;\n\n    private readonly stateComputer: EditorAndDocumentStateComputer;\n    private readonly textEditors = new Map<string, TextEditorMain>();\n\n    private readonly modelService: EditorModelService;\n\n    private readonly onTextEditorAddEmitter = new Emitter<TextEditorMain[]>();\n    private readonly onTextEditorRemoveEmitter = new Emitter<string[]>();\n    private readonly onDocumentAddEmitter = new Emitter<MonacoEditorModel[]>();\n    private readonly onDocumentRemoveEmitter = new Emitter<monaco.Uri[]>();\n\n    readonly onTextEditorAdd = this.onTextEditorAddEmitter.event;\n    readonly onTextEditorRemove = this.onTextEditorRemoveEmitter.event;\n    readonly onDocumentAdd = this.onDocumentAddEmitter.event;\n    readonly onDocumentRemove = this.onDocumentRemoveEmitter.event;\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.textEditors.clear())\n    );\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT);\n\n        const editorService = container.get(EditorManager);\n        this.modelService = container.get(EditorModelService);\n\n        this.stateComputer = new EditorAndDocumentStateComputer(d => this.onDelta(d), editorService, this.modelService);\n        this.toDispose.push(this.stateComputer);\n        this.toDispose.push(this.onTextEditorAddEmitter);\n        this.toDispose.push(this.onTextEditorRemoveEmitter);\n        this.toDispose.push(this.onDocumentAddEmitter);\n        this.toDispose.push(this.onDocumentRemoveEmitter);\n    }\n\n    listen(): void {\n        this.stateComputer.listen();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onDelta(delta: EditorAndDocumentStateDelta): void {\n        const removedEditors = new Array<string>();\n        const addedEditors = new Array<TextEditorMain>();\n\n        const removedDocuments = delta.removedDocuments.map(d => d.textEditorModel.uri);\n\n        for (const editor of delta.addedEditors) {\n            const textEditorMain = new TextEditorMain(editor.id, editor.editor.getControl().getModel()!, editor.editor);\n            this.textEditors.set(editor.id, textEditorMain);\n            this.toDispose.push(textEditorMain);\n            addedEditors.push(textEditorMain);\n        }\n\n        for (const { id } of delta.removedEditors) {\n            const textEditorMain = this.textEditors.get(id);\n            if (textEditorMain) {\n                textEditorMain.dispose();\n                this.textEditors.delete(id);\n                removedEditors.push(id);\n            }\n        }\n\n        const deltaExt: EditorsAndDocumentsDelta = {};\n        let empty = true;\n\n        if (delta.newActiveEditor !== undefined) {\n            empty = false;\n            deltaExt.newActiveEditor = delta.newActiveEditor;\n        }\n        if (removedDocuments.length > 0) {\n            empty = false;\n            deltaExt.removedDocuments = removedDocuments;\n        }\n        if (removedEditors.length > 0) {\n            empty = false;\n            deltaExt.removedEditors = removedEditors;\n        }\n        if (delta.addedDocuments.length > 0) {\n            empty = false;\n            deltaExt.addedDocuments = delta.addedDocuments.map(d => this.toModelAddData(d));\n        }\n        if (delta.addedEditors.length > 0) {\n            empty = false;\n            deltaExt.addedEditors = addedEditors.map(e => this.toTextEditorAddData(e));\n        }\n\n        if (!empty) {\n            this.proxy.$acceptEditorsAndDocumentsDelta(deltaExt);\n            this.onDocumentRemoveEmitter.fire(removedDocuments);\n            this.onDocumentAddEmitter.fire(delta.addedDocuments);\n            this.onTextEditorRemoveEmitter.fire(removedEditors);\n            this.onTextEditorAddEmitter.fire(addedEditors);\n        }\n    }\n\n    private toModelAddData(model: MonacoEditorModel): ModelAddedData {\n        return {\n            uri: model.textEditorModel.uri,\n            versionId: model.textEditorModel.getVersionId(),\n            lines: model.textEditorModel.getLinesContent(),\n            EOL: model.textEditorModel.getEOL(),\n            modeId: model.languageId,\n            isDirty: model.dirty\n        };\n    }\n\n    private toTextEditorAddData(textEditor: TextEditorMain): TextEditorAddData {\n        const properties = textEditor.getProperties();\n        return {\n            id: textEditor.getId(),\n            documentUri: textEditor.getModel().uri,\n            options: properties!.options,\n            selections: properties!.selections,\n            visibleRanges: properties!.visibleRanges,\n            editorPosition: this.findEditorPosition(textEditor)\n        };\n\n    }\n\n    private findEditorPosition(editor: TextEditorMain): EditorPosition | undefined {\n        return EditorPosition.ONE; // TODO: fix this when Theia has support splitting editors\n    }\n\n    getEditor(id: string): TextEditorMain | undefined {\n        return this.textEditors.get(id);\n    }\n\n    saveAll(includeUntitled?: boolean): Promise<boolean> {\n        return this.modelService.saveAll(includeUntitled);\n    }\n}\n\nclass EditorAndDocumentStateComputer implements Disposable {\n    private currentState: EditorAndDocumentState | undefined;\n    private readonly editors = new Map<string, DisposableCollection>();\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.currentState = undefined)\n    );\n\n    constructor(\n        private callback: (delta: EditorAndDocumentStateDelta) => void,\n        private readonly editorService: EditorManager,\n        private readonly modelService: EditorModelService\n    ) { }\n\n    listen(): void {\n        if (this.toDispose.disposed) {\n            return;\n        }\n        this.toDispose.push(this.editorService.onCreated(widget => {\n            this.onTextEditorAdd(widget);\n            this.update();\n        }));\n        this.toDispose.push(this.editorService.onCurrentEditorChanged(() => this.update()));\n        this.toDispose.push(this.modelService.onModelAdded(this.onModelAdded, this));\n        this.toDispose.push(this.modelService.onModelRemoved(() => this.update()));\n\n        for (const widget of this.editorService.all) {\n            this.onTextEditorAdd(widget);\n        }\n        this.update();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onModelAdded(model: MonacoEditorModel): void {\n        if (!this.currentState) {\n            this.update();\n            return;\n        }\n        this.currentState = new EditorAndDocumentState(\n            this.currentState.documents.add(model),\n            this.currentState.editors,\n            this.currentState.activeEditor);\n\n        this.callback(new EditorAndDocumentStateDelta(\n            [],\n            [model],\n            [],\n            [],\n            undefined,\n            undefined\n        ));\n    }\n\n    private onTextEditorAdd(widget: EditorWidget): void {\n        const editor = MonacoEditor.get(widget);\n        if (!editor) {\n            return;\n        }\n        const id = editor.getControl().getId();\n        const toDispose = new DisposableCollection(\n            editor.onDispose(() => this.onTextEditorRemove(editor)),\n            Disposable.create(() => this.editors.delete(id))\n        );\n        this.editors.set(id, toDispose);\n        this.toDispose.push(toDispose);\n    }\n\n    private onTextEditorRemove(e: MonacoEditor): void {\n        const toDispose = this.editors.get(e.getControl().getId());\n        if (toDispose) {\n            toDispose.dispose();\n            this.update();\n        }\n    }\n\n    private update(): void {\n        const models = new Set<MonacoEditorModel>();\n        for (const model of this.modelService.getModels()) {\n            models.add(model);\n        }\n\n        let activeId: string | null = null;\n        const activeEditor = MonacoEditor.getCurrent(this.editorService);\n\n        const editors = new Map<string, EditorSnapshot>();\n        for (const widget of this.editorService.all) {\n            const editor = MonacoEditor.get(widget);\n            // VS Code tracks only visible widgets\n            if (!editor || !widget.isVisible) {\n                continue;\n            }\n            const model = editor.getControl().getModel();\n            if (model && !model.isDisposed()) {\n                const editorSnapshot = new EditorSnapshot(editor);\n                editors.set(editorSnapshot.id, editorSnapshot);\n                if (activeEditor === editor) {\n                    activeId = editorSnapshot.id;\n                }\n            }\n        }\n\n        const newState = new EditorAndDocumentState(models, editors, activeId);\n        const delta = EditorAndDocumentState.compute(this.currentState, newState);\n        if (!delta.isEmpty) {\n            this.currentState = newState;\n            this.callback(delta);\n        }\n    }\n\n}\n\nclass EditorAndDocumentStateDelta {\n    readonly isEmpty: boolean;\n\n    constructor(\n        readonly removedDocuments: MonacoEditorModel[],\n        readonly addedDocuments: MonacoEditorModel[],\n        readonly removedEditors: EditorSnapshot[],\n        readonly addedEditors: EditorSnapshot[],\n        readonly oldActiveEditor: string | null | undefined,\n        readonly newActiveEditor: string | null | undefined\n    ) {\n        this.isEmpty = this.removedDocuments.length === 0\n            && this.addedDocuments.length === 0\n            && this.addedEditors.length === 0\n            && this.removedEditors.length === 0\n            && this.newActiveEditor === this.oldActiveEditor;\n    }\n}\n\nclass EditorAndDocumentState {\n\n    constructor(\n        readonly documents: Set<MonacoEditorModel>,\n        readonly editors: Map<string, EditorSnapshot>,\n        readonly activeEditor: string | null | undefined) {\n    }\n\n    static compute(before: EditorAndDocumentState | undefined, after: EditorAndDocumentState): EditorAndDocumentStateDelta {\n        if (!before) {\n            return new EditorAndDocumentStateDelta(\n                [],\n                Array.from(after.documents),\n                [],\n                Array.from(after.editors.values()),\n                undefined,\n                after.activeEditor\n            );\n        }\n\n        const documentDelta = Delta.ofSets(before.documents, after.documents);\n        const editorDelta = Delta.ofMaps(before.editors, after.editors);\n        const oldActiveEditor = before.activeEditor !== after.activeEditor ? before.activeEditor : undefined;\n        const newActiveEditor = before.activeEditor !== after.activeEditor ? after.activeEditor : undefined;\n        return new EditorAndDocumentStateDelta(\n            documentDelta.removed,\n            documentDelta.added,\n            editorDelta.removed,\n            editorDelta.added,\n            oldActiveEditor,\n            newActiveEditor\n        );\n    }\n}\n\nclass EditorSnapshot {\n    readonly id: string;\n    constructor(readonly editor: MonacoEditor) {\n        this.id = `${editor.getControl().getId()},${editor.getControl().getModel()!.id}`;\n    }\n}\n\nnamespace Delta {\n\n    export function ofSets<T>(before: Set<T>, after: Set<T>): { removed: T[], added: T[] } {\n        const removed: T[] = [];\n        const added: T[] = [];\n        before.forEach(element => {\n            if (!after.has(element)) {\n                removed.push(element);\n            }\n        });\n        after.forEach(element => {\n            if (!before.has(element)) {\n                added.push(element);\n            }\n        });\n        return { removed, added };\n    }\n\n    export function ofMaps<K, V>(before: Map<K, V>, after: Map<K, V>): { removed: V[], added: V[] } {\n        const removed: V[] = [];\n        const added: V[] = [];\n        before.forEach((value, index) => {\n            if (!after.has(index)) {\n                removed.push(value);\n            }\n        });\n        after.forEach((value, index) => {\n            if (!before.has(index)) {\n                added.push(value);\n            }\n        });\n        return { removed, added };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { EnvMain } from '../../common/plugin-api-rpc';\nimport { QueryParameters } from '../../common/env';\nimport { isWindows, isOSX } from '@theia/core';\nimport { OperatingSystem } from '../../plugin/types-impl';\n\nexport class EnvMainImpl implements EnvMain {\n    private envVariableServer: EnvVariablesServer;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.envVariableServer = container.get(EnvVariablesServer);\n    }\n\n    $getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.envVariableServer.getValue(envVarName).then(result => result ? result.value : undefined);\n    }\n\n    async $getClientOperatingSystem(): Promise<OperatingSystem> {\n        if (isWindows) {\n            return OperatingSystem.Windows;\n        }\n        if (isOSX) {\n            return OperatingSystem.OSX;\n        }\n        return OperatingSystem.Linux;\n    }\n}\n\n/**\n * Returns query parameters from current page.\n */\nexport function getQueryParameters(): QueryParameters {\n    const queryParameters: QueryParameters = {};\n    if (window.location.search !== '') {\n        const queryParametersString = window.location.search.substr(1); // remove question mark\n        const params = queryParametersString.split('&');\n        for (const pair of params) {\n            if (pair === '') {\n                continue;\n            }\n\n            const keyValue = pair.split('=');\n            let key: string = keyValue[0];\n            let value: string = keyValue[1] ? keyValue[1] : '';\n            try {\n                key = decodeURIComponent(key);\n                if (value !== '') {\n                    value = decodeURIComponent(value);\n                }\n            } catch (error) {\n                // skip malformed URI sequence\n                continue;\n            }\n\n            const existedValue = queryParameters[key];\n            if (existedValue) {\n                if (existedValue instanceof Array) {\n                    existedValue.push(value);\n                } else {\n                    // existed value is string\n                    queryParameters[key] = [existedValue, value];\n                }\n            } else {\n                queryParameters[key] = value;\n            }\n        }\n    }\n    return queryParameters;\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces, injectable } from 'inversify';\nimport { URI as Uri } from 'vscode-uri';\nimport { Disposable, ResourceResolver, DisposableCollection } from '@theia/core';\nimport { Resource, ResourceProvider } from '@theia/core/lib/common/resource';\nimport URI from '@theia/core/lib/common/uri';\nimport { MAIN_RPC_CONTEXT, FileSystemMain, FileSystemExt } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport { FileStat, FileType } from '../../plugin/types-impl';\n\nexport class FileSystemMainImpl implements FileSystemMain, Disposable {\n\n    private readonly proxy: FileSystemExt;\n    private readonly resourceResolver: FSResourceResolver;\n    private readonly resourceProvider: ResourceProvider;\n    private readonly providers = new Map<number, Disposable>();\n    private readonly providersBySchema = new Map<string, number>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT);\n        this.resourceResolver = container.get(FSResourceResolver);\n        this.resourceProvider = container.get(ResourceProvider);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $registerFileSystemProvider(handle: number, scheme: string): Promise<void> {\n        const toDispose = new DisposableCollection(\n            this.resourceResolver.registerResourceProvider(handle, scheme, this.proxy),\n            Disposable.create(() => {\n                this.providers.delete(handle);\n                this.providersBySchema.delete(scheme);\n            })\n        );\n        this.providers.set(handle, toDispose);\n        if (this.providersBySchema.has(scheme)) {\n            throw new Error(`Resource Provider for scheme '${scheme}' is already registered`);\n        }\n        this.providersBySchema.set(scheme, handle);\n        this.toDispose.push(toDispose);\n    }\n\n    $unregisterProvider(handle: number): void {\n        const disposable = this.providers.get(handle);\n        if (disposable) {\n            disposable.dispose();\n        }\n    }\n\n    private getHandle(uri: UriComponents): number {\n        const handle = this.providersBySchema.get(uri.scheme);\n        if (handle === undefined) {\n            throw new Error(`'No available file system provider for schema ${uri.scheme}`);\n        }\n        return handle;\n    }\n\n    // currently only support registered file system providers (and not real file system)\n    async $stat(uriComponents: UriComponents): Promise<FileStat> {\n        const uri = Uri.revive(uriComponents);\n        const handle = this.getHandle(uri);\n        return this.proxy.$stat(handle, uri);\n    }\n\n    // currently only support registered file system providers (and not real file system)\n    async $readDirectory(uriComponents: UriComponents): Promise<[string, FileType][]> {\n        const uri = Uri.revive(uriComponents);\n        const handle = this.getHandle(uri);\n        return this.proxy.$readDirectory(handle, uri);\n    }\n\n    // currently only support registered file system providers (and not real file system)\n    async $createDirectory(uriComponents: UriComponents): Promise<void> {\n        const uri = Uri.revive(uriComponents);\n        const handle = this.getHandle(uri);\n        return this.proxy.$createDirectory(handle, uri);\n    }\n\n    async $readFile(uriComponents: UriComponents): Promise<string> {\n        const uri = Uri.revive(uriComponents);\n        const resource = await this.resourceProvider(new URI(uri));\n        return resource.readContents();\n    }\n\n    async $writeFile(uriComponents: UriComponents, content: string): Promise<void> {\n        const uri = Uri.revive(uriComponents);\n        const resource = await this.resourceProvider(new URI(uri));\n        if (!resource.saveContents) {\n            throw new Error(`'No write operation available on the resource for URI ${uriComponents}`);\n        }\n        return resource.saveContents(content);\n    }\n\n    // currently only support registered file system providers (and not real file system)\n    async $delete(uriComponents: UriComponents, options: { recursive: boolean }): Promise<void> {\n        const uri = Uri.revive(uriComponents);\n        const handle = this.getHandle(uri);\n        return this.proxy.$delete(handle, uri, options);\n    }\n\n    // currently only support registered file system providers (and not real file system)\n    async $rename(source: UriComponents, target: UriComponents, options: { overwrite: boolean }): Promise<void> {\n        const sourceUri = Uri.revive(source);\n        const targetUri = Uri.revive(target);\n        const sourceHandle = this.getHandle(sourceUri);\n        if (sourceHandle !== this.getHandle(targetUri)) {\n            throw new Error(`'No matching file system provider for ${sourceUri} and ${targetUri}`);\n        }\n        return this.proxy.$rename(sourceHandle, sourceUri, targetUri, options);\n    }\n\n    // currently only support registered file system providers (and not real file system)\n    async $copy(source: UriComponents, target: UriComponents, options: { overwrite: boolean }): Promise<void> {\n        const sourceUri = Uri.revive(source);\n        const targetUri = Uri.revive(target);\n        const sourceHandle = this.getHandle(sourceUri);\n        if (sourceHandle !== this.getHandle(targetUri)) {\n            throw new Error(`'No matching file system provider for ${sourceUri} and ${targetUri}`);\n        }\n        return this.proxy.$copy(sourceHandle, sourceUri, targetUri, options);\n    }\n}\n\n@injectable()\nexport class FSResourceResolver implements ResourceResolver, Disposable {\n\n    // resource providers by schemas\n    private providers = new Map<string, FSResourceProvider>();\n    private toDispose = new DisposableCollection();\n\n    resolve(uri: URI): Resource {\n        const provider = this.providers.get(uri.scheme);\n        if (provider) {\n            return provider.create(uri);\n        }\n        throw new Error(`Unable to find a Resource Provider for scheme '${uri.scheme}'`);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    registerResourceProvider(handle: number, scheme: string, proxy: FileSystemExt): Disposable {\n        if (this.providers.has(scheme)) {\n            throw new Error(`Resource Provider for scheme '${scheme}' is already registered`);\n        }\n\n        const provider = new FSResourceProvider(handle, proxy);\n        this.providers.set(scheme, provider);\n\n        const disposable = Disposable.create(() => {\n            this.providers.delete(scheme);\n        });\n        this.toDispose.push(disposable);\n        return disposable;\n    }\n}\n\nclass FSResourceProvider {\n\n    constructor(private handle: number, private proxy: FileSystemExt) { }\n\n    create(uri: URI): Resource {\n        return new FSResource(this.handle, uri, this.proxy);\n    }\n}\n\n/** Resource that delegates reading/saving a content to a plugin's FileSystemProvider. */\nexport class FSResource implements Resource {\n\n    constructor(private handle: number, public uri: URI, private proxy: FileSystemExt) { }\n\n    readContents(options?: { encoding?: string }): Promise<string> {\n        return this.proxy.$readFile(this.handle, Uri.parse(this.uri.toString()), options);\n    }\n\n    saveContents(content: string, options?: { encoding?: string }): Promise<void> {\n        return this.proxy.$writeFile(this.handle, Uri.parse(this.uri.toString()), content, options);\n    }\n\n    dispose(): void { }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { parse, ParsedPattern, IRelativePattern } from '@theia/languages/lib/common/language-selector';\nimport { FileSystemWatcher, FileChangeEvent, FileChangeType, FileChange } from '@theia/filesystem/lib/browser/filesystem-watcher';\nimport { WorkspaceExt } from '../../common/plugin-api-rpc';\nimport { FileWatcherSubscriberOptions } from '../../common/plugin-api-rpc-model';\nimport { RelativePattern } from '../../plugin/types-impl';\nimport { theiaUritoUriComponents } from '../../common/uri-components';\n\n/**\n * Actual implementation of file watching system of the plugin API.\n * Holds subscriptions (with its settings) from within plugins\n * and process all file system events in all workspace roots whether they matches to any subscription.\n * Only if event matches it will be sent into plugin side to specific subscriber.\n */\n@injectable()\nexport class InPluginFileSystemWatcherManager {\n\n    private readonly subscribers = new Map<string, FileWatcherSubscriber>();\n    private nextSubscriberId = 0;\n\n    @inject(FileSystemWatcher)\n    private readonly fileSystemWatcher: FileSystemWatcher;\n\n    @postConstruct()\n    protected init(): void {\n        this.fileSystemWatcher.onFilesChanged(event => this.onFilesChangedEventHandler(event));\n    }\n\n    // Filter file system changes according to subscribers settings here to avoid unneeded traffic.\n    protected onFilesChangedEventHandler(changes: FileChangeEvent): void {\n        for (const change of changes) {\n            switch (change.type) {\n                case FileChangeType.UPDATED:\n                    for (const [id, subscriber] of this.subscribers) {\n                        if (!subscriber.ignoreChangeEvents && this.uriMatches(subscriber, change)) {\n                            subscriber.proxy.$fileChanged({ subscriberId: id, uri: theiaUritoUriComponents(change.uri), type: 'updated' });\n                        }\n                    }\n                    break;\n                case FileChangeType.ADDED:\n                    for (const [id, subscriber] of this.subscribers) {\n                        if (!subscriber.ignoreCreateEvents && this.uriMatches(subscriber, change)) {\n                            subscriber.proxy.$fileChanged({ subscriberId: id, uri: theiaUritoUriComponents(change.uri), type: 'created' });\n                        }\n                    }\n                    break;\n                case FileChangeType.DELETED:\n                    for (const [id, subscriber] of this.subscribers) {\n                        if (!subscriber.ignoreDeleteEvents && this.uriMatches(subscriber, change)) {\n                            subscriber.proxy.$fileChanged({ subscriberId: id, uri: theiaUritoUriComponents(change.uri), type: 'deleted' });\n                        }\n                    }\n                    break;\n            }\n        }\n    }\n\n    private uriMatches(subscriber: FileWatcherSubscriber, fileChange: FileChange): boolean {\n        return subscriber.matcher(fileChange.uri.path.toString());\n    }\n\n    /**\n     * Registers new file system events subscriber.\n     *\n     * @param options subscription options\n     * @returns generated subscriber id\n     */\n    registerFileWatchSubscription(options: FileWatcherSubscriberOptions, proxy: WorkspaceExt): string {\n        const subscriberId = this.getNextId();\n\n        let globPatternMatcher: ParsedPattern;\n        if (typeof options.globPattern === 'string') {\n            globPatternMatcher = parse(options.globPattern);\n        } else {\n            const relativePattern: IRelativePattern = new RelativePattern(options.globPattern.base, options.globPattern.pattern);\n            globPatternMatcher = parse(relativePattern);\n        }\n\n        const subscriber: FileWatcherSubscriber = {\n            id: subscriberId,\n            matcher: globPatternMatcher,\n            ignoreCreateEvents: options.ignoreCreateEvents === true,\n            ignoreChangeEvents: options.ignoreChangeEvents === true,\n            ignoreDeleteEvents: options.ignoreDeleteEvents === true,\n            proxy\n        };\n        this.subscribers.set(subscriberId, subscriber);\n\n        return subscriberId;\n    }\n\n    unregisterFileWatchSubscription(subscriptionId: string): void {\n        this.subscribers.delete(subscriptionId);\n    }\n\n    private getNextId(): string {\n        return 'ipfsw' + this.nextSubscriberId++;\n    }\n\n}\n\ninterface FileWatcherSubscriber {\n    id: string;\n    matcher: ParsedPattern;\n    ignoreCreateEvents: boolean;\n    ignoreChangeEvents: boolean;\n    ignoreDeleteEvents: boolean;\n    proxy: WorkspaceExt\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { PluginContribution, Keybinding as PluginKeybinding } from '../../../common';\nimport { Keybinding } from '@theia/core/lib/common/keybinding';\nimport { KeybindingRegistry } from '@theia/core/lib/browser/keybinding';\nimport { OS } from '@theia/core/lib/common/os';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { DisposableCollection } from '@theia/core';\n\n@injectable()\nexport class KeybindingsContributionPointHandler {\n\n    @inject(KeybindingRegistry)\n    private readonly keybindingRegistry: KeybindingRegistry;\n\n    handle(contributions: PluginContribution): Disposable {\n        if (!contributions || !contributions.keybindings) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        for (const raw of contributions.keybindings) {\n            const keybinding = this.toKeybinding(raw);\n            if (keybinding) {\n                toDispose.push(this.keybindingRegistry.registerKeybinding(keybinding));\n            }\n        }\n        return toDispose;\n    }\n\n    protected toKeybinding(pluginKeybinding: PluginKeybinding): Keybinding | undefined {\n        const keybinding = this.toOSKeybinding(pluginKeybinding);\n        if (!keybinding) {\n            return undefined;\n        }\n        const { command, when } = pluginKeybinding;\n        return { keybinding, command, when };\n    }\n\n    protected toOSKeybinding(pluginKeybinding: PluginKeybinding): string | undefined {\n        let keybinding: string | undefined;\n        const os = OS.type();\n        if (os === OS.Type.Windows) {\n            keybinding = pluginKeybinding.win;\n        } else if (os === OS.Type.OSX) {\n            keybinding = pluginKeybinding.mac;\n        } else {\n            keybinding = pluginKeybinding.linux;\n        }\n        return keybinding || pluginKeybinding.keybinding;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct, named } from 'inversify';\nimport { ContributionProvider } from '@theia/core/lib/common';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { FrontendApplication } from '@theia/core/lib/browser';\nimport { LanguageClientContributionProvider } from './language-client-contribution-provider';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { LanguageClientContribution } from '@theia/languages/lib/browser';\n\n@injectable()\nexport class LanguageClientContributionProviderImpl implements LanguageClientContributionProvider {\n    @inject(FrontendApplication)\n    protected readonly app: FrontendApplication;\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n    @inject(ContributionProvider) @named(LanguageClientContribution)\n    protected readonly contributions: ContributionProvider<LanguageClientContribution>;\n\n    protected readonly languageClientContributors = new Map<string, LanguageClientContribution>();\n\n    @postConstruct()\n    collectContributions(): void {\n        for (const contribution of this.contributions.getContributions()) {\n            this.languageClientContributors.set(contribution.id, contribution);\n        }\n    }\n\n    getLanguageClientContributions(): IterableIterator<LanguageClientContribution> {\n        return this.languageClientContributors.values();\n    }\n\n    registerLanguageClientContribution(clientContribution: LanguageClientContribution): Disposable {\n        const id = clientContribution.id;\n        if (this.languageClientContributors.has(id)) {\n            this.logger.warn(`The language contribution with type '${id}' was already registered.`);\n            return Disposable.NULL;\n        }\n        this.languageClientContributors.set(clientContribution.id, clientContribution);\n\n        clientContribution.waitForActivation(this.app).then(() =>\n            clientContribution.activate(this.app)\n        );\n\n        this.logger.info(`The language contribution with type '${id}' was activated.`);\n\n        return Disposable.create(() => this.unregisterLanguageClientContribution(id));\n    }\n\n    unregisterLanguageClientContribution(id: string): void {\n        const contribution = this.languageClientContributors.get(id);\n        if (!contribution) {\n            return;\n        }\n        contribution.deactivate();\n        this.languageClientContributors.delete(id);\n        this.logger.info(`The language contribution with type '${id}' was deactivated.`);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LanguageClientContribution } from '@theia/languages/lib/browser';\n\nexport const LanguageClientContributionProvider = Symbol('LanguageClientContributionProvider');\n/**\n * The provider for language client contributions.\n * Allows to get all contributions which were registered dynamically and via injection.\n */\nexport interface LanguageClientContributionProvider {\n    /**\n     * Returns all registered client contributions.\n     */\n    getLanguageClientContributions(): IterableIterator<LanguageClientContribution>\n\n    /**\n     * Registers new language contribution.\n     *\n     * @param clientContribution new language client contribution\n     */\n    registerLanguageClientContribution(clientContribution: LanguageClientContribution): Disposable\n\n    /**\n     * Removes language client contribution from the registry.\n     *\n     * @param id language server's id\n     */\n    unregisterLanguageClientContribution(id: string): void\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { LanguageClientProvider } from '@theia/languages/lib/browser/language-client-provider';\nimport { ILanguageClient, LanguageClientContribution } from '@theia/languages/lib/browser';\nimport { LanguageClientContributionProvider } from './language-client-contribution-provider';\n\n@injectable()\nexport class LanguageClientProviderImpl implements LanguageClientProvider {\n\n    @inject(LanguageClientContributionProvider)\n    protected readonly languageClientContribution: LanguageClientContributionProvider;\n\n    async getLanguageClient(languageId: string): Promise<ILanguageClient | undefined> {\n        const contribution = this.getLanguageContribution(languageId);\n        if (contribution) {\n            return contribution.languageClient;\n        }\n    }\n\n    protected getLanguageContribution(languageId: string): LanguageClientContribution | undefined {\n        const contributions = this.languageClientContribution.getLanguageClientContributions();\n        if (contributions) {\n            for (const contribution of contributions) {\n                if (contribution.id === languageId) {\n                    return contribution;\n                }\n            }\n        }\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    LanguagesContributionMain, MAIN_RPC_CONTEXT\n} from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Workspace, Languages, MessageReader, MessageWriter } from '@theia/languages/lib/browser/language-client-services';\nimport { LanguageClientFactory, BaseLanguageClientContribution } from '@theia/languages/lib/browser';\nimport { MessageService, CommandRegistry } from '@theia/core';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { WebSocketConnectionProvider } from '@theia/core/lib/browser';\nimport { createMessageConnection, MessageConnection } from 'vscode-jsonrpc';\nimport { ConnectionMainImpl } from './connection-main';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { LanguageClientContributionProvider } from './language-provider/language-client-contribution-provider';\n\n/**\n * Implementation of languages contribution system of the plugin API.\n * Uses for registering new language server which was described in the plug-in.\n */\nexport class LanguagesContributionMainImpl implements LanguagesContributionMain, Disposable {\n\n    private readonly languageClientContributionProvider: LanguageClientContributionProvider;\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(protected readonly rpc: RPCProtocol,\n        protected readonly container: interfaces.Container,\n        protected readonly connectionMain: ConnectionMainImpl) {\n\n        this.languageClientContributionProvider = container.get(LanguageClientContributionProvider);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    /**\n     * Creates new client contribution for the language server and register it.\n     *\n     * @param languageServerInfo an information about the registered language server\n     */\n    $registerLanguageServerProvider(languageServerInfo: theia.LanguageServerInfo): void {\n        const newLanguageContribution = new PluginLanguageClientContribution(this.container.get(Workspace),\n            this.container.get(Languages),\n            this.container.get(LanguageClientFactory),\n            this.connectionMain,\n            languageServerInfo,\n            this.rpc);\n\n        newLanguageContribution.messageService = this.container.get(MessageService);\n        newLanguageContribution.registry = this.container.get(CommandRegistry);\n        newLanguageContribution.workspaceService = this.container.get(WorkspaceService);\n        newLanguageContribution.connectionProvider = this.container.get(WebSocketConnectionProvider);\n\n        newLanguageContribution.id = languageServerInfo.id;\n        newLanguageContribution.name = languageServerInfo.name;\n        newLanguageContribution.contains = languageServerInfo.workspaceContains;\n        newLanguageContribution.patterns = languageServerInfo.globPatterns;\n\n        this.languageClientContributionProvider.registerLanguageClientContribution(newLanguageContribution);\n        this.toDispose.push(Disposable.create(() => this.$stop(languageServerInfo.id)));\n    }\n\n    /**\n     * Removes language client contribution from the registry and clear related connections.\n     *\n     * @param id language server's id\n     */\n    $stop(id: string): void {\n        this.languageClientContributionProvider.unregisterLanguageClientContribution(id);\n        this.connectionMain.ensureConnection(id).then(connection => {\n            connection.dispose();\n        });\n    }\n\n}\n\n/**\n * The language client contribution for the language server which was described in the plug-in.\n */\nclass PluginLanguageClientContribution extends BaseLanguageClientContribution {\n    id: string;\n    name: string;\n    patterns: string[] | undefined;\n    contains: string[] | undefined;\n\n    messageService: MessageService;\n    registry: CommandRegistry;\n    workspaceService: WorkspaceService;\n    connectionProvider: WebSocketConnectionProvider;\n\n    constructor(protected readonly workspace: Workspace,\n        protected readonly languages: Languages,\n        protected readonly languageClientFactory: LanguageClientFactory,\n        protected readonly connectionMain: ConnectionMainImpl,\n        protected readonly languageContribution: theia.LanguageServerInfo,\n        protected readonly rpc: RPCProtocol\n    ) {\n        super(workspace, languages, languageClientFactory);\n    }\n\n    protected get globPatterns(): string[] {\n        return this.patterns ? this.patterns : [];\n    }\n\n    protected get workspaceContains(): string[] {\n        return this.contains ? this.contains : [];\n    }\n\n    protected async doActivate(toDeactivate: DisposableCollection): Promise<void> {\n        // Until the client will be activated, the connection between the plugin and client contribution should be set.\n        const connection = await this.connectionMain.ensureConnection(this.id);\n        const messageConnection = createMessageConnection(connection.reader as MessageReader, connection.writer as MessageWriter);\n        this.deferredConnection.resolve(messageConnection);\n        messageConnection.onDispose(() => this.deferredConnection = new Deferred<MessageConnection>());\n        if (toDeactivate.disposed) {\n            messageConnection.dispose();\n            return;\n        }\n        const proxy = this.rpc.getProxy(MAIN_RPC_CONTEXT.LANGUAGES_CONTRIBUTION_EXT);\n        // Asks the plugin to start the process of language server.\n        proxy.$start(this.languageContribution);\n\n        toDeactivate.push(Disposable.create(() => this.stop = (async () => {\n            try {\n                // avoid calling stop if start failed\n                await this._languageClient!.onReady();\n                // remove all listeners\n                await this._languageClient!.stop();\n            } catch {\n                // if start or stop failed make sure the the connection is closed\n                messageConnection.dispose();\n                connection.dispose();\n            }\n        })()));\n\n        toDeactivate.push(messageConnection.onClose(() => this.restart()));\n        this.onWillStart(this._languageClient!);\n        this._languageClient!.start();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Method `$changeLanguage` copied and modified\n// from https://github.com/microsoft/vscode/blob/e9c50663154c369a06355ce752b447af5b580dc3/src/vs/workbench/api/browser/mainThreadLanguages.ts#L30-L42\n\nimport {\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    SerializedRegExp,\n    SerializedIndentationRule,\n    SerializedOnEnterRule,\n    MAIN_RPC_CONTEXT,\n    LanguagesExt,\n    WorkspaceEditDto,\n    ResourceTextEditDto,\n    PluginInfo\n} from '../../common/plugin-api-rpc';\nimport { injectable, inject } from 'inversify';\nimport {\n    SerializedDocumentFilter, MarkerData, Range, RelatedInformation,\n    MarkerSeverity, DocumentLink, WorkspaceSymbolParams, CodeAction, CompletionDto\n} from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { DocumentFilter, MonacoModelIdentifier, testGlob } from 'monaco-languageclient/lib';\nimport { MonacoLanguages } from '@theia/monaco/lib/browser/monaco-languages';\nimport CoreURI from '@theia/core/lib/common/uri';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { ProblemManager } from '@theia/markers/lib/browser';\nimport * as vst from 'vscode-languageserver-types';\nimport * as theia from '@theia/plugin';\nimport { UriComponents } from '../../common/uri-components';\nimport { CancellationToken } from '@theia/core/lib/common';\nimport { LanguageSelector, RelativePattern } from '@theia/languages/lib/common/language-selector';\nimport { CallHierarchyService, CallHierarchyServiceProvider, Caller, Definition } from '@theia/callhierarchy/lib/browser';\nimport { toDefinition, toUriComponents, fromDefinition, fromPosition, toCaller } from './callhierarchy/callhierarchy-type-converters';\nimport { Position, DocumentUri } from 'vscode-languageserver-types';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { WorkspaceSymbolProvider } from '@theia/languages/lib/browser/language-client-services';\nimport { mixin } from '../../common/types';\nimport { relative } from '../../common/paths-util';\n\n@injectable()\nexport class LanguagesMainImpl implements LanguagesMain, Disposable {\n\n    @inject(MonacoLanguages)\n    private readonly monacoLanguages: MonacoLanguages;\n\n    @inject(ProblemManager)\n    private readonly problemManager: ProblemManager;\n\n    @inject(CallHierarchyServiceProvider)\n    private readonly callHierarchyServiceContributionRegistry: CallHierarchyServiceProvider;\n\n    private readonly proxy: LanguagesExt;\n    private readonly services = new Map<number, Disposable>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(@inject(RPCProtocol) rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.LANGUAGES_EXT);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    $getLanguages(): Promise<string[]> {\n        return Promise.resolve(monaco.languages.getLanguages().map(l => l.id));\n    }\n\n    $changeLanguage(resource: UriComponents, languageId: string): Promise<void> {\n        const uri = monaco.Uri.revive(resource);\n        const model = monaco.editor.getModel(uri);\n        if (!model) {\n            return Promise.reject(new Error('Invalid uri'));\n        }\n        const langId = monaco.languages.getEncodedLanguageId(languageId);\n        if (!langId) {\n            return Promise.reject(new Error(`Unknown language ID: ${languageId}`));\n        }\n        monaco.editor.setModelLanguage(model, languageId);\n        return Promise.resolve(undefined);\n    }\n\n    protected register(handle: number, service: Disposable): void {\n        this.services.set(handle, service);\n        this.toDispose.push(Disposable.create(() => this.$unregister(handle)));\n    }\n\n    $unregister(handle: number): void {\n        const disposable = this.services.get(handle);\n        if (disposable) {\n            this.services.delete(handle);\n            disposable.dispose();\n        }\n    }\n\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void {\n        const config: monaco.languages.LanguageConfiguration = {\n            comments: configuration.comments,\n            brackets: configuration.brackets,\n            wordPattern: reviveRegExp(configuration.wordPattern),\n            indentationRules: reviveIndentationRule(configuration.indentationRules),\n            onEnterRules: reviveOnEnterRules(configuration.onEnterRules),\n        };\n\n        this.register(handle, monaco.languages.setLanguageConfiguration(languageId, config));\n    }\n\n    $registerCompletionSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void {\n        this.register(handle, monaco.modes.CompletionProviderRegistry.register(this.toLanguageSelector(selector), {\n            triggerCharacters,\n            provideCompletionItems: (model, position, context, token) => this.provideCompletionItems(handle, model, position, context, token),\n            resolveCompletionItem: supportsResolveDetails\n                ? (model, position, suggestion, token) => Promise.resolve(this.resolveCompletionItem(handle, model, position, suggestion, token))\n                : undefined\n        }));\n    }\n\n    protected provideCompletionItems(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        context: monaco.languages.CompletionContext, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.CompletionList> {\n        return this.proxy.$provideCompletionItems(handle, model.uri, position, context, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n            return {\n                suggestions: result.completions.map(c => Object.assign(c, {\n                    range: c.range || result.defaultRange\n                })),\n                incomplete: result.incomplete,\n                dispose: () => this.proxy.$releaseCompletionItems(handle, result.id)\n            };\n        });\n    }\n\n    protected resolveCompletionItem(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        item: monaco.languages.CompletionItem, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.CompletionItem> {\n        const { parentId, id } = item as CompletionDto;\n        return this.proxy.$resolveCompletionItem(handle, parentId, id, token).then(resolved => {\n            if (resolved) {\n                mixin(item, resolved, true);\n            }\n            return item;\n        });\n    }\n\n    $registerDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const definitionProvider = this.createDefinitionProvider(handle);\n        this.register(handle, monaco.languages.registerDefinitionProvider(languageSelector, definitionProvider));\n    }\n\n    $registerDeclarationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const declarationProvider = this.createDeclarationProvider(handle);\n        this.register(handle, monaco.languages.registerDeclarationProvider(languageSelector, declarationProvider));\n    }\n\n    $registerReferenceProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const referenceProvider = this.createReferenceProvider(handle);\n        this.register(handle, monaco.languages.registerReferenceProvider(languageSelector, referenceProvider));\n    }\n\n    protected createReferenceProvider(handle: number): monaco.languages.ReferenceProvider {\n        return {\n            provideReferences: (model, position, context, token) => this.provideReferences(handle, model, position, context, token)\n        };\n    }\n\n    protected provideReferences(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        context: monaco.languages.ReferenceContext, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Location[]> {\n        return this.proxy.$provideReferences(handle, model.uri, position, context, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                const references: monaco.languages.Location[] = [];\n                for (const item of result) {\n                    references.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return references;\n            }\n\n            return undefined;\n        });\n    }\n\n    $registerSignatureHelpProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], metadata: theia.SignatureHelpProviderMetadata): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const signatureHelpProvider = this.createSignatureHelpProvider(handle, metadata);\n        this.register(handle, monaco.languages.registerSignatureHelpProvider(languageSelector, signatureHelpProvider));\n    }\n\n    $clearDiagnostics(id: string): void {\n        for (const uri of this.problemManager.getUris()) {\n            this.problemManager.setMarkers(new CoreURI(uri), id, []);\n        }\n    }\n\n    $changeDiagnostics(id: string, delta: [string, MarkerData[]][]): void {\n        for (const [uriString, markers] of delta) {\n            const uri = new CoreURI(uriString);\n            this.problemManager.setMarkers(uri, id, markers.map(reviveMarker));\n        }\n    }\n\n    $registerImplementationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const implementationProvider = this.createImplementationProvider(handle);\n        this.register(handle, monaco.languages.registerImplementationProvider(languageSelector, implementationProvider));\n    }\n\n    protected createImplementationProvider(handle: number): monaco.languages.ImplementationProvider {\n        return {\n            provideImplementation: (model, position, token) => this.provideImplementation(handle, model, position, token)\n        };\n    }\n\n    protected provideImplementation(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideImplementation(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    $registerTypeDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const typeDefinitionProvider = this.createTypeDefinitionProvider(handle);\n        this.register(handle, monaco.languages.registerTypeDefinitionProvider(languageSelector, typeDefinitionProvider));\n    }\n\n    protected createTypeDefinitionProvider(handle: number): monaco.languages.TypeDefinitionProvider {\n        return {\n            provideTypeDefinition: (model, position, token) => this.provideTypeDefinition(handle, model, position, token)\n        };\n    }\n\n    protected provideTypeDefinition(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideTypeDefinition(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    $registerHoverProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const hoverProvider = this.createHoverProvider(handle);\n        this.register(handle, monaco.languages.registerHoverProvider(languageSelector, hoverProvider));\n    }\n\n    protected createHoverProvider(handle: number): monaco.languages.HoverProvider {\n        return {\n            provideHover: (model, position, token) => this.provideHover(handle, model, position, token)\n        };\n    }\n\n    protected provideHover(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Hover> {\n        return this.proxy.$provideHover(handle, model.uri, position, token);\n    }\n\n    $registerDocumentHighlightProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const documentHighlightProvider = this.createDocumentHighlightProvider(handle);\n        this.register(handle, monaco.languages.registerDocumentHighlightProvider(languageSelector, documentHighlightProvider));\n    }\n\n    protected createDocumentHighlightProvider(handle: number): monaco.languages.DocumentHighlightProvider {\n        return {\n            provideDocumentHighlights: (model, position, token) => this.provideDocumentHighlights(handle, model, position, token)\n        };\n    }\n\n    protected provideDocumentHighlights(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.DocumentHighlight[]> {\n        return this.proxy.$provideDocumentHighlights(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                const highlights: monaco.languages.DocumentHighlight[] = [];\n                for (const item of result) {\n                    highlights.push(\n                        {\n                            ...item,\n                            kind: (item.kind ? item.kind : monaco.languages.DocumentHighlightKind.Text)\n                        });\n                }\n                return highlights;\n            }\n\n            return undefined;\n        });\n    }\n\n    $registerWorkspaceSymbolProvider(handle: number, pluginInfo: PluginInfo): void {\n        const workspaceSymbolProvider = this.createWorkspaceSymbolProvider(handle);\n        this.register(handle, this.monacoLanguages.registerWorkspaceSymbolProvider(workspaceSymbolProvider));\n    }\n\n    protected createWorkspaceSymbolProvider(handle: number): WorkspaceSymbolProvider {\n        return {\n            provideWorkspaceSymbols: (params, token) => this.provideWorkspaceSymbols(handle, params, token),\n            resolveWorkspaceSymbol: (symbol, token) => this.resolveWorkspaceSymbol(handle, symbol, token)\n        };\n    }\n\n    protected provideWorkspaceSymbols(handle: number, params: WorkspaceSymbolParams, token: monaco.CancellationToken): Thenable<vst.SymbolInformation[]> {\n        return this.proxy.$provideWorkspaceSymbols(handle, params.query, token);\n    }\n\n    protected resolveWorkspaceSymbol(handle: number, symbol: vst.SymbolInformation, token: monaco.CancellationToken): Thenable<vst.SymbolInformation | undefined> {\n        return this.proxy.$resolveWorkspaceSymbol(handle, symbol, token);\n    }\n\n    $registerDocumentLinkProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const linkProvider = this.createLinkProvider(handle);\n        this.register(handle, monaco.languages.registerLinkProvider(languageSelector, linkProvider));\n    }\n\n    protected createLinkProvider(handle: number): monaco.languages.LinkProvider {\n        return {\n            provideLinks: async (model, token) => this.provideLinks(handle, model, token),\n            resolveLink: async (link, token) => this.resolveLink(handle, link, token)\n        };\n    }\n\n    protected async provideLinks(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): Promise<monaco.languages.ProviderResult<monaco.languages.ILinksList>> {\n        const links = await this.proxy.$provideDocumentLinks(handle, model.uri, token);\n        if (!links) {\n            return undefined;\n        }\n        return {\n            links: links.map(link => this.toMonacoLink(link)),\n            dispose: () => {\n                if (links && Array.isArray(links)) {\n                    this.proxy.$releaseDocumentLinks(handle, links.map(link => ObjectIdentifier.of(link)));\n                }\n            }\n        };\n    }\n\n    protected async resolveLink(handle: number, link: monaco.languages.ILink,\n        token: monaco.CancellationToken): Promise<monaco.languages.ProviderResult<monaco.languages.ILink>> {\n        const resolved = await this.proxy.$resolveDocumentLink(handle, link, token);\n        return resolved && this.toMonacoLink(resolved);\n    }\n\n    protected toMonacoLink(link: DocumentLink): monaco.languages.ILink {\n        return {\n            ...link,\n            url: !!link.url && typeof link.url !== 'string' ? monaco.Uri.revive(link.url) : link.url\n        };\n    }\n\n    $registerCodeLensSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], eventHandle: number): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const lensProvider = this.createCodeLensProvider(handle);\n\n        if (typeof eventHandle === 'number') {\n            const emitter = new Emitter<monaco.languages.CodeLensProvider>();\n            this.register(eventHandle, emitter);\n            lensProvider.onDidChange = emitter.event;\n        }\n\n        this.register(handle, monaco.languages.registerCodeLensProvider(languageSelector, lensProvider));\n    }\n\n    protected createCodeLensProvider(handle: number): monaco.languages.CodeLensProvider {\n        return {\n            provideCodeLenses: async (model, token) => this.provideCodeLenses(handle, model, token),\n            resolveCodeLens: (model, codeLens, token) => this.resolveCodeLens(handle, model, codeLens, token)\n        };\n    }\n\n    protected async provideCodeLenses(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): Promise<monaco.languages.ProviderResult<monaco.languages.CodeLensList>> {\n        const lenses = await this.proxy.$provideCodeLenses(handle, model.uri, token);\n        if (!lenses) {\n            return undefined;\n        }\n        return {\n            lenses,\n            dispose: () => {\n                if (lenses && Array.isArray(lenses)) {\n                    this.proxy.$releaseCodeLenses(handle, lenses.map(symbol => ObjectIdentifier.of(symbol)));\n                }\n            }\n        };\n    }\n\n    protected resolveCodeLens(handle: number, model: monaco.editor.ITextModel,\n        codeLens: monaco.languages.CodeLens, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.CodeLens> {\n        return this.proxy.$resolveCodeLens(handle, model.uri, codeLens, token);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $emitCodeLensEvent(eventHandle: number, event?: any): void {\n        const obj = this.services.get(eventHandle);\n        if (obj instanceof Emitter) {\n            obj.fire(event);\n        }\n    }\n\n    $registerOutlineSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const symbolProvider = this.createDocumentSymbolProvider(handle);\n        this.register(handle, monaco.modes.DocumentSymbolProviderRegistry.register(languageSelector, symbolProvider));\n    }\n\n    protected createDocumentSymbolProvider(handle: number): monaco.languages.DocumentSymbolProvider {\n        return {\n            provideDocumentSymbols: (model, token) => this.provideDocumentSymbols(handle, model, token)\n        };\n    }\n\n    protected provideDocumentSymbols(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.DocumentSymbol[]> {\n        return this.proxy.$provideDocumentSymbols(handle, model.uri, token);\n    }\n\n    protected createDefinitionProvider(handle: number): monaco.languages.DefinitionProvider {\n        return {\n            provideDefinition: (model, position, token) => this.provideDefinition(handle, model, position, token)\n        };\n    }\n\n    protected createDeclarationProvider(handle: number): monaco.languages.DeclarationProvider {\n        return {\n            provideDeclaration: (model, position, token) => this.provideDeclaration(handle, model, position, token)\n        };\n    }\n\n    protected provideDeclaration(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideDeclaration(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    protected provideDefinition(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideDefinition(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    protected createSignatureHelpProvider(handle: number, metadata: theia.SignatureHelpProviderMetadata): monaco.languages.SignatureHelpProvider {\n        return {\n            signatureHelpTriggerCharacters: metadata.triggerCharacters,\n            signatureHelpRetriggerCharacters: metadata.retriggerCharacters,\n            provideSignatureHelp: async (model, position, token, context) => this.provideSignatureHelp(handle, model, position, token, context)\n        };\n    }\n\n    protected async provideSignatureHelp(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken,\n        context: monaco.languages.SignatureHelpContext): Promise<monaco.languages.ProviderResult<monaco.languages.SignatureHelpResult>> {\n        const value = await this.proxy.$provideSignatureHelp(handle, model.uri, position, context, token);\n        if (!value) {\n            return undefined;\n        }\n        return {\n            value,\n            dispose: () => {\n                if (typeof value.id === 'number') {\n                    this.proxy.$releaseSignatureHelp(handle, value.id);\n                }\n            }\n        };\n    }\n\n    $registerDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const documentFormattingEditSupport = this.createDocumentFormattingSupport(handle);\n        this.register(handle, monaco.languages.registerDocumentFormattingEditProvider(languageSelector, documentFormattingEditSupport));\n    }\n\n    createDocumentFormattingSupport(handle: number): monaco.languages.DocumentFormattingEditProvider {\n        return {\n            provideDocumentFormattingEdits: (model, options, token) => this.provideDocumentFormattingEdits(handle, model, options, token)\n        };\n    }\n\n    protected provideDocumentFormattingEdits(handle: number, model: monaco.editor.ITextModel,\n        options: monaco.languages.FormattingOptions, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\n        return this.proxy.$provideDocumentFormattingEdits(handle, model.uri, options, token);\n    }\n\n    $registerRangeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const rangeFormattingEditProvider = this.createRangeFormattingProvider(handle);\n        this.register(handle, monaco.languages.registerDocumentRangeFormattingEditProvider(languageSelector, rangeFormattingEditProvider));\n    }\n\n    createRangeFormattingProvider(handle: number): monaco.languages.DocumentRangeFormattingEditProvider {\n        return {\n            provideDocumentRangeFormattingEdits: (model, range: Range, options, token) => this.provideDocumentRangeFormattingEdits(handle, model, range, options, token)\n        };\n    }\n\n    protected provideDocumentRangeFormattingEdits(handle: number, model: monaco.editor.ITextModel,\n        range: Range, options: monaco.languages.FormattingOptions, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\n        return this.proxy.$provideDocumentRangeFormattingEdits(handle, model.uri, range, options, token);\n    }\n\n    $registerOnTypeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const onTypeFormattingProvider = this.createOnTypeFormattingProvider(handle, autoFormatTriggerCharacters);\n        this.register(handle, monaco.languages.registerOnTypeFormattingEditProvider(languageSelector, onTypeFormattingProvider));\n    }\n\n    protected createOnTypeFormattingProvider(\n        handle: number,\n        autoFormatTriggerCharacters: string[]\n    ): monaco.languages.OnTypeFormattingEditProvider {\n        return {\n            autoFormatTriggerCharacters,\n            provideOnTypeFormattingEdits: (model, position, ch, options, token) => this.provideOnTypeFormattingEdits(handle, model, position, ch, options, token)\n        };\n    }\n\n    protected provideOnTypeFormattingEdits(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        ch: string, options: monaco.languages.FormattingOptions, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\n        return this.proxy.$provideOnTypeFormattingEdits(handle, model.uri, position, ch, options, token);\n    }\n\n    $registerFoldingRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const provider = this.createFoldingRangeProvider(handle);\n        this.register(handle, monaco.languages.registerFoldingRangeProvider(languageSelector, provider));\n    }\n\n    createFoldingRangeProvider(handle: number): monaco.languages.FoldingRangeProvider {\n        return {\n            provideFoldingRanges: (model, context, token) => this.provideFoldingRanges(handle, model, context, token)\n        };\n    }\n\n    protected provideFoldingRanges(handle: number, model: monaco.editor.ITextModel,\n        context: monaco.languages.FoldingContext, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.FoldingRange[]> {\n        return this.proxy.$provideFoldingRange(handle, model.uri, context, token);\n    }\n\n    $registerSelectionRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const provider = this.createSelectionRangeProvider(handle);\n        this.register(handle, monaco.languages.registerSelectionRangeProvider(languageSelector, provider));\n    }\n\n    protected createSelectionRangeProvider(handle: number): monaco.languages.SelectionRangeProvider {\n        return {\n            provideSelectionRanges: (model, positions, token) => this.provideSelectionRanges(handle, model, positions, token)\n        };\n    }\n\n    protected provideSelectionRanges(handle: number, model: monaco.editor.ITextModel,\n        positions: monaco.Position[], token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.SelectionRange[][]> {\n        return this.proxy.$provideSelectionRanges(handle, model.uri, positions, token);\n    }\n\n    $registerDocumentColorProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const colorProvider = this.createColorProvider(handle);\n        this.register(handle, monaco.languages.registerColorProvider(languageSelector, colorProvider));\n    }\n\n    createColorProvider(handle: number): monaco.languages.DocumentColorProvider {\n        return {\n            provideDocumentColors: (model, token) => this.provideDocumentColors(handle, model, token),\n            provideColorPresentations: (model, colorInfo, token) => this.provideColorPresentations(handle, model, colorInfo, token)\n        };\n    }\n\n    protected provideDocumentColors(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.IColorInformation[]> {\n        return this.proxy.$provideDocumentColors(handle, model.uri, token).then(documentColors =>\n            documentColors.map(documentColor => {\n                const [red, green, blue, alpha] = documentColor.color;\n                const color = {\n                    red: red,\n                    green: green,\n                    blue: blue,\n                    alpha: alpha\n                };\n\n                return {\n                    color,\n                    range: documentColor.range\n                };\n            })\n        );\n    }\n\n    protected provideColorPresentations(handle: number, model: monaco.editor.ITextModel,\n        colorInfo: monaco.languages.IColorInformation, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.IColorPresentation[]> {\n        return this.proxy.$provideColorPresentations(handle, model.uri, {\n            color: [\n                colorInfo.color.red,\n                colorInfo.color.green,\n                colorInfo.color.blue,\n                colorInfo.color.alpha\n            ],\n            range: colorInfo.range\n        }, token);\n    }\n\n    $registerQuickFixProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], providedCodeActionKinds?: string[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const quickFixProvider = {\n            provideCodeActions: (model: monaco.editor.ITextModel, range: monaco.Range,\n                context: monaco.languages.CodeActionContext, token: monaco.CancellationToken): monaco.languages.CodeActionList | Promise<monaco.languages.CodeActionList> => {\n                const markers = monaco.services.StaticServices.markerService.get().read({ resource: model.uri }).filter(m => monaco.Range.areIntersectingOrTouching(m, range));\n                return this.provideCodeActions(handle, model, range, { markers, only: context.only }, token);\n            },\n            providedCodeActionKinds\n        };\n        this.register(handle, monaco.modes.CodeActionProviderRegistry.register(languageSelector, quickFixProvider));\n    }\n\n    protected async provideCodeActions(handle: number, model: monaco.editor.ITextModel,\n        rangeOrSelection: Range, context: monaco.languages.CodeActionContext,\n        token: monaco.CancellationToken): Promise<monaco.languages.CodeActionList | monaco.languages.CodeActionList> {\n        const actions = await this.proxy.$provideCodeActions(handle, model.uri, rangeOrSelection, {\n            ...context\n        }, token);\n        if (!actions) {\n            return undefined!;\n        }\n        return {\n            actions: actions.map(a => toMonacoAction(a)),\n            dispose: () => {\n                // TODO this.proxy.$releaseCodeActions(handle, cacheId);\n            }\n        };\n    }\n\n    $registerRenameProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], supportsResolveLocation: boolean): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const renameProvider = this.createRenameProvider(handle, supportsResolveLocation);\n        this.register(handle, monaco.languages.registerRenameProvider(languageSelector, renameProvider));\n    }\n\n    protected createRenameProvider(handle: number, supportsResolveLocation: boolean): monaco.languages.RenameProvider {\n        return {\n            provideRenameEdits: (model, position, newName, token) => this.provideRenameEdits(handle, model, position, newName, token)\n            ,\n            resolveRenameLocation: supportsResolveLocation\n                ? (model, position, token) =>\n                    this.resolveRenameLocation(handle, model, position, token)\n                : undefined\n        };\n    }\n\n    protected provideRenameEdits(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, newName: string, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.WorkspaceEdit & monaco.languages.Rejection> {\n        return this.proxy.$provideRenameEdits(handle, model.uri, position, newName, token).then(toMonacoWorkspaceEdit);\n    }\n\n    $registerCallHierarchyProvider(handle: number, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const callHierarchyService = this.createCallHierarchyService(handle, languageSelector);\n        this.register(handle, this.callHierarchyServiceContributionRegistry.add(callHierarchyService));\n    }\n\n    protected createCallHierarchyService(handle: number, language: LanguageSelector): CallHierarchyService {\n        return {\n            selector: language,\n            getRootDefinition: (uri: DocumentUri, position: Position, cancellationToken: CancellationToken) =>\n                this.proxy.$provideRootDefinition(handle, toUriComponents(uri), fromPosition(position), cancellationToken)\n                    .then(def => toDefinition(def)),\n            getCallers: (definition: Definition, cancellationToken: CancellationToken) => this.proxy.$provideCallers(handle, fromDefinition(definition), cancellationToken)\n                .then(result => {\n                    if (!result) {\n                        return undefined!;\n                    }\n\n                    if (Array.isArray(result)) {\n                        const callers: Caller[] = [];\n                        for (const item of result) {\n                            callers.push(toCaller(item));\n                        }\n                        return callers;\n                    }\n\n                    return undefined!;\n                })\n        };\n    }\n\n    protected matchModel(selector: LanguageSelector | undefined, model: MonacoModelIdentifier): boolean {\n        if (Array.isArray(selector)) {\n            return selector.some(filter => this.matchModel(filter, model));\n        }\n        if (DocumentFilter.is(selector)) {\n            if (!!selector.language && selector.language !== model.languageId) {\n                return false;\n            }\n            if (!!selector.scheme && selector.scheme !== model.uri.scheme) {\n                return false;\n            }\n            if (!!selector.pattern && !testGlob(selector.pattern, model.uri.path)) {\n                return false;\n            }\n            return true;\n        }\n        return selector === model.languageId;\n    }\n\n    protected resolveRenameLocation(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.RenameLocation> {\n        return this.proxy.$resolveRenameLocation(handle, model.uri, position, token);\n    }\n\n    protected toLanguageSelector(filters: SerializedDocumentFilter[]): monaco.modes.LanguageSelector & LanguageSelector {\n        return filters.map(filter => {\n            let pattern: string | (monaco.modes.IRelativePattern & RelativePattern) | undefined;\n            if (typeof filter.pattern === 'string') {\n                pattern = filter.pattern;\n            } else if (filter.pattern) {\n                pattern = {\n                    base: monaco.path.normalize(filter.pattern.base),\n                    pattern: filter.pattern.pattern,\n                    pathToRelative: relative\n                };\n            }\n            return {\n                language: filter.language,\n                scheme: filter.scheme,\n                pattern\n            };\n        });\n    }\n\n}\n\nfunction reviveMarker(marker: MarkerData): vst.Diagnostic {\n    const monacoMarker: vst.Diagnostic = {\n        code: marker.code,\n        severity: reviveSeverity(marker.severity),\n        range: reviveRange(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn),\n        message: marker.message,\n        source: marker.source,\n        relatedInformation: undefined\n    };\n\n    if (marker.relatedInformation) {\n        monacoMarker.relatedInformation = marker.relatedInformation.map(reviveRelated);\n    }\n\n    return monacoMarker;\n}\n\nfunction reviveSeverity(severity: MarkerSeverity): vst.DiagnosticSeverity {\n    switch (severity) {\n        case MarkerSeverity.Error: return vst.DiagnosticSeverity.Error;\n        case MarkerSeverity.Warning: return vst.DiagnosticSeverity.Warning;\n        case MarkerSeverity.Info: return vst.DiagnosticSeverity.Information;\n        case MarkerSeverity.Hint: return vst.DiagnosticSeverity.Hint;\n    }\n}\n\nfunction reviveRange(startLine: number, startColumn: number, endLine: number, endColumn: number): vst.Range {\n    // note: language server range is 0-based, marker is 1-based, so need to deduct 1 here\n    return {\n        start: {\n            line: startLine - 1,\n            character: startColumn - 1\n        },\n        end: {\n            line: endLine - 1,\n            character: endColumn - 1\n        }\n    };\n}\n\nfunction reviveRelated(related: RelatedInformation): vst.DiagnosticRelatedInformation {\n    return {\n        message: related.message,\n        location: {\n            uri: related.resource,\n            range: reviveRange(related.startLineNumber, related.startColumn, related.endLineNumber, related.endColumn)\n        }\n    };\n}\n\nfunction reviveRegExp(regExp?: SerializedRegExp): RegExp | undefined {\n    if (typeof regExp === 'undefined' || regExp === null) {\n        return undefined;\n    }\n    return new RegExp(regExp.pattern, regExp.flags);\n}\n\nfunction reviveIndentationRule(indentationRule?: SerializedIndentationRule): monaco.languages.IndentationRule | undefined {\n    if (typeof indentationRule === 'undefined' || indentationRule === null) {\n        return undefined;\n    }\n    return {\n        increaseIndentPattern: reviveRegExp(indentationRule.increaseIndentPattern)!,\n        decreaseIndentPattern: reviveRegExp(indentationRule.decreaseIndentPattern)!,\n        indentNextLinePattern: reviveRegExp(indentationRule.indentNextLinePattern),\n        unIndentedLinePattern: reviveRegExp(indentationRule.unIndentedLinePattern),\n    };\n}\n\nfunction reviveOnEnterRule(onEnterRule: SerializedOnEnterRule): monaco.languages.OnEnterRule {\n    return {\n        beforeText: reviveRegExp(onEnterRule.beforeText)!,\n        afterText: reviveRegExp(onEnterRule.afterText),\n        action: onEnterRule.action\n    };\n}\n\nfunction reviveOnEnterRules(onEnterRules?: SerializedOnEnterRule[]): monaco.languages.OnEnterRule[] | undefined {\n    if (typeof onEnterRules === 'undefined' || onEnterRules === null) {\n        return undefined;\n    }\n    return onEnterRules.map(reviveOnEnterRule);\n}\n\nfunction toMonacoAction(action: CodeAction): monaco.languages.CodeAction {\n    return {\n        ...action,\n        diagnostics: action.diagnostics ? action.diagnostics.map(m => toMonacoMarkerData(m)) : undefined,\n        edit: action.edit ? toMonacoWorkspaceEdit(action.edit) : undefined\n    };\n}\n\nfunction toMonacoMarkerData(marker: MarkerData): monaco.editor.IMarkerData {\n    return {\n        ...marker,\n        relatedInformation: marker.relatedInformation\n            ? marker.relatedInformation.map(i => toMonacoRelatedInformation(i))\n            : undefined\n    };\n}\n\nfunction toMonacoRelatedInformation(relatedInfo: RelatedInformation): monaco.editor.IRelatedInformation {\n    return {\n        ...relatedInfo,\n        resource: monaco.Uri.parse(relatedInfo.resource)\n    };\n}\n\nexport function toMonacoWorkspaceEdit(data: WorkspaceEditDto | undefined): monaco.languages.WorkspaceEdit {\n    return {\n        edits: (data && data.edits || []).map(edit => {\n            if (ResourceTextEditDto.is(edit)) {\n                return { resource: monaco.Uri.revive(edit.resource), edits: edit.edits };\n            } else {\n                return { newUri: monaco.Uri.revive(edit.newUri), oldUri: monaco.Uri.revive(edit.oldUri), options: edit.options };\n            }\n        })\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { interfaces } from 'inversify';\nimport { CommandRegistryMainImpl } from './command-registry-main';\nimport { PreferenceRegistryMainImpl } from './preference-registry-main';\nimport { QuickOpenMainImpl } from './quick-open-main';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMainFactory, OutputChannelRegistryFactory } from '../../common/plugin-api-rpc';\nimport { MessageRegistryMainImpl } from './message-registry-main';\nimport { WindowStateMain } from './window-state-main';\nimport { WorkspaceMainImpl } from './workspace-main';\nimport { StatusBarMessageRegistryMainImpl } from './status-bar-message-registry-main';\nimport { EnvMainImpl } from './env-main';\nimport { EditorsAndDocumentsMain } from './editors-and-documents-main';\nimport { TerminalServiceMainImpl } from './terminal-main';\nimport { DialogsMainImpl } from './dialogs-main';\nimport { TreeViewsMainImpl } from './view/tree-views-main';\nimport { NotificationMainImpl } from './notification-main';\nimport { ConnectionMainImpl } from './connection-main';\nimport { WebviewsMainImpl } from './webviews-main';\nimport { TasksMainImpl } from './tasks-main';\nimport { StorageMainImpl } from './plugin-storage';\nimport { LanguagesContributionMainImpl } from './languages-contribution-main';\nimport { DebugMainImpl } from './debug/debug-main';\nimport { FileSystemMainImpl } from './file-system-main';\nimport { ScmMainImpl } from './scm-main';\nimport { DecorationsMainImpl } from './decorations/decorations-main';\nimport { ClipboardMainImpl } from './clipboard-main';\nimport { DocumentsMainImpl } from './documents-main';\nimport { TextEditorsMainImpl } from './text-editors-main';\nimport { EditorManager } from '@theia/editor/lib/browser';\nimport { EditorModelService } from './text-editor-model-service';\nimport { OpenerService } from '@theia/core/lib/browser/opener-service';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell/application-shell';\nimport { MonacoBulkEditService } from '@theia/monaco/lib/browser/monaco-bulk-edit-service';\nimport { MonacoEditorService } from '@theia/monaco/lib/browser/monaco-editor-service';\nimport { UntitledResourceResolver } from './editor/untitled-resource';\nimport { FileResourceResolver } from '@theia/filesystem/lib/browser';\n\nexport function setUpPluginApi(rpc: RPCProtocol, container: interfaces.Container): void {\n    const commandRegistryMain = new CommandRegistryMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.COMMAND_REGISTRY_MAIN, commandRegistryMain);\n\n    const quickOpenMain = new QuickOpenMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.QUICK_OPEN_MAIN, quickOpenMain);\n\n    const workspaceMain = new WorkspaceMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.WORKSPACE_MAIN, workspaceMain);\n\n    const dialogsMain = new DialogsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.DIALOGS_MAIN, dialogsMain);\n\n    const messageRegistryMain = new MessageRegistryMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN, messageRegistryMain);\n\n    const preferenceRegistryMain = new PreferenceRegistryMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN, preferenceRegistryMain);\n\n    const editorsAndDocuments = new EditorsAndDocumentsMain(rpc, container);\n\n    const modelService = container.get(EditorModelService);\n    const editorManager = container.get(EditorManager);\n    const openerService = container.get<OpenerService>(OpenerService);\n    const shell = container.get(ApplicationShell);\n    const untitledResourceResolver = container.get(UntitledResourceResolver);\n    const fileResourceResolver = container.get(FileResourceResolver);\n    const documentsMain = new DocumentsMainImpl(editorsAndDocuments, modelService, rpc, editorManager, openerService, shell, untitledResourceResolver, fileResourceResolver);\n    rpc.set(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN, documentsMain);\n\n    const bulkEditService = container.get(MonacoBulkEditService);\n    const monacoEditorService = container.get(MonacoEditorService);\n    const editorsMain = new TextEditorsMainImpl(editorsAndDocuments, rpc, bulkEditService, monacoEditorService);\n    rpc.set(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN, editorsMain);\n\n    // start listening only after all clients are subscribed to events\n    editorsAndDocuments.listen();\n\n    const statusBarMessageRegistryMain = new StatusBarMessageRegistryMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.STATUS_BAR_MESSAGE_REGISTRY_MAIN, statusBarMessageRegistryMain);\n\n    const envMain = new EnvMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.ENV_MAIN, envMain);\n\n    const notificationMain = new NotificationMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN, notificationMain);\n\n    const terminalMain = new TerminalServiceMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN, terminalMain);\n\n    const treeViewsMain = new TreeViewsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN, treeViewsMain);\n\n    const outputChannelRegistryFactory: OutputChannelRegistryFactory = container.get(OutputChannelRegistryFactory);\n    const outputChannelRegistryMain = outputChannelRegistryFactory();\n    rpc.set(PLUGIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_MAIN, outputChannelRegistryMain);\n\n    const languagesMainFactory: LanguagesMainFactory = container.get(LanguagesMainFactory);\n    const languagesMain = languagesMainFactory(rpc);\n    rpc.set(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN, languagesMain);\n\n    const webviewsMain = new WebviewsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN, webviewsMain);\n\n    const storageMain = new StorageMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.STORAGE_MAIN, storageMain);\n\n    const connectionMain = new ConnectionMainImpl(rpc);\n    rpc.set(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN, connectionMain);\n\n    const tasksMain = new TasksMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.TASKS_MAIN, tasksMain);\n\n    const languagesContribution = new LanguagesContributionMainImpl(rpc, container, connectionMain);\n    rpc.set(PLUGIN_RPC_CONTEXT.LANGUAGES_CONTRIBUTION_MAIN, languagesContribution);\n\n    const debugMain = new DebugMainImpl(rpc, connectionMain, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.DEBUG_MAIN, debugMain);\n\n    rpc.set(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN, new FileSystemMainImpl(rpc, container));\n\n    const scmMain = new ScmMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.SCM_MAIN, scmMain);\n\n    const decorationsMain = new DecorationsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN, decorationsMain);\n\n    const windowMain = new WindowStateMain(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.WINDOW_MAIN, windowMain);\n\n    const clipboardMain = new ClipboardMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN, clipboardMain);\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { MessageRegistryMain, MainMessageType, MainMessageOptions, MainMessageItem } from '../../common/plugin-api-rpc';\nimport { ModalNotification, MessageType } from './dialogs/modal-notification';\n\nexport class MessageRegistryMainImpl implements MessageRegistryMain {\n    private readonly messageService: MessageService;\n\n    constructor(container: interfaces.Container) {\n        this.messageService = container.get(MessageService);\n    }\n\n    async $showMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: MainMessageItem[]): Promise<number | undefined> {\n        const action = await this.doShowMessage(type, message, options, actions);\n        const handle = action\n            ? actions.map(a => a.title).indexOf(action)\n            : undefined;\n        return handle === undefined && options.modal ? options.onCloseActionHandle : handle;\n    }\n\n    protected async doShowMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: MainMessageItem[]): Promise<string | undefined> {\n        if (options.modal) {\n            const messageType = type === MainMessageType.Error ? MessageType.Error :\n                type === MainMessageType.Warning ? MessageType.Warning :\n                    MessageType.Info;\n            const modalNotification = new ModalNotification();\n            return modalNotification.showDialog(messageType, message, actions);\n        }\n        switch (type) {\n            case MainMessageType.Info:\n                return this.messageService.info(message, ...actions.map(a => a.title));\n            case MainMessageType.Warning:\n                return this.messageService.warn(message, ...actions.map(a => a.title));\n            case MainMessageType.Error:\n                return this.messageService.error(message, ...actions.map(a => a.title));\n        }\n        throw new Error(`Message type '${type}' is not supported yet!`);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { NotificationMain } from '../../common/plugin-api-rpc';\nimport { ProgressService, Progress, ProgressMessage } from '@theia/core/lib/common';\nimport { interfaces } from 'inversify';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class NotificationMainImpl implements NotificationMain, Disposable {\n\n    private readonly progressService: ProgressService;\n    private readonly progressMap = new Map<string, Progress>();\n    private readonly progress2Work = new Map<string, number>();\n\n    protected readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as not disposed */ })\n    );\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.progressService = container.get(ProgressService);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $startProgress(options: NotificationMain.StartProgressOptions): Promise<string> {\n        const progressMessage = this.mapOptions(options);\n        const progress = await this.progressService.showProgress(progressMessage);\n        const id = progress.id;\n        this.progressMap.set(id, progress);\n        this.progress2Work.set(id, 0);\n        if (this.toDispose.disposed) {\n            this.$stopProgress(id);\n        } else {\n            this.toDispose.push(Disposable.create(() => this.$stopProgress(id)));\n        }\n        return id;\n    }\n    protected mapOptions(options: NotificationMain.StartProgressOptions): ProgressMessage {\n        const { title, location, cancellable } = options;\n        return { text: title, options: { location, cancelable: cancellable } };\n    }\n\n    $stopProgress(id: string): void {\n        const progress = this.progressMap.get(id);\n        if (progress) {\n            progress.cancel();\n            this.progressMap.delete(id);\n            this.progress2Work.delete(id);\n        }\n    }\n\n    $updateProgress(id: string, item: NotificationMain.ProgressReport): void {\n        const progress = this.progressMap.get(id);\n        if (!progress) {\n            return;\n        }\n        const done = Math.min((this.progress2Work.get(id) || 0) + (item.increment || 0), 100);\n        this.progress2Work.set(id, done);\n        progress.report({ message: item.message, work: done ? { done, total: 100 } : undefined });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { OutputWidget } from '@theia/output/lib/browser/output-widget';\nimport { OutputContribution } from '@theia/output/lib/browser/output-contribution';\nimport { OutputChannel, OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\n@injectable()\nexport class OutputChannelRegistryMainImpl implements OutputChannelRegistryMain {\n\n    @inject(OutputChannelManager)\n    private outputChannelManager: OutputChannelManager;\n\n    @inject(OutputContribution)\n    private outputContribution: OutputContribution;\n\n    private commonOutputWidget: OutputWidget | undefined;\n\n    private channels: Map<string, OutputChannel> = new Map();\n\n    $append(channelName: string, value: string, pluginInfo: PluginInfo): PromiseLike<void> {\n        const outputChannel = this.getChannel(channelName);\n        if (outputChannel) {\n            outputChannel.append(value);\n        }\n\n        return Promise.resolve();\n    }\n\n    $clear(channelName: string): PromiseLike<void> {\n        const outputChannel = this.getChannel(channelName);\n        if (outputChannel) {\n            outputChannel.clear();\n        }\n\n        return Promise.resolve();\n    }\n\n    $dispose(channelName: string): PromiseLike<void> {\n        this.outputChannelManager.deleteChannel(channelName);\n        if (this.channels.has(channelName)) {\n            this.channels.delete(channelName);\n        }\n\n        return Promise.resolve();\n    }\n\n    async $reveal(channelName: string, preserveFocus: boolean): Promise<void> {\n        const outputChannel = this.getChannel(channelName);\n        if (outputChannel) {\n            const activate = !preserveFocus;\n            const reveal = preserveFocus;\n            this.commonOutputWidget = await this.outputContribution.openView({ activate, reveal });\n            outputChannel.setVisibility(true);\n        }\n    }\n\n    $close(channelName: string): PromiseLike<void> {\n        const outputChannel = this.getChannel(channelName);\n        if (outputChannel) {\n            outputChannel.setVisibility(false);\n        }\n        const channels = this.outputChannelManager.getChannels();\n        const isEmpty = channels.findIndex((channel: OutputChannel) => channel.isVisible) === -1;\n        if (isEmpty && this.commonOutputWidget) {\n            this.commonOutputWidget.close();\n        }\n\n        return Promise.resolve();\n    }\n\n    private getChannel(channelName: string): OutputChannel | undefined {\n        let outputChannel: OutputChannel | undefined;\n        if (this.channels.has(channelName)) {\n            outputChannel = this.channels.get(channelName);\n        } else {\n            outputChannel = this.outputChannelManager.getChannel(channelName);\n            this.channels.set(channelName, outputChannel);\n        }\n\n        return outputChannel;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { ITokenTypeMap, IEmbeddedLanguagesMap, StandardTokenType } from 'vscode-textmate';\nimport { TextmateRegistry, getEncodedLanguageId, MonacoTextmateService, GrammarDefinition } from '@theia/monaco/lib/browser/textmate';\nimport { MenusContributionPointHandler } from './menus/menus-contribution-handler';\nimport { PluginViewRegistry } from './view/plugin-view-registry';\nimport { PluginContribution, IndentationRules, FoldingRules, ScopeMap, DeployedPlugin, GrammarsContribution } from '../../common';\nimport { PreferenceSchemaProvider } from '@theia/core/lib/browser';\nimport { PreferenceSchema, PreferenceSchemaProperties } from '@theia/core/lib/browser/preferences';\nimport { KeybindingsContributionPointHandler } from './keybindings/keybindings-contribution-handler';\nimport { MonacoSnippetSuggestProvider } from '@theia/monaco/lib/browser/monaco-snippet-suggest-provider';\nimport { PluginSharedStyle } from './plugin-shared-style';\nimport { CommandRegistry, Command, CommandHandler } from '@theia/core/lib/common/command';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { TaskDefinitionRegistry, ProblemMatcherRegistry, ProblemPatternRegistry } from '@theia/task/lib/browser';\nimport { PluginDebugService } from './debug/plugin-debug-service';\nimport { DebugSchemaUpdater } from '@theia/debug/lib/browser/debug-schema-updater';\nimport { MonacoThemingService } from '@theia/monaco/lib/browser/monaco-theming-service';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\nimport { PluginIconThemeService } from './plugin-icon-theme-service';\n\n@injectable()\nexport class PluginContributionHandler {\n\n    private injections = new Map<string, string[]>();\n\n    @inject(TextmateRegistry)\n    private readonly grammarsRegistry: TextmateRegistry;\n\n    @inject(PluginViewRegistry)\n    private readonly viewRegistry: PluginViewRegistry;\n\n    @inject(MenusContributionPointHandler)\n    private readonly menusContributionHandler: MenusContributionPointHandler;\n\n    @inject(PreferenceSchemaProvider)\n    private readonly preferenceSchemaProvider: PreferenceSchemaProvider;\n\n    @inject(MonacoTextmateService)\n    private readonly monacoTextmateService: MonacoTextmateService;\n\n    @inject(KeybindingsContributionPointHandler)\n    private readonly keybindingsContributionHandler: KeybindingsContributionPointHandler;\n\n    @inject(MonacoSnippetSuggestProvider)\n    protected readonly snippetSuggestProvider: MonacoSnippetSuggestProvider;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(PluginSharedStyle)\n    protected readonly style: PluginSharedStyle;\n\n    @inject(TaskDefinitionRegistry)\n    protected readonly taskDefinitionRegistry: TaskDefinitionRegistry;\n\n    @inject(ProblemMatcherRegistry)\n    protected readonly problemMatcherRegistry: ProblemMatcherRegistry;\n\n    @inject(ProblemPatternRegistry)\n    protected readonly problemPatternRegistry: ProblemPatternRegistry;\n\n    @inject(PluginDebugService)\n    protected readonly debugService: PluginDebugService;\n\n    @inject(DebugSchemaUpdater)\n    protected readonly debugSchema: DebugSchemaUpdater;\n\n    @inject(MonacoThemingService)\n    protected readonly monacoThemingService: MonacoThemingService;\n\n    @inject(ColorRegistry)\n    protected readonly colors: ColorRegistry;\n\n    @inject(PluginIconThemeService)\n    protected readonly iconThemeService: PluginIconThemeService;\n\n    protected readonly commandHandlers = new Map<string, CommandHandler['execute'] | undefined>();\n\n    protected readonly onDidRegisterCommandHandlerEmitter = new Emitter<string>();\n    readonly onDidRegisterCommandHandler = this.onDidRegisterCommandHandlerEmitter.event;\n\n    /**\n     * Always synchronous in order to simplify handling disconnections.\n     * @throws never, loading of each contribution should handle errors\n     * in order to avoid preventing loading of other contributions or extensions\n     */\n    handleContributions(clientId: string, plugin: DeployedPlugin): Disposable {\n        const contributions = plugin.contributes;\n        if (!contributions) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection(Disposable.create(() => { /* mark as not disposed */ }));\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        const logError = (message: string, ...args: any[]) => console.error(`[${clientId}][${plugin.metadata.model.id}]: ${message}`, ...args);\n        const pushContribution = (id: string, contribute: () => Disposable) => {\n            if (toDispose.disposed) {\n                return;\n            }\n            try {\n                toDispose.push(contribute());\n            } catch (e) {\n                logError(`Failed to load '${id}' contribution.`, e);\n            }\n        };\n\n        const configuration = contributions.configuration;\n        if (configuration) {\n            for (const config of configuration) {\n                pushContribution('configuration', () => this.preferenceSchemaProvider.setSchema(config));\n            }\n        }\n\n        const configurationDefaults = contributions.configurationDefaults;\n        if (configurationDefaults) {\n            pushContribution('configurationDefaults', () => this.updateDefaultOverridesSchema(configurationDefaults));\n        }\n\n        const languages = contributions.languages;\n        if (languages && languages.length) {\n            for (const lang of languages) {\n                // it is not possible to unregister a language\n                monaco.languages.register({\n                    id: lang.id,\n                    aliases: lang.aliases,\n                    extensions: lang.extensions,\n                    filenamePatterns: lang.filenamePatterns,\n                    filenames: lang.filenames,\n                    firstLine: lang.firstLine,\n                    mimetypes: lang.mimetypes\n                });\n                const langConfiguration = lang.configuration;\n                if (langConfiguration) {\n                    pushContribution(`language.${lang.id}.configuration`, () => monaco.languages.setLanguageConfiguration(lang.id, {\n                        wordPattern: this.createRegex(langConfiguration.wordPattern),\n                        autoClosingPairs: langConfiguration.autoClosingPairs,\n                        brackets: langConfiguration.brackets,\n                        comments: langConfiguration.comments,\n                        folding: this.convertFolding(langConfiguration.folding),\n                        surroundingPairs: langConfiguration.surroundingPairs,\n                        indentationRules: this.convertIndentationRules(langConfiguration.indentationRules)\n                    }));\n                }\n            }\n        }\n\n        const grammars = contributions.grammars;\n        if (grammars && grammars.length) {\n            const grammarsWithLanguage: GrammarsContribution[] = [];\n            for (const grammar of grammars) {\n                if (grammar.injectTo) {\n                    for (const injectScope of grammar.injectTo) {\n                        pushContribution(`grammar.injectTo.${injectScope}`, () => {\n                            const injections = this.injections.get(injectScope) || [];\n                            injections.push(grammar.scope);\n                            this.injections.set(injectScope, injections);\n                            return Disposable.create(() => {\n                                const index = injections.indexOf(grammar.scope);\n                                if (index !== -1) {\n                                    injections.splice(index, 1);\n                                }\n                            });\n                        });\n                    }\n                }\n                if (grammar.language) {\n                    // processing is deferred.\n                    grammarsWithLanguage.push(grammar);\n                }\n                pushContribution(`grammar.textmate.scope.${grammar.scope}`, () => this.grammarsRegistry.registerTextmateGrammarScope(grammar.scope, {\n                    async getGrammarDefinition(): Promise<GrammarDefinition> {\n                        return {\n                            format: grammar.format,\n                            content: grammar.grammar || '',\n                            location: grammar.grammarLocation\n                        };\n                    },\n                    getInjections: (scopeName: string) =>\n                        this.injections.get(scopeName)!\n                }));\n            }\n            // load grammars on next tick to await registration of languages from all plugins in current tick\n            // see https://github.com/eclipse-theia/theia/issues/6907#issuecomment-578600243\n            setTimeout(() => {\n                for (const grammar of grammarsWithLanguage) {\n                    const language = grammar.language!;\n                    pushContribution(`grammar.language.${language}.scope`, () => this.grammarsRegistry.mapLanguageIdToTextmateGrammar(language, grammar.scope));\n                    pushContribution(`grammar.language.${language}.configuration`, () => this.grammarsRegistry.registerGrammarConfiguration(language, {\n                        embeddedLanguages: this.convertEmbeddedLanguages(grammar.embeddedLanguages, logError),\n                        tokenTypes: this.convertTokenTypes(grammar.tokenTypes)\n                    }));\n                }\n                // activate grammars only once everything else is loaded.\n                // see https://github.com/eclipse-theia/theia-cpp-extensions/issues/100#issuecomment-610643866\n                setTimeout(() => {\n                    for (const grammar of grammarsWithLanguage) {\n                        const language = grammar.language!;\n                        pushContribution(`grammar.language.${language}.activation`,\n                            () => this.monacoTextmateService.activateLanguage(language)\n                        );\n                    }\n                });\n            });\n        }\n\n        pushContribution('commands', () => this.registerCommands(contributions));\n        pushContribution('menus', () => this.menusContributionHandler.handle(plugin));\n        pushContribution('keybindings', () => this.keybindingsContributionHandler.handle(contributions));\n\n        if (contributions.viewsContainers) {\n            for (const location in contributions.viewsContainers) {\n                if (contributions.viewsContainers!.hasOwnProperty(location)) {\n                    for (const viewContainer of contributions.viewsContainers[location]) {\n                        pushContribution(`viewContainers.${viewContainer.id}`,\n                            () => this.viewRegistry.registerViewContainer(location, viewContainer)\n                        );\n                    }\n                }\n            }\n        }\n        if (contributions.views) {\n            // eslint-disable-next-line guard-for-in\n            for (const location in contributions.views) {\n                for (const view of contributions.views[location]) {\n                    pushContribution(`views.${view.id}`,\n                        () => this.viewRegistry.registerView(location, view)\n                    );\n                }\n            }\n        }\n\n        if (contributions.snippets) {\n            for (const snippet of contributions.snippets) {\n                pushContribution(`snippets.${snippet.uri}`, () => this.snippetSuggestProvider.fromURI(snippet.uri, {\n                    language: snippet.language,\n                    source: snippet.source\n                }));\n            }\n        }\n\n        if (contributions.themes && contributions.themes.length) {\n            const pending = {};\n            for (const theme of contributions.themes) {\n                pushContribution(`themes.${theme.uri}`, () => this.monacoThemingService.register(theme, pending));\n            }\n        }\n\n        if (contributions.iconThemes && contributions.iconThemes.length) {\n            for (const iconTheme of contributions.iconThemes) {\n                pushContribution(`iconThemes.${iconTheme.uri}`, () => this.iconThemeService.register(iconTheme, plugin));\n            }\n        }\n\n        if (contributions.colors) {\n            pushContribution('colors', () => this.colors.register(...contributions.colors));\n        }\n\n        if (contributions.taskDefinitions) {\n            for (const taskDefinition of contributions.taskDefinitions) {\n                pushContribution(`taskDefinitions.${taskDefinition.taskType}`,\n                    () => this.taskDefinitionRegistry.register(taskDefinition)\n                );\n            }\n        }\n\n        if (contributions.problemPatterns) {\n            for (const problemPattern of contributions.problemPatterns) {\n                pushContribution(`problemPatterns.${problemPattern.name || problemPattern.regexp}`,\n                    () => this.problemPatternRegistry.register(problemPattern)\n                );\n            }\n        }\n\n        if (contributions.problemMatchers) {\n            for (const problemMatcher of contributions.problemMatchers) {\n                pushContribution(`problemMatchers.${problemMatcher.label}`,\n                    () => this.problemMatcherRegistry.register(problemMatcher)\n                );\n            }\n        }\n\n        if (contributions.debuggers && contributions.debuggers.length) {\n            toDispose.push(Disposable.create(() => this.debugSchema.update()));\n            for (const contribution of contributions.debuggers) {\n                pushContribution(`debuggers.${contribution.type}`,\n                    () => this.debugService.registerDebugger(contribution)\n                );\n            }\n            this.debugSchema.update();\n        }\n\n        return toDispose;\n    }\n\n    protected registerCommands(contribution: PluginContribution): Disposable {\n        if (!contribution.commands) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        for (const { iconUrl, themeIcon, command, category, title } of contribution.commands) {\n            const reference = iconUrl && this.style.toIconClass(iconUrl);\n            const icon = themeIcon && monaco.theme.ThemeIcon.fromString(themeIcon);\n            let iconClass;\n            if (reference) {\n                toDispose.push(reference);\n                iconClass = reference.object.iconClass;\n            } else if (icon) {\n                iconClass = monaco.theme.ThemeIcon.asClassName(icon);\n            }\n            toDispose.push(this.registerCommand({ id: command, category, label: title, iconClass }));\n        }\n        return toDispose;\n    }\n\n    registerCommand(command: Command): Disposable {\n        if (this.hasCommand(command.id)) {\n            console.warn(`command '${command.id}' already registered`);\n            return Disposable.NULL;\n        }\n\n        const commandHandler: CommandHandler = {\n            execute: async (...args) => {\n                const handler = this.commandHandlers.get(command.id);\n                if (!handler) {\n                    throw new Error(`command '${command.id}' not found`);\n                }\n                return handler(...args);\n            },\n            // Always enabled - a command can be executed programmatically or via the commands palette.\n            isEnabled(): boolean { return true; },\n            // Visibility rules are defined via the `menus` contribution point.\n            isVisible(): boolean { return true; }\n        };\n\n        const toDispose = new DisposableCollection();\n        if (this.commands.getCommand(command.id)) {\n            // overriding built-in command, i.e. `type` by the VSCodeVim extension\n            toDispose.push(this.commands.registerHandler(command.id, commandHandler));\n        } else {\n            toDispose.push(this.commands.registerCommand(command, commandHandler));\n        }\n        this.commandHandlers.set(command.id, undefined);\n        toDispose.push(Disposable.create(() => this.commandHandlers.delete(command.id)));\n        return toDispose;\n    }\n\n    registerCommandHandler(id: string, execute: CommandHandler['execute']): Disposable {\n        if (this.hasCommandHandler(id)) {\n            console.warn(`command handler '${id}' already registered`);\n            return Disposable.NULL;\n        }\n\n        this.commandHandlers.set(id, execute);\n        this.onDidRegisterCommandHandlerEmitter.fire(id);\n        return Disposable.create(() => this.commandHandlers.set(id, undefined));\n    }\n\n    hasCommand(id: string): boolean {\n        return this.commandHandlers.has(id);\n    }\n\n    hasCommandHandler(id: string): boolean {\n        return !!this.commandHandlers.get(id);\n    }\n\n    protected updateDefaultOverridesSchema(configurationDefaults: PreferenceSchemaProperties): Disposable {\n        const defaultOverrides: PreferenceSchema = {\n            id: 'defaultOverrides',\n            title: 'Default Configuration Overrides',\n            properties: {}\n        };\n        // eslint-disable-next-line guard-for-in\n        for (const key in configurationDefaults) {\n            const defaultValue = configurationDefaults[key];\n            if (this.preferenceSchemaProvider.testOverrideValue(key, defaultValue)) {\n                defaultOverrides.properties[key] = {\n                    type: 'object',\n                    default: defaultValue,\n                    description: `Configure editor settings to be overridden for ${key} language.`\n                };\n            }\n        }\n        if (Object.keys(defaultOverrides.properties).length) {\n            return this.preferenceSchemaProvider.setSchema(defaultOverrides);\n        }\n        return Disposable.NULL;\n    }\n\n    private createRegex(value: string | undefined): RegExp | undefined {\n        if (typeof value === 'string') {\n            return new RegExp(value, '');\n        }\n        return undefined;\n    }\n\n    private convertIndentationRules(rules?: IndentationRules): monaco.languages.IndentationRule | undefined {\n        if (!rules) {\n            return undefined;\n        }\n        return {\n            decreaseIndentPattern: this.createRegex(rules.decreaseIndentPattern)!,\n            increaseIndentPattern: this.createRegex(rules.increaseIndentPattern)!,\n            indentNextLinePattern: this.createRegex(rules.indentNextLinePattern),\n            unIndentedLinePattern: this.createRegex(rules.unIndentedLinePattern)\n        };\n    }\n\n    private convertFolding(folding?: FoldingRules): monaco.languages.FoldingRules | undefined {\n        if (!folding) {\n            return undefined;\n        }\n        const result: monaco.languages.FoldingRules = {\n            offSide: folding.offSide\n        };\n\n        if (folding.markers) {\n            result.markers = {\n                end: this.createRegex(folding.markers.end)!,\n                start: this.createRegex(folding.markers.start)!\n            };\n        }\n\n        return result;\n\n    }\n\n    private convertTokenTypes(tokenTypes?: ScopeMap): ITokenTypeMap | undefined {\n        if (typeof tokenTypes === 'undefined' || tokenTypes === null) {\n            return undefined;\n        }\n        const result = Object.create(null);\n        const scopes = Object.keys(tokenTypes);\n        const len = scopes.length;\n        for (let i = 0; i < len; i++) {\n            const scope = scopes[i];\n            const tokenType = tokenTypes[scope];\n            switch (tokenType) {\n                case 'string':\n                    result[scope] = StandardTokenType.String;\n                    break;\n                case 'other':\n                    result[scope] = StandardTokenType.Other;\n                    break;\n                case 'comment':\n                    result[scope] = StandardTokenType.Comment;\n                    break;\n            }\n        }\n        return result;\n    }\n\n    private convertEmbeddedLanguages(languages: ScopeMap | undefined, logError: (error: string) => void): IEmbeddedLanguagesMap | undefined {\n        if (typeof languages === 'undefined' || languages === null) {\n            return undefined;\n        }\n        const result = Object.create(null);\n        const scopes = Object.keys(languages);\n        const len = scopes.length;\n        for (let i = 0; i < len; i++) {\n            const scope = scopes[i];\n            const langId = languages[scope];\n            result[scope] = getEncodedLanguageId(langId);\n            if (!result[scope]) {\n                logError(`Language for '${scope}' not found.`);\n            }\n        }\n        return result;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { QuickOpenService, QuickOpenItem, QuickOpenModel, QuickOpenMode } from '@theia/core/lib/browser';\nimport { PluginServer } from '../../common';\nimport { Command } from '@theia/core/lib/common/command';\n\n@injectable()\nexport class PluginExtDeployCommandService implements QuickOpenModel {\n\n    private items: QuickOpenItem[];\n\n    public static COMMAND: Command = {\n        id: 'plugin-ext:deploy-plugin-id',\n        category: 'Plugin',\n        label: 'Deploy Plugin by Id',\n\n    };\n\n    @inject(QuickOpenService)\n    protected readonly quickOpenService: QuickOpenService;\n\n    @inject(PluginServer)\n    protected readonly pluginServer: PluginServer;\n\n    constructor() {\n        this.items = [];\n    }\n\n    /**\n     * Whether the dialog is currently open.\n     */\n    protected isOpen: boolean = false;\n\n    deploy(): void {\n        const placeholderText = \"Plugin's id to deploy.\";\n\n        this.isOpen = true;\n\n        this.quickOpenService.open(this, {\n            placeholder: placeholderText,\n            fuzzyMatchLabel: true,\n            fuzzyMatchDescription: true,\n            fuzzySort: true,\n            onClose: () => {\n                this.isOpen = false;\n            },\n        });\n    }\n\n    public async onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): Promise<void> {\n        this.items = [];\n        if (lookFor || lookFor.length > 0) {\n            this.items.push(new DeployQuickOpenItem(lookFor, this.pluginServer, 'Deploy this plugin'));\n        }\n        acceptor(this.items);\n    }\n\n}\n\nexport class DeployQuickOpenItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly name: string,\n        protected readonly pluginServer: PluginServer,\n        protected readonly description?: string\n    ) {\n        super();\n    }\n\n    getLabel(): string {\n        return this.name;\n    }\n\n    getDetail(): string {\n        return this.description || '';\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.pluginServer.deploy(this.name);\n        return true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport '../../../src/main/style/status-bar.css';\nimport '../../../src/main/browser/style/index.css';\n\nimport { ContainerModule } from 'inversify';\nimport {\n    FrontendApplicationContribution, WidgetFactory, bindViewContribution,\n    ViewContainerIdentifier, ViewContainer, createTreeContainer, TreeImpl, TreeWidget, TreeModelImpl, LabelProviderContribution\n} from '@theia/core/lib/browser';\nimport { MaybePromise, CommandContribution, ResourceResolver, bindContributionProvider } from '@theia/core/lib/common';\nimport { WebSocketConnectionProvider } from '@theia/core/lib/browser/messaging';\nimport { HostedPluginSupport } from '../../hosted/browser/hosted-plugin';\nimport { HostedPluginWatcher } from '../../hosted/browser/hosted-plugin-watcher';\nimport { OpenUriCommandHandler } from './commands';\nimport { PluginApiFrontendContribution } from './plugin-frontend-contribution';\nimport { HostedPluginServer, hostedServicePath, PluginServer, pluginServerJsonRpcPath } from '../../common/plugin-protocol';\nimport { ModalNotification } from './dialogs/modal-notification';\nimport { PluginWidget } from './plugin-ext-widget';\nimport { PluginFrontendViewContribution } from './plugin-frontend-view-contribution';\nimport { PluginExtDeployCommandService } from './plugin-ext-deploy-command';\nimport { EditorModelService } from './text-editor-model-service';\nimport { UntitledResourceResolver } from './editor/untitled-resource';\nimport { MenusContributionPointHandler } from './menus/menus-contribution-handler';\nimport { PluginContributionHandler } from './plugin-contribution-handler';\nimport { PluginViewRegistry, PLUGIN_VIEW_CONTAINER_FACTORY_ID, PLUGIN_VIEW_FACTORY_ID, PLUGIN_VIEW_DATA_FACTORY_ID } from './view/plugin-view-registry';\nimport { TextContentResourceResolver } from './workspace-main';\nimport { MainPluginApiProvider } from '../../common/plugin-ext-api-contribution';\nimport { PluginPathsService, pluginPathsServicePath } from '../common/plugin-paths-protocol';\nimport { KeybindingsContributionPointHandler } from './keybindings/keybindings-contribution-handler';\nimport { LanguageClientProvider } from '@theia/languages/lib/browser/language-client-provider';\nimport { LanguageClientProviderImpl } from './language-provider/plugin-language-client-provider';\nimport { LanguageClientContributionProviderImpl } from './language-provider/language-client-contribution-provider-impl';\nimport { LanguageClientContributionProvider } from './language-provider/language-client-contribution-provider';\nimport { DebugSessionContributionRegistry } from '@theia/debug/lib/browser/debug-session-contribution';\nimport { PluginDebugSessionContributionRegistry } from './debug/plugin-debug-session-contribution-registry';\nimport { PluginDebugService } from './debug/plugin-debug-service';\nimport { DebugService } from '@theia/debug/lib/common/debug-service';\nimport { PluginSharedStyle } from './plugin-shared-style';\nimport { FSResourceResolver } from './file-system-main';\nimport { SelectionProviderCommandContribution } from './selection-provider-command';\nimport { ViewColumnService } from './view-column-service';\nimport { ViewContextKeyService } from './view/view-context-key-service';\nimport { PluginViewWidget, PluginViewWidgetIdentifier } from './view/plugin-view-widget';\nimport { TreeViewWidgetIdentifier, VIEW_ITEM_CONTEXT_MENU, PluginTree, TreeViewWidget, PluginTreeModel } from './view/tree-view-widget';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { LanguagesMainFactory, OutputChannelRegistryFactory } from '../../common';\nimport { LanguagesMainImpl } from './languages-main';\nimport { OutputChannelRegistryMainImpl } from './output-channel-registry-main';\nimport { InPluginFileSystemWatcherManager } from './in-plugin-filesystem-watcher-manager';\nimport { WebviewWidget } from './webview/webview';\nimport { WebviewEnvironment } from './webview/webview-environment';\nimport { WebviewThemeDataProvider } from './webview/webview-theme-data-provider';\nimport { bindWebviewPreferences } from './webview/webview-preferences';\nimport { WebviewResourceLoader, WebviewResourceLoaderPath } from '../common/webview-protocol';\nimport { WebviewResourceCache } from './webview/webview-resource-cache';\nimport { PluginIconThemeService, PluginIconThemeFactory, PluginIconThemeDefinition, PluginIconTheme } from './plugin-icon-theme-service';\nimport { PluginTreeViewNodeLabelProvider } from './view/plugin-tree-view-node-label-provider';\nimport { WebviewWidgetFactory } from './webview/webview-widget-factory';\n\nexport default new ContainerModule((bind, unbind, isBound, rebind) => {\n\n    bind(LanguagesMainImpl).toSelf().inTransientScope();\n    bind(LanguagesMainFactory).toFactory(context => (rpc: RPCProtocol) => {\n        const child = context.container.createChild();\n        child.bind(RPCProtocol).toConstantValue(rpc);\n        return child.get(LanguagesMainImpl);\n    });\n\n    bind(OutputChannelRegistryMainImpl).toSelf().inTransientScope();\n    bind(OutputChannelRegistryFactory).toFactory(context => () => {\n        const child = context.container.createChild();\n        return child.get(OutputChannelRegistryMainImpl);\n    });\n\n    bind(ModalNotification).toSelf().inSingletonScope();\n\n    bind(HostedPluginSupport).toSelf().inSingletonScope();\n    bind(HostedPluginWatcher).toSelf().inSingletonScope();\n    bind(SelectionProviderCommandContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(SelectionProviderCommandContribution);\n\n    bind(OpenUriCommandHandler).toSelf().inSingletonScope();\n    bind(PluginApiFrontendContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(PluginApiFrontendContribution);\n\n    bind(EditorModelService).toSelf().inSingletonScope();\n\n    bind(UntitledResourceResolver).toSelf().inSingletonScope();\n    bind(ResourceResolver).toService(UntitledResourceResolver);\n\n    bind(FrontendApplicationContribution).toDynamicValue(ctx => ({\n        onStart(): MaybePromise<void> {\n            ctx.container.get(HostedPluginSupport).onStart(ctx.container);\n        }\n    }));\n    bind(HostedPluginServer).toDynamicValue(ctx => {\n        const connection = ctx.container.get(WebSocketConnectionProvider);\n        const hostedWatcher = ctx.container.get(HostedPluginWatcher);\n        return connection.createProxy<HostedPluginServer>(hostedServicePath, hostedWatcher.getHostedPluginClient());\n    }).inSingletonScope();\n\n    bind(PluginPathsService).toDynamicValue(ctx => {\n        const connection = ctx.container.get(WebSocketConnectionProvider);\n        return connection.createProxy<PluginPathsService>(pluginPathsServicePath);\n    }).inSingletonScope();\n\n    bindViewContribution(bind, PluginFrontendViewContribution);\n\n    bind(PluginWidget).toSelf();\n    bind(WidgetFactory).toDynamicValue(ctx => ({\n        id: PluginFrontendViewContribution.PLUGINS_WIDGET_FACTORY_ID,\n        createWidget: () => ctx.container.get(PluginWidget)\n    }));\n\n    bind(PluginExtDeployCommandService).toSelf().inSingletonScope();\n    bind(PluginServer).toDynamicValue(ctx => {\n        const provider = ctx.container.get(WebSocketConnectionProvider);\n        return provider.createProxy<PluginServer>(pluginServerJsonRpcPath);\n    }).inSingletonScope();\n\n    bind(ViewContextKeyService).toSelf().inSingletonScope();\n\n    bind(PluginTreeViewNodeLabelProvider).toSelf().inSingletonScope();\n    bind(LabelProviderContribution).toService(PluginTreeViewNodeLabelProvider);\n    bind(WidgetFactory).toDynamicValue(({ container }) => ({\n        id: PLUGIN_VIEW_DATA_FACTORY_ID,\n        createWidget: (identifier: TreeViewWidgetIdentifier) => {\n            const child = createTreeContainer(container, {\n                contextMenuPath: VIEW_ITEM_CONTEXT_MENU,\n                globalSelection: true\n            });\n            child.bind(TreeViewWidgetIdentifier).toConstantValue(identifier);\n            child.bind(PluginTree).toSelf();\n            child.rebind(TreeImpl).toService(PluginTree);\n            child.bind(PluginTreeModel).toSelf();\n            child.rebind(TreeModelImpl).toService(PluginTreeModel);\n            child.bind(TreeViewWidget).toSelf();\n            child.rebind(TreeWidget).toService(TreeViewWidget);\n            return child.get(TreeWidget);\n        }\n    })).inSingletonScope();\n\n    bindWebviewPreferences(bind);\n    bind(WebviewEnvironment).toSelf().inSingletonScope();\n    bind(WebviewThemeDataProvider).toSelf().inSingletonScope();\n    bind(WebviewResourceLoader).toDynamicValue(ctx =>\n        WebSocketConnectionProvider.createProxy(ctx.container, WebviewResourceLoaderPath)\n    ).inSingletonScope();\n    bind(WebviewResourceCache).toSelf().inSingletonScope();\n    bind(WebviewWidget).toSelf();\n    bind(WebviewWidgetFactory).toDynamicValue(ctx => new WebviewWidgetFactory(ctx.container)).inSingletonScope();\n    bind(WidgetFactory).toService(WebviewWidgetFactory);\n\n    bind(PluginViewWidget).toSelf();\n    bind(WidgetFactory).toDynamicValue(({ container }) => ({\n        id: PLUGIN_VIEW_FACTORY_ID,\n        createWidget: (identifier: PluginViewWidgetIdentifier) => {\n            const child = container.createChild();\n            child.bind(PluginViewWidgetIdentifier).toConstantValue(identifier);\n            return child.get(PluginViewWidget);\n        }\n    })).inSingletonScope();\n\n    bind(WidgetFactory).toDynamicValue(({ container }) => ({\n        id: PLUGIN_VIEW_CONTAINER_FACTORY_ID,\n        createWidget: (identifier: ViewContainerIdentifier) =>\n            container.get<ViewContainer.Factory>(ViewContainer.Factory)(identifier)\n    })).inSingletonScope();\n    bind(PluginSharedStyle).toSelf().inSingletonScope();\n    bind(PluginViewRegistry).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(PluginViewRegistry);\n\n    bind(PluginIconThemeFactory).toFactory<PluginIconTheme>(({ container }) => (definition: PluginIconThemeDefinition) => {\n        const child = container.createChild();\n        child.bind(PluginIconThemeDefinition).toConstantValue(definition);\n        child.bind(PluginIconTheme).toSelf().inSingletonScope();\n        return child.get(PluginIconTheme);\n    });\n    bind(PluginIconThemeService).toSelf().inSingletonScope();\n    bind(LabelProviderContribution).toService(PluginIconThemeService);\n\n    bind(MenusContributionPointHandler).toSelf().inSingletonScope();\n    bind(KeybindingsContributionPointHandler).toSelf().inSingletonScope();\n    bind(PluginContributionHandler).toSelf().inSingletonScope();\n\n    bind(InPluginFileSystemWatcherManager).toSelf().inSingletonScope();\n    bind(TextContentResourceResolver).toSelf().inSingletonScope();\n    bind(ResourceResolver).toService(TextContentResourceResolver);\n    bind(FSResourceResolver).toSelf().inSingletonScope();\n    bind(ResourceResolver).toService(FSResourceResolver);\n    bindContributionProvider(bind, MainPluginApiProvider);\n\n    bind(LanguageClientContributionProviderImpl).toSelf().inSingletonScope();\n    bind(LanguageClientContributionProvider).toService(LanguageClientContributionProviderImpl);\n    bind(LanguageClientProviderImpl).toSelf().inSingletonScope();\n    rebind(LanguageClientProvider).toService(LanguageClientProviderImpl);\n\n    bind(PluginDebugService).toSelf().inSingletonScope();\n    rebind(DebugService).toService(PluginDebugService);\n    bind(PluginDebugSessionContributionRegistry).toSelf().inSingletonScope();\n    rebind(DebugSessionContributionRegistry).toService(PluginDebugSessionContributionRegistry);\n\n    bind(ViewColumnService).toSelf().inSingletonScope();\n});\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as React from 'react';\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Message } from '@phosphor/messaging';\nimport { PluginMetadata } from '../../common/plugin-protocol';\nimport { ReactWidget } from '@theia/core/lib/browser/widgets/react-widget';\nimport { AlertMessage } from '@theia/core/lib/browser/widgets/alert-message';\nimport { HostedPluginSupport, PluginProgressLocation } from '../../hosted/browser/hosted-plugin';\nimport { ProgressBarFactory } from '@theia/core/lib/browser/progress-bar-factory';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n@injectable()\nexport class PluginWidget extends ReactWidget {\n\n    @inject(HostedPluginSupport)\n    protected readonly pluginService: HostedPluginSupport;\n\n    @inject(ProgressBarFactory)\n    protected readonly progressBarFactory: ProgressBarFactory;\n\n    constructor() {\n        super();\n        this.id = 'plugins';\n        this.title.label = 'Plugins';\n        this.title.caption = 'Plugins';\n        this.title.iconClass = 'fa plugins-tab-icon';\n        this.title.closable = true;\n        this.node.tabIndex = 0;\n        this.addClass('theia-plugins');\n\n        this.update();\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.push(this.pluginService.onDidChangePlugins(() => this.update()));\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.node.focus();\n    }\n\n    protected readonly toDisposeProgress = new DisposableCollection();\n\n    protected render(): React.ReactNode {\n        return <div ref={ref => {\n            this.toDisposeProgress.dispose();\n            this.toDispose.push(this.toDisposeProgress);\n            if (ref) {\n                this.toDispose.push(this.progressBarFactory({ container: this.node, insertMode: 'prepend', locationId: PluginProgressLocation }));\n            }\n        }}>{this.doRender()}</div>;\n    }\n\n    protected doRender(): React.ReactNode {\n        const plugins = this.pluginService.plugins;\n        if (!plugins.length) {\n            return <AlertMessage type='INFO' header='No plugins currently available.' />;\n        }\n        return <React.Fragment>{this.renderPlugins(plugins)}</React.Fragment>;\n    }\n\n    protected renderPlugins(plugins: PluginMetadata[]): React.ReactNode {\n        return <div id='pluginListContainer'>\n            {plugins.sort((a, b) => this.compareMetadata(a, b)).map(plugin => this.renderPlugin(plugin))}\n        </div>;\n    }\n\n    private renderPlugin(plugin: PluginMetadata): JSX.Element {\n        return <div key={plugin.model.name} className={this.createPluginClassName(plugin)}>\n            <div className='column flexcontainer pluginInformationContainer'>\n                <div className='row flexcontainer'>\n                    <div className='fa fa-puzzle-piece fa-2x fa-fw'></div>\n                    <div title={plugin.model.name} className='pluginName noWrapInfo'>{plugin.model.name}</div>\n                </div>\n                <div className='row flexcontainer'>\n                    <div className='pluginVersion'>{plugin.model.version}</div>\n                </div>\n                <div className='row flexcontainer'>\n                    <div className='pluginDescription noWrapInfo'>{plugin.model.description}</div>\n                </div>\n                <div className='row flexcontainer'>\n                    <div className='pluginPublisher noWrapInfo flexcontainer'>{plugin.model.publisher}</div>\n                </div>\n            </div>\n        </div>;\n    }\n\n    protected createPluginClassName(plugin: PluginMetadata): string {\n        const classNames = ['pluginHeaderContainer'];\n        return classNames.join(' ');\n    }\n\n    /**\n     * Compare two plugins based on their names, and publishers.\n     * @param a the first plugin metadata.\n     * @param b the second plugin metadata.\n     */\n    protected compareMetadata(a: PluginMetadata, b: PluginMetadata): number {\n        // Determine the name of the plugins.\n        const nameA = a.model.name.toLowerCase();\n        const nameB = b.model.name.toLowerCase();\n\n        // Determine the publisher of the plugin (when names are equal).\n        const publisherA = a.model.publisher.toLowerCase();\n        const publisherB = b.model.publisher.toLowerCase();\n\n        return (nameA === nameA)\n            ? nameA.localeCompare(nameB)\n            : publisherA.localeCompare(publisherB);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { CommandRegistry, CommandContribution } from '@theia/core/lib/common';\nimport { PluginExtDeployCommandService } from './plugin-ext-deploy-command';\nimport { OpenUriCommandHandler } from './commands';\nimport URI from '@theia/core/lib/common/uri';\n\n@injectable()\nexport class PluginApiFrontendContribution implements CommandContribution {\n\n    @inject(PluginExtDeployCommandService)\n    protected readonly pluginExtDeployCommandService: PluginExtDeployCommandService;\n\n    @inject(OpenUriCommandHandler)\n    protected readonly openUriCommandHandler: OpenUriCommandHandler;\n\n    registerCommands(commands: CommandRegistry): void {\n\n        commands.registerCommand(PluginExtDeployCommandService.COMMAND, {\n            execute: () => this.pluginExtDeployCommandService.deploy()\n        });\n\n        commands.registerCommand(OpenUriCommandHandler.COMMAND_METADATA, {\n            execute: (arg: URI) => this.openUriCommandHandler.execute(arg),\n            isVisible: () => false\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { AbstractViewContribution } from '@theia/core/lib/browser/shell/view-contribution';\nimport { PluginWidget } from './plugin-ext-widget';\n\n@injectable()\nexport class PluginFrontendViewContribution extends AbstractViewContribution<PluginWidget> {\n\n    public static PLUGINS_WIDGET_FACTORY_ID = 'plugins';\n\n    constructor() {\n        super({\n            widgetId: PluginFrontendViewContribution.PLUGINS_WIDGET_FACTORY_ID,\n            widgetName: 'Plugins',\n            defaultWidgetOptions: {\n                area: 'left',\n                rank: 400\n            },\n            toggleCommandId: 'pluginsView:toggle',\n            toggleKeybinding: 'ctrlcmd+shift+l'\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code is copied and modified from:\n// https://github.com/microsoft/vscode/blob/7cf4cca47aa025a590fc939af54932042302be63/src/vs/workbench/services/themes/browser/fileIconThemeData.ts\n\nimport debounce = require('lodash.debounce');\nimport * as jsoncparser from 'jsonc-parser';\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { FileSystem, FileStat } from '@theia/filesystem/lib/common';\nimport { IconThemeService, IconTheme, IconThemeDefinition } from '@theia/core/lib/browser/icon-theme-service';\nimport { IconThemeContribution, DeployedPlugin, UiTheme, getPluginId } from '../../common/plugin-protocol';\nimport URI from '@theia/core/lib/common/uri';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RecursivePartial } from '@theia/core/lib/common/types';\nimport { LabelProviderContribution, DidChangeLabelEvent, LabelProvider, URIIconReference } from '@theia/core/lib/browser/label-provider';\nimport { ThemeType } from '@theia/core/lib/browser/theming';\nimport { FileStatNode, DirNode, FileSystemWatcher, FileChangeEvent } from '@theia/filesystem/lib/browser';\nimport { WorkspaceRootNode } from '@theia/navigator/lib/browser/navigator-tree';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\n\nexport interface PluginIconDefinition {\n    iconPath: string;\n    fontColor: string;\n    fontCharacter: string;\n    fontSize: string;\n    fontId: string;\n}\n\nexport interface PluginFontDefinition {\n    id: string;\n    weight: string;\n    style: string;\n    size: string;\n    src: { path: string; format: string; }[];\n}\n\nexport interface PluginIconsAssociation {\n    folder?: string;\n    file?: string;\n    folderExpanded?: string;\n    rootFolder?: string;\n    rootFolderExpanded?: string;\n    folderNames?: { [folderName: string]: string; };\n    folderNamesExpanded?: { [folderName: string]: string; };\n    fileExtensions?: { [extension: string]: string; };\n    fileNames?: { [fileName: string]: string; };\n    languageIds?: { [languageId: string]: string; };\n}\n\nexport interface PluginIconDefinitions {\n    [key: string]: PluginIconDefinition\n}\n\nexport interface PluginIconThemeDocument extends PluginIconsAssociation {\n    iconDefinitions: PluginIconDefinitions;\n    fonts: PluginFontDefinition[];\n    light?: PluginIconsAssociation;\n    highContrast?: PluginIconsAssociation;\n    hidesExplorerArrows?: boolean;\n}\n\nexport const PluginIconThemeFactory = Symbol('PluginIconThemeFactory');\nexport type PluginIconThemeFactory = (definition: PluginIconThemeDefinition) => PluginIconTheme;\n\n@injectable()\nexport class PluginIconThemeDefinition implements IconThemeDefinition, IconThemeContribution {\n    id: string;\n    label: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n    pluginId: string;\n    packageUri: string;\n    hasFileIcons?: boolean;\n    hasFolderIcons?: boolean;\n    hidesExplorerArrows?: boolean;\n}\n\n@injectable()\nexport class PluginIconTheme extends PluginIconThemeDefinition implements IconTheme, Disposable {\n\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    @inject(FileSystemWatcher)\n    protected readonly fsWatcher: FileSystemWatcher;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(PluginIconThemeDefinition)\n    protected readonly definition: PluginIconThemeDefinition;\n\n    protected readonly onDidChangeEmitter = new Emitter<DidChangeLabelEvent>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n\n    protected readonly toDeactivate = new DisposableCollection();\n    protected readonly toUnload = new DisposableCollection();\n    protected readonly toDisposeStyleElement = new DisposableCollection();\n    protected readonly toDispose = new DisposableCollection(\n        this.toDeactivate, this.toDisposeStyleElement, this.toUnload, this.onDidChangeEmitter\n    );\n\n    protected packageRootUri: URI;\n    protected locationUri: URI;\n\n    protected styleSheetContent: string | undefined;\n    protected readonly icons = new Set<string>();\n\n    @postConstruct()\n    protected init(): void {\n        Object.assign(this, this.definition);\n        this.packageRootUri = new URI(this.packageUri);\n        this.locationUri = new URI(this.uri).parent;\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire({ affects: () => true });\n    }\n\n    activate(): Disposable {\n        if (!this.toDeactivate.disposed) {\n            return this.toDeactivate;\n        }\n        this.toDeactivate.push(Disposable.create(() => this.fireDidChange()));\n        this.doActivate();\n        return this.toDeactivate;\n    }\n\n    protected async doActivate(): Promise<void> {\n        await this.load();\n        this.updateStyleElement();\n    }\n\n    protected updateStyleElement(): void {\n        this.toDisposeStyleElement.dispose();\n        if (this.toDeactivate.disposed || !this.styleSheetContent) {\n            return;\n        }\n        const styleElement = document.createElement('style');\n        styleElement.type = 'text/css';\n        styleElement.className = 'theia-icon-theme';\n        styleElement.innerHTML = this.styleSheetContent;\n        document.head.appendChild(styleElement);\n        const toRemoveStyleElement = Disposable.create(() => styleElement.remove());\n        this.toDisposeStyleElement.push(toRemoveStyleElement);\n        this.toDeactivate.push(toRemoveStyleElement);\n        this.fireDidChange();\n    }\n\n    protected reload = debounce(() => {\n        this.toUnload.dispose();\n        this.doActivate();\n    }, 50);\n\n    /**\n     * This should be aligned with\n     * https://github.com/microsoft/vscode/blob/7cf4cca47aa025a590fc939af54932042302be63/src/vs/workbench/services/themes/browser/fileIconThemeData.ts#L201\n     */\n    protected async load(): Promise<void> {\n        if (this.styleSheetContent !== undefined) {\n            return;\n        }\n        this.styleSheetContent = '';\n        this.toUnload.push(Disposable.create(() => {\n            this.styleSheetContent = undefined;\n            this.hasFileIcons = undefined;\n            this.hasFolderIcons = undefined;\n            this.hidesExplorerArrows = undefined;\n            this.icons.clear();\n        }));\n\n        const { content } = await this.fileSystem.resolveContent(this.uri);\n        const json: RecursivePartial<PluginIconThemeDocument> = jsoncparser.parse(content, undefined, { disallowComments: false });\n        this.hidesExplorerArrows = !!json.hidesExplorerArrows;\n\n        const uri = new URI(this.uri);\n        const toUnwatch = await this.fsWatcher.watchFileChanges(uri);\n        if (this.toUnload.disposed) {\n            toUnwatch.dispose();\n        } else {\n            this.toUnload.push(toUnwatch);\n            this.toUnload.push(this.fsWatcher.onFilesChanged(e => {\n                if (FileChangeEvent.isChanged(e, uri)) {\n                    this.reload();\n                }\n            }));\n        }\n\n        const iconDefinitions = json.iconDefinitions;\n        if (!iconDefinitions) {\n            return;\n        }\n        const definitionSelectors = new Map<string, string[]>();\n        const acceptSelector = (themeType: ThemeType, definitionId: string, ...icons: string[]) => {\n            if (!iconDefinitions[definitionId]) {\n                return;\n            }\n            let selector = '';\n            for (const icon of icons) {\n                if (icon) {\n                    selector += '.' + icon;\n                    this.icons.add(icon);\n                }\n            }\n            if (!selector) {\n                return;\n            }\n            const selectors = definitionSelectors.get(definitionId) || [];\n            if (themeType !== 'dark') {\n                selector = '.theia-' + themeType + ' ' + selector;\n            }\n            selectors.push(selector);\n            selectors.push(selector + '::before');\n            definitionSelectors.set(definitionId, selectors);\n        };\n        this.collectSelectors(json, acceptSelector.bind(undefined, 'dark'));\n        if (json.light) {\n            this.collectSelectors(json.light, acceptSelector.bind(undefined, 'light'));\n        }\n        if (json.highContrast) {\n            this.collectSelectors(json.highContrast, acceptSelector.bind(undefined, 'hc'));\n        }\n\n        if (!this.icons.size) {\n            return;\n        }\n\n        const fonts = json.fonts;\n        if (Array.isArray(fonts)) {\n            for (const font of fonts) {\n                if (font) {\n                    let src = '';\n                    if (Array.isArray(font.src)) {\n                        for (const srcLocation of font.src) {\n                            if (srcLocation && srcLocation.path) {\n                                const cssUrl = this.toCSSUrl(srcLocation.path);\n                                if (cssUrl) {\n                                    if (src) {\n                                        src += ', ';\n                                    }\n                                    src += `${cssUrl} format('${srcLocation.format}')`;\n                                }\n                            }\n                        }\n                    }\n                    if (src) {\n                        this.styleSheetContent += `@font-face {\n    src: ${src};\n    font-family: '${font.id}';\n    font-weight: ${font.weight};\n    font-style: ${font.style};\n}\n`;\n                    }\n                }\n            }\n            const firstFont = fonts[0];\n            if (firstFont && firstFont.id) {\n                this.styleSheetContent += `.${this.fileIcon}::before, .${this.folderIcon}::before, .${this.rootFolderIcon}::before {\n    font-family: '${firstFont.id}';\n    font-size: ${firstFont.size || '150%'};\n    -webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\tvertical-align: top;\n}\n`;\n            }\n        }\n\n        for (const definitionId of definitionSelectors.keys()) {\n            const iconDefinition = iconDefinitions[definitionId];\n            const selectors = definitionSelectors.get(definitionId);\n            if (selectors && iconDefinition) {\n                const cssUrl = this.toCSSUrl(iconDefinition.iconPath);\n                if (cssUrl) {\n                    this.styleSheetContent += `${selectors.join(', ')} {\n    content: ' ';\n    background-image: ${cssUrl};\n\tbackground-size: 16px;\n\tbackground-position: left center;\n\tbackground-repeat: no-repeat;\n}\n`;\n                }\n                if (iconDefinition.fontCharacter || iconDefinition.fontColor) {\n                    let body = '';\n                    if (iconDefinition.fontColor) {\n                        body += ` color: ${iconDefinition.fontColor};`;\n                    }\n                    if (iconDefinition.fontCharacter) {\n                        body += ` content: '${iconDefinition.fontCharacter}';`;\n                    }\n                    if (iconDefinition.fontSize) {\n                        body += ` font-size: ${iconDefinition.fontSize};`;\n                    }\n                    if (iconDefinition.fontId) {\n                        body += ` font-family: ${iconDefinition.fontId};`;\n                    }\n                    this.styleSheetContent += `${selectors.join(', ')} {${body} }\\n`;\n                }\n            }\n        }\n    }\n\n    protected toCSSUrl(iconPath: string | undefined): string | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        const iconUri = this.locationUri.resolve(iconPath);\n        const relativePath = this.packageRootUri.path.relative(iconUri.path.normalize());\n        return relativePath && `url('${new Endpoint({\n            path: `hostedPlugin/${this.pluginId}/${encodeURIComponent(relativePath.normalize().toString())}`\n        }).getRestUrl().toString()}')`;\n    }\n\n    protected escapeCSS(value: string): string {\n        value = value.replace(/[^\\-a-zA-Z0-9]/g, '-');\n        if (value.charAt(0).match(/[0-9\\-]/)) {\n            value = '-' + value;\n        }\n        return value;\n    }\n\n    protected readonly fileIcon = 'theia-plugin-file-icon';\n    protected readonly folderIcon = 'theia-plugin-folder-icon';\n    protected readonly folderExpandedIcon = 'theia-plugin-folder-expanded-icon';\n    protected readonly rootFolderIcon = 'theia-plugin-root-folder-icon';\n    protected readonly rootFolderExpandedIcon = 'theia-plugin-root-folder-expanded-icon';\n    protected folderNameIcon(folderName: string): string {\n        return 'theia-plugin-' + this.escapeCSS(folderName.toLowerCase()) + '-folder-name-icon';\n    }\n    protected expandedFolderNameIcon(folderName: string): string {\n        return 'theia-plugin-' + this.escapeCSS(folderName.toLowerCase()) + '-expanded-folder-name-icon';\n    }\n    protected fileNameIcon(fileName: string): string[] {\n        fileName = fileName.toLowerCase();\n        const extIndex = fileName.indexOf('.');\n        const icons = extIndex !== -1 ? this.fileExtensionIcon(fileName.substr(extIndex + 1)) : [];\n        icons.unshift('theia-plugin-' + this.escapeCSS(fileName) + '-file-name-icon');\n        return icons;\n    }\n    protected fileExtensionIcon(fileExtension: string): string[] {\n        fileExtension = fileExtension.toString();\n        const icons = [];\n        const segments = fileExtension.split('.');\n        if (segments.length) {\n            if (segments.length) {\n                for (let i = 0; i < segments.length; i++) {\n                    icons.push('theia-plugin-' + this.escapeCSS(segments.slice(i).join('.')) + '-ext-file-icon');\n                }\n                icons.push('theia-plugin-ext-file-icon'); // extra segment to increase file-ext score\n            }\n        }\n        return icons;\n    }\n    protected languageIcon(languageId: string): string {\n        return 'theia-plugin-' + this.escapeCSS(languageId) + '-lang-file-icon';\n    }\n\n    protected collectSelectors(\n        associations: RecursivePartial<PluginIconsAssociation>,\n        accept: (definitionId: string, ...icons: string[]) => void\n    ): void {\n        if (associations.folder) {\n            accept(associations.folder, this.folderIcon);\n            this.hasFolderIcons = true;\n        }\n        if (associations.folderExpanded) {\n            accept(associations.folderExpanded, this.folderExpandedIcon);\n            this.hasFolderIcons = true;\n        }\n        const rootFolder = associations.rootFolder || associations.folder;\n        if (rootFolder) {\n            accept(rootFolder, this.rootFolderIcon);\n            this.hasFolderIcons = true;\n        }\n        const rootFolderExpanded = associations.rootFolderExpanded || associations.folderExpanded;\n        if (rootFolderExpanded) {\n            accept(rootFolderExpanded, this.rootFolderExpandedIcon);\n            this.hasFolderIcons = true;\n        }\n        if (associations.file) {\n            accept(associations.file, this.fileIcon);\n            this.hasFileIcons = true;\n        }\n        const folderNames = associations.folderNames;\n        if (folderNames) {\n            // eslint-disable-next-line guard-for-in\n            for (const folderName in folderNames) {\n                accept(folderNames[folderName]!, this.folderNameIcon(folderName), this.folderIcon);\n                this.hasFolderIcons = true;\n            }\n        }\n        const folderNamesExpanded = associations.folderNamesExpanded;\n        if (folderNamesExpanded) {\n            // eslint-disable-next-line guard-for-in\n            for (const folderName in folderNamesExpanded) {\n                accept(folderNamesExpanded[folderName]!, this.expandedFolderNameIcon(folderName), this.folderExpandedIcon);\n                this.hasFolderIcons = true;\n            }\n        }\n        const languageIds = associations.languageIds;\n        if (languageIds) {\n            if (!languageIds.jsonc && languageIds.json) {\n                languageIds.jsonc = languageIds.json;\n            }\n            // eslint-disable-next-line guard-for-in\n            for (const languageId in languageIds) {\n                accept(languageIds[languageId]!, this.languageIcon(languageId), this.fileIcon);\n                this.hasFileIcons = true;\n            }\n        }\n        const fileExtensions = associations.fileExtensions;\n        if (fileExtensions) {\n            // eslint-disable-next-line guard-for-in\n            for (const fileExtension in fileExtensions) {\n                accept(fileExtensions[fileExtension]!, ...this.fileExtensionIcon(fileExtension), this.fileIcon);\n                this.hasFileIcons = true;\n            }\n        }\n        const fileNames = associations.fileNames;\n        if (fileNames) {\n            // eslint-disable-next-line guard-for-in\n            for (const fileName in fileNames) {\n                accept(fileNames[fileName]!, ...this.fileNameIcon(fileName), this.fileIcon);\n                this.hasFileIcons = true;\n            }\n        }\n    }\n\n    /**\n     * This should be aligned with\n     * https://github.com/microsoft/vscode/blob/7cf4cca47aa025a590fc939af54932042302be63/src/vs/editor/common/services/getIconClasses.ts#L5\n     */\n    getIcon(element: URI | URIIconReference | FileStat | FileStatNode | WorkspaceRootNode): string {\n        let icon = '';\n        for (const className of this.getClassNames(element)) {\n            if (this.icons.has(className)) {\n                if (icon) {\n                    icon += ' ';\n                }\n                icon += className;\n            }\n        }\n        return icon;\n    }\n\n    protected getClassNames(element: URI | URIIconReference | FileStat | FileStatNode | WorkspaceRootNode): string[] {\n        if (WorkspaceRootNode.is(element)) {\n            const name = this.labelProvider.getName(element);\n            if (element.expanded) {\n                return [this.rootFolderExpandedIcon, this.expandedFolderNameIcon(name)];\n            }\n            return [this.rootFolderIcon, this.folderNameIcon(name)];\n        }\n        if (DirNode.is(element)) {\n            if (element.expanded) {\n                const name = this.labelProvider.getName(element);\n                return [this.folderExpandedIcon, this.expandedFolderNameIcon(name)];\n            }\n            return this.getFolderClassNames(element);\n        }\n        if (FileStatNode.is(element)) {\n            return this.getFileClassNames(element, element.fileStat.uri);\n        }\n        if (FileStat.is(element)) {\n            if (element.isDirectory) {\n                return this.getFolderClassNames(element);\n            }\n            return this.getFileClassNames(element, element.uri);\n        }\n        if (URIIconReference.is(element)) {\n            if (element.id === 'folder') {\n                return this.getFolderClassNames(element);\n            }\n            return this.getFileClassNames(element, element.uri && element.uri.toString());\n        }\n        return this.getFileClassNames(element, element.toString());\n    }\n\n    protected getFolderClassNames(element: object): string[] {\n        const name = this.labelProvider.getName(element);\n        return [this.folderIcon, this.folderNameIcon(name)];\n    }\n\n    protected getFileClassNames(element: object, uri?: string): string[] {\n        const name = this.labelProvider.getName(element);\n        const classNames = this.fileNameIcon(name);\n        if (uri) {\n            const language = monaco.services.StaticServices.modeService.get().createByFilepathOrFirstLine(monaco.Uri.parse(uri));\n            classNames.push(this.languageIcon(language.languageIdentifier.language));\n            classNames.unshift(this.fileIcon);\n        }\n        return classNames;\n    }\n\n}\n\n@injectable()\nexport class PluginIconThemeService implements LabelProviderContribution {\n\n    @inject(IconThemeService)\n    protected readonly iconThemeService: IconThemeService;\n\n    @inject(PluginIconThemeFactory)\n    protected readonly iconThemeFactory: PluginIconThemeFactory;\n\n    protected readonly onDidChangeEmitter = new Emitter<DidChangeLabelEvent>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire({ affects: () => true });\n    }\n\n    register(contribution: IconThemeContribution, plugin: DeployedPlugin): Disposable {\n        const pluginId = getPluginId(plugin.metadata.model);\n        const packageUri = plugin.metadata.model.packageUri;\n        const iconTheme = this.iconThemeFactory({\n            id: contribution.id,\n            label: contribution.label || new URI(contribution.uri).path.base,\n            description: contribution.description,\n            uri: contribution.uri,\n            uiTheme: contribution.uiTheme,\n            pluginId,\n            packageUri\n        });\n        return new DisposableCollection(\n            iconTheme,\n            iconTheme.onDidChange(() => this.fireDidChange()),\n            this.iconThemeService.register(iconTheme)\n        );\n    }\n\n    canHandle(element: object): number {\n        const current = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        if (current instanceof PluginIconTheme && (\n            (element instanceof URI && element.scheme === 'file') || URIIconReference.is(element) || FileStat.is(element) || FileStatNode.is(element)\n        )) {\n            return Number.MAX_SAFE_INTEGER;\n        }\n        return 0;\n    }\n\n    getIcon(element: URI | URIIconReference | FileStat | FileStatNode | WorkspaceRootNode): string | undefined {\n        const current = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        if (current instanceof PluginIconTheme) {\n            return current.getIcon(element);\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { StorageMain } from '../../common/plugin-api-rpc';\nimport { PluginServer, PluginStorageKind } from '../../common/plugin-protocol';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../../common/types';\nimport { WorkspaceService } from '@theia/workspace/lib/browser/workspace-service';\n\nexport class StorageMainImpl implements StorageMain {\n\n    private readonly pluginServer: PluginServer;\n    private readonly workspaceService: WorkspaceService;\n\n    constructor(container: interfaces.Container) {\n        this.pluginServer = container.get(PluginServer);\n        this.workspaceService = container.get(WorkspaceService);\n    }\n\n    $set(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        return this.pluginServer.setStorageValue(key, value, this.toKind(isGlobal));\n    }\n\n    $get(key: string, isGlobal: boolean): Promise<KeysToAnyValues> {\n        return this.pluginServer.getStorageValue(key, this.toKind(isGlobal));\n    }\n\n    $getAll(isGlobal: boolean): Promise<KeysToKeysToAnyValue> {\n        return this.pluginServer.getAllStorageValues(this.toKind(isGlobal));\n    }\n\n    protected toKind(isGlobal: boolean): PluginStorageKind {\n        if (isGlobal) {\n            return undefined;\n        }\n        return {\n            workspace: this.workspaceService.workspace,\n            roots: this.workspaceService.tryGetRoots()\n        };\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol, RPCProtocolImpl } from '../../common/rpc-protocol';\n\n@injectable()\nexport class PluginWorker {\n\n    private worker: Worker;\n    public readonly rpc: RPCProtocol;\n    constructor() {\n        const emitter = new Emitter();\n        this.worker = new (require('../../hosted/browser/worker/worker-main'));\n        this.worker.onmessage = message => {\n            emitter.fire(message.data);\n        };\n        this.worker.onerror = e => console.error(e);\n\n        this.rpc = new RPCProtocolImpl({\n            onMessage: emitter.event,\n            send: (m: {}) => {\n                this.worker.postMessage(m);\n            }\n        });\n\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PreferenceService,\n    PreferenceServiceImpl,\n    PreferenceScope,\n    PreferenceProviderProvider\n} from '@theia/core/lib/browser/preferences';\nimport { interfaces } from 'inversify';\nimport {\n    MAIN_RPC_CONTEXT,\n    PreferenceRegistryExt,\n    PreferenceRegistryMain,\n    PreferenceData,\n    PreferenceChangeExt,\n} from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { ConfigurationTarget } from '../../plugin/types-impl';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { FileStat } from '@theia/filesystem/lib/common/filesystem';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport function getPreferences(preferenceProviderProvider: PreferenceProviderProvider, rootFolders: FileStat[]): PreferenceData {\n    const folders = rootFolders.map(root => root.uri.toString());\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return PreferenceScope.getScopes().reduce((result: { [key: number]: any }, scope: PreferenceScope) => {\n        result[scope] = {};\n        const provider = preferenceProviderProvider(scope);\n        if (scope === PreferenceScope.Folder) {\n            for (const f of folders) {\n                const folderPrefs = provider.getPreferences(f);\n                result[scope][f] = folderPrefs;\n            }\n        } else {\n            result[scope] = provider.getPreferences();\n        }\n        return result;\n    }, {} as PreferenceData);\n}\n\nexport class PreferenceRegistryMainImpl implements PreferenceRegistryMain, Disposable {\n    private readonly proxy: PreferenceRegistryExt;\n    private readonly preferenceService: PreferenceService;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(prc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = prc.getProxy(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT);\n        this.preferenceService = container.get(PreferenceService);\n        const preferenceProviderProvider = container.get<PreferenceProviderProvider>(PreferenceProviderProvider);\n        const preferenceServiceImpl = container.get(PreferenceServiceImpl);\n        const workspaceService = container.get(WorkspaceService);\n\n        this.toDispose.push(preferenceServiceImpl.onPreferencesChanged(changes => {\n            // it HAS to be synchronous to propagate changes before update/remove response\n\n            const roots = workspaceService.tryGetRoots();\n            const data = getPreferences(preferenceProviderProvider, roots);\n            const eventData: PreferenceChangeExt[] = [];\n            for (const preferenceName of Object.keys(changes)) {\n                const { newValue } = changes[preferenceName];\n                eventData.push({ preferenceName, newValue });\n            }\n            this.proxy.$acceptConfigurationChanged(data, eventData);\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $updateConfigurationOption(target: boolean | ConfigurationTarget | undefined, key: string, value: any, resource?: string): Promise<void> {\n        const scope = this.parseConfigurationTarget(target);\n        await this.preferenceService.set(key, value, scope, resource);\n    }\n\n    async $removeConfigurationOption(target: boolean | ConfigurationTarget | undefined, key: string, resource?: string): Promise<void> {\n        const scope = this.parseConfigurationTarget(target);\n        await this.preferenceService.set(key, undefined, scope, resource);\n    }\n\n    private parseConfigurationTarget(target?: boolean | ConfigurationTarget): PreferenceScope | undefined {\n        if (typeof target === 'boolean') {\n            return target ? PreferenceScope.User : PreferenceScope.Workspace;\n        }\n        switch (target) {\n            case ConfigurationTarget.Global:\n                return PreferenceScope.User;\n            case ConfigurationTarget.Workspace:\n                return PreferenceScope.Workspace;\n            case ConfigurationTarget.WorkspaceFolder:\n                return PreferenceScope.Folder;\n            default:\n                // PreferenceService knows how to deal with undefined in VS Code compatible way\n                return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { InputBoxOptions, QuickPickItem as QuickPickItemExt } from '@theia/plugin';\nimport { interfaces } from 'inversify';\nimport {\n    QuickOpenModel,\n    QuickOpenItem,\n    QuickOpenMode\n} from '@theia/core/lib/browser/quick-open/quick-open-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport {\n    QuickOpenExt,\n    QuickOpenMain,\n    MAIN_RPC_CONTEXT,\n    PickOptions,\n    PickOpenItem,\n    TransferInputBox,\n    QuickInputTitleButtonHandle,\n    TransferQuickPick\n} from '../../common/plugin-api-rpc';\nimport { MonacoQuickOpenService } from '@theia/monaco/lib/browser/monaco-quick-open-service';\nimport { QuickInputService, LabelProvider } from '@theia/core/lib/browser';\nimport { PluginSharedStyle } from './plugin-shared-style';\nimport { URI } from 'vscode-uri';\nimport { ThemeIcon, QuickInputButton } from '../../plugin/types-impl';\nimport { QuickPickService, QuickPickItem, QuickPickValue } from '@theia/core/lib/common/quick-pick-service';\nimport { QuickTitleBar } from '@theia/core/lib/browser/quick-open/quick-title-bar';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { QuickTitleButtonSide, QuickOpenGroupItem } from '@theia/core/lib/common/quick-open-model';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\nexport class QuickOpenMainImpl implements QuickOpenMain, QuickOpenModel, Disposable {\n\n    private quickInput: QuickInputService;\n    private quickPick: QuickPickService;\n    private quickTitleBar: QuickTitleBar;\n    private doResolve: (value?: number | number[] | PromiseLike<number | number[]> | undefined) => void;\n    private proxy: QuickOpenExt;\n    private delegate: MonacoQuickOpenService;\n    private acceptor: ((items: QuickOpenItem[]) => void) | undefined;\n    private items: QuickOpenItem[] | undefined;\n\n    private readonly sharedStyle: PluginSharedStyle;\n    private readonly labelProvider: LabelProvider;\n\n    private activeElement: HTMLElement | undefined;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT);\n        this.delegate = container.get(MonacoQuickOpenService);\n        this.quickInput = container.get(QuickInputService);\n        this.quickTitleBar = container.get(QuickTitleBar);\n        this.quickPick = container.get(QuickPickService);\n        this.sharedStyle = container.get(PluginSharedStyle);\n        this.labelProvider = container.get(LabelProvider);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private cleanUp(): void {\n        this.items = undefined;\n        this.acceptor = undefined;\n        if (this.activeElement) {\n            this.activeElement.focus({ preventScroll: true });\n        }\n        this.activeElement = undefined;\n    }\n\n    $show(options: PickOptions, token: CancellationToken): Promise<number | number[]> {\n        return new Promise((resolve, reject) => {\n            if (token.isCancellationRequested) {\n                resolve(undefined);\n                return;\n            }\n            this.doResolve = resolve;\n            this.activeElement = window.document.activeElement as HTMLElement;\n            const toDispose = token.onCancellationRequested(() =>\n                this.delegate.hide()\n            );\n            this.delegate.open(this, {\n                fuzzyMatchDescription: options.matchOnDescription,\n                fuzzyMatchLabel: true,\n                fuzzyMatchDetail: options.matchOnDetail,\n                placeholder: options.placeHolder,\n                ignoreFocusOut: options.ignoreFocusLost,\n                onClose: () => {\n                    this.doResolve(undefined);\n                    toDispose.dispose();\n                    this.cleanUp();\n                }\n            });\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $setItems(items: PickOpenItem[]): Promise<any> {\n        this.items = [];\n        for (const i of items) {\n            let item: QuickOpenItem | QuickOpenGroupItem;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const options: any = {\n                label: i.label,\n                description: i.description,\n                detail: i.detail,\n                run: (mode: QuickOpenMode) => {\n                    if (mode === QuickOpenMode.OPEN) {\n                        this.proxy.$onItemSelected(i.handle);\n                        this.doResolve(i.handle);\n                        this.cleanUp();\n                        return true;\n                    }\n                    return false;\n                }\n            };\n\n            if (i.groupLabel !== undefined || i.showBorder !== undefined) {\n                options.groupLabel = i.groupLabel;\n                options.showBorder = i.showBorder;\n                item = new QuickOpenGroupItem(options);\n            } else {\n                item = new QuickOpenItem(options);\n            }\n\n            this.items.push(item);\n        }\n        if (this.acceptor) {\n            this.acceptor(this.items);\n        }\n        return Promise.resolve();\n    }\n\n    private convertPickOpenItemToQuickOpenItem(items: PickOpenItem[]): QuickPickItem<number>[] {\n        const convertedItems: QuickPickValue<number>[] = [];\n        for (const i of items) {\n            convertedItems.push({\n                label: i.label,\n                description: i.description,\n                detail: i.detail,\n                value: i.handle\n            });\n        }\n        return convertedItems;\n    }\n\n    $input(options: InputBoxOptions, validateInput: boolean, token: CancellationToken): Promise<string | undefined> {\n        if (validateInput) {\n            options.validateInput = val => this.proxy.$validateInput(val);\n        }\n\n        return this.quickInput.open(options, token);\n    }\n\n    protected convertQuickInputButton(quickInputButton: QuickInputButton, index: number, toDispose: DisposableCollection): QuickInputTitleButtonHandle {\n        const currentIconPath = quickInputButton.iconPath;\n        let newIcon = '';\n        let newIconClass: string | undefined;\n        if ('id' in currentIconPath || currentIconPath instanceof ThemeIcon) {\n            newIconClass = this.resolveIconClassFromThemeIcon(currentIconPath);\n        } else if (currentIconPath instanceof URI) {\n            newIcon = currentIconPath.toString();\n        } else {\n            const { light, dark } = currentIconPath as { light: string | URI, dark: string | URI };\n            const themedIconClasses = {\n                light: light.toString(),\n                dark: dark.toString()\n            };\n            const reference = this.sharedStyle.toIconClass(themedIconClasses);\n            toDispose.push(reference);\n            newIconClass = reference.object.iconClass;\n        }\n\n        const isDefaultQuickInputButton = 'id' in quickInputButton.iconPath && quickInputButton.iconPath.id === 'Back' ? true : false;\n        return {\n            icon: newIcon,\n            iconClass: newIconClass,\n            tooltip: quickInputButton.tooltip,\n            side: isDefaultQuickInputButton ? QuickTitleButtonSide.LEFT : QuickTitleButtonSide.RIGHT,\n            index: isDefaultQuickInputButton ? -1 : index\n        };\n    }\n\n    private resolveIconClassFromThemeIcon(themeIcon: ThemeIcon): string | undefined {\n        switch (themeIcon.id) {\n            case 'folder': {\n                return this.labelProvider.folderIcon;\n            }\n            case 'file': {\n                return this.labelProvider.fileIcon;\n            }\n            case 'Back': {\n                return 'fa fa-arrow-left';\n            }\n            default: {\n                return monaco.theme.ThemeIcon.asClassName(themeIcon);\n            }\n        }\n    }\n\n    async $showInputBox(inputBox: TransferInputBox, validateInput: boolean): Promise<void> {\n        if (validateInput) {\n            inputBox.validateInput = val => this.proxy.$validateInput(val);\n        }\n\n        const toDispose = new DisposableCollection();\n        const quickInput = this.quickInput.open({\n            busy: inputBox.busy,\n            enabled: inputBox.enabled,\n            ignoreFocusOut: inputBox.ignoreFocusOut,\n            password: inputBox.password,\n            step: inputBox.step,\n            title: inputBox.title,\n            totalSteps: inputBox.totalSteps,\n            buttons: inputBox.buttons.map((btn, i) => this.convertQuickInputButton(btn, i, toDispose)),\n            validationMessage: inputBox.validationMessage,\n            placeHolder: inputBox.placeholder,\n            value: inputBox.value,\n            prompt: inputBox.prompt,\n            validateInput: inputBox.validateInput\n        });\n\n        toDispose.push(this.quickInput.onDidAccept(() => this.proxy.$acceptOnDidAccept(inputBox.id)));\n        toDispose.push(this.quickInput.onDidChangeValue(changedText => this.proxy.$acceptDidChangeValue(inputBox.id, changedText)));\n        toDispose.push(this.quickTitleBar.onDidTriggerButton(button => {\n            this.proxy.$acceptOnDidTriggerButton(inputBox.id, button);\n        }));\n        this.toDispose.push(toDispose);\n        quickInput.then(() => {\n            if (toDispose.disposed) {\n                return;\n            }\n            this.proxy.$acceptOnDidHide(inputBox.id);\n            toDispose.dispose();\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private findChangedKey(key: string, value: any): void {\n        switch (key) {\n            case 'title': {\n                this.quickTitleBar.title = value;\n                break;\n            }\n            case 'step': {\n                this.quickTitleBar.step = value;\n                break;\n            }\n            case 'totalSteps': {\n                this.quickTitleBar.totalSteps = value;\n                break;\n            }\n            case 'buttons': {\n                this.quickTitleBar.buttons = value;\n                break;\n            }\n            case 'value': {\n                this.delegate.setValue(value);\n                break;\n            }\n            case 'enabled': {\n                this.delegate.setEnabled(value);\n                break;\n            }\n            case 'password': {\n                this.delegate.setPassword(value);\n                break;\n            }\n            case 'placeholder': {\n                this.delegate.setPlaceHolder(value);\n                break;\n            }\n            case 'items': {\n                this.quickPick.setItems(this.convertPickOpenItemToQuickOpenItem(value));\n                break;\n            }\n            // TODO selectedItems, activeItems and other properties\n            // TODO we need better type checking here\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $setQuickInputChanged(changed: any): void {\n        for (const key in changed) {\n            if (changed.hasOwnProperty(key)) {\n                const value = changed[key];\n                this.findChangedKey(key, value);\n            }\n        }\n    }\n    $refreshQuickInput(): void {\n        this.quickInput.refresh();\n    }\n\n    async $showCustomQuickPick<T extends QuickPickItemExt>(options: TransferQuickPick<T>): Promise<void> {\n        const toDispose = new DisposableCollection();\n        const quickPick = this.quickPick.show(this.convertPickOpenItemToQuickOpenItem(options.items), {\n            buttons: options.buttons.map((btn, i) => this.convertQuickInputButton(btn, i, toDispose)),\n            placeholder: options.placeholder,\n            fuzzyMatchDescription: options.matchOnDescription,\n            fuzzyMatchLabel: true,\n            step: options.step,\n            title: options.title,\n            totalSteps: options.totalSteps,\n            ignoreFocusOut: options.ignoreFocusOut,\n            value: options.value,\n            runIfSingle: false,\n        });\n\n        toDispose.push(this.quickPick.onDidAccept(() => this.proxy.$acceptOnDidAccept(options.id)));\n        toDispose.push(this.quickPick.onDidChangeActive((elements: QuickPickValue<number>[]) => {\n            this.proxy.$onDidChangeActive(options.id, elements.map(e => e.value));\n        }));\n        toDispose.push(this.quickPick.onDidChangeSelection((elements: QuickPickValue<number>[]) => {\n            this.proxy.$onDidChangeSelection(options.id, elements.map(e => e.value));\n        }));\n        toDispose.push(this.quickPick.onDidChangeValue(value => this.proxy.$acceptDidChangeValue(options.id, value)));\n        toDispose.push(this.quickTitleBar.onDidTriggerButton(button => {\n            this.proxy.$acceptOnDidTriggerButton(options.id, button);\n        }));\n        this.toDispose.push(toDispose);\n        quickPick.then(() => {\n            if (toDispose.disposed) {\n                return;\n            }\n            this.proxy.$acceptOnDidHide(options.id);\n            toDispose.dispose();\n        });\n    }\n\n    onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        this.acceptor = acceptor;\n        if (this.items) {\n            acceptor(this.items);\n        }\n    }\n\n    $hide(): void {\n        this.delegate.hide();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common/command';\nimport { inject, injectable } from 'inversify';\nimport { UriAwareCommandHandler, UriCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport URI from '@theia/core/lib/common/uri';\nimport { SelectionService } from '@theia/core';\nimport { theiaUritoUriComponents } from '../../common/uri-components';\n\nexport namespace SelectionProviderCommands {\n    export const GET_SELECTED_CONTEXT: Command = {\n        id: 'theia.plugin.workspace.selectedContext'\n    };\n}\n\n@injectable()\nexport class SelectionProviderCommandContribution implements CommandContribution {\n\n    @inject(SelectionService) protected readonly selectionService: SelectionService;\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(SelectionProviderCommands.GET_SELECTED_CONTEXT, this.newMultiUriAwareCommandHandler({\n            isEnabled: () => true,\n            isVisible: () => false,\n            execute: (selectedUris: URI[]) => selectedUris.map(uri => theiaUritoUriComponents(uri))\n        }));\n    }\n\n    protected newMultiUriAwareCommandHandler(handler: UriCommandHandler<URI[]>): UriAwareCommandHandler<URI[]> {\n        return new UriAwareCommandHandler(this.selectionService, handler, { multi: true });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { interfaces } from 'inversify';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport * as types from '../../plugin/types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { StatusBar, StatusBarAlignment, StatusBarEntry } from '@theia/core/lib/browser/status-bar/status-bar';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\n\nexport class StatusBarMessageRegistryMainImpl implements StatusBarMessageRegistryMain, Disposable {\n    private readonly delegate: StatusBar;\n    private readonly entries = new Map<string, StatusBarEntry>();\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as not disposed */ })\n    );\n\n    protected readonly colorRegistry: ColorRegistry;\n\n    constructor(container: interfaces.Container) {\n        this.delegate = container.get(StatusBar);\n        this.colorRegistry = container.get(ColorRegistry);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $setMessage(id: string,\n        text: string | undefined,\n        priority: number,\n        alignment: number,\n        color: string | undefined,\n        tooltip: string | undefined,\n        command: string | undefined,\n         // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        args: any[] | undefined): Promise<void> {\n        const entry = {\n            text: text || '',\n            priority,\n            alignment: alignment === types.StatusBarAlignment.Left ? StatusBarAlignment.LEFT : StatusBarAlignment.RIGHT,\n            color: color && (this.colorRegistry.getCurrentColor(color) || color),\n            tooltip,\n            command,\n            args\n        };\n\n        this.entries.set(id, entry);\n        await this.delegate.setElement(id, entry);\n        if (this.toDispose.disposed) {\n            this.$dispose(id);\n        } else {\n            this.toDispose.push(Disposable.create(() => this.$dispose(id)));\n        }\n    }\n\n    $dispose(id: string): void {\n        const entry = this.entries.get(id);\n        if (entry) {\n            this.entries.delete(id);\n            this.delegate.removeElement(id);\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    TasksMain,\n    MAIN_RPC_CONTEXT,\n    TaskExecutionDto,\n    TasksExt,\n    TaskDto\n} from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common';\nimport { TaskProviderRegistry, TaskResolverRegistry, TaskProvider, TaskResolver } from '@theia/task/lib/browser/task-contribution';\nimport { interfaces } from 'inversify';\nimport { TaskInfo, TaskExitedEvent, TaskConfiguration } from '@theia/task/lib/common/task-protocol';\nimport { TaskWatcher } from '@theia/task/lib/common/task-watcher';\nimport { TaskService } from '@theia/task/lib/browser/task-service';\nimport { TaskDefinitionRegistry } from '@theia/task/lib/browser';\n\nexport class TasksMainImpl implements TasksMain, Disposable {\n    private readonly proxy: TasksExt;\n    private readonly taskProviderRegistry: TaskProviderRegistry;\n    private readonly taskResolverRegistry: TaskResolverRegistry;\n    private readonly taskWatcher: TaskWatcher;\n    private readonly taskService: TaskService;\n    private readonly taskDefinitionRegistry: TaskDefinitionRegistry;\n\n    private readonly taskProviders = new Map<number, Disposable>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.TASKS_EXT);\n        this.taskProviderRegistry = container.get(TaskProviderRegistry);\n        this.taskResolverRegistry = container.get(TaskResolverRegistry);\n        this.taskWatcher = container.get(TaskWatcher);\n        this.taskService = container.get(TaskService);\n        this.taskDefinitionRegistry = container.get(TaskDefinitionRegistry);\n\n        this.toDispose.push(this.taskWatcher.onTaskCreated((event: TaskInfo) => {\n            this.proxy.$onDidStartTask({\n                id: event.taskId,\n                task: this.fromTaskConfiguration(event.config)\n            });\n        }));\n\n        this.toDispose.push(this.taskWatcher.onTaskExit((event: TaskExitedEvent) => {\n            this.proxy.$onDidEndTask(event.taskId);\n        }));\n\n        this.toDispose.push(this.taskWatcher.onDidStartTaskProcess((event: TaskInfo) => {\n            if (event.processId !== undefined) {\n                this.proxy.$onDidStartTaskProcess(event.processId, {\n                    id: event.taskId,\n                    task: this.fromTaskConfiguration(event.config)\n                });\n            }\n        }));\n\n        this.toDispose.push(this.taskWatcher.onDidEndTaskProcess((event: TaskExitedEvent) => {\n            if (event.code !== undefined) {\n                this.proxy.$onDidEndTaskProcess(event.code, event.taskId);\n            }\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    $registerTaskProvider(handle: number, type: string): void {\n        const taskProvider = this.createTaskProvider(handle);\n        const taskResolver = this.createTaskResolver(handle);\n\n        const toDispose = new DisposableCollection(\n            this.taskProviderRegistry.register(type, taskProvider, handle),\n            this.taskResolverRegistry.register(type, taskResolver),\n            Disposable.create(() => this.taskProviders.delete(handle))\n        );\n        this.taskProviders.set(handle, toDispose);\n        this.toDispose.push(toDispose);\n    }\n\n    $unregister(handle: number): void {\n        const disposable = this.taskProviders.get(handle);\n        if (disposable) {\n            disposable.dispose();\n        }\n    }\n\n    async $fetchTasks(taskVersion: string | undefined, taskType: string | undefined): Promise<TaskDto[]> {\n        if (taskVersion && !taskVersion.startsWith('2.')) { // Theia does not support 1.x or earlier task versions\n            return [];\n        }\n\n        const token: number = this.taskService.startUserAction();\n        const [configured, provided] = await Promise.all([\n            this.taskService.getConfiguredTasks(token),\n            this.taskService.getProvidedTasks(token)\n        ]);\n        const result: TaskDto[] = [];\n        for (const tasks of [configured, provided]) {\n            for (const task of tasks) {\n                if (!taskType || (!!this.taskDefinitionRegistry.getDefinition(task) ? task._source === taskType : task.type === taskType)) {\n                    const { type, label, _scope, _source, ...properties } = task;\n                    const dto: TaskDto = { type, label, scope: _scope, source: _source };\n                    for (const key in properties) {\n                        if (properties.hasOwnProperty(key)) {\n                            dto[key] = properties[key];\n                        }\n                    }\n                    result.push(dto);\n                }\n            }\n        }\n        return result;\n    }\n\n    async $executeTask(taskDto: TaskDto): Promise<TaskExecutionDto | undefined> {\n        const taskConfig = this.toTaskConfiguration(taskDto);\n        const taskInfo = await this.taskService.runTask(taskConfig);\n        if (taskInfo) {\n            return {\n                id: taskInfo.taskId,\n                task: this.fromTaskConfiguration(taskInfo.config)\n            };\n        }\n    }\n\n    async $taskExecutions(): Promise<{\n        id: number;\n        task: TaskDto;\n    }[]> {\n        const runningTasks = await this.taskService.getRunningTasks();\n        return runningTasks.map(taskInfo => ({\n            id: taskInfo.taskId,\n            task: this.fromTaskConfiguration(taskInfo.config)\n        }));\n    }\n\n    $terminateTask(id: number): void {\n        this.taskService.kill(id);\n    }\n\n    protected createTaskProvider(handle: number): TaskProvider {\n        return {\n            provideTasks: () =>\n                this.proxy.$provideTasks(handle).then(v =>\n                    v!.map(taskDto =>\n                        this.toTaskConfiguration(taskDto)\n                    )\n                )\n        };\n    }\n\n    protected createTaskResolver(handle: number): TaskResolver {\n        return {\n            resolveTask: taskConfig =>\n                this.proxy.$resolveTask(handle, this.fromTaskConfiguration(taskConfig)).then(v =>\n                    this.toTaskConfiguration(v!)\n                )\n        };\n    }\n\n    protected toTaskConfiguration(taskDto: TaskDto): TaskConfiguration {\n        return Object.assign(taskDto, {\n            _source: taskDto.source,\n            _scope: taskDto.scope\n        });\n    }\n\n    protected fromTaskConfiguration(task: TaskConfiguration): TaskDto {\n        return Object.assign(task, {\n            source: task._source,\n            scope: task._scope\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { ApplicationShell, WidgetOpenerOptions } from '@theia/core/lib/browser';\nimport { TerminalOptions } from '@theia/plugin';\nimport { TerminalWidget } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { TerminalServiceMain, TerminalServiceExt, MAIN_RPC_CONTEXT } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\n\n/**\n * Plugin api service allows working with terminal emulator.\n */\nexport class TerminalServiceMainImpl implements TerminalServiceMain, Disposable {\n\n    private readonly terminals: TerminalService;\n    private readonly shell: ApplicationShell;\n    private readonly extProxy: TerminalServiceExt;\n\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.terminals = container.get(TerminalService);\n        this.shell = container.get(ApplicationShell);\n        this.extProxy = rpc.getProxy(MAIN_RPC_CONTEXT.TERMINAL_EXT);\n        this.toDispose.push(this.terminals.onDidCreateTerminal(terminal => this.trackTerminal(terminal)));\n        for (const terminal of this.terminals.all) {\n            this.trackTerminal(terminal);\n        }\n        this.toDispose.push(this.terminals.onDidChangeCurrentTerminal(() => this.updateCurrentTerminal()));\n        this.updateCurrentTerminal();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected updateCurrentTerminal(): void {\n        const { currentTerminal } = this.terminals;\n        this.extProxy.$currentTerminalChanged(currentTerminal && currentTerminal.id);\n    }\n\n    protected async trackTerminal(terminal: TerminalWidget): Promise<void> {\n        let name = terminal.title.label;\n        this.extProxy.$terminalCreated(terminal.id, name);\n        const updateTitle = () => {\n            if (name !== terminal.title.label) {\n                name = terminal.title.label;\n                this.extProxy.$terminalNameChanged(terminal.id, name);\n            }\n        };\n        terminal.title.changed.connect(updateTitle);\n        this.toDispose.push(Disposable.create(() => terminal.title.changed.disconnect(updateTitle)));\n\n        const updateProcessId = () => terminal.processId.then(\n            processId => this.extProxy.$terminalOpened(terminal.id, processId, terminal.dimensions.cols, terminal.dimensions.rows),\n            () => {/* no-op */ }\n        );\n        updateProcessId();\n        this.toDispose.push(terminal.onDidOpen(() => updateProcessId()));\n        this.toDispose.push(terminal.onTerminalDidClose(() => this.extProxy.$terminalClosed(terminal.id)));\n        this.toDispose.push(terminal.onSizeChanged(({ cols, rows }) => {\n            this.extProxy.$terminalSizeChanged(terminal.id, cols, rows);\n        }));\n        this.toDispose.push(terminal.onData(data => {\n            this.extProxy.$terminalOnInput(terminal.id, data);\n        }));\n    }\n\n    $write(id: string, data: string): void {\n        const terminal = this.terminals.getById(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.write(data);\n    }\n\n    $resize(id: string, cols: number, rows: number): void {\n        const terminal = this.terminals.getById(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.resize(cols, rows);\n    }\n\n    async $createTerminal(id: string, options: TerminalOptions, isPseudoTerminal?: boolean): Promise<string> {\n        try {\n            const terminal = await this.terminals.newTerminal({\n                id,\n                title: options.name,\n                shellPath: options.shellPath,\n                shellArgs: options.shellArgs,\n                cwd: options.cwd,\n                env: options.env,\n                destroyTermOnClose: true,\n                useServerTitle: false,\n                attributes: options.attributes,\n                isPseudoTerminal,\n            });\n            terminal.start();\n            return terminal.id;\n        } catch (error) {\n            throw new Error('Failed to create terminal. Cause: ' + error);\n        }\n    }\n\n    $sendText(id: string, text: string, addNewLine?: boolean): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal) {\n            text = text.replace(/\\r?\\n/g, '\\r');\n            if (addNewLine && text.charAt(text.length - 1) !== '\\r') {\n                text += '\\r';\n            }\n            terminal.sendText(text);\n        }\n    }\n\n    $show(id: string, preserveFocus?: boolean): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal) {\n            const options: WidgetOpenerOptions = {};\n            if (preserveFocus) {\n                options.mode = 'reveal';\n            }\n            this.terminals.open(terminal, options);\n        }\n    }\n\n    $hide(id: string): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal && terminal.isVisible) {\n            const area = this.shell.getAreaFor(terminal);\n            if (area) {\n                this.shell.collapsePanel(area);\n            }\n        }\n    }\n\n    $dispose(id: string): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal) {\n            terminal.dispose();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport {\n    TextEditorConfiguration,\n    EditorChangedPropertiesData,\n    Selection,\n    TextEditorConfigurationUpdate,\n    TextEditorRevealType,\n    SingleEditOperation,\n    ApplyEditsOptions,\n    UndoStopOptions,\n    DecorationOptions\n} from '../../common/plugin-api-rpc';\nimport { Range } from '../../common/plugin-api-rpc-model';\nimport { Emitter, Event } from '@theia/core';\nimport { TextEditorCursorStyle, cursorStyleToString } from '../../common/editor-options';\nimport { TextEditorLineNumbersStyle, EndOfLine } from '../../plugin/types-impl';\n\nexport class TextEditorMain implements Disposable {\n\n    private properties: TextEditorPropertiesMain | undefined;\n    private editor: MonacoEditor | undefined;\n\n    private readonly onPropertiesChangedEmitter = new Emitter<EditorChangedPropertiesData>();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.properties = undefined),\n        this.onPropertiesChangedEmitter\n    );\n\n    constructor(\n        private id: string,\n        private model: monaco.editor.IModel,\n        editor: MonacoEditor\n    ) {\n        this.toDispose.push(this.model.onDidChangeOptions(() =>\n            this.updateProperties(undefined)\n        ));\n        this.setEditor(editor);\n        this.updateProperties(undefined);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private updateProperties(source?: string): void {\n        this.setProperties(TextEditorPropertiesMain.readFromEditor(this.properties, this.model, this.editor!), source);\n    }\n\n    private setProperties(newProperties: TextEditorPropertiesMain, source: string | undefined): void {\n        const result = newProperties.generateDelta(this.properties, source);\n        this.properties = newProperties;\n        if (result) {\n            this.onPropertiesChangedEmitter.fire(result);\n        }\n    }\n\n    protected readonly toDisposeOnEditor = new DisposableCollection();\n\n    private setEditor(editor?: MonacoEditor): void {\n        if (this.editor === editor) {\n            return;\n        }\n        this.toDisposeOnEditor.dispose();\n        this.toDispose.push(this.toDisposeOnEditor);\n        this.editor = editor;\n        this.toDisposeOnEditor.push(Disposable.create(() => this.editor = undefined));\n\n        if (this.editor) {\n            const monaco = this.editor.getControl();\n            this.toDisposeOnEditor.push(this.editor.onSelectionChanged(_ => {\n                this.updateProperties();\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidChangeModel(() => {\n                this.setEditor(undefined);\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidChangeCursorSelection(e => {\n                this.updateProperties(e.source);\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidChangeConfiguration(() => {\n                this.updateProperties();\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidLayoutChange(() => {\n                this.updateProperties();\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidScrollChange(() => {\n                this.updateProperties();\n            }));\n\n            this.updateProperties();\n\n        }\n    }\n\n    getId(): string {\n        return this.id;\n    }\n\n    getModel(): monaco.editor.IModel {\n        return this.model;\n    }\n\n    getProperties(): TextEditorPropertiesMain | undefined {\n        return this.properties;\n    }\n\n    get onPropertiesChangedEvent(): Event<EditorChangedPropertiesData> {\n        return this.onPropertiesChangedEmitter.event;\n    }\n\n    setSelections(selections: Selection[]): void {\n        if (this.editor) {\n            this.editor.getControl().setSelections(selections);\n            return;\n        }\n        const monacoSelections = selections.map(TextEditorMain.toMonacoSelections);\n        this.setProperties(new TextEditorPropertiesMain(monacoSelections, this.properties!.options, this.properties!.visibleRanges), undefined);\n    }\n\n    setConfiguration(newConfiguration: TextEditorConfigurationUpdate): void {\n        this.setIndentConfiguration(newConfiguration);\n\n        if (!this.editor) {\n            return;\n        }\n\n        if (newConfiguration.cursorStyle) {\n            const newCursorStyle = cursorStyleToString(newConfiguration.cursorStyle);\n            this.editor.getControl().updateOptions({\n                cursorStyle: newCursorStyle\n            });\n        }\n\n        if (typeof newConfiguration.lineNumbers !== 'undefined') {\n            let lineNumbers: 'on' | 'off' | 'relative';\n            switch (newConfiguration.lineNumbers) {\n                case TextEditorLineNumbersStyle.On:\n                    lineNumbers = 'on';\n                    break;\n                case TextEditorLineNumbersStyle.Relative:\n                    lineNumbers = 'relative';\n                    break;\n                default:\n                    lineNumbers = 'off';\n            }\n            this.editor.getControl().updateOptions({\n                lineNumbers: lineNumbers\n            });\n        }\n    }\n\n    private setIndentConfiguration(newConfiguration: TextEditorConfigurationUpdate): void {\n        if (newConfiguration.tabSize === 'auto' || newConfiguration.insertSpaces === 'auto') {\n\n            const creationOpts = this.model.getOptions();\n            let insertSpaces = creationOpts.insertSpaces;\n            let tabSize = creationOpts.tabSize;\n\n            if (newConfiguration.insertSpaces !== 'auto' && typeof newConfiguration.insertSpaces !== 'undefined') {\n                insertSpaces = newConfiguration.insertSpaces;\n            }\n\n            if (newConfiguration.tabSize !== 'auto' && typeof newConfiguration.tabSize !== 'undefined') {\n                tabSize = newConfiguration.tabSize;\n            }\n\n            this.model.detectIndentation(insertSpaces, tabSize);\n            return;\n        }\n\n        const newOpts: monaco.editor.ITextModelUpdateOptions = {};\n        if (typeof newConfiguration.insertSpaces !== 'undefined') {\n            newOpts.insertSpaces = newConfiguration.insertSpaces;\n        }\n        if (typeof newConfiguration.tabSize !== 'undefined') {\n            newOpts.tabSize = newConfiguration.tabSize;\n        }\n        this.model.updateOptions(newOpts);\n    }\n\n    revealRange(range: monaco.Range, revealType: TextEditorRevealType): void {\n        if (!this.editor) {\n            return;\n        }\n        switch (revealType) {\n            case TextEditorRevealType.Default:\n                this.editor.getControl().revealRange(range, monaco.editor.ScrollType.Smooth);\n                break;\n            case TextEditorRevealType.InCenter:\n                this.editor.getControl().revealRangeInCenter(range, monaco.editor.ScrollType.Smooth);\n                break;\n            case TextEditorRevealType.InCenterIfOutsideViewport:\n                this.editor.getControl().revealRangeInCenterIfOutsideViewport(range, monaco.editor.ScrollType.Smooth);\n                break;\n            case TextEditorRevealType.AtTop:\n                this.editor.getControl().revealRangeAtTop(range, monaco.editor.ScrollType.Smooth);\n                break;\n            default:\n                console.warn(`Unknown revealType: ${revealType}`);\n                break;\n        }\n    }\n\n    applyEdits(versionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): boolean {\n        if (this.model.getVersionId() !== versionId) {\n            // model changed in the meantime\n            return false;\n        }\n\n        if (!this.editor) {\n            return false;\n        }\n\n        if (opts.setEndOfLine === EndOfLine.CRLF) {\n            this.model.setEOL(monaco.editor.EndOfLineSequence.CRLF);\n        } else if (opts.setEndOfLine === EndOfLine.LF) {\n            this.model.setEOL(monaco.editor.EndOfLineSequence.LF);\n        }\n\n        const editOperations: monaco.editor.IIdentifiedSingleEditOperation[] = [];\n        for (const edit of edits) {\n            const { range, text } = edit;\n            if (!range && !text) {\n                continue;\n            }\n            if (range && range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn && !edit.text) {\n                continue;\n            }\n\n            editOperations.push({\n                range: range ? monaco.Range.lift(range) : this.editor.getControl().getModel()!.getFullModelRange(),\n                /* eslint-disable-next-line no-null/no-null */\n                text: text || null,\n                forceMoveMarkers: edit.forceMoveMarkers\n            });\n        }\n\n        if (opts.undoStopBefore) {\n            this.editor.getControl().pushUndoStop();\n        }\n        this.editor.getControl().executeEdits('MainThreadTextEditor', editOperations);\n        if (opts.undoStopAfter) {\n            this.editor.getControl().pushUndoStop();\n        }\n        return true;\n    }\n\n    insertSnippet(template: string, ranges: Range[], opts: UndoStopOptions): boolean {\n\n        if (!this.editor) {\n            return false;\n        }\n\n        const snippetController: SnippetController2 = this.editor!.getControl().getContribution('snippetController2');\n\n        const selections = ranges.map(r => new monaco.Selection(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn));\n        this.editor.getControl().setSelections(selections);\n        this.editor.focus();\n\n        snippetController.insert(template, 0, 0, opts.undoStopBefore, opts.undoStopAfter);\n\n        return true;\n    }\n\n    setDecorations(key: string, ranges: DecorationOptions[]): void {\n        if (!this.editor) {\n            return;\n        }\n        this.editor.getControl().setDecorations(key, ranges.map(option => Object.assign(option, { color: undefined })));\n    }\n\n    setDecorationsFast(key: string, _ranges: number[]): void {\n        if (!this.editor) {\n            return;\n        }\n        const ranges: Range[] = [];\n        const len = Math.floor(_ranges.length / 4);\n        for (let i = 0; i < len; i++) {\n            ranges[i] = new monaco.Range(_ranges[4 * i], _ranges[4 * i + 1], _ranges[4 * i + 2], _ranges[4 * i + 3]);\n        }\n\n        this.editor.getControl().setDecorationsFast(key, ranges);\n    }\n\n    private static toMonacoSelections(selection: Selection): monaco.Selection {\n        return new monaco.Selection(selection.selectionStartLineNumber, selection.selectionStartColumn, selection.positionLineNumber, selection.positionColumn);\n    }\n}\n\n// TODO move to monaco typings!\ninterface SnippetController2 extends monaco.editor.IEditorContribution {\n    insert(template: string,\n        overwriteBefore: number, overwriteAfter: number,\n        undoStopBefore: boolean, undoStopAfter: boolean): void;\n    finish(): void;\n    cancel(): void;\n    dispose(): void;\n    prev(): void;\n    next(): void;\n}\n\nexport class TextEditorPropertiesMain {\n    constructor(\n        readonly selections: monaco.Selection[],\n        readonly options: TextEditorConfiguration,\n        readonly visibleRanges: monaco.Range[]\n    ) {\n    }\n\n    generateDelta(old: TextEditorPropertiesMain | undefined, source: string | undefined): EditorChangedPropertiesData | undefined {\n        const result: EditorChangedPropertiesData = {\n            options: undefined,\n            selections: undefined,\n            visibleRanges: undefined\n        };\n\n        if (!old || !TextEditorPropertiesMain.selectionsEqual(old.selections, this.selections)) {\n            result.selections = {\n                selections: this.selections,\n                source: source\n            };\n        }\n\n        if (!old || !TextEditorPropertiesMain.optionsEqual(old.options, this.options)) {\n            result.options = this.options;\n        }\n\n        if (!old || !TextEditorPropertiesMain.rangesEqual(old.visibleRanges, this.visibleRanges)) {\n            result.visibleRanges = this.visibleRanges;\n        }\n\n        if (result.selections || result.visibleRanges || result.options) {\n            return result;\n        }\n\n        return undefined;\n    }\n\n    static readFromEditor(prevProperties: TextEditorPropertiesMain | undefined, model: monaco.editor.IModel, editor: MonacoEditor): TextEditorPropertiesMain {\n        const selections = TextEditorPropertiesMain.getSelectionsFromEditor(prevProperties, editor);\n        const options = TextEditorPropertiesMain.getOptionsFromEditor(prevProperties, model, editor);\n        const visibleRanges = TextEditorPropertiesMain.getVisibleRangesFromEditor(prevProperties, editor);\n        return new TextEditorPropertiesMain(selections, options, visibleRanges);\n    }\n\n    private static getSelectionsFromEditor(prevProperties: TextEditorPropertiesMain | undefined, editor: MonacoEditor): monaco.Selection[] {\n        let result: monaco.Selection[] | undefined = undefined;\n        if (editor) {\n            result = editor.getControl().getSelections() || undefined;\n        }\n\n        if (!result && prevProperties) {\n            result = prevProperties.selections;\n        }\n\n        if (!result) {\n            result = [new monaco.Selection(1, 1, 1, 1)];\n        }\n        return result;\n    }\n\n    private static getOptionsFromEditor(prevProperties: TextEditorPropertiesMain | undefined, model: monaco.editor.IModel, editor: MonacoEditor): TextEditorConfiguration {\n        if (model.isDisposed()) {\n            return prevProperties!.options;\n        }\n\n        let cursorStyle: TextEditorCursorStyle;\n        let lineNumbers: TextEditorLineNumbersStyle;\n        if (editor) {\n            const editorOptions = editor.getControl().getOptions();\n            const lineNumbersOpts = editorOptions.get(monaco.editor.EditorOption.lineNumbers);\n            cursorStyle = editorOptions.get(monaco.editor.EditorOption.cursorStyle);\n            switch (lineNumbersOpts.renderType) {\n                case monaco.editor.RenderLineNumbersType.Off:\n                    lineNumbers = TextEditorLineNumbersStyle.Off;\n                    break;\n                case monaco.editor.RenderLineNumbersType.Relative:\n                    lineNumbers = TextEditorLineNumbersStyle.Relative;\n                    break;\n                default:\n                    lineNumbers = TextEditorLineNumbersStyle.On;\n                    break;\n            }\n        } else if (prevProperties) {\n            cursorStyle = prevProperties.options.cursorStyle;\n            lineNumbers = prevProperties.options.lineNumbers;\n        } else {\n            cursorStyle = TextEditorCursorStyle.Line;\n            lineNumbers = TextEditorLineNumbersStyle.On;\n        }\n\n        const modelOptions = model.getOptions();\n        return {\n            insertSpaces: modelOptions.insertSpaces,\n            tabSize: modelOptions.tabSize,\n            cursorStyle,\n            lineNumbers,\n        };\n    }\n\n    private static getVisibleRangesFromEditor(prevProperties: TextEditorPropertiesMain | undefined, editor: MonacoEditor): monaco.Range[] {\n        if (editor) {\n            return editor.getControl().getVisibleRanges();\n        }\n        return [];\n    }\n\n    private static selectionsEqual(a: monaco.Selection[], b: monaco.Selection[]): boolean {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!a[i].equalsSelection(b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private static optionsEqual(a: TextEditorConfiguration, b: TextEditorConfiguration): boolean {\n        if (a && !b || !a && b) {\n            return false;\n        }\n        if (!a && !b) {\n            return true;\n        }\n        return (\n            a.tabSize === b.tabSize\n            && a.insertSpaces === b.insertSpaces\n            && a.cursorStyle === b.cursorStyle\n            && a.lineNumbers === b.lineNumbers\n        );\n    }\n\n    private static rangesEqual(a: monaco.Range[], b: monaco.Range[]): boolean {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!a[i].equalsRange(b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event, Emitter } from '@theia/core';\nimport { MonacoEditorModel, WillSaveMonacoModelEvent } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { injectable, inject } from 'inversify';\nimport { MonacoTextModelService } from '@theia/monaco/lib/browser/monaco-text-model-service';\nimport { MonacoWorkspace } from '@theia/monaco/lib/browser/monaco-workspace';\nimport { Schemes } from '../../common/uri-components';\nimport URI from '@theia/core/lib/common/uri';\nimport { Reference } from '@theia/core/lib/common/reference';\n\n@injectable()\nexport class EditorModelService {\n\n    private monacoModelService: MonacoTextModelService;\n    private modelModeChangedEmitter = new Emitter<{ model: MonacoEditorModel, oldModeId: string }>();\n    private onModelRemovedEmitter = new Emitter<MonacoEditorModel>();\n    private modelDirtyEmitter = new Emitter<MonacoEditorModel>();\n    private modelSavedEmitter = new Emitter<MonacoEditorModel>();\n    private onModelWillSavedEmitter = new Emitter<WillSaveMonacoModelEvent>();\n\n    readonly onModelDirtyChanged = this.modelDirtyEmitter.event;\n    readonly onModelSaved = this.modelSavedEmitter.event;\n    readonly onModelModeChanged = this.modelModeChangedEmitter.event;\n    readonly onModelRemoved = this.onModelRemovedEmitter.event;\n    readonly onModelWillSave = this.onModelWillSavedEmitter.event;\n\n    constructor(@inject(MonacoTextModelService) monacoModelService: MonacoTextModelService,\n        @inject(MonacoWorkspace) monacoWorkspace: MonacoWorkspace) {\n\n        this.monacoModelService = monacoModelService;\n        monacoModelService.models.forEach(model => this.modelCreated(model));\n        monacoModelService.onDidCreate(this.modelCreated, this);\n        monacoWorkspace.onDidCloseTextDocument(model => {\n            setTimeout(() => {\n                this.onModelRemovedEmitter.fire(model);\n            }, 1);\n        });\n    }\n\n    private modelCreated(model: MonacoEditorModel): void {\n        model.textEditorModel.onDidChangeLanguage(e => {\n            this.modelModeChangedEmitter.fire({ model, oldModeId: e.oldLanguage });\n        });\n\n        model.onDidSaveModel(_ => {\n            this.modelSavedEmitter.fire(model);\n        });\n\n        model.onDirtyChanged(_ => {\n            this.modelDirtyEmitter.fire(model);\n        });\n        model.onWillSaveModel(willSaveModelEvent => {\n            this.onModelWillSavedEmitter.fire(willSaveModelEvent);\n        });\n    }\n\n    get onModelAdded(): Event<MonacoEditorModel> {\n        return this.monacoModelService.onDidCreate;\n    }\n\n    getModels(): MonacoEditorModel[] {\n        return this.monacoModelService.models;\n    }\n\n    async saveAll(includeUntitled?: boolean): Promise<boolean> {\n        const saves = [];\n        for (const model of this.monacoModelService.models) {\n            const { uri } = model.textEditorModel;\n            if (model.dirty && (includeUntitled || uri.scheme !== Schemes.UNTITLED)) {\n                saves.push((async () => {\n                    try {\n                        await model.save();\n                        return true;\n                    } catch (e) {\n                        console.error('Failed to save ', uri.toString(), e);\n                        return false;\n                    }\n                })());\n            }\n        }\n        const results = await Promise.all(saves);\n        return results.reduce((a, b) => a && b, true);\n    }\n\n    async createModelReference(uri: URI): Promise<Reference<MonacoEditorModel>> {\n        return this.monacoModelService.createModelReference(uri);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from 'vscode-uri';\nimport {\n    TextEditorsMain,\n    MAIN_RPC_CONTEXT,\n    TextEditorsExt,\n    TextEditorConfigurationUpdate,\n    Selection,\n    TextEditorRevealType,\n    SingleEditOperation,\n    ApplyEditsOptions,\n    UndoStopOptions,\n    DecorationRenderOptions,\n    ThemeDecorationInstanceRenderOptions,\n    DecorationOptions,\n    WorkspaceEditDto\n} from '../../common/plugin-api-rpc';\nimport { Range } from '../../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsMain } from './editors-and-documents-main';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { TextEditorMain } from './text-editor-main';\nimport { disposed } from '../../common/errors';\nimport { toMonacoWorkspaceEdit } from './languages-main';\nimport { MonacoBulkEditService } from '@theia/monaco/lib/browser/monaco-bulk-edit-service';\nimport { MonacoEditorService } from '@theia/monaco/lib/browser/monaco-editor-service';\nimport { theiaUritoUriComponents, UriComponents } from '../../common/uri-components';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\n\nexport class TextEditorsMainImpl implements TextEditorsMain, Disposable {\n\n    private readonly proxy: TextEditorsExt;\n    private readonly toDispose = new DisposableCollection();\n    private readonly editorsToDispose = new Map<string, DisposableCollection>();\n    private readonly fileEndpoint = new Endpoint({ path: 'file' }).getRestUrl();\n\n    constructor(\n        private readonly editorsAndDocuments: EditorsAndDocumentsMain,\n        rpc: RPCProtocol,\n        private readonly bulkEditService: MonacoBulkEditService,\n        private readonly monacoEditorService: MonacoEditorService,\n    ) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT);\n        this.toDispose.push(editorsAndDocuments);\n        this.toDispose.push(editorsAndDocuments.onTextEditorAdd(editors => editors.forEach(this.onTextEditorAdd, this)));\n        this.toDispose.push(editorsAndDocuments.onTextEditorRemove(editors => editors.forEach(this.onTextEditorRemove, this)));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onTextEditorAdd(editor: TextEditorMain): void {\n        const id = editor.getId();\n        const toDispose = new DisposableCollection(\n            editor.onPropertiesChangedEvent(e => {\n                this.proxy.$acceptEditorPropertiesChanged(id, e);\n            }),\n            Disposable.create(() => this.editorsToDispose.delete(id))\n        );\n        this.editorsToDispose.set(id, toDispose);\n        this.toDispose.push(toDispose);\n    }\n\n    private onTextEditorRemove(id: string): void {\n        const disposables = this.editorsToDispose.get(id);\n        if (disposables) {\n            disposables.dispose();\n        }\n    }\n\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor: ${id}`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setConfiguration(options);\n        return Promise.resolve();\n    }\n\n    $trySetSelections(id: string, selections: Selection[]): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor: ${id}`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setSelections(selections);\n        return Promise.resolve();\n    }\n\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n\n        this.editorsAndDocuments.getEditor(id)!.revealRange(new monaco.Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn), revealType);\n        return Promise.resolve();\n    }\n\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n\n        return Promise.resolve(this.editorsAndDocuments.getEditor(id)!.applyEdits(modelVersionId, edits, opts));\n    }\n\n    $tryApplyWorkspaceEdit(dto: WorkspaceEditDto): Promise<boolean> {\n        const edits = toMonacoWorkspaceEdit(dto);\n        return new Promise(resolve => {\n            this.bulkEditService.apply(edits).then(() => resolve(true), err => resolve(false));\n        });\n    }\n\n    $tryInsertSnippet(id: string, template: string, ranges: Range[], opts: UndoStopOptions): Promise<boolean> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n        return Promise.resolve(this.editorsAndDocuments.getEditor(id)!.insertSnippet(template, ranges, opts));\n    }\n\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void {\n        this.injectRemoteUris(options);\n        this.monacoEditorService.registerDecorationType(key, options);\n        this.toDispose.push(Disposable.create(() => this.$removeTextEditorDecorationType(key)));\n    }\n\n    protected injectRemoteUris(options: DecorationRenderOptions | ThemeDecorationInstanceRenderOptions): void {\n        if (options.before) {\n            options.before.contentIconPath = this.toRemoteUri(options.before.contentIconPath);\n        }\n        if (options.after) {\n            options.after.contentIconPath = this.toRemoteUri(options.after.contentIconPath);\n        }\n        if ('gutterIconPath' in options) {\n            options.gutterIconPath = this.toRemoteUri(options.gutterIconPath);\n        }\n        if ('dark' in options && options.dark) {\n            this.injectRemoteUris(options.dark);\n        }\n        if ('light' in options && options.light) {\n            this.injectRemoteUris(options.light);\n        }\n    }\n\n    protected toRemoteUri(uri?: UriComponents): UriComponents | undefined {\n        if (uri && uri.scheme === 'file') {\n            return theiaUritoUriComponents(this.fileEndpoint.withQuery(URI.revive(uri).toString()));\n        }\n        return uri;\n    }\n\n    $removeTextEditorDecorationType(key: string): void {\n        this.monacoEditorService.removeDecorationType(key);\n    }\n\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setDecorations(key, ranges);\n        return Promise.resolve();\n    }\n\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setDecorationsFast(key, ranges);\n        return Promise.resolve();\n    }\n\n    $saveAll(includeUntitled?: boolean): Promise<boolean> {\n        return this.editorsAndDocuments.saveAll(includeUntitled);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell/application-shell';\nimport { toArray } from '@phosphor/algorithm';\nimport { TabBar, Widget } from '@phosphor/widgets';\n\n@injectable()\nexport class ViewColumnService {\n    private readonly columnValues = new Map<string, number>();\n    private readonly viewColumnIds = new Map<number, string[]>();\n\n    protected readonly onViewColumnChangedEmitter = new Emitter<{ id: string, viewColumn: number }>();\n\n    constructor(\n        @inject(ApplicationShell) private readonly shell: ApplicationShell,\n    ) {\n        let oldColumnValues = new Map<string, number>();\n        const update = async () => {\n            await new Promise((resolve => setTimeout(() => resolve())));\n            this.updateViewColumns();\n            this.viewColumnIds.forEach((ids: string[], viewColumn: number) => {\n                ids.forEach((id: string) => {\n                    if (!oldColumnValues.has(id) || oldColumnValues.get(id) !== viewColumn) {\n                        this.onViewColumnChangedEmitter.fire({ id, viewColumn });\n                    }\n                });\n            });\n            oldColumnValues = new Map(this.columnValues.entries());\n        };\n        this.shell.mainPanel.widgetAdded.connect(() => update());\n        this.shell.mainPanel.widgetRemoved.connect(() => update());\n    }\n\n    get onViewColumnChanged(): Event<{ id: string, viewColumn: number }> {\n        return this.onViewColumnChangedEmitter.event;\n    }\n\n    updateViewColumns(): void {\n        this.columnValues.clear();\n        this.viewColumnIds.clear();\n\n        const rows = new Map<number, Set<number>>();\n        const columns = new Map<number, Map<number, TabBar<Widget>>>();\n        for (const tabBar of toArray(this.shell.mainPanel.tabBars())) {\n            if (!tabBar.node.style.top || !tabBar.node.style.left) {\n                continue;\n            }\n            const top = parseInt(tabBar.node.style.top);\n            const left = parseInt(tabBar.node.style.left);\n\n            const row = rows.get(top) || new Set<number>();\n            row.add(left);\n            rows.set(top, row);\n\n            const column = columns.get(left) || new Map<number, TabBar<Widget>>();\n            column.set(top, tabBar);\n            columns.set(left, column);\n        }\n        const firstRow = rows.get([...rows.keys()].sort()[0]);\n        if (!firstRow) {\n            return;\n        }\n        const lefts = [...firstRow.keys()].sort();\n        for (let i = 0; i < lefts.length; i++) {\n            const column = columns.get(lefts[i]);\n            if (!column) {\n                break;\n            }\n            const cellIndexes = [...column.keys()].sort();\n            let viewColumn = Math.min(i, 2);\n            for (let j = 0; j < cellIndexes.length; j++) {\n                const cell = column.get(cellIndexes[j]);\n                if (!cell) {\n                    break;\n                }\n                this.setViewColumn(cell, viewColumn);\n                if (viewColumn < 7) {\n                    viewColumn += 3;\n                }\n            }\n        }\n    }\n\n    protected setViewColumn(tabBar: TabBar<Widget>, viewColumn: number): void {\n        const ids = [];\n        for (const title of tabBar.titles) {\n            const id = title.owner.id;\n            ids.push(id);\n            this.columnValues.set(id, viewColumn);\n        }\n        this.viewColumnIds.set(viewColumn, ids);\n    }\n\n    getViewColumnIds(viewColumn: number): string[] {\n        return this.viewColumnIds.get(viewColumn) || [];\n    }\n\n    getViewColumn(id: string): number | undefined {\n        return this.columnValues.get(id);\n    }\n\n    hasViewColumn(id: string): boolean {\n        return this.columnValues.has(id);\n    }\n\n    viewColumnsSize(): number {\n        return this.viewColumnIds.size;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { LabelProviderContribution, LabelProvider, URIIconReference } from '@theia/core/lib/browser/label-provider';\nimport { TreeLabelProvider } from '@theia/core/lib/browser/tree/tree-label-provider';\nimport { TreeViewNode } from './tree-view-widget';\nimport { TreeNode } from '@theia/core/lib/browser/tree/tree';\n\n@injectable()\nexport class PluginTreeViewNodeLabelProvider implements LabelProviderContribution {\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(TreeLabelProvider)\n    protected readonly treeLabelProvider: TreeLabelProvider;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    canHandle(element: TreeViewNode | any): number {\n        if (TreeNode.is(element) && ('resourceUri' in element || 'themeIconId' in element)) {\n            return this.treeLabelProvider.canHandle(element) + 1;\n        }\n        return 0;\n    }\n\n    getIcon(node: TreeViewNode): string | undefined {\n        if (node.icon) {\n            return node.icon;\n        }\n        if (node.themeIconId) {\n            if (node.themeIconId === 'file' || node.themeIconId === 'folder') {\n                const uri = node.resourceUri && new URI(node.resourceUri) || undefined;\n                return this.labelProvider.getIcon(URIIconReference.create(node.themeIconId, uri));\n            }\n            return monaco.theme.ThemeIcon.asClassName({ id: node.themeIconId });\n        }\n        if (node.resourceUri) {\n            return this.labelProvider.getIcon(new URI(node.resourceUri));\n        }\n        return undefined;\n    }\n\n    getName(node: TreeViewNode): string | undefined {\n        if (node.name) {\n            return node.name;\n        }\n        if (node.resourceUri) {\n            return this.labelProvider.getName(new URI(node.resourceUri));\n        }\n        return undefined;\n    }\n\n    getLongName(node: TreeViewNode): string | undefined {\n        if (typeof node.description === 'string') {\n            return node.description;\n        }\n        if (node.description === true && node.resourceUri) {\n            return this.labelProvider.getLongName(new URI(node.resourceUri));\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport {\n    ApplicationShell, ViewContainer as ViewContainerWidget, WidgetManager,\n    ViewContainerIdentifier, ViewContainerTitleOptions, Widget, FrontendApplicationContribution,\n    StatefulWidget, CommonMenus, BaseWidget\n} from '@theia/core/lib/browser';\nimport { ViewContainer, View } from '../../../common';\nimport { PluginSharedStyle } from '../plugin-shared-style';\nimport { DebugWidget } from '@theia/debug/lib/browser/view/debug-widget';\nimport { PluginViewWidget, PluginViewWidgetIdentifier } from './plugin-view-widget';\nimport { SCM_VIEW_CONTAINER_ID, ScmContribution } from '@theia/scm/lib/browser/scm-contribution';\nimport { EXPLORER_VIEW_CONTAINER_ID } from '@theia/navigator/lib/browser';\nimport { FileNavigatorContribution } from '@theia/navigator/lib/browser/navigator-contribution';\nimport { DebugFrontendApplicationContribution } from '@theia/debug/lib/browser/debug-frontend-application-contribution';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistry } from '@theia/core/lib/common/command';\nimport { MenuModelRegistry } from '@theia/core/lib/common/menu';\nimport { QuickViewService } from '@theia/core/lib/browser/quick-view-service';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\nimport { SearchInWorkspaceWidget } from '@theia/search-in-workspace/lib/browser/search-in-workspace-widget';\nimport { ViewContextKeyService } from './view-context-key-service';\nimport { PROBLEMS_WIDGET_ID } from '@theia/markers/lib/browser/problem/problem-widget';\nimport { OUTPUT_WIDGET_KIND } from '@theia/output/lib/browser/output-widget';\nimport { DebugConsoleContribution } from '@theia/debug/lib/browser/console/debug-console-contribution';\nimport { TERMINAL_WIDGET_FACTORY_ID } from '@theia/terminal/lib/browser/terminal-widget-impl';\n\nexport const PLUGIN_VIEW_FACTORY_ID = 'plugin-view';\nexport const PLUGIN_VIEW_CONTAINER_FACTORY_ID = 'plugin-view-container';\nexport const PLUGIN_VIEW_DATA_FACTORY_ID = 'plugin-view-data';\n\nexport type ViewDataProvider = (params: { state?: object, viewInfo: View }) => Promise<Widget>;\n\n@injectable()\nexport class PluginViewRegistry implements FrontendApplicationContribution {\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(PluginSharedStyle)\n    protected readonly style: PluginSharedStyle;\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    @inject(ScmContribution)\n    protected readonly scm: ScmContribution;\n\n    @inject(FileNavigatorContribution)\n    protected readonly explorer: FileNavigatorContribution;\n\n    @inject(DebugFrontendApplicationContribution)\n    protected readonly debug: DebugFrontendApplicationContribution;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(MenuModelRegistry)\n    protected readonly menus: MenuModelRegistry;\n\n    @inject(QuickViewService)\n    protected readonly quickView: QuickViewService;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(ViewContextKeyService)\n    protected readonly viewContextKeys: ViewContextKeyService;\n\n    protected readonly onDidExpandViewEmitter = new Emitter<string>();\n    readonly onDidExpandView = this.onDidExpandViewEmitter.event;\n\n    private readonly views = new Map<string, [string, View]>();\n    private readonly viewContainers = new Map<string, [string, ViewContainerTitleOptions]>();\n    private readonly containerViews = new Map<string, string[]>();\n    private readonly viewClauseContexts = new Map<string, Set<string>>();\n\n    private readonly viewDataProviders = new Map<string, ViewDataProvider>();\n    private readonly viewDataState = new Map<string, object>();\n\n    @postConstruct()\n    protected init(): void {\n        // VS Code Viewlets\n        this.trackVisibleWidget(EXPLORER_VIEW_CONTAINER_ID, { viewletId: 'workbench.view.explorer' });\n        this.trackVisibleWidget(SearchInWorkspaceWidget.ID, { viewletId: 'workbench.view.search', sideArea: true });\n        this.trackVisibleWidget(SCM_VIEW_CONTAINER_ID, { viewletId: 'workbench.view.scm' });\n        this.trackVisibleWidget(DebugWidget.ID, { viewletId: 'workbench.view.debug' });\n        // TODO workbench.view.extensions - Theia does not have a proper extension view yet\n\n        // VS Code Panels\n        this.trackVisibleWidget(PROBLEMS_WIDGET_ID, { panelId: 'workbench.panel.markers' });\n        this.trackVisibleWidget(OUTPUT_WIDGET_KIND, { panelId: 'workbench.panel.output' });\n        this.trackVisibleWidget(DebugConsoleContribution.options.id, { panelId: 'workbench.panel.repl' });\n        this.trackVisibleWidget(TERMINAL_WIDGET_FACTORY_ID, { panelId: 'workbench.panel.terminal' });\n        // TODO workbench.panel.comments - Theia does not have a proper comments view yet\n        this.trackVisibleWidget(SearchInWorkspaceWidget.ID, { panelId: 'workbench.view.search', sideArea: false });\n\n        this.updateFocusedView();\n        this.shell.onDidChangeActiveWidget(() => this.updateFocusedView());\n\n        this.widgetManager.onWillCreateWidget(({ factoryId, widget, waitUntil }) => {\n            if (factoryId === EXPLORER_VIEW_CONTAINER_ID && widget instanceof ViewContainerWidget) {\n                waitUntil(this.prepareViewContainer('explorer', widget));\n            }\n            if (factoryId === SCM_VIEW_CONTAINER_ID && widget instanceof ViewContainerWidget) {\n                waitUntil(this.prepareViewContainer('scm', widget));\n            }\n            if (factoryId === DebugWidget.ID && widget instanceof DebugWidget) {\n                const viewContainer = widget['sessionWidget']['viewContainer'];\n                waitUntil(this.prepareViewContainer('debug', viewContainer));\n            }\n            if (factoryId === PLUGIN_VIEW_CONTAINER_FACTORY_ID && widget instanceof ViewContainerWidget) {\n                waitUntil(this.prepareViewContainer(this.toViewContainerId(widget.options), widget));\n            }\n            if (factoryId === PLUGIN_VIEW_FACTORY_ID && widget instanceof PluginViewWidget) {\n                waitUntil(this.prepareView(widget));\n            }\n        });\n        this.doRegisterViewContainer('test', 'left', {\n            label: 'Test',\n            iconClass: 'theia-plugin-test-tab-icon',\n            closeable: true\n        });\n        this.contextKeyService.onDidChange(e => {\n            for (const [, view] of this.views.values()) {\n                const clauseContext = this.viewClauseContexts.get(view.id);\n                if (clauseContext && e.affects(clauseContext)) {\n                    this.updateViewVisibility(view.id);\n                }\n            }\n        });\n    }\n\n    protected async updateViewVisibility(viewId: string): Promise<void> {\n        const widget = await this.getView(viewId);\n        if (!widget) {\n            if (this.isViewVisible(viewId)) {\n                await this.openView(viewId);\n            }\n            return;\n        }\n        const viewInfo = this.views.get(viewId);\n        if (!viewInfo) {\n            return;\n        }\n        const [viewContainerId] = viewInfo;\n        const viewContainer = await this.getPluginViewContainer(viewContainerId);\n        if (!viewContainer) {\n            return;\n        }\n        const part = viewContainer.getPartFor(widget);\n        if (!part) {\n            return;\n        }\n        widget.updateViewVisibility(() =>\n            part.setHidden(!this.isViewVisible(viewId))\n        );\n    }\n\n    protected isViewVisible(viewId: string): boolean {\n        const viewInfo = this.views.get(viewId);\n        if (!viewInfo) {\n            return false;\n        }\n        const [, view] = viewInfo;\n        return view.when === undefined || this.contextKeyService.match(view.when);\n    }\n\n    registerViewContainer(location: string, viewContainer: ViewContainer): Disposable {\n        if (this.viewContainers.has(viewContainer.id)) {\n            console.warn('view container such id already registered: ', JSON.stringify(viewContainer));\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        const containerClass = 'theia-plugin-view-container';\n        const iconClass = 'plugin-view-container-icon-' + viewContainer.id;\n        const iconUrl = PluginSharedStyle.toExternalIconUrl(viewContainer.iconUrl);\n        toDispose.push(this.style.insertRule('.' + containerClass + '.' + iconClass, () => `\n                mask: url('${iconUrl}') no-repeat 50% 50%;\n                -webkit-mask: url('${iconUrl}') no-repeat 50% 50%;\n            `));\n        toDispose.push(this.doRegisterViewContainer(viewContainer.id, location, {\n            label: viewContainer.title,\n            iconClass: containerClass + ' ' + iconClass,\n            closeable: true\n        }));\n        return toDispose;\n    }\n\n    protected doRegisterViewContainer(id: string, location: string, options: ViewContainerTitleOptions): Disposable {\n        const toDispose = new DisposableCollection();\n        this.viewContainers.set(id, [location, options]);\n        toDispose.push(Disposable.create(() => this.viewContainers.delete(id)));\n        const toggleCommandId = `plugin.view-container.${id}.toggle`;\n        toDispose.push(this.commands.registerCommand({\n            id: toggleCommandId,\n            label: 'Toggle ' + options.label + ' View'\n        }, {\n            execute: async () => {\n                let widget = await this.getPluginViewContainer(id);\n                if (widget) {\n                    widget.dispose();\n                } else {\n                    widget = await this.openViewContainer(id);\n                    if (widget) {\n                        this.shell.activateWidget(widget.id);\n                    }\n                }\n            }\n        }));\n        toDispose.push(this.menus.registerMenuAction(CommonMenus.VIEW_VIEWS, {\n            commandId: toggleCommandId,\n            label: options.label\n        }));\n        toDispose.push(this.quickView.registerItem({\n            label: options.label,\n            open: async () => {\n                const widget = await this.openViewContainer(id);\n                if (widget) {\n                    this.shell.activateWidget(widget.id);\n                }\n            }\n        }));\n        toDispose.push(Disposable.create(async () => {\n            const widget = await this.getPluginViewContainer(id);\n            if (widget) {\n                widget.dispose();\n            }\n        }));\n        return toDispose;\n    }\n\n    getContainerViews(viewContainerId: string): string[] {\n        return this.containerViews.get(viewContainerId) || [];\n    }\n\n    registerView(viewContainerId: string, view: View): Disposable {\n        if (this.views.has(view.id)) {\n            console.warn('view with such id already registered: ', JSON.stringify(view));\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n\n        this.views.set(view.id, [viewContainerId, view]);\n        toDispose.push(Disposable.create(() => this.views.delete(view.id)));\n\n        const containerViews = this.getContainerViews(viewContainerId);\n        containerViews.push(view.id);\n        this.containerViews.set(viewContainerId, containerViews);\n        toDispose.push(Disposable.create(() => {\n            const index = containerViews.indexOf(view.id);\n            if (index !== -1) {\n                containerViews.splice(index, 1);\n            }\n        }));\n\n        if (view.when) {\n            this.viewClauseContexts.set(view.id, this.contextKeyService.parseKeys(view.when));\n            toDispose.push(Disposable.create(() => this.viewClauseContexts.delete(view.id)));\n        }\n        toDispose.push(this.quickView.registerItem({\n            label: view.name,\n            when: view.when,\n            open: () => this.openView(view.id, { activate: true })\n        }));\n        toDispose.push(this.commands.registerCommand({ id: `${view.id}.focus` }, {\n            execute: () => this.openView(view.id, { activate: true })\n        }));\n        return toDispose;\n    }\n\n    async getView(viewId: string): Promise<PluginViewWidget | undefined> {\n        if (!this.views.has(viewId)) {\n            return undefined;\n        }\n        return this.widgetManager.getWidget<PluginViewWidget>(PLUGIN_VIEW_FACTORY_ID, this.toPluginViewWidgetIdentifier(viewId));\n    }\n\n    async openView(viewId: string, options?: { activate?: boolean }): Promise<PluginViewWidget | undefined> {\n        const view = await this.doOpenView(viewId);\n        if (view && options && options.activate === true) {\n            await this.shell.activateWidget(view.id);\n        }\n        return view;\n    }\n    protected async doOpenView(viewId: string): Promise<PluginViewWidget | undefined> {\n        const widget = await this.getView(viewId);\n        if (widget) {\n            return widget;\n        }\n        const data = this.views.get(viewId);\n        if (!data) {\n            return undefined;\n        }\n        const [containerId] = data;\n        await this.openViewContainer(containerId);\n        return this.getView(viewId);\n    }\n\n    protected async prepareView(widget: PluginViewWidget): Promise<void> {\n        const data = this.views.get(widget.options.viewId);\n        if (!data) {\n            return;\n        }\n        const [, view] = data;\n        widget.title.label = view.name;\n        const currentDataWidget = widget.widgets[0];\n        const viewDataWidget = await this.createViewDataWidget(view.id);\n        if (widget.isDisposed) {\n            // eslint-disable-next-line no-unused-expressions\n            viewDataWidget?.dispose();\n            return;\n        }\n        if (currentDataWidget !== viewDataWidget) {\n            if (currentDataWidget) {\n                currentDataWidget.dispose();\n            }\n            if (viewDataWidget) {\n                widget.addWidget(viewDataWidget);\n            }\n        }\n    }\n\n    async openViewContainer(containerId: string): Promise<ViewContainerWidget | undefined> {\n        if (containerId === 'explorer') {\n            const widget = await this.explorer.openView();\n            if (widget.parent instanceof ViewContainerWidget) {\n                return widget.parent;\n            }\n            return undefined;\n        }\n        if (containerId === 'scm') {\n            const widget = await this.scm.openView();\n            if (widget.parent instanceof ViewContainerWidget) {\n                return widget.parent;\n            }\n            return undefined;\n        }\n        if (containerId === 'debug') {\n            const widget = await this.debug.openView();\n            return widget['sessionWidget']['viewContainer'];\n        }\n        const data = this.viewContainers.get(containerId);\n        if (!data) {\n            return undefined;\n        }\n        const [location] = data;\n        const identifier = this.toViewContainerIdentifier(containerId);\n        const containerWidget = await this.widgetManager.getOrCreateWidget<ViewContainerWidget>(PLUGIN_VIEW_CONTAINER_FACTORY_ID, identifier);\n        if (!containerWidget.isAttached) {\n            await this.shell.addWidget(containerWidget, {\n                area: ApplicationShell.isSideArea(location) ? location : 'left',\n                rank: Number.MAX_SAFE_INTEGER\n            });\n        }\n        return containerWidget;\n    }\n\n    protected async prepareViewContainer(viewContainerId: string, containerWidget: ViewContainerWidget): Promise<void> {\n        const data = this.viewContainers.get(viewContainerId);\n        if (data) {\n            const [, options] = data;\n            containerWidget.setTitleOptions(options);\n        }\n        for (const viewId of this.getContainerViews(viewContainerId)) {\n            const identifier = this.toPluginViewWidgetIdentifier(viewId);\n            const widget = await this.widgetManager.getOrCreateWidget<PluginViewWidget>(PLUGIN_VIEW_FACTORY_ID, identifier);\n            if (containerWidget.getTrackableWidgets().indexOf(widget) === -1) {\n                containerWidget.addWidget(widget, {\n                    initiallyCollapsed: !!containerWidget.getParts().length,\n                    initiallyHidden: !this.isViewVisible(viewId)\n                });\n            }\n            const part = containerWidget.getPartFor(widget);\n            if (part) {\n                // if a view is explicitly hidden then suppress updating visibility based on `when` closure\n                part.onDidChangeVisibility(() => widget.suppressUpdateViewVisibility = part.isHidden);\n\n                const tryFireOnDidExpandView = () => {\n                    if (!part.collapsed && part.isVisible) {\n                        toFire.dispose();\n                    }\n                };\n                const toFire = new DisposableCollection(\n                    Disposable.create(() => this.onDidExpandViewEmitter.fire(viewId)),\n                    part.onCollapsed(tryFireOnDidExpandView),\n                    part.onDidChangeVisibility(tryFireOnDidExpandView)\n                );\n                tryFireOnDidExpandView();\n            }\n        }\n    }\n\n    protected async getPluginViewContainer(viewContainerId: string): Promise<ViewContainerWidget | undefined> {\n        if (viewContainerId === 'explorer') {\n            return this.widgetManager.getWidget<ViewContainerWidget>(EXPLORER_VIEW_CONTAINER_ID);\n        }\n        if (viewContainerId === 'scm') {\n            return this.widgetManager.getWidget<ViewContainerWidget>(SCM_VIEW_CONTAINER_ID);\n        }\n        if (viewContainerId === 'debug') {\n            const debug = await this.widgetManager.getWidget(DebugWidget.ID);\n            if (debug instanceof DebugWidget) {\n                return debug['sessionWidget']['viewContainer'];\n            }\n        }\n        const identifier = this.toViewContainerIdentifier(viewContainerId);\n        return this.widgetManager.getWidget<ViewContainerWidget>(PLUGIN_VIEW_CONTAINER_FACTORY_ID, identifier);\n    }\n\n    async initWidgets(): Promise<void> {\n        const promises: Promise<void>[] = [];\n        for (const id of this.viewContainers.keys()) {\n            promises.push((async () => {\n                let viewContainer = await this.getPluginViewContainer(id);\n                if (!viewContainer) {\n                    viewContainer = await this.openViewContainer(id);\n                    if (viewContainer && !viewContainer.getParts().filter(part => !part.isHidden).length) {\n                        // close view containers without any visible view parts\n                        viewContainer.dispose();\n                    }\n                } else {\n                    await this.prepareViewContainer(this.toViewContainerId(viewContainer.options), viewContainer);\n                }\n            })().catch(console.error));\n        }\n        promises.push((async () => {\n            const explorer = await this.widgetManager.getWidget(EXPLORER_VIEW_CONTAINER_ID);\n            if (explorer instanceof ViewContainerWidget) {\n                await this.prepareViewContainer('explorer', explorer);\n            }\n        })().catch(console.error));\n        promises.push((async () => {\n            const scm = await this.widgetManager.getWidget(SCM_VIEW_CONTAINER_ID);\n            if (scm instanceof ViewContainerWidget) {\n                await this.prepareViewContainer('scm', scm);\n            }\n        })().catch(console.error));\n        promises.push((async () => {\n            const debug = await this.widgetManager.getWidget(DebugWidget.ID);\n            if (debug instanceof DebugWidget) {\n                const viewContainer = debug['sessionWidget']['viewContainer'];\n                await this.prepareViewContainer('debug', viewContainer);\n            }\n        })().catch(console.error));\n        await Promise.all(promises);\n    }\n\n    async removeStaleWidgets(): Promise<void> {\n        const views = this.widgetManager.getWidgets(PLUGIN_VIEW_FACTORY_ID);\n        for (const view of views) {\n            if (view instanceof PluginViewWidget) {\n                const id = this.toViewId(view.options);\n                if (!this.views.has(id)) {\n                    view.dispose();\n                }\n            }\n        }\n        const viewContainers = this.widgetManager.getWidgets(PLUGIN_VIEW_CONTAINER_FACTORY_ID);\n        for (const viewContainer of viewContainers) {\n            if (viewContainer instanceof ViewContainerWidget) {\n                const id = this.toViewContainerId(viewContainer.options);\n                if (!this.viewContainers.has(id)) {\n                    viewContainer.dispose();\n                }\n            }\n        }\n    }\n\n    protected toViewContainerIdentifier(viewContainerId: string): ViewContainerIdentifier {\n        return { id: PLUGIN_VIEW_CONTAINER_FACTORY_ID + ':' + viewContainerId };\n    }\n    protected toViewContainerId(identifier: ViewContainerIdentifier): string {\n        return identifier.id.substr(PLUGIN_VIEW_CONTAINER_FACTORY_ID.length + 1);\n    }\n\n    protected toPluginViewWidgetIdentifier(viewId: string): PluginViewWidgetIdentifier {\n        return { id: PLUGIN_VIEW_FACTORY_ID + ':' + viewId, viewId };\n    }\n    protected toViewId(identifier: PluginViewWidgetIdentifier): string {\n        return identifier.viewId;\n    }\n\n    /**\n     * retrieve restored layout state from previous user session but close widgets\n     * widgets should be opened only when view data providers are registered\n     */\n    onDidInitializeLayout(): void {\n        const widgets = this.widgetManager.getWidgets(PLUGIN_VIEW_DATA_FACTORY_ID);\n        for (const widget of widgets) {\n            if (StatefulWidget.is(widget)) {\n                this.viewDataState.set(widget.id, widget.storeState());\n            }\n            widget.dispose();\n        }\n    }\n\n    registerViewDataProvider(viewId: string, provider: ViewDataProvider): Disposable {\n        if (this.viewDataProviders.has(viewId)) {\n            console.error(`data provider for '${viewId}' view is already registered`);\n            return Disposable.NULL;\n        }\n        this.viewDataProviders.set(viewId, provider);\n        const toDispose = new DisposableCollection(Disposable.create(() => {\n            this.viewDataProviders.delete(viewId);\n            this.viewDataState.delete(viewId);\n        }));\n        this.getView(viewId).then(async view => {\n            if (toDispose.disposed) {\n                return;\n            }\n            if (view) {\n                if (view.isVisible) {\n                    await this.prepareView(view);\n                } else {\n                    const toDisposeOnDidExpandView = new DisposableCollection(this.onDidExpandView(async id => {\n                        if (id === viewId) {\n                            unsubscribe();\n                            await this.prepareView(view);\n                        }\n                    }));\n                    const unsubscribe = () => toDisposeOnDidExpandView.dispose();\n                    view.disposed.connect(unsubscribe);\n                    toDisposeOnDidExpandView.push(Disposable.create(() => view.disposed.disconnect(unsubscribe)));\n                    toDispose.push(toDisposeOnDidExpandView);\n                }\n            }\n        });\n        return toDispose;\n    }\n\n    protected async createViewDataWidget(viewId: string): Promise<Widget | undefined> {\n        const view = this.views.get(viewId);\n        const provider = this.viewDataProviders.get(viewId);\n        if (!view || !provider) {\n            return undefined;\n        }\n        const [, viewInfo] = view;\n        const state = this.viewDataState.get(viewId);\n        const widget = await provider({ state, viewInfo });\n        if (StatefulWidget.is(widget)) {\n            this.storeViewDataStateOnDispose(viewId, widget);\n        } else {\n            this.viewDataState.delete(viewId);\n        }\n        return widget;\n    }\n\n    protected storeViewDataStateOnDispose(viewId: string, widget: Widget & StatefulWidget): void {\n        const dispose = widget.dispose.bind(widget);\n        widget.dispose = () => {\n            this.viewDataState.set(viewId, widget.storeState());\n            dispose();\n        };\n    }\n\n    protected trackVisibleWidget(factoryId: string, view: PluginViewRegistry.VisibleView): void {\n        this.doTrackVisibleWidget(this.widgetManager.tryGetWidget(factoryId), view);\n        this.widgetManager.onDidCreateWidget(event => {\n            if (factoryId === event.factoryId) {\n                const { widget } = event;\n                this.doTrackVisibleWidget(widget, view);\n            }\n        });\n    }\n\n    protected doTrackVisibleWidget(widget: Widget | undefined, view: PluginViewRegistry.VisibleView): void {\n        if (widget instanceof BaseWidget) {\n            widget.onDidChangeVisibility(() => this.updateVisibleWidget(widget, view));\n            const toDispose = new DisposableCollection(\n                Disposable.create(() => this.updateVisibleWidget(widget, view)),\n                this.shell.onDidChangeActiveWidget(() => {\n                    if (this.shell.activeWidget === widget) {\n                        this.updateVisibleWidget(widget, view);\n                    }\n                })\n            );\n            if (view.sideArea !== undefined) {\n                toDispose.pushAll([\n                    this.shell.onDidAddWidget(w => {\n                        if (w === widget) {\n                            this.updateVisibleWidget(widget, view);\n                        }\n                    })\n                ]);\n            }\n            widget.disposed.connect(() => toDispose.dispose());\n        }\n    }\n\n    protected readonly visiblePanels = new Set<string>();\n    protected readonly visibleViewlets = new Set<string>();\n\n    protected updateVisibleWidget(widget: BaseWidget, view: PluginViewRegistry.VisibleView): void {\n        const visibleViews = 'viewletId' in view ? this.visibleViewlets : this.visiblePanels;\n        const viewId = 'viewletId' in view ? view.viewletId : view.panelId;\n        const visibleView = 'viewletId' in view ? this.viewContextKeys.activeViewlet : this.viewContextKeys.activePanel;\n        visibleViews.delete(viewId);\n        if (this.isVisibleWidget(widget, view)) {\n            visibleView.set(viewId);\n            visibleViews.add(viewId);\n        } else {\n            const lastVisibleView = [...visibleViews.values()][visibleViews.size - 1];\n            visibleView.set(lastVisibleView);\n        }\n    }\n\n    protected isVisibleWidget(widget: BaseWidget, view: PluginViewRegistry.VisibleView): boolean {\n        if (widget.isDisposed || !widget.isVisible) {\n            return false;\n        }\n        if (view.sideArea === undefined) {\n            return true;\n        }\n        const area = this.shell.getAreaFor(widget);\n        return view.sideArea === (area === 'left' || area === 'right');\n    }\n\n    protected updateFocusedView(): void {\n        const widget = this.shell.activeWidget;\n        if (widget instanceof PluginViewWidget) {\n            this.viewContextKeys.focusedView.set(widget.options.viewId);\n        } else {\n            this.viewContextKeys.focusedView.reset();\n        }\n    }\n\n}\nexport namespace PluginViewRegistry {\n    export type VisibleView = ({ viewletId: string } | { panelId: string }) & {\n        /** `undefined` means any area */\n        sideArea?: boolean\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { MAIN_RPC_CONTEXT, TreeViewsMain, TreeViewsExt, TreeViewRevealOptions } from '../../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { PluginViewRegistry, PLUGIN_VIEW_DATA_FACTORY_ID } from './plugin-view-registry';\nimport { SelectableTreeNode, ExpandableTreeNode, CompositeTreeNode, WidgetManager } from '@theia/core/lib/browser';\nimport { ViewContextKeyService } from './view-context-key-service';\nimport { Disposable, DisposableCollection } from '@theia/core';\nimport { TreeViewWidget, TreeViewNode } from './tree-view-widget';\nimport { PluginViewWidget } from './plugin-view-widget';\n\nexport class TreeViewsMainImpl implements TreeViewsMain, Disposable {\n\n    private readonly proxy: TreeViewsExt;\n    private readonly viewRegistry: PluginViewRegistry;\n    private readonly contextKeys: ViewContextKeyService;\n    private readonly widgetManager: WidgetManager;\n\n    private readonly treeViewProviders = new Map<string, Disposable>();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as not disposed */ })\n    );\n\n    constructor(rpc: RPCProtocol, private container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT);\n        this.viewRegistry = container.get(PluginViewRegistry);\n\n        this.contextKeys = this.container.get(ViewContextKeyService);\n        this.widgetManager = this.container.get(WidgetManager);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $registerTreeDataProvider(treeViewId: string): Promise<void> {\n        this.treeViewProviders.set(treeViewId, this.viewRegistry.registerViewDataProvider(treeViewId, async ({ state, viewInfo }) => {\n            const widget = await this.widgetManager.getOrCreateWidget<TreeViewWidget>(PLUGIN_VIEW_DATA_FACTORY_ID, { id: treeViewId });\n            widget.model.viewInfo = viewInfo;\n            if (state) {\n                widget.restoreState(state);\n                // ensure that state is completely restored\n                await widget.model.refresh();\n            } else if (!widget.model.root) {\n                const root: CompositeTreeNode & ExpandableTreeNode = {\n                    id: '',\n                    parent: undefined,\n                    name: '',\n                    visible: false,\n                    expanded: true,\n                    children: []\n                };\n                widget.model.root = root;\n            }\n            if (this.toDispose.disposed) {\n                widget.model.proxy = undefined;\n            } else {\n                widget.model.proxy = this.proxy;\n                this.toDispose.push(Disposable.create(() => widget.model.proxy = undefined));\n                this.handleTreeEvents(widget.id, widget);\n            }\n            await widget.model.refresh();\n            return widget;\n        }));\n        this.toDispose.push(Disposable.create(() => this.$unregisterTreeDataProvider(treeViewId)));\n    }\n\n    async $unregisterTreeDataProvider(treeViewId: string): Promise<void> {\n        const treeDataProvider = this.treeViewProviders.get(treeViewId);\n        if (treeDataProvider) {\n            this.treeViewProviders.delete(treeViewId);\n            treeDataProvider.dispose();\n        }\n    }\n\n    async $refresh(treeViewId: string): Promise<void> {\n        const viewPanel = await this.viewRegistry.getView(treeViewId);\n        const widget = viewPanel && viewPanel.widgets[0];\n        if (widget instanceof TreeViewWidget) {\n            await widget.model.refresh();\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $reveal(treeViewId: string, treeItemId: string, options: TreeViewRevealOptions): Promise<any> {\n        const viewPanel = await this.viewRegistry.openView(treeViewId, { activate: options.focus });\n        const widget = viewPanel && viewPanel.widgets[0];\n        if (widget instanceof TreeViewWidget) {\n            const treeNode = widget.model.getNode(treeItemId);\n            if (treeNode) {\n                if (options.expand && ExpandableTreeNode.is(treeNode)) {\n                    widget.model.expandNode(treeNode);\n                }\n                if (options.select && SelectableTreeNode.is(treeNode)) {\n                    widget.model.selectNode(treeNode);\n                }\n            }\n        }\n    }\n\n    async $setMessage(treeViewId: string, message: string): Promise<void> {\n        const viewPanel = await this.viewRegistry.getView(treeViewId);\n        if (viewPanel instanceof PluginViewWidget) {\n            viewPanel.message = message;\n        }\n    }\n\n    async $setTitle(treeViewId: string, title: string): Promise<void> {\n        const viewPanel = await this.viewRegistry.getView(treeViewId);\n        if (viewPanel) {\n            viewPanel.title.label = title;\n        }\n    }\n\n    protected handleTreeEvents(treeViewId: string, treeViewWidget: TreeViewWidget): void {\n        this.toDispose.push(treeViewWidget.model.onExpansionChanged(event => {\n            this.proxy.$setExpanded(treeViewId, event.id, event.expanded);\n        }));\n\n        this.toDispose.push(treeViewWidget.model.onSelectionChanged(event => {\n            if (event.length === 1) {\n                const { contextValue } = event[0] as TreeViewNode;\n                this.contextKeys.viewItem.set(contextValue);\n            } else {\n                this.contextKeys.viewItem.set('');\n            }\n            this.contextKeys.view.set(treeViewId);\n\n            this.proxy.$setSelection(treeViewId, event.map((node: TreeViewNode) => node.id));\n        }));\n\n        const updateVisible = () => this.proxy.$setVisible(treeViewId, treeViewWidget.isVisible);\n        updateVisible();\n        this.toDispose.push(treeViewWidget.onDidChangeVisibility(() => updateVisible()));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { WebviewWidget, WebviewWidgetIdentifier, WebviewWidgetExternalEndpoint } from './webview';\nimport { WebviewEnvironment } from './webview-environment';\n\nexport class WebviewWidgetFactory {\n\n    readonly id = WebviewWidget.FACTORY_ID;\n\n    protected readonly container: interfaces.Container;\n\n    constructor(container: interfaces.Container) {\n        this.container = container;\n    }\n\n    async createWidget(identifier: WebviewWidgetIdentifier): Promise<WebviewWidget> {\n        const externalEndpoint = await this.container.get(WebviewEnvironment).externalEndpoint();\n        let endpoint = externalEndpoint.replace('{{uuid}}', identifier.id);\n        if (endpoint[endpoint.length - 1] === '/') {\n            endpoint = endpoint.slice(0, endpoint.length - 1);\n        }\n        const child = this.container.createChild();\n        child.bind(WebviewWidgetIdentifier).toConstantValue(identifier);\n        child.bind(WebviewWidgetExternalEndpoint).toConstantValue(endpoint);\n        return child.get(WebviewWidget);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport debounce = require('lodash.debounce');\nimport { URI } from 'vscode-uri';\nimport { interfaces } from 'inversify';\nimport { WebviewsMain, MAIN_RPC_CONTEXT, WebviewsExt, WebviewPanelViewState } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { WebviewOptions, WebviewPanelOptions, WebviewPanelShowOptions } from '@theia/plugin';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell/application-shell';\nimport { WebviewWidget, WebviewWidgetIdentifier } from './webview/webview';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { ViewColumnService } from './view-column-service';\nimport { WidgetManager } from '@theia/core/lib/browser/widget-manager';\nimport { JSONExt } from '@phosphor/coreutils/lib/json';\nimport { Mutable } from '@theia/core/lib/common/types';\nimport { HostedPluginSupport } from '../../hosted/browser/hosted-plugin';\nimport { IconUrl } from '../../common/plugin-protocol';\n\nexport class WebviewsMainImpl implements WebviewsMain, Disposable {\n\n    private readonly proxy: WebviewsExt;\n    protected readonly shell: ApplicationShell;\n    protected readonly widgets: WidgetManager;\n    protected readonly pluginService: HostedPluginSupport;\n    protected readonly viewColumnService: ViewColumnService;\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.WEBVIEWS_EXT);\n        this.shell = container.get(ApplicationShell);\n        this.viewColumnService = container.get(ViewColumnService);\n        this.widgets = container.get(WidgetManager);\n        this.pluginService = container.get(HostedPluginSupport);\n        this.toDispose.push(this.shell.onDidChangeActiveWidget(() => this.updateViewStates()));\n        this.toDispose.push(this.shell.onDidChangeCurrentWidget(() => this.updateViewStates()));\n        this.toDispose.push(this.viewColumnService.onViewColumnChanged(() => this.updateViewStates()));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $createWebviewPanel(\n        panelId: string,\n        viewType: string,\n        title: string,\n        showOptions: WebviewPanelShowOptions,\n        options: WebviewPanelOptions & WebviewOptions\n    ): Promise<void> {\n        const view = await this.widgets.getOrCreateWidget<WebviewWidget>(WebviewWidget.FACTORY_ID, <WebviewWidgetIdentifier>{ id: panelId });\n        this.hookWebview(view);\n        view.viewType = viewType;\n        view.title.label = title;\n        const { enableFindWidget, retainContextWhenHidden, enableScripts, localResourceRoots, ...contentOptions } = options;\n        view.options = { enableFindWidget, retainContextWhenHidden };\n        view.setContentOptions({\n            allowScripts: enableScripts,\n            localResourceRoots: localResourceRoots && localResourceRoots.map(root => root.toString()),\n            ...contentOptions\n        });\n        this.addOrReattachWidget(view, showOptions);\n    }\n\n    protected hookWebview(view: WebviewWidget): void {\n        const handle = view.identifier.id;\n        this.toDispose.push(view.onDidChangeVisibility(() => this.updateViewState(view)));\n        this.toDispose.push(view.onMessage(data => this.proxy.$onMessage(handle, data)));\n        view.disposed.connect(() => {\n            if (this.toDispose.disposed) {\n                return;\n            }\n            this.proxy.$onDidDisposeWebviewPanel(handle);\n        });\n    }\n\n    private addOrReattachWidget(widget: WebviewWidget, showOptions: WebviewPanelShowOptions): void {\n        const widgetOptions: ApplicationShell.WidgetOptions = { area: showOptions.area ? showOptions.area : 'main' };\n\n        let mode = 'open-to-right';\n        if (showOptions.viewColumn === -2) {\n            const ref = this.shell.currentWidget;\n            if (ref && this.shell.getAreaFor(ref) === widgetOptions.area) {\n                Object.assign(widgetOptions, { ref, mode });\n            }\n        } else if (widgetOptions.area === 'main' && showOptions.viewColumn !== undefined) {\n            this.viewColumnService.updateViewColumns();\n            let widgetIds = this.viewColumnService.getViewColumnIds(showOptions.viewColumn);\n            if (widgetIds.length > 0) {\n                mode = 'tab-after';\n            } else if (showOptions.viewColumn >= 0) {\n                const columnsSize = this.viewColumnService.viewColumnsSize();\n                if (columnsSize) {\n                    showOptions.viewColumn = columnsSize - 1;\n                    widgetIds = this.viewColumnService.getViewColumnIds(showOptions.viewColumn);\n                }\n            }\n            const ref = this.shell.getWidgets(widgetOptions.area).find(w => !w.isHidden && widgetIds.indexOf(w.id) !== -1);\n            if (ref) {\n                Object.assign(widgetOptions, { ref, mode });\n            }\n        }\n\n        this.shell.addWidget(widget, widgetOptions);\n        if (showOptions.preserveFocus) {\n            this.shell.revealWidget(widget.id);\n        } else {\n            this.shell.activateWidget(widget.id);\n        }\n    }\n\n    async $disposeWebview(handle: string): Promise<void> {\n        const view = await this.tryGetWebview(handle);\n        if (view) {\n            view.dispose();\n        }\n    }\n\n    async $reveal(handle: string, showOptions: WebviewPanelShowOptions): Promise<void> {\n        const widget = await this.getWebview(handle);\n        if (widget.isDisposed) {\n            return;\n        }\n        if ((showOptions.viewColumn !== undefined && showOptions.viewColumn !== widget.viewState.position) || showOptions.area !== undefined) {\n            this.viewColumnService.updateViewColumns();\n            const columnIds = showOptions.viewColumn ? this.viewColumnService.getViewColumnIds(showOptions.viewColumn) : [];\n            const area = this.shell.getAreaFor(widget);\n            if (columnIds.indexOf(widget.id) === -1 || area !== showOptions.area) {\n                this.addOrReattachWidget(widget, showOptions);\n                return;\n            }\n        }\n        if (showOptions.preserveFocus) {\n            this.shell.revealWidget(widget.id);\n        } else {\n            this.shell.activateWidget(widget.id);\n        }\n    }\n\n    async $setTitle(handle: string, value: string): Promise<void> {\n        const webview = await this.getWebview(handle);\n        webview.title.label = value;\n    }\n\n    async $setIconPath(handle: string, iconUrl: IconUrl | undefined): Promise<void> {\n        const webview = await this.getWebview(handle);\n        webview.setIconUrl(iconUrl);\n    }\n\n    async $setHtml(handle: string, value: string): Promise<void> {\n        const webview = await this.getWebview(handle);\n        webview.setHTML(value);\n    }\n\n    async $setOptions(handle: string, options: WebviewOptions): Promise<void> {\n        const webview = await this.getWebview(handle);\n        const { enableScripts, localResourceRoots, ...contentOptions } = options;\n        webview.setContentOptions({\n            allowScripts: enableScripts,\n            localResourceRoots: localResourceRoots && localResourceRoots.map(root => root.toString()),\n            ...contentOptions\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $postMessage(handle: string, value: any): Promise<boolean> {\n        const webview = await this.getWebview(handle);\n        webview.sendMessage(value);\n        return true;\n    }\n\n    $registerSerializer(viewType: string): void {\n        this.pluginService.registerWebviewReviver(viewType, widget => this.restoreWidget(widget));\n        this.toDispose.push(Disposable.create(() => this.$unregisterSerializer(viewType)));\n    }\n\n    $unregisterSerializer(viewType: string): void {\n        this.pluginService.unregisterWebviewReviver(viewType);\n    }\n\n    protected async restoreWidget(widget: WebviewWidget): Promise<void> {\n        this.hookWebview(widget);\n        const handle = widget.identifier.id;\n        const title = widget.title.label;\n\n        let state = undefined;\n        if (widget.state) {\n            try {\n                state = JSON.parse(widget.state);\n            } catch {\n                // noop\n            }\n        }\n\n        const options = widget.options;\n        const { allowScripts, localResourceRoots, ...contentOptions } = widget.contentOptions;\n        this.updateViewState(widget);\n        await this.proxy.$deserializeWebviewPanel(handle, widget.viewType, title, state, widget.viewState, {\n            enableScripts: allowScripts,\n            localResourceRoots: localResourceRoots && localResourceRoots.map(root => URI.parse(root)),\n            ...contentOptions,\n            ...options\n        });\n    }\n\n    protected readonly updateViewStates = debounce(() => {\n        for (const widget of this.widgets.getWidgets(WebviewWidget.FACTORY_ID)) {\n            if (widget instanceof WebviewWidget) {\n                this.updateViewState(widget);\n            }\n        }\n    }, 100);\n\n    private updateViewState(widget: WebviewWidget, viewColumn?: number | undefined): void {\n        const viewState: Mutable<WebviewPanelViewState> = {\n            active: this.shell.activeWidget === widget,\n            visible: !widget.isHidden,\n            position: viewColumn || 0\n        };\n        if (typeof viewColumn !== 'number') {\n            this.viewColumnService.updateViewColumns();\n            viewState.position = this.viewColumnService.getViewColumn(widget.id) || 0;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (JSONExt.deepEqual(<any>viewState, <any>widget.viewState)) {\n            return;\n        }\n        widget.viewState = viewState;\n        this.proxy.$onDidChangeWebviewPanelViewState(widget.identifier.id, widget.viewState);\n    }\n\n    private async getWebview(viewId: string): Promise<WebviewWidget> {\n        const webview = await this.tryGetWebview(viewId);\n        if (!webview) {\n            throw new Error(`Unknown Webview: ${viewId}`);\n        }\n        return webview;\n    }\n\n    private async tryGetWebview(id: string): Promise<WebviewWidget | undefined> {\n        return this.widgets.getWidget<WebviewWidget>(WebviewWidget.FACTORY_ID, <WebviewWidgetIdentifier>{ id });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from 'vscode-uri';\nimport CoreURI from '@theia/core/lib/common/uri';\nimport { interfaces } from 'inversify';\nimport { WindowStateExt, MAIN_RPC_CONTEXT, WindowMain } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { open, OpenerService } from '@theia/core/lib/browser/opener-service';\nimport { ExternalUriService } from '@theia/core/lib/browser/external-uri-service';\n\nexport class WindowStateMain implements WindowMain, Disposable {\n\n    private readonly proxy: WindowStateExt;\n\n    private readonly openerService: OpenerService;\n\n    private readonly externalUriService: ExternalUriService;\n\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT);\n        this.openerService = container.get(OpenerService);\n        this.externalUriService = container.get(ExternalUriService);\n\n        const fireDidFocus = () => this.onFocusChanged(true);\n        window.addEventListener('focus', fireDidFocus);\n        this.toDispose.push(Disposable.create(() => window.removeEventListener('focus', fireDidFocus)));\n\n        const fireDidBlur = () => this.onFocusChanged(false);\n        window.addEventListener('blur', fireDidBlur);\n        this.toDispose.push(Disposable.create(() => window.removeEventListener('blur', fireDidBlur)));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onFocusChanged(focused: boolean): void {\n        this.proxy.$onWindowStateChanged(focused);\n    }\n\n    async $openUri(uriComponent: UriComponents): Promise<boolean> {\n        const uri = URI.revive(uriComponent);\n        const url = new CoreURI(encodeURI(uri.toString(true)));\n        try {\n            await open(this.openerService, url);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    async $asExternalUri(uriComponents: UriComponents): Promise<UriComponents> {\n        const uri = URI.revive(uriComponents);\n        const resolved = await this.externalUriService.resolve(new CoreURI(uri));\n        return URI.parse(resolved.toString());\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { interfaces, injectable } from 'inversify';\nimport { WorkspaceExt, StorageExt, MAIN_RPC_CONTEXT, WorkspaceMain, WorkspaceFolderPickOptionsMain } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { URI as Uri } from 'vscode-uri';\nimport { UriComponents, theiaUritoUriComponents } from '../../common/uri-components';\nimport { QuickOpenModel, QuickOpenItem, QuickOpenMode } from '@theia/core/lib/browser/quick-open/quick-open-model';\nimport { MonacoQuickOpenService } from '@theia/monaco/lib/browser/monaco-quick-open-service';\nimport { FileStat } from '@theia/filesystem/lib/common';\nimport { FileSearchService } from '@theia/file-search/lib/common/file-search-service';\nimport URI from '@theia/core/lib/common/uri';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { Resource } from '@theia/core/lib/common/resource';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter, Event, ResourceResolver, CancellationToken } from '@theia/core';\nimport { FileWatcherSubscriberOptions } from '../../common/plugin-api-rpc-model';\nimport { InPluginFileSystemWatcherManager } from './in-plugin-filesystem-watcher-manager';\nimport { PluginServer } from '../../common/plugin-protocol';\nimport { FileSystemPreferences, FileSystemWatcher } from '@theia/filesystem/lib/browser';\nimport { SearchInWorkspaceService } from '@theia/search-in-workspace/lib/browser/search-in-workspace-service';\n\nexport class WorkspaceMainImpl implements WorkspaceMain, Disposable {\n\n    private readonly proxy: WorkspaceExt;\n\n    private storageProxy: StorageExt;\n\n    private quickOpenService: MonacoQuickOpenService;\n\n    private fileSearchService: FileSearchService;\n\n    private searchInWorkspaceService: SearchInWorkspaceService;\n\n    private inPluginFileSystemWatcherManager: InPluginFileSystemWatcherManager;\n\n    private roots: FileStat[];\n\n    private resourceResolver: TextContentResourceResolver;\n\n    private pluginServer: PluginServer;\n\n    private workspaceService: WorkspaceService;\n\n    private fsPreferences: FileSystemPreferences;\n\n    private fileSystemWatcher: FileSystemWatcher;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    protected workspaceSearch: Set<number> = new Set<number>();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.WORKSPACE_EXT);\n        this.storageProxy = rpc.getProxy(MAIN_RPC_CONTEXT.STORAGE_EXT);\n        this.quickOpenService = container.get(MonacoQuickOpenService);\n        this.fileSearchService = container.get(FileSearchService);\n        this.searchInWorkspaceService = container.get(SearchInWorkspaceService);\n        this.resourceResolver = container.get(TextContentResourceResolver);\n        this.pluginServer = container.get(PluginServer);\n        this.workspaceService = container.get(WorkspaceService);\n        this.fsPreferences = container.get(FileSystemPreferences);\n        this.fileSystemWatcher = container.get(FileSystemWatcher);\n        this.inPluginFileSystemWatcherManager = container.get(InPluginFileSystemWatcherManager);\n\n        this.processWorkspaceFoldersChanged(this.workspaceService.tryGetRoots());\n        this.toDispose.push(this.workspaceService.onWorkspaceChanged(roots => {\n            this.processWorkspaceFoldersChanged(roots);\n        }));\n\n        this.toDispose.push(this.fileSystemWatcher.onWillCreate(event => {\n            event.waitUntil(this.proxy.$onWillCreateFiles({ files: [theiaUritoUriComponents(event.uri)] }));\n        }));\n        this.toDispose.push(this.fileSystemWatcher.onDidCreate(event => {\n            this.proxy.$onDidCreateFiles({ files: [theiaUritoUriComponents(event.uri)] });\n        }));\n        this.toDispose.push(this.fileSystemWatcher.onWillMove(event => {\n            event.waitUntil(this.proxy.$onWillRenameFiles({\n                files: [{\n                    oldUri: theiaUritoUriComponents(event.sourceUri),\n                    newUri: theiaUritoUriComponents(event.targetUri),\n                }],\n            }));\n        }));\n        this.toDispose.push(this.fileSystemWatcher.onDidMove(event => {\n            this.proxy.$onDidRenameFiles({\n                files: [{\n                    oldUri: theiaUritoUriComponents(event.sourceUri),\n                    newUri: theiaUritoUriComponents(event.targetUri),\n                }],\n            });\n        }));\n        this.toDispose.push(this.fileSystemWatcher.onWillDelete(event => {\n            event.waitUntil(this.proxy.$onWillDeleteFiles({ files: [theiaUritoUriComponents(event.uri)] }));\n        }));\n        this.toDispose.push(this.fileSystemWatcher.onDidDelete(event => {\n            this.proxy.$onDidDeleteFiles({ files: [theiaUritoUriComponents(event.uri)] });\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected async processWorkspaceFoldersChanged(roots: FileStat[]): Promise<void> {\n        if (this.isAnyRootChanged(roots) === false) {\n            return;\n        }\n        this.roots = roots;\n        this.proxy.$onWorkspaceFoldersChanged({ roots });\n\n        const keyValueStorageWorkspacesData = await this.pluginServer.getAllStorageValues({\n            workspace: this.workspaceService.workspace,\n            roots: this.workspaceService.tryGetRoots()\n        });\n        this.storageProxy.$updatePluginsWorkspaceData(keyValueStorageWorkspacesData);\n\n    }\n\n    private isAnyRootChanged(roots: FileStat[]): boolean {\n        if (!this.roots || this.roots.length !== roots.length) {\n            return true;\n        }\n\n        return this.roots.some((root, index) => root.uri !== roots[index].uri);\n    }\n\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            // Return undefined if workspace root is not set\n            if (!this.roots || !this.roots.length) {\n                resolve(undefined);\n                return;\n            }\n\n            // Active before appearing the pick menu\n            const activeElement: HTMLElement | undefined = window.document.activeElement as HTMLElement;\n\n            // WorkspaceFolder to be returned\n            let returnValue: theia.WorkspaceFolder | undefined;\n\n            const items = this.roots.map(root => {\n                const rootUri = Uri.parse(root.uri);\n                const rootPathName = rootUri.path.substring(rootUri.path.lastIndexOf('/') + 1);\n                return new QuickOpenItem({\n                    label: rootPathName,\n                    detail: rootUri.path,\n                    run: mode => {\n                        if (mode === QuickOpenMode.OPEN) {\n                            returnValue = {\n                                uri: rootUri,\n                                name: rootPathName,\n                                index: 0\n                            } as theia.WorkspaceFolder;\n                        }\n                        return true;\n                    }\n                });\n            });\n\n            // Create quick open model\n            const model = {\n                onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n                    acceptor(items);\n                }\n            } as QuickOpenModel;\n\n            // Show pick menu\n            this.quickOpenService.open(model, {\n                fuzzyMatchLabel: true,\n                fuzzyMatchDetail: true,\n                fuzzyMatchDescription: true,\n                placeholder: options.placeHolder,\n                onClose: () => {\n                    if (activeElement) {\n                        activeElement.focus({ preventScroll: true });\n                    }\n\n                    resolve(returnValue);\n                }\n            });\n        });\n    }\n\n    async $startFileSearch(includePattern: string, includeFolderUri: string | undefined, excludePatternOrDisregardExcludes?: string | false,\n        maxResults?: number): Promise<UriComponents[]> {\n        const roots: FileSearchService.RootOptions = {};\n        const rootUris = includeFolderUri ? [includeFolderUri] : this.roots.map(r => r.uri);\n        for (const rootUri of rootUris) {\n            roots[rootUri] = {};\n        }\n        const opts: FileSearchService.Options = { rootOptions: roots };\n        if (includePattern) {\n            opts.includePatterns = [includePattern];\n        }\n        if (typeof excludePatternOrDisregardExcludes === 'string') {\n            opts.excludePatterns = [excludePatternOrDisregardExcludes];\n        }\n        if (excludePatternOrDisregardExcludes !== false) {\n            for (const rootUri of rootUris) {\n                const filesExclude = this.fsPreferences.get('files.exclude', undefined, rootUri);\n                if (filesExclude) {\n                    for (const excludePattern in filesExclude) {\n                        if (filesExclude[excludePattern]) {\n                            const rootOptions = roots[rootUri];\n                            const rootExcludePatterns = rootOptions.excludePatterns || [];\n                            rootExcludePatterns.push(excludePattern);\n                            rootOptions.excludePatterns = rootExcludePatterns;\n                        }\n                    }\n                }\n            }\n        }\n        if (typeof maxResults === 'number') {\n            opts.limit = maxResults;\n        }\n        const uriStrs = await this.fileSearchService.find('', opts);\n        return uriStrs.map(uriStr => Uri.parse(uriStr));\n    }\n\n    async $findTextInFiles(query: theia.TextSearchQuery, options: theia.FindTextInFilesOptions, searchRequestId: number,\n        token: theia.CancellationToken = CancellationToken.None): Promise<theia.TextSearchComplete> {\n        const maxHits = options.maxResults ? options.maxResults : 150;\n        const excludes = options.exclude ? (typeof options.exclude === 'string' ? options.exclude : (<theia.RelativePattern>options.exclude).pattern) : undefined;\n        const includes = options.include ? (typeof options.include === 'string' ? options.include : (<theia.RelativePattern>options.include).pattern) : undefined;\n        let canceledRequest = false;\n        return new Promise(resolve => {\n            let matches = 0;\n            const what: string = query.pattern;\n            const rootUris = this.roots.map(r => r.uri);\n            this.searchInWorkspaceService.searchWithCallback(what, rootUris, {\n                onResult: (searchId, result) => {\n                    if (canceledRequest) {\n                        return;\n                    }\n                    const hasSearch = this.workspaceSearch.has(searchId);\n                    if (!hasSearch) {\n                        this.workspaceSearch.add(searchId);\n                        token.onCancellationRequested(() => {\n                            this.searchInWorkspaceService.cancel(searchId);\n                            canceledRequest = true;\n                        });\n                    }\n                    if (token.isCancellationRequested) {\n                        this.searchInWorkspaceService.cancel(searchId);\n                        canceledRequest = true;\n                        return;\n                    }\n                    if (result && result.matches && result.matches.length) {\n                        while ((matches + result.matches.length) > maxHits) {\n                            result.matches.splice(result.matches.length - 1, 1);\n                        }\n                        this.proxy.$onTextSearchResult(searchRequestId, false, result);\n                        matches += result.matches.length;\n                        if (maxHits <= matches) {\n                            this.searchInWorkspaceService.cancel(searchId);\n                        }\n                    }\n                },\n                onDone: (searchId, _error) => {\n                    const hasSearch = this.workspaceSearch.has(searchId);\n                    if (hasSearch) {\n                        this.searchInWorkspaceService.cancel(searchId);\n                        this.workspaceSearch.delete(searchId);\n                    }\n                    this.proxy.$onTextSearchResult(searchRequestId, true);\n                    if (maxHits <= matches) {\n                        resolve({ limitHit: true });\n                    } else {\n                        resolve({ limitHit: false });\n                    }\n                }\n            }, {\n                useRegExp: query.isRegExp,\n                matchCase: query.isCaseSensitive,\n                matchWholeWord: query.isWordMatch,\n                exclude: excludes ? [excludes] : undefined,\n                include: includes ? [includes] : undefined,\n                maxResults: maxHits\n            });\n        });\n    }\n\n    async $registerFileSystemWatcher(options: FileWatcherSubscriberOptions): Promise<string> {\n        const handle = this.inPluginFileSystemWatcherManager.registerFileWatchSubscription(options, this.proxy);\n        this.toDispose.push(Disposable.create(() => this.inPluginFileSystemWatcherManager.unregisterFileWatchSubscription(handle)));\n        return handle;\n    }\n\n    $unregisterFileSystemWatcher(watcherId: string): Promise<void> {\n        this.inPluginFileSystemWatcherManager.unregisterFileWatchSubscription(watcherId);\n        return Promise.resolve();\n    }\n\n    async $registerTextDocumentContentProvider(scheme: string): Promise<void> {\n        this.resourceResolver.registerContentProvider(scheme, this.proxy);\n        this.toDispose.push(Disposable.create(() => this.resourceResolver.unregisterContentProvider(scheme)));\n    }\n\n    $unregisterTextDocumentContentProvider(scheme: string): void {\n        this.resourceResolver.unregisterContentProvider(scheme);\n    }\n\n    $onTextDocumentContentChange(uri: string, content: string): void {\n        this.resourceResolver.onContentChange(uri, content);\n    }\n\n    async $updateWorkspaceFolders(start: number, deleteCount?: number, ...rootsToAdd: string[]): Promise<void> {\n        await this.workspaceService.spliceRoots(start, deleteCount, ...rootsToAdd.map(root => new URI(root)));\n    }\n\n}\n\n/**\n * Text content provider for resources with custom scheme.\n */\nexport interface TextContentResourceProvider {\n\n    /**\n     * Provides resource for given URI\n     */\n    provideResource(uri: URI): Resource;\n\n}\n\n@injectable()\nexport class TextContentResourceResolver implements ResourceResolver {\n\n    // Resource providers for different schemes\n    private providers = new Map<string, TextContentResourceProvider>();\n\n    // Opened resources\n    private resources = new Map<string, TextContentResource>();\n\n    async resolve(uri: URI): Promise<Resource> {\n        const provider = this.providers.get(uri.scheme);\n        if (provider) {\n            return provider.provideResource(uri);\n        }\n\n        throw new Error(`Unable to find Text Content Resource Provider for scheme '${uri.scheme}'`);\n    }\n\n    registerContentProvider(scheme: string, proxy: WorkspaceExt): void {\n        if (this.providers.has(scheme)) {\n            throw new Error(`Text Content Resource Provider for scheme '${scheme}' is already registered`);\n        }\n\n        const instance = this;\n        this.providers.set(scheme, {\n            provideResource: (uri: URI): Resource => {\n                let resource = instance.resources.get(uri.toString());\n                if (resource) {\n                    return resource;\n                }\n\n                resource = new TextContentResource(uri, proxy, {\n                    dispose(): void {\n                        instance.resources.delete(uri.toString());\n                    }\n                });\n\n                instance.resources.set(uri.toString(), resource);\n                return resource;\n            }\n        });\n    }\n\n    unregisterContentProvider(scheme: string): void {\n        if (!this.providers.delete(scheme)) {\n            throw new Error(`Text Content Resource Provider for scheme '${scheme}' has not been registered`);\n        }\n    }\n\n    onContentChange(uri: string, content: string): void {\n        const resource = this.resources.get(uri);\n        if (resource) {\n            resource.setContent(content);\n        }\n    }\n\n}\n\nexport class TextContentResource implements Resource {\n\n    private onDidChangeContentsEmitter: Emitter<void> = new Emitter<void>();\n    readonly onDidChangeContents: Event<void> = this.onDidChangeContentsEmitter.event;\n\n    // cached content\n    cache: string | undefined;\n\n    constructor(public uri: URI, private proxy: WorkspaceExt, protected disposable: Disposable) {\n    }\n\n    async readContents(options?: { encoding?: string }): Promise<string> {\n        if (this.cache) {\n            const content = this.cache;\n            this.cache = undefined;\n            return content;\n        } else {\n            const content = await this.proxy.$provideTextDocumentContent(this.uri.toString());\n            if (content) {\n                return content;\n            }\n        }\n\n        return Promise.reject(new Error(`Unable to get content for '${this.uri.toString()}'`));\n    }\n\n    dispose(): void {\n        this.disposable.dispose();\n    }\n\n    setContent(content: string): void {\n        this.cache = content;\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { FileStat } from '@theia/filesystem/lib/common';\n\nexport const pluginPathsServicePath = '/services/plugin-paths';\n\n// Service to create plugin configuration folders for different purpose.\nexport const PluginPathsService = Symbol('PluginPathsService');\nexport interface PluginPathsService {\n    /** Returns hosted log path. Create directory by this path if it is not exist on the file system. */\n    getHostLogPath(): Promise<string>;\n    /** Returns storage path for given workspace */\n    getHostStoragePath(workspace: FileStat | undefined, roots: FileStat[]): Promise<string | undefined>;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport mainModule from './main/browser/plugin-ext-frontend-module';\n\nexport default mainModule;\n","\nvar content = require(\"!!../../../../../../../css-loader/index.js!./modal-notification.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../css-loader/index.js!./modal-notification.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../css-loader/index.js!./modal-notification.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../../css-loader/index.js!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../css-loader/index.js!./index.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../css-loader/index.js!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+Cjxzdmcgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CjxnIGlkPSJDYW52YXMiIGZpbGw9Im5vbmUiPgo8ZyBpZD0iYmVha2VyIj4KPGcgaWQ9IlNoYXBlIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0gMjAuNzU5NiAyMS44ODVMIDE1LjY4OTYgMTAuNUwgMTUuNjg5NiA0LjVMIDE3LjE4OTYgNC41TCAxNy4xODk2IDNMIDMuNjg5NTkgM0wgMy42ODk1OSA0LjVMIDUuMTg5NTkgNC41TCA1LjE4OTU5IDEwLjVMIDAuMTM0NTg4IDIxLjg4NUMgLTAuMzE1NDEyIDIyLjg3NSAwLjQxOTU4OCAyNCAxLjQ5OTU5IDI0TCAxOS40MDk2IDI0QyAyMC40ODk2IDI0IDIxLjIwOTYgMjIuODc1IDIwLjc3NDYgMjEuODg1TCAyMC43NTk2IDIxLjg4NVpNIDQuODE0NTggMTVMIDYuNjg5NTggMTAuNUwgNi42ODk1OCA0LjVMIDE0LjE4OTYgNC41TCAxNC4xODk2IDEwLjVMIDE2LjA2NDYgMTVMIDQuODE0NTggMTVaTSAxMS4xODk2IDEyTCAxMi42ODk2IDEyTCAxMi42ODk2IDEzLjVMIDExLjE4OTYgMTMuNUwgMTEuMTg5NiAxMlpNIDkuNjg5NTggMTAuNUwgOC4xODk1OCAxMC41TCA4LjE4OTU4IDlMIDkuNjg5NTggOUwgOS42ODk1OCAxMC41Wk0gOS42ODk1OCA2TCAxMS4xODk2IDZMIDExLjE4OTYgNy41TCA5LjY4OTU4IDcuNUwgOS42ODk1OCA2Wk0gOS42ODk1OCAxLjVMIDguMTg5NTggMS41TCA4LjE4OTU4IDBMIDkuNjg5NTggMEwgOS42ODk1OCAxLjVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjgxMDA1OSAwKSIgZmlsbD0id2hpdGUiLz4KPC9nPgo8L2c+CjwvZz4KPC9zdmc+Cgo=\"","\nvar content = require(\"!!../../../../../css-loader/index.js!./status-bar.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../css-loader/index.js!./status-bar.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../css-loader/index.js!./status-bar.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Emitter, Event, ResourceProvider } from '@theia/core';\nimport { DirtyDiffDecorator } from '../dirty-diff/dirty-diff-decorator';\nimport { DiffComputer } from '../dirty-diff/diff-computer';\nimport { ContentLines } from '../dirty-diff/content-lines';\nimport { EditorManager, TextEditor } from '@theia/editor/lib/browser';\nimport { ScmService } from '../scm-service';\n\nexport interface DecorationData {\n    letter?: string;\n    title?: string;\n    color?: { id: string };\n    priority?: number;\n    bubble?: boolean;\n    source?: string;\n}\n\n@injectable()\nexport class ScmDecorationsService {\n    private readonly NavigatorDecorationsEmitter = new Emitter<Map<string, DecorationData>>();\n    private readonly diffComputer: DiffComputer;\n    private dirtyState: boolean = true;\n\n    constructor(@inject(DirtyDiffDecorator) protected readonly decorator: DirtyDiffDecorator,\n        @inject(ScmService) protected readonly scmService: ScmService,\n        @inject(EditorManager) protected readonly editorManager: EditorManager,\n        @inject(ResourceProvider) protected readonly resourceProvider: ResourceProvider) {\n        this.diffComputer = new DiffComputer();\n        this.editorManager.onCreated(async editor => this.applyEditorDecorations(editor.editor));\n        this.scmService.onDidAddRepository(repository => repository.provider.onDidChange(() => {\n            const editor = this.editorManager.currentEditor;\n            if (editor) {\n                if (this.dirtyState) {\n                    this.applyEditorDecorations(editor.editor);\n                    this.dirtyState = false;\n                } else {\n                    /** onDidChange event might be called several times one after another, so need to prevent repeated events. */\n                    setTimeout(() => {\n                        this.dirtyState = true;\n                    }, 500);\n                }\n            }\n        }));\n        this.scmService.onDidChangeSelectedRepository(() => {\n            const editor = this.editorManager.currentEditor;\n            if (editor) {\n                this.applyEditorDecorations(editor.editor);\n            }\n        });\n    }\n\n    async applyEditorDecorations(editor: TextEditor): Promise<void> {\n        const currentRepo = this.scmService.selectedRepository;\n        if (currentRepo) {\n            try {\n                const uri = editor.uri.withScheme(currentRepo.provider.id).withQuery(`{\"ref\":\"\", \"path\":\"${editor.uri.path.toString()}\"}`);\n                const previousResource = await this.resourceProvider(uri);\n                const previousContent = await previousResource.readContents();\n                const previousLines = ContentLines.fromString(previousContent);\n                const currentResource = await this.resourceProvider(editor.uri);\n                const currentContent = await currentResource.readContents();\n                const currentLines = ContentLines.fromString(currentContent);\n                const { added, removed, modified } = this.diffComputer.computeDirtyDiff(ContentLines.arrayLike(previousLines), ContentLines.arrayLike(currentLines));\n                this.decorator.applyDecorations({ editor: editor, added, removed, modified });\n                currentResource.dispose();\n                previousResource.dispose();\n            } catch (e) {\n                // Scm resource may not be found, do nothing.\n            }\n        }\n    }\n\n    get onNavigatorDecorationsChanged(): Event<Map<string, DecorationData>> {\n        return this.NavigatorDecorationsEmitter.event;\n    }\n\n    fireNavigatorDecorationsChanged(data: Map<string, DecorationData>): void {\n        this.NavigatorDecorationsEmitter.fire(data);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './task-service';\nexport * from './task-contribution';\nexport * from './task-definition-registry';\nexport * from './task-problem-matcher-registry';\nexport * from './task-problem-pattern-registry';\nexport * from './task-schema-updater';\n","exports = module.exports = require(\"../../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n.modal-Notification {\\n    pointer-events: all;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    display: flex;\\n    flex-direction: row;\\n    -webkit-justify-content: center;\\n    justify-content: center;\\n    clear: both;\\n    box-sizing: border-box;\\n    position: relative;\\n    min-width: 200px;\\n    max-width: min(66vw, 800px);\\n    background-color: var(--theia-editorWidget-background);\\n    min-height: 35px;\\n    margin-bottom: 1px;\\n    color: var(--theia-editorWidget-foreground);\\n}\\n\\n.modal-Notification .icon {\\n    display: inline-block;\\n    font-size: 20px;\\n    padding: 5px 0;\\n    width: 35px;\\n    order: 1;\\n}\\n\\n.modal-Notification .icon .fa {\\n    line-height: inherit;\\n    vertical-align: middle;\\n    font-size: 120%;\\n    color: var(--theia-editorInfo-foreground);\\n}\\n\\n.modal-Notification .icon .error {\\n    color: var(--theia-editorError-foreground);\\n}\\n\\n.modal-Notification .icon .warning {\\n    color: var(--theia-editorWarning-foreground);\\n}\\n\\n.modal-Notification .text {\\n    order: 2;\\n    display: inline-block;\\n    max-height: min(66vh, 600px);\\n    -webkit-user-select: text;\\n    -moz-user-select: text;\\n    -ms-user-select: text;\\n    user-select: text;\\n    align-self: center;\\n    flex: 1 100%;\\n    padding: 10px;\\n    overflow: auto;\\n    white-space: pre-wrap;\\n}\\n\\n.modal-Notification .text > p {\\n    margin: 0;\\n    font-size: var(--theia-ui-font-size1);\\n    font-family: var(--theia-ui-font-family);\\n    vertical-align: middle;\\n}\\n\\n.modal-Notification .buttons {\\n    display: flex;\\n    flex-direction: row;\\n    order: 3;\\n    white-space: nowrap;\\n    align-self: flex-end;\\n    height: 40px;\\n}\\n\\n.modal-Notification .buttons > button {\\n    background-color: var(--theia-button-background);\\n    color: var(--theia-button-foreground);\\n    border: none;\\n    border-radius: 0;\\n    text-align: center;\\n    text-decoration: none;\\n    display: inline-block;\\n    padding: 0 10px;\\n    margin: 0;\\n    font-size: var(--theia-ui-font-size1);\\n    outline: none;\\n    cursor: pointer;\\n}\\n\\n.modal-Notification .buttons > button:hover {\\n    background-color: var(--theia-button-hoverBackground);\\n}\\n\", \"\"]);\n\n// exports\n","var escape = require(\"../../../../../../css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../../../css-loader/index.js!./plugin-sidebar.css\"), \"\");\nexports.i(require(\"-!../../../../../../css-loader/index.js!./webview.css\"), \"\");\nexports.i(require(\"-!../../../../../../css-loader/index.js!./tree.css\"), \"\");\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.spinnerContainer {\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n}\\n\\n.flexcontainer {\\n    display: flex;\\n}\\n\\n.row {\\n    width: 100%;\\n}\\n\\n.column {\\n    flex-direction: column;\\n}\\n\\n.theia-plugin-view-container {\\n    -webkit-mask: url('');\\n    mask: url('');\\n}\\n\\n.theia-plugin-test-tab-icon {\\n    -webkit-mask: url(\" + escape(require(\"./test.svg\")) + \");\\n    mask: url(\" + escape(require(\"./test.svg\")) + \");\\n}\\n\\n.theia-plugin-file-icon,\\n.theia-plugin-file-icon::before,\\n.theia-plugin-folder-icon,\\n.theia-plugin-folder-icon::before,\\n.theia-plugin-folder-expanded-icon,\\n.theia-plugin-folder-expanded-icon::before,\\n.theia-plugin-root-folder-icon,\\n.theia-plugin-root-folder-icon::before,\\n.theia-plugin-root-folder-expanded-icon,\\n.theia-plugin-root-folder-expanded-icon::before {\\n    padding-right: var(--theia-ui-padding);\\n\\twidth: var(--theia-icon-size);\\n\\theight: var(--theia-content-line-height);\\n\\tline-height: inherit !important;\\n\\tdisplay: inline-block;\\n}\\n\\n.p-TabBar.theia-app-sides .theia-plugin-file-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-file-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-expanded-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-expanded-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-expanded-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-expanded-icon::before {\\n    padding: 0px !important;\\n    width: var(--theia-private-sidebar-icon-size) !important;\\n    height: var(--theia-private-sidebar-icon-size) !important;\\n    background-size: var(--theia-private-sidebar-icon-size) !important;\\n    font-size: var(--theia-private-sidebar-icon-size) !important;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-plugins {\\n    min-width: 250px !important;\\n    display: flex;\\n    flex-direction: column;\\n}\\n\\n#pluginListContainer {\\n    width: 100%;\\n    box-sizing: border-box;\\n    overflow-y: auto;\\n    flex-grow: 1;\\n}\\n\\n.theia-plugins .pluginHeaderContainer {\\n    padding: 5px 15px;\\n    font-size: var(--theia-ui-font-size0);\\n    border-bottom: 1px solid;\\n}\\n\\n.theia-side-panel .theia-plugins .pluginHeaderContainer {\\n    padding-left: 20px;\\n}\\n\\n.theia-plugins .pluginHeaderContainer:hover {\\n    background: var(--theia-list-hoverBackground);\\n}\\n\\n.theia-plugins .pluginHeaderContainer .row {\\n    margin: 3px 0;\\n}\\n\\n.theia-plugins .pluginName {\\n    flex: 1;\\n    margin-right: 5px;\\n    font-size: var(--theia-ui-font-size1);\\n    font-weight: 400;\\n}\\n\\n.theia-plugins .pluginVersion {\\n    flex: 1;\\n    text-align: left;\\n    font-size: var(--theia-ui-font-size0)\\n}\\n\\n.theia-plugins .pluginDescription {\\n    flex: 1;\\n}\\n\\n.theia-plugins .pluginPublisher {\\n    font-size: var(--theia-ui-font-size0);\\n    flex: 5;\\n    align-items: center;\\n}\\n\\n.plugins-tab-icon::before {\\n    content: \\\"\\\\F0FE\\\"\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-tree-view-icon {\\n    padding-right: var(--theia-ui-padding);\\n    -webkit-font-smoothing: antialiased;\\n    flex-shrink: 0;\\n}\\n\\n.theia-tree-view-inline-action {\\n    padding: 2px;\\n}\\n\\n.theia-tree-view-description {\\n    color: var(--theia-descriptionForeground);\\n    font-size: var(--theia-ui-font-size0);\\n    margin-left: var(--theia-ui-padding);\\n}\\n\\n.theia-tree-view .theia-TreeNodeSegment {\\n    display: flex;\\n}\\n\\n.theia-tree-view .theia-TreeNodeContent {\\n    align-items: center;\\n    height: 100%;\\n}\\n\\n.theia-tree-view  .theia-TreeContainer .theia-TreeViewInfo {\\n    margin-top: 7px;\\n    margin-bottom: 10px;\\n    margin-left: 17px;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-webview.p-mod-hidden {\\n    visibility: hidden;\\n    display: flex !important;\\n}\\n\\n.theia-webview {\\n    display: flex;\\n    flex-direction: column;\\n    height: 100%;\\n}\\n\\n.theia-webview iframe {\\n    flex-grow: 1;\\n    border: none; margin: 0; padding: 0;\\n}\\n\\n.theia-webview-icon {\\n    background: none !important;\\n    min-height: 20px;\\n}\\n\\n.theia-webview-icon::before {\\n    background-size: 13px;\\n    background-repeat: no-repeat;\\n    vertical-align: middle;\\n    display: inline-block;\\n    text-align: center;\\n    height: 15px;\\n    width: 15px;\\n    content: \\\"\\\";\\n}\\n\\n.p-TabBar.theia-app-sides .theia-webview-icon::before {\\n    width: var(--theia-private-sidebar-icon-size);\\n    height: var(--theia-private-sidebar-icon-size);\\n    background-size: contain;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n#theia-statusBar .development-host {\\n    background-color: var(--theia-successBackground);\\n}\\n\\n#theia-statusBar .development-host-offline {\\n    background-color: var(--theia-errorBackground);\\n}\\n\\n#theia-statusBar .hosted-plugin {\\n    background-color: var(--theia-inputValidation-infoBackground);\\n}\\n\\n#theia-statusBar .hosted-plugin:hover {\\n    background-color: var(--theia-editorInfo-foreground);\\n}\\n\\n#theia-statusBar .hosted-plugin-failed {\\n    background-color: var(--theia-errorBackground);\\n}\\n\", \"\"]);\n\n// exports\n"],"sourceRoot":""}