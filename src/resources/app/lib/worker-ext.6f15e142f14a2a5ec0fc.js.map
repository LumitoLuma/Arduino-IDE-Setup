{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@theia/plugin-ext/src/plugin/types-impl.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-api-rpc.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/type-converters.ts","webpack:///./node_modules/@theia/core/src/common/event.ts","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/vscode-uri/lib/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/messages.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/main.js","webpack:///./node_modules/@theia/core/src/common/disposable.ts","webpack:///external \"path\"","webpack:///./node_modules/@theia/plugin-ext/src/common/types.ts","webpack:///./node_modules/@theia/core/src/common/promise-util.ts","webpack:///./node_modules/@theia/core/src/common/cancellation.ts","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/is.js","webpack:///external \"net\"","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/util.ts","webpack:///./node_modules/vscode-jsonrpc/lib/is.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:///./node_modules/vscode-jsonrpc/lib/events.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:///./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/events.js","webpack:///external \"crypto\"","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-api-rpc-model.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-protocol.ts","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@theia/plugin-ext/src/common/rpc-protocol.ts","webpack:///./node_modules/@theia/core/src/common/path.ts","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:///./node_modules/@babel/runtime/helpers/get.js","webpack:///./node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///./node_modules/@phosphor/coreutils/lib/uuid.js","webpack:///./node_modules/@theia/languages/src/common/language-selector/paths.ts","webpack:///./node_modules/@theia/languages/src/common/language-selector/strings.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/markdown-string.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/uri-components.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/assert.ts","webpack:///./node_modules/vscode-jsonrpc/lib/main.js","webpack:///./node_modules/@theia/core/src/common/uri.ts","webpack:///./node_modules/vscode-languageserver-protocol/lib/main.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///external \"os\"","webpack:///./node_modules/@theia/plugin-ext/src/common/errors.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/paths-util.ts","webpack:///./node_modules/@theia/core/src/common/os.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-storage.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/async-util.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/document-data.ts","webpack:///./node_modules/vscode-uri/lib/umd/index.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/@theia/plugin-ext/src/common/object-identifier.ts","webpack:///./node_modules/@theia/languages/src/common/language-selector/glob.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/index.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-icon-path.ts","webpack:///external \"child_process\"","webpack:///./node_modules/vscode-jsonrpc/lib/messages.js","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/index.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/reader.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/writer.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/logger.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/connection.ts","webpack:///./node_modules/lodash.clonedeep/index.js","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-main.ts","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack:///./node_modules/@babel/runtime/helpers/construct.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messages.js","webpack:///./node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/utils/is.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.progress.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js","webpack:///./node_modules/@phosphor/coreutils/lib/random.js","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-manager.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-context.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/command-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/known-commands.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/objects.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/quick-open.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/status-bar-message-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/status-bar/status-bar-item.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/window-state.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/text-editors.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/id-generator.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/documents.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/prefix-sum-computer.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/word-helper.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/editor-options.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/output-channel-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/output-channel/output-channel-item.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/terminal-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/completion.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/diagnostics.ts","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/signature.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/hover.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/document-highlight.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/document-formatting.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/range-formatting.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/on-type-formatting.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/definition.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/implementation.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/type-definition.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/code-action.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/link-provider.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/lens.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/outline.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/reference.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/workspace-symbol.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/folding.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/color.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/rename.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/declaration.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/call-hierarchy.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/dialogs.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/notification.ts","webpack:///./node_modules/@theia/languages/src/common/language-selector/index.ts","webpack:///./node_modules/@theia/languages/src/common/language-selector/language-selector.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tree/tree-views.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-ext-api-contribution.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages-contribution-ext.ts","webpack:///./node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:///./node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:///./node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:///./node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:///./node_modules/vscode-ws-jsonrpc/src/index.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/disposable.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/connection.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/connection.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/connection-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-message-reader.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-message-writer.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tasks/tasks.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tasks/task-provider.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/file-system.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/in-plugin-filesystem-proxy.ts","webpack:///external \"util\"","webpack:///./node_modules/@theia/plugin-ext/src/plugin/scm.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/decorations.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/preference-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/preferences/configuration.ts","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/debug-stub.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/debug.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-executable-resolver.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-session.ts","webpack:///./node_modules/@theia/debug/src/node/debug-adapter-session.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-starter.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-tracker.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/editors-and-documents.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/text-editor.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/disposable-util.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/workspace.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/in-plugin-filesystem-watcher-proxy.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/message-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-env-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/env.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/clipboard-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/webviews.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","func","this","disposable","from","Disposable","disposables","dispose","undefined","StatusBarAlignment","TextEditorLineNumbersStyle","ViewColumn","TextEditorSelectionChangeKind","fromValue","Keyboard","Mouse","Command","line","char","Error","_line","_character","isBefore","other","isBeforeOrEqual","isAfter","isAfterOrEqual","isEqual","compareTo","translate","lineDeltaOrChange","characterDelta","illegalArgument","lineDelta","Position","character","with","lineOrChange","Min","result","positions","pop","Max","isPosition","startLineOrStart","startColumnOrEnd","endLine","endColumn","start","end","_start","_end","contains","positionOrRange","Range","intersection","union","startOrChange","isRange","thing","anchorLineOrAnchor","anchorColumnOrActive","activeLine","activeColumn","anchor","active","_anchor","_active","Selection","EndOfLine","_tabstop","isSnippetString","SnippetString","_escape","replace","appendText","string","appendTabstop","number","appendPlaceholder","nested","appendVariable","defaultValue","id","ThemeColor","File","ThemeIcon","Folder","TextEditorRevealType","DecorationRangeBehavior","OverviewRulerLane","ConfigurationTarget","base","pattern","isUri","uri","fsPath","pathToRelative","to","relative","RelativePattern","IndentAction","range","newText","_range","_newText","_newEol","isTextEdit","TextEdit","insert","position","delete","setEndOfLine","eol","ret","newEol","CompletionTriggerKind","CompletionItemKind","label","kind","CompletionItem","DiagnosticSeverity","items","isIncomplete","CompletionList","location","message","DiagnosticRelatedInformation","rangeOrPosition","isLocation","Location","DiagnosticTag","severity","Diagnostic","MarkerSeverity","MarkerTag","documentation","ParameterInformation","parameters","SignatureInformation","SignatureHelpTriggerKind","signatures","SignatureHelp","contents","Array","isArray","isMarkdownString","Hover","DocumentHighlightKind","DocumentHighlight","target","isEmpty","DocumentLink","command","CodeLens","CodeActionTrigger","append","parts","CodeActionKind","sep","startsWithIgnoreCase","intersects","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","TextDocumentSaveReason","title","CodeAction","_edits","renameFile","options","push","_type","createFile","deleteFile","edit","resource","has","toString","set","edits","length","element","filter","e","res","candidate","entries","textEdits","Map","textEdit","forEach","v","_allEntries","toJSON","WorkspaceEdit","TreeItemCollapsibleState","arg1","collapsibleState","None","resourceUri","TreeItem","rangeOrContainer","locationOrUri","containerName","SymbolInformation","validate","SymbolKind","detail","selectionRange","children","DocumentSymbol","FileChangeType","CommentThreadCollapsibleState","Back","iconPath","tooltip","QuickInputButtons","CommentMode","uriOrMessage","code","terminator","setPrototypeOf","FileSystemError","captureStackTrace","FileExists","messageOrUri","FileNotFound","FileNotADirectory","FileIsADirectory","NoPermissions","Unavailable","FileType","cancellable","ProgressOptions","report","Progress","ProgressLocation","process","varg1","varg2","executionProcess","arguments","executionOptions","computeId","hash","crypto","createHash","update","arg","digest","is","ProcessExecution","ShellQuoting","TaskPanelKind","TaskRevealKind","arg0","arg2","shellCommand","shellOptions","shellCommandLine","commandLine","ShellExecution","groupId","TaskGroup","Clean","Build","Rebuild","Test","TaskScope","taskDefinition","scope","source","execution","problemMatchers","args","definition","taskProblemMatchers","hasTaskProblemMatchers","isTaskBackground","taskScope","taskName","taskExecution","updateDefinitionBasedOnExecution","taskSource","taskGroup","taskPresentationOptions","assign","type","taskType","Task","DebugAdapterExecutable","port","host","DebugAdapterServer","enabled","condition","hitCondition","logMessage","_id","UUID","uuid4","Breakpoint","SourceBreakpoint","functionName","FunctionBreakpoint","red","green","blue","alpha","Color","color","ColorInformation","ColorPresentation","ColorFormat","FoldingRange","FoldingRangeKind","OperatingSystem","WebviewPanelTargetArea","isCallHierarchyItem","CallHierarchyItem","item","fromRanges","CallHierarchyIncomingCall","CallHierarchyOutgoingCall","emptyPlugin","lifecycle","startMethod","stopMethod","model","publisher","version","displayName","description","engine","packagePath","entryPoint","pluginPath","pluginFolder","rawModel","engines","MainMessageType","TreeViewSelection","TreeViewItemCollapsibleState","ScmCommandArg","EditorPosition","TrackedRangeStickiness","ResourceTextEditDto","LanguagesMainFactory","OutputChannelRegistryFactory","PLUGIN_RPC_CONTEXT","COMMAND_REGISTRY_MAIN","createProxyIdentifier","QUICK_OPEN_MAIN","DIALOGS_MAIN","WORKSPACE_MAIN","MESSAGE_REGISTRY_MAIN","TEXT_EDITORS_MAIN","DOCUMENTS_MAIN","STATUS_BAR_MESSAGE_REGISTRY_MAIN","ENV_MAIN","NOTIFICATION_MAIN","TERMINAL_MAIN","TREE_VIEWS_MAIN","PREFERENCE_REGISTRY_MAIN","OUTPUT_CHANNEL_REGISTRY_MAIN","LANGUAGES_MAIN","CONNECTION_MAIN","WEBVIEWS_MAIN","STORAGE_MAIN","TASKS_MAIN","LANGUAGES_CONTRIBUTION_MAIN","DEBUG_MAIN","FILE_SYSTEM_MAIN","SCM_MAIN","DECORATIONS_MAIN","WINDOW_MAIN","CLIPBOARD_MAIN","MAIN_RPC_CONTEXT","HOSTED_PLUGIN_MANAGER_EXT","COMMAND_REGISTRY_EXT","QUICK_OPEN_EXT","WINDOW_STATE_EXT","NOTIFICATION_EXT","WORKSPACE_EXT","TEXT_EDITORS_EXT","EDITORS_AND_DOCUMENTS_EXT","DOCUMENTS_EXT","TERMINAL_EXT","OUTPUT_CHANNEL_REGISTRY_EXT","TREE_VIEWS_EXT","PREFERENCE_REGISTRY_EXT","LANGUAGES_EXT","CONNECTION_EXT","WEBVIEWS_EXT","STORAGE_EXT","TASKS_EXT","LANGUAGES_CONTRIBUTION_EXT","DEBUG_EXT","FILE_SYSTEM_EXT","SCM_EXT","DECORATIONS_EXT","ThemableDecorationRenderOptions","ThemableDecorationAttachmentRenderOptions","fromViewColumn","column","types","One","Beside","toRange","startLineNumber","startColumn","endLineNumber","fromRange","isDecorationOptionsArr","something","isDecorationOptions","fromManyMarkdown","markup","map","fromMarkdown","language","toMarkdown","MarkdownString","isTrusted","fromGlobPattern","rp","fromTextEdit","text","convertCode","String","convertSeverity","Warning","Information","Info","Hint","convertRelatedInformation","diagnosticsRelatedInformation","relatedInformation","convertTags","tags","markerTags","Unnecessary","fromDocumentHighlightKind","Text","Read","Write","isModelRange","isUriComponents","scheme","path","query","fragment","toCallHierarchyItem","toSymbolKind","revive","fromProcessExecution","taskDto","fromShellExecution","getShellExecutionOptions","getShellArgs","getProcessExecution","getShellExecution","env","executable","shellQuoting","shellArgs","cwd","fromFoldingRangeKind","Comment","Imports","Region","pathOrURIToURI","file","ep","ONE","TWO","Two","THREE","Three","FOUR","Four","FIVE","Five","SIX","Six","SEVEN","Seven","EIGHT","Eight","NINE","Nine","showOptions","area","Main","viewColumn","preserveFocus","selection","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","lineNumber","ranges","hoverMessage","renderOptions","fromDocumentSelector","selector","Method","Function","Constructor","Field","Variable","Class","Interface","Struct","Module","Property","Unit","Value","Constant","Enum","EnumMember","Keyword","Snippet","Reference","Event","Operator","TypeParameter","fromLanguageSelector","diagnostic","hover","definitionLink","targetUri","targetRange","origin","originSelectionRange","targetSelectionRange","url","documentHighlight","info","help","activeSignature","activeParameter","documents","entry","uriOrEdits","doc","getDocument","modelVersionId","oldUri","newUri","fromMapping","Namespace","Package","Number","Boolean","Key","Null","fromSymbolKind","k","fromDocumentSymbol","toDocumentSymbol","symbol","folder","index","task","properties","windows","parse","symbolInformation","p1","p2","foldingRange","colorPresentation","additionalTextEdits","pickItems","handle","picked","groupLabel","showBorder","DecorationRenderOptions","isWholeLine","rangeBehavior","overviewRulerLane","light","dark","backgroundColor","outline","outlineColor","outlineStyle","outlineWidth","border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth","fontStyle","fontWeight","textDecoration","cursor","opacity","letterSpacing","gutterIconPath","gutterIconSize","overviewRulerColor","before","after","OpenOpen","rpc","AlwaysGrowsWhenTypingAtEdges","ClosedClosed","NeverGrowsWhenTypingAtEdges","OpenClosed","GrowsOnlyWhenTypingBefore","ClosedOpen","GrowsOnlyWhenTypingAfter","contentText","contentIconPath","margin","width","height","plugin","_disposable","maxListeners","event","mapFunc","listener","thisArgs","_callbacks","add","callback","context","bucket","_contexts","remove","foundCallbackWithDifferentContext","splice","iterator","callbacks","slice","contexts","apply","invoke","console","error","_options","_disposed","_event","CallbackList","onFirstListenerAdd","checkMaxListeners","Emitter","_noop","onLastListenerRemove","count","warn","fire","sequence","processor","WaitUntilEvent","emitter","timeout","waitables","asyncEvent","waitUntil","thenable","isFrozen","freeze","Promise","race","all","resolve","setTimeout","instance","TypeError","extendStatics","isWindows","__extends","__proto__","b","__","constructor","platform","navigator","userAgent","indexOf","_schemePattern","_singleSlashStart","_doubleSlashStart","_throwOnMissingSchema","setUriThrowOnMissingScheme","old","_empty","_slash","_regexp","URI","schemeOrData","authority","_strict","_schemeFix","_referenceResolution","test","_validateUri","_makeFsPath","configurable","change","_URI","match","exec","decodeURIComponent","idx","substring","components","skipEncoding","_asFormatted","data","_formatted","external","_fsPath","_sep","_pathSepMarker","_a","_super","_this","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","pos","charCodeAt","encodeURIComponent","charAt","substr","escaped","encodeURIComponentMinimal","toLowerCase","encoder","userinfo","fromCharCode","_defineProperties","props","descriptor","writable","protoProps","staticProps","_getPrototypeOf","getPrototypeOf","vscode_jsonrpc_1","require","ProtocolRequestType0","method","RequestType0","ProtocolRequestType","RequestType","ProtocolNotificationType","NotificationType","ProtocolNotificationType0","NotificationType0","_typeof","assertThisInitialized","self","subClass","superClass","__export","Is","messages_1","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","events_1","cancellation_1","CancellationTokenSource","CancellationToken","CancelNotification","ProgressNotification","linkedMap_1","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ProgressType","NullLogger","log","fromString","Off","Messages","Verbose","JSON","ConnectionState","ConnectionError","_createMessageConnection","messageReader","messageWriter","logger","strategy","timer","tracer","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","addMessageToQueue","queue","isRequestMessage","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","size","setImmediate","shift","requestMessage","reply","resultOrError","startTime","jsonrpc","toJson","traceSendingResponse","write","replyError","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","handler","Date","now","cancellationSource","tokenKey","handlerResult","promise","numberOfParams","token","array","then","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","toCancel","response","traceSendingRequest","traceSendingNotification","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","throwIfNotListening","undefinedToNull","param","computeMessageParams","connection","sendNotification","messageParams","notificationMessage","onNotification","onProgress","sendProgress","onUnhandledProgress","sendRequest","last","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","keys","listen","AlreadyListening","throwIfListening","inspect","verbose","ConnectionStrategy","createMessageConnection","input","output","read","isMessageWriter","NULL","onDisposeEmitter","disposingElements","toDispose","checkDisposed","disposed","originalDispose","toRemove","pushAll","DisposableCollection","isObject","obj","RegExp","mixin","destination","overwrite","LogType","_","Reflect","construct","getOwnPropertyDescriptor","isUndefined","Deferred","ms","deferred","clearTimeout","cancelled","shortcutEvent","isCancellationRequested","Cancelled","_isCancelled","_emitter","_token","MutableToken","err","ReferenceError","stringArray","every","elem","CR","Buffer","LF","MessageBuffer","encoding","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","Math","ceil","concat","current","split","header","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","on","onData","fireError","fireClose","headers","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","firePartialMessage","waitingTime","eventEmitter","socket","len","AbstractMessageWriter","errorCount","join","sending","doWriteMessage","send","destroy","handleError","isNativeFunction","_wrapNativeSuper","_cache","Wrapper","CompletionItemInsertTextRule","IdObject","getPluginId","hostedServicePath","PluginPackage","toPluginUrl","pck","relativePath","PluginScanner","PluginDeployerResolver","PluginDeployerDirectoryHandler","PluginDeployerFileHandler","PluginDeployer","PluginDeployerParticipant","PluginDeployerEntryType","PluginType","MetadataProcessor","HostedPluginClient","PluginDeployerHandler","HostedPluginServer","pluginServerJsonRpcPath","PluginServer","ServerPluginRunner","PluginHostEnvironmentVariable","v1","v4","uuid","RPCProtocol","ConnectionClosedError","isMain","ProxyIdentifier","identifier","remoteHostID","locals","proxies","lastMessageId","cancellationTokenSources","pendingRPCReplies","multiplexor","RPCMultiplexer","receiveOneMessage","clear","values","getProxy","proxyId","proxy","createProxy","remoteCall","myArgs","Proxy","methodName","cancellationToken","callId","MessageFactory","messageToSendHostId","request","rawmsg","ObjectsTransferrer","reviver","setHostID","hostID","receiveRequest","receiveReply","receiveReplyErr","receiveCancel","cancellationTokenSource","tokenSource","invokeHandler","replyOK","replyErr","pendingReply","$isError","stack","doInvokeHandler","actor","RPCProtocolImpl","SerializedObjectType","onMessage","remoteHostId","sendAccumulatedBound","sendAccumulated","messagesToSend","tmp","req","prefix","rpcId","replacer","transformErrorForSerialization","$type","THEIA_URI","serializedValue","THEIA_RANGE","VSCODE_URI","isSerializedObject","stacktrace","raw","Path","normalizeDrive","firstIndex","separator","lastIndex","lastIndexOf","isAbsolute","isRoot","isDrive","root","computeRoot","extIndex","ext","segment","endsWith","_dir","computeDir","hasDir","paths","startsWith","isEqualOrParent","relativity","relativeStr","normalize","trailingSlash","pathArray","resultArray","_setPrototypeOf","superPropBase","_get","receiver","desc","LocationLink","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","objectLiteral","one","two","three","four","defined","typedArray","startLine","startCharacter","endCharacter","Deprecated","_i","del","textDocument","VersionedTextDocumentIdentifier","ignoreIfExists","recursive","ignoreIfNotExists","changes","documentChanges","TextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","InsertTextFormat","CompletionItemTag","MarkedString","SymbolTag","CodeActionContext","FormattingOptions","SelectionRange","TextEditChangeImpl","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","checkDocumentChanges","languageId","PlainText","Markdown","fromPlainText","plainText","deprecated","diagnostics","only","commandOrEdit","isPreferred","tabSize","insertSpaces","parent","TextDocument","EOL","content","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","document","sortedEdits","mergeSort","compare","left","right","leftIdx","rightIdx","a","diff","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","ch","offset","max","min","low","high","mid","floor","lineOffset","nextLineOffset","check","random_1","bytes","Uint8Array","lut","Random","getRandomValues","nativeSep","_posixBadPath","_winBadPath","basename","streql","getRoot","toOSPath","wantsBackslash","win","_isNormal","skip","prev_start","prev_part","part","ignoreCase","sepOffset","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","doEqualsIgnoreCase","stopAt","codeA","codeB","abs","haystack","needle","candidateLength","splitter","appendMarkdown","appendCodeblock","Schemes","FILE","UNTITLED","HTTP","HTTPS","MAILTO","DATA","IN_MEMORY","VSCODE","INTERNAL","COMMAND","val","codeUri","locations","withPath","dir","withScheme","withAuthority","withoutAuthority","withoutPath","withQuery","withoutQuery","withFragment","withoutFragment","normalizePath","_path","getDistinctParents","uris","some","otherUri","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","callHierarchy","st","Proposed","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","SemanticTokensRequest","SemanticTokensEditsRequest","SemanticTokensRangeRequest","createProtocolConnection","reader","writer","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","arr2","what","replaceRegex","processed","resolved","absolute","removeDuplicateSeparators","goodComponents","unshift","fromSegments","toSegments","upCount","downSegments","rv","isOSX","OS","Type","Windows","OSX","Linux","pluginId","isPluginGlobalData","storage","cache","getPerPluginData","storageDataChangedEvent","setPerPluginData","Memento","storageDataChangedEmitter","init","initGlobalData","initWorkspaceData","globalDataCache","workspaceDataCache","isGlobal","$set","$updatePluginsWorkspaceData","workspaceData","KeyValueStorageProxy","sub","catch","promises","_modeId2WordDefinition","getWordDefinitionFor","modeId","wordDefinition","lines","versionId","isDirty","textLines","dirty","ok","onEvents","lineStarts","acceptDeleteRange","acceptInsertText","acceptIsDirty","acceptLanguageId","langId","_document","save","getTextInRange","CRLF","lineAt","lineOrPos","validateRange","ran","validatePosition","getWordRangeAtPosition","regexp","insertText","insertLines","setLineText","newLengths","Uint32Array","insertValues","removeValues","lineIndex","newValue","changeValue","$trySaveDocument","isSingleLine","lineEnding","startLineIndex","endLineIndex","resultLines","hasChanged","maxCharacter","lineOrPosition","firstNonWhitespaceCharacterIndex","rangeIncludingLineBreak","isEmptyOrWhitespace","ensureLineStarts","getAccumulatedValue","eolLength","linesLength","lineStartValues","PrefixSumComputer","out","getIndexOf","lineLength","remainder","_position","regExpLeadsToEndlessLoop","wordAtText","getWordAtText","ensureValidWordDefinition","DocumentDataExt","default","window","msCrypto","rnds8","rnds","random","byteToHex","buf","bth","ObjectIdentifier","of","ALL_FORWARD_SLASHES","starsToRegExp","starCount","NO_PATH_REGEX","splitGlobAware","splitChar","segments","inBraces","inBrackets","curVal","T1","T2","T3","T3_2","T4","T5","CACHE","FALSE","parsePattern","patternKey","trimForExclusions","parsedPattern","wrapRelativePattern","strings","originalPattern","slashBase","backslashBase","basenames","patterns","allBasenames","trivia2","parsedPatterns","aggregateBasenameMatches","withBasenames","find","allPaths","reduce","trivia3","trivia4and5","parseRegExp","regEx","braceVal","bracketVal","braceRegExp","escapeRegExpCharacters","toRegExp","matchPathEnds","nativePath","nativePathEnd","isRelativePattern","resultPattern","expression","getOwnPropertyNames","when","hasSibling","matched","requiresSiblings","parseExpressionPattern","resultExpression","extname","parsedExpression","listToMap","list","basenamePatterns","aggregate","aggregatedPatterns","siblingsFn","siblings","patternOrExpression","PluginIconPath","asString","absolutePath","normalizedPath","toUrl","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","events","readMessage","reason","debug","forward","PluginConnection","cb","PluginWebSocketChannel","argsTag","funcTag","genTag","mapTag","setTag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","global","freeSelf","freeExports","nodeType","freeModule","moduleExports","addMapEntry","pair","addSetEntry","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","transform","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","getPrototype","objectCreate","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","baseTimes","skipIndexes","isIndex","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","isArr","initCloneArray","copyArray","tag","getTag","isFunc","cloneBuffer","isPrototype","proto","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","byteOffset","cloneDataView","cloneTypedArray","cloneMap","cloneRegExp","cloneSet","initCloneByTag","stacked","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","baseIsNative","isFunction","arrayBuffer","getMapData","getValue","pairs","LARGE_ARRAY_SIZE","ArrayBuffer","ctorString","isLength","baseKeys","ctx","pluginsApiImpl","pluginsModulesNames","postMessage","addEventListener","defaultApi","envExt","WorkerEnvExtImpl","storageProxy","editorsAndDocuments","EditorsAndDocumentsExtImpl","messageRegistryExt","MessageRegistryExt","workspaceExt","WorkspaceExtImpl","preferenceRegistryExt","PreferenceRegistryExtImpl","debugExt","createDebugExtStub","clipboardExt","ClipboardExt","webviewExt","WebviewsExtImpl","pluginManager","PluginManagerExtImpl","loadPlugin","isElectron","importScripts","frontendModuleName","rawPluginData","contextPath","foreign","plg","pluginModel","pluginLifecycle","frontend","frontendInitPath","apiImpl","apiFactory","backend","initExtApi","extApi","api","frontendExtApi","initPath","initVariable","initFunction","createAPIFactory","arrayLikeToArray","iter","minLen","fn","isNativeReflectConstruct","_construct","Parent","sham","Touch","First","Last","_map","_head","_tail","_size","touch","next","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","tmpdir","pipeName","connectResolve","connected","_reject","server","createServer","close","removeListener","onConnected","createConnection","protocol_implementation_1","ImplementationRequest","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","ConfigurationRequest","protocol_colorProvider_1","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange_1","FoldingRangeRequest","protocol_declaration_1","DeclarationRequest","protocol_selectionRange_1","SelectionRangeRequest","DocumentFilter","DocumentSelector","protocol_progress_1","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","RegistrationRequest","UnregistrationRequest","ResourceOperationKind","Create","Rename","Delete","FailureHandlingKind","Abort","Transactional","TextOnlyTransactional","Undo","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","documentSelector","WorkDoneProgressOptions","workDoneProgress","hasWorkDoneProgress","InitializeRequest","InitializeError","unknownProtocolVersion","InitializedNotification","ShutdownRequest","ExitNotification","DidChangeConfigurationNotification","MessageType","Log","ShowMessageNotification","ShowMessageRequest","LogMessageNotification","TelemetryEventNotification","TextDocumentSyncKind","Full","Incremental","DidOpenTextDocumentNotification","DidChangeTextDocumentNotification","DidCloseTextDocumentNotification","DidSaveTextDocumentNotification","Manual","AfterDelay","FocusOut","WillSaveTextDocumentNotification","WillSaveTextDocumentWaitUntilRequest","DidChangeWatchedFilesNotification","Created","Changed","Deleted","WatchKind","Change","PublishDiagnosticsNotification","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","CompletionRequest","resultType","CompletionResolveRequest","HoverRequest","ContentChange","SignatureHelpRequest","DefinitionRequest","ReferencesRequest","DocumentHighlightRequest","DocumentSymbolRequest","CodeActionRequest","WorkspaceSymbolRequest","CodeLensRequest","CodeLensResolveRequest","DocumentLinkRequest","DocumentLinkResolveRequest","DocumentFormattingRequest","DocumentRangeFormattingRequest","DocumentOnTypeFormattingRequest","RenameRequest","PrepareRenameRequest","ExecuteCommandRequest","ApplyWorkspaceEditRequest","resultId","randomFillSync","pluginContext","stopFn","preferencesManager","webview","registry","activations","loadedPlugins","activatedPlugins","pluginActivationPromises","pluginContextsMap","onDidChangeEmitter","messageRegistryProxy","notificationMain","fireOnDidChange","$stop","stopPlugin","stopAll","terminate","terminating","subscriptions","subscription","$init","globalState","workspaceState","setQueryParameters","queryParams","setLanguage","setShell","shell","preferences","$start","plugins","foreignPlugins","registerPlugin","configStorage","$activateByEvent","activationEvents","activationEvent","loadTests","activation","$startProgress","$stopProgress","setActivation","unsupportedActivationEvents","SUPPORTED_ACTIVATION_EVENTS","visited","loading","extensionDependencies","dependencyId","dependency","depId","$showMessage","pluginMain","startPlugin","$updateStoragePath","storagePath","asAbsolutePath","logPath","hostLogPath","hostStoragePath","globalStoragePath","hostGlobalStoragePath","extensionPath","pluginExport","ActivatedPlugin","getAllPlugins","getPluginExport","activePlugin","getPluginById","isRunning","isActive","activatePlugin","editorsAndDocumentsExt","clipboard","commandRegistry","CommandRegistryImpl","quickOpenExt","QuickOpenExtImpl","dialogsExt","DialogsExtImpl","windowStateExt","WindowStateExtImpl","notificationExt","NotificationExtImpl","editors","TextEditorsExtImpl","DocumentsExtImpl","statusBarMessageRegistryExt","StatusBarMessageRegistryExt","terminalExt","TerminalServiceExtImpl","outputChannelRegistryExt","OutputChannelRegistryExtImpl","languagesExt","LanguagesExtImpl","treeViewsExt","TreeViewsExtImpl","tasksExt","TasksExtImpl","connectionExt","ConnectionExtImpl","languagesContributionExt","LanguagesContributionExtImpl","fileSystemExt","FileSystemExtImpl","scmExt","ScmExtImpl","decorationsExt","DecorationsExtImpl","commands","registerCommand","executeCommand","commandId","registerTextEditorCommand","activeTextEditor","getActiveEditor","registerHandler","getKeyBinding","getCommands","filterInternal","registerDiffInformationCommand","onDidChangeActiveTerminal","onDidCloseTerminal","onDidOpenTerminal","activeTerminal","getVisibleTextEditors","terminals","onDidChangeActiveTextEditor","onDidChangeVisibleTextEditors","onDidChangeTextEditorSelection","onDidChangeTextEditorOptions","onDidChangeTextEditorViewColumn","onDidChangeTextEditorVisibleRanges","showTextDocument","documentArg","columnOrOptions","documentOptions","preview","showDocument","textEditor","editor","showQuickPick","coreEvent","coreCancellationToken","createQuickPick","showWorkspaceFolderPick","pickWorkspaceFolder","showInformationMessage","showMessage","showWarningMessage","showErrorMessage","showOpenDialog","showSaveDialog","showUploadDialog","setStatusBarMessage","showInputBox","showInput","createStatusBarItem","alignment","priority","createOutputChannel","pluginToPluginInfo","createWebviewPanel","viewType","createWebview","registerWebviewPanelSerializer","serializer","getWindowState","onDidChangeWindowState","createTerminal","nameOrOptions","shellPath","createTextEditorDecorationType","registerTreeDataProvider","viewId","treeDataProvider","createTreeView","withProgress","registerDecorationProvider","provider","registerUriHandler","createInputBox","workspace","fs","rootPath","workspaceFolders","onDidChangeWorkspaceFolders","getAllDocumentData","onDidChangeTextDocument","onDidChangeDocument","onDidCloseTextDocument","onDidRemoveDocument","onDidOpenTextDocument","onDidAddDocument","onWillSaveTextDocument","onDidSaveTextDocument","getConfiguration","section","onDidChangeConfiguration","openTextDocument","uriOrFileNameOrOptions","createDocumentData","openDocument","createFileSystemWatcher","globPattern","ignoreCreateEvents","ignoreChangeEvents","ignoreDeleteEvents","findFiles","include","exclude","maxResults","saveAll","includeUntitled","applyEdit","applyWorkspaceEdit","registerTextDocumentContentProvider","registerFileSystemProvider","getWorkspaceFolder","asRelativePath","pathOrUri","includeWorkspace","getRelativePath","updateWorkspaceFolders","deleteCount","workspaceFoldersToAdd","registerTaskProvider","tasks","onDidRenameFile","onWillRenameFile","appName","appRoot","machineId","sessionId","uriScheme","getEnvVariable","envVarName","getQueryParameter","queryParamName","getQueryParameters","getClientOperatingSystem","openExternal","openUri","asExternalUri","languageServer","registerLanguageServerProvider","languageServerInfo","stop","languages","getLanguages","setTextDocumentLanguage","changeLanguage","score","onDidChangeDiagnostics","getDiagnostics","createDiagnosticCollection","setLanguageConfiguration","configuration","registerCompletionItemProvider","triggerCharacters","registerDefinitionProvider","registerDeclarationProvider","registerSignatureHelpProvider","first","metadata","retriggerCharacters","remaining","registerTypeDefinitionProvider","registerImplementationProvider","registerHoverProvider","registerDocumentHighlightProvider","registerWorkspaceSymbolProvider","registerDocumentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","firstTriggerCharacter","moreTriggerCharacters","registerDocumentLinkProvider","registerLinkProvider","registerCodeActionsProvider","registerCodeLensProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerColorProvider","registerFoldingRangeProvider","registerRenameProvider","registerCallHierarchyProvider","Plugin","getPlugin","onDidChange","debuggersContributions","contributes","debuggers","assistedInject","registerDebuggersContributions","activeDebugSession","activeDebugConsole","breakpoints","onDidChangeActiveDebugSession","onDidStartDebugSession","onDidReceiveDebugSessionCustomEvent","onDidTerminateDebugSession","onDidChangeBreakpoints","registerDebugAdapterDescriptorFactory","debugType","factory","registerDebugConfigurationProvider","registerDebugAdapterTrackerFactory","startDebugging","nameOrConfiguration","addBreakpoints","removeBreakpoints","fetchTasks","executeTask","taskExecutions","onDidStartTask","onDidEndTask","onDidStartTaskProcess","onDidEndTaskProcess","scm","inputBox","getLastInputBox","createSourceControl","rootUri","comment","createCommentController","createCommentThread","commentId","comments","EventEmitter","Uri","TextEditorCursorStyle","TreeItem2","packageJSON","pluginType","activate","handlers","argumentProcessors","commandsConverter","CommandsConverter","$registerCommand","$unregisterCommand","$registerHandler","$unregisterHandler","$executeCommand","executeLocalCommand","KnownCommands","mapped","mappedId","mappedArgs","mappedResult","mr","$getKeyBinding","processArgument","filterUnderscoreCommands","$getCommands","registerArgumentProcessor","commandsMap","safeCommandId","isSafeCommandRegistered","toSafeCommand","toInternalCommand","executeSafeCommand","f","mappings","createConversionFunction","fromPositionToP","CONVERT_VSCODE_TO_MONACO","argStack","cloneAndChange","fromPosition","fromLocation","fromCallHierarchyItem","vscodeToMonacoArgsConverter","CONVERT_MONACO_TO_VSCODE","monacoToVscodeArgsConverter","argsArray","conversions","conversion","isModelLocation","toLocation","isModelCallHierarchyItem","isModelCallHierarchyIncomingCall","toCallHierarchyIncomingCall","isModelCallHierarchyOutgoingCall","toCallHierarchyOutgoingCall","toDo","_hasOwnProperty","changer","_cloneAndChange","seen","isUndefinedOrNull","changed","r1","r2","i2","createdQuickInputs","currentQuickInputs","$onItemSelected","selectItemHandler","$validateInput","validateInputHandler","promiseOrItems","itemPromise","widgetPromise","$show","canSelectMany","canPickMany","placeHolder","autoFocus","autoFocusFirstEntry","matchOnDescription","matchOnDetail","ignoreFocusLost","ignoreFocusOut","anyPromise","quickPickItemToPickOpenItem","onDidSelectItem","$setItems","h","$setError","hookCancellationToken","showCustomQuickPick","$showCustomQuickPick","newQuickInput","QuickPickExt","validateInput","$input","hide","$hide","$showInputBox","InputBoxExt","$acceptOnDidAccept","createdQuickInputNumber","currentQuickInput","_fireAccept","$acceptDidChangeValue","changedValue","_fireChangedValue","$acceptOnDidHide","_fireHide","$acceptOnDidTriggerButton","btn","thisQuickInput","_fireButtonTrigger","btnFromIndex","buttons","$acceptDidChangeActive","changedItems","_fireChangedActiveItem","$acceptDidChangeSelection","findMatchingItem","x","_fireChangedSelection","quickOpen","quickOpenMain","step","totalSteps","busy","visible","disposableCollection","onDidAcceptEmitter","onDidChangeValueEmitter","onDidHideEmitter","onDidTriggerButtonEmitter","_title","_step","_totalSteps","_enabled","_busy","_ignoreFocusOut","show","$setQuickInputChanged","convertURL","QuickInputExt","quickInputIndex","password","_buttons","_password","_placeholder","placeholder","_prompt","prompt","_validationMessage","validationMessage","$refreshQuickInput","_items","_activeItems","onDidChangeActiveEmitter","onDidChangeSelectionEmitter","activeItems","selections","selectedItems","statusMessage","StatusBarMessage","timeoutOrThenable","setMessage","StatusBarItemImpl","statusBar","_messages","_item","Left","MIN_VALUE","_update","_proxy","nextId","_alignment","_priority","_text","_tooltip","_color","_command","_isVisible","_timeoutHandle","$dispose","$setMessage","ID_PREFIX","windowStateChangedEmitter","windowStateCached","focused","$onWindowStateChanged","$openUri","$asExternalUri","_onDidChangeTextEditorSelection","_onDidChangeTextEditorOptions","_onDidChangeTextEditorVisibleRanges","_onDidChangeTextEditorViewColumn","_onDidChangeActiveTextEditor","_onDidChangeVisibleTextEditors","$acceptEditorPropertiesChanged","getEditor","acceptOptions","Converters","toSelection","acceptSelections","visibleRanges","acceptVisibleRanges","$acceptEditorPositionData","toViewColumn","acceptViewColumn","activeEditor","allEditors","TextEditorDecorationType","dto","fromWorkspaceEdit","$tryApplyWorkspaceEdit","$saveAll","Keys","$registerTextEditorDecorationType","$removeTextEditorDecorationType","IdGenerator","lastId","_onDidAddDocument","_onDidRemoveDocument","_onDidChangeDocument","_onDidSaveTextDocument","_onWillSaveTextDocument","loadingDocuments","onDidAddDocuments","onDidRemoveDocuments","$acceptModelModeChanged","startUrl","oldModeId","newModeId","uriString","$acceptModelSaved","strUrl","$acceptDirtyStateChanged","$acceptModelWillSave","saveTimeout","operations","didTimeout","didTimeoutHandle","fireEvent","documentData","fireTextDocumentWillSaveEvent","accept","operation","allEdits","Converter","contentChanges","$acceptModelChanged","rangeOffset","rangeLength","allDocuments","getDocumentData","loadingDocument","loadDocument","cached","$tryOpenDocument","$tryShowDocument","$tryCreateDocument","setWordDefinitionFor","toUint32","PrefixSumIndexOfResult","prefixSum","prefixSumValidIndex","Int32Array","getCount","insertIndex","oldValues","oldPrefixSum","insertValuesLen","subarray","startIndex","cnt","maxCnt","getTotalValue","_getAccumulatedValue","accumulatedValue","midStop","midStart","USUAL_WORD_SEPARATORS","DEFAULT_WORD_REGEXP","allowInWords","createWordRegExp","flags","multiline","textOffset","word","getWordAtPosSlow","getWordAtPosFast","cursorStyle","Line","Block","Underline","LineThin","BlockOutline","UnderlineThin","pluginInfo","OutputChannelImpl","$append","appendLine","$clear","$reveal","$close","_terminals","onDidCloseTerminalEmitter","onDidOpenTerminalEmitter","onDidChangeActiveTerminalEmitter","$createTerminal","obtainTerminal","terminal","TerminalExtImpl","$terminalCreated","$terminalNameChanged","$terminalOpened","processId","deferredProcessId","$terminalClosed","activeTerminalId","$currentTerminalChanged","sendText","addNewLine","$sendText","adaptersMap","Diagnostics","$getLanguages","$changeLanguage","wordPattern","nextCallId","config","brackets","onEnterRules","serializeEnterRules","serializeRegExp","indentationRules","serializeIndentation","$setLanguageConfiguration","createDisposable","$unregister","addNewAdapter","adapter","withAdapter","ctor","transformDocumentSelector","sel","doTransformDocumentSelector","$serialized","$provideCompletionItems","CompletionAdapter","provideCompletionItems","$resolveCompletionItem","completion","resolveCompletionItem","$releaseCompletionItems","releaseCompletionItems","$registerCompletionSupport","hasResolveSupport","$provideDefinition","DefinitionAdapter","provideDefinition","$registerDefinitionProvider","$provideDeclaration","DeclarationAdapter","provideDeclaration","$registerDeclarationProvider","$provideSignatureHelp","SignatureHelpAdapter","provideSignatureHelp","$releaseSignatureHelp","releaseSignatureHelp","$registerSignatureHelpProvider","$provideImplementation","ImplementationAdapter","provideImplementation","$registerImplementationProvider","$provideTypeDefinition","TypeDefinitionAdapter","provideTypeDefinition","$registerTypeDefinitionProvider","HoverAdapter","$registerHoverProvider","$provideHover","provideHover","DocumentHighlightAdapter","$registerDocumentHighlightProvider","$provideDocumentHighlights","provideDocumentHighlights","WorkspaceSymbolAdapter","$registerWorkspaceSymbolProvider","$provideWorkspaceSymbols","provideWorkspaceSymbols","$resolveWorkspaceSymbol","resolveWorkspaceSymbol","DocumentFormattingAdapter","$registerDocumentFormattingSupport","$provideDocumentFormattingEdits","provideDocumentFormattingEdits","RangeFormattingAdapter","$registerRangeFormattingProvider","$provideDocumentRangeFormattingEdits","provideDocumentRangeFormattingEdits","OnTypeFormattingAdapter","$registerOnTypeFormattingProvider","$provideOnTypeFormattingEdits","provideOnTypeFormattingEdits","$provideDocumentLinks","LinkProviderAdapter","provideLinks","$resolveDocumentLink","link","resolveLink","$registerDocumentLinkProvider","$releaseDocumentLinks","ids","releaseDocumentLinks","CodeActionAdapter","$registerQuickFixProvider","providedCodeActionKinds","$provideCodeActions","rangeOrSelection","provideCodeAction","CodeLensAdapter","eventHandle","onDidChangeCodeLenses","$registerCodeLensSupport","$emitCodeLensEvent","$provideCodeLenses","provideCodeLenses","$resolveCodeLens","resolveCodeLens","$releaseCodeLenses","releaseCodeLenses","$provideReferences","ReferenceAdapter","provideReferences","$registerReferenceProvider","OutlineAdapter","$registerOutlineSupport","$provideDocumentSymbols","provideDocumentSymbols","ColorProviderAdapter","$registerDocumentColorProvider","$provideDocumentColors","provideColors","$provideColorPresentations","colorInfo","provideColorPresentations","FoldingProviderAdapter","$registerFoldingRangeProvider","$provideFoldingRange","provideFoldingRanges","RenameAdapter","$registerRenameProvider","supportsResolving","$provideRenameEdits","newName","provideRenameEdits","$resolveRenameLocation","resolveRenameLocation","CallHierarchyAdapter","$registerCallHierarchyProvider","$provideRootDefinition","provideRootDefinition","$provideCallers","provideCallers","rules","action","beforeText","afterText","increaseIndentPattern","decreaseIndentPattern","indentNextLinePattern","unIndentedLinePattern","delegate","cacheId","toPosition","completions","incomplete","wordRangeBeforePos","suggestion","convertCompletionItem","parentId","resolvedItem","newCompletion","defaultRange","insertTextRules","keepWhitespace","KeepWhitespace","InsertAsSnippet","fromCompletionItemKind","filterText","sortText","preselect","converter","commitCharacters","maxCountPerFile","onDidChangeDiagnosticsEmitter","collectionName","diagnosticsLimitPerResource","onDisposeCallback","ensureNotDisposed","setDiagnosticsForUri","setDiagnostics","fireDiagnosticChangeEvent","sendChangesToEditor","delta","existedDiagnostics","$changeDiagnostics","getAllResourcesUris","$clearDiagnostics","getDiagnosticsByUri","setOnDisposeCallback","resourcesUris","toUrisArray","markers","uriMarkers","uriDiagnostics","DiagnosticCollection","DIAGNOSTICS_PRIORITY","convertDiagnosticToMarkerData","lastMarker","nextUri","diagnosticsChangedEmitter","diagnosticCollections","getAllDiagnosticsForResource","getAllDiagnostics","GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX","getNextId","diagnosticCollection","MAX_DIAGNOSTICS_PER_FILE","urisIndexes","nextIndex","diagnosticsCollection","uriIndex","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","ii","idSequence","zeroBasedPosition","pluginHelpContext","reviveContext","activeSignatureHelp","revivedSignatureHelp","saved","fromHover","documentHighlights","isDocumentHighlightArray","highlights","highlight","fromDocumentHighlight","isLocationArray","isDefinitionLinkArray","definitionLinks","fromDefinitionLink","_isSelection","allDiagnostics","codeActionContext","provideCodeActions","commandsOrActions","_isCommand","smth","provideDocumentLinks","links","fromDocumentLink","resolveDocumentLink","lenses","lens","lensSymbol","isResolved","newLens","BAD_CMD","asDocumentSymbolTree","sort","parentStack","containsRange","equalsRange","otherRange","reference","workspaceSymbols","newSymbols","sym","convertedSymbol","fromSymbolInformation","theiaSymbol","toSymbolInformation","workspaceSymbol","converted","fromFoldingRange","provideDocumentColors","colors","fromColor","toColor","fromColorPresentation","prepareRename","rejectReason","asMessage","rangeOrLocation","prepareCallHierarchy","fromCallHierarchyitem","provideCallHierarchyIncomingCalls","callers","fromCallHierarchyIncomingCall","caller","callerDefinition","references","optionsMain","openLabel","defaultUri","canSelectFiles","canSelectFolders","filters","$showOpenDialog","saveLabel","$showSaveDialog","$showUploadDialog","progress","$updateProgress","mapLocation","pluginLocation","Notification","SourceControl","Window","candidateLanguage","candidateIsSynchronized","hasAccessToAllModels","treeViews","treeViewId","treeItemId","treeView","getTreeItem","TreeViewExtImpl","onDidExpandElement","onDidCollapseElement","selectedElements","onDidChangeSelection","onDidChangeVisibility","reveal","selectionOptions","$getChildren","getChildren","$setExpanded","expanded","onExpanded","onCollapsed","$setSelection","treeItemIds","setSelection","$setVisible","isVisible","setVisible","onDidExpandElementEmitter","onDidCollapseElementEmitter","onDidChangeVisibilityEmitter","nodes","clearAll","selectedItemIds","_visible","$registerTreeDataProvider","$unregisterTreeDataProvider","onDidChangeTreeData","$refresh","el","elementId","$setTitle","parentNode","clearChildren","treeItem","treeItemLabel","idLabel","toDisposeElement","icon","themeIconId","iconUrl","treeViewItem","contextValue","child","cachedElement","toDelete","doSetSelection","selectedItemIts","ExtPluginApiProvider","MainPluginApiProvider","serverConnections","$registerLanguageServerProvider","ensureConnection","clientConnection","childProcess","spawnProcess","serverConnection","spawn","pid","stdout","stdin","kill","WebSocketMessageReader","WebSocketMessageWriter","webSocket","onmessage","onerror","onclose","onConnection","ConsoleLogger","onopen","toSocket","createWebSocketConnection","connections","$sendMessage","$createConnection","doEnsureConnection","$deleteConnection","doCreateConnection","PluginMessageReader","PluginMessageWriter","es5ClassCompat","executions","onDidExecuteTask","onDidTerminateTask","onDidExecuteTaskProcess","onDidTerminateTaskProcess","fetchTaskExecutions","$onDidStartTask","getTaskExecution","$onDidEndTask","$onDidStartTaskProcess","executionDto","$onDidEndTaskProcess","exitCode","taskId","TaskProviderAdapter","$registerTaskProvider","taskVersion","$fetchTasks","toTask","fromTask","$executeTask","$provideTasks","provideTasks","$resolveTask","resolveTask","$taskExecutions","executionId","$terminateTask","usedSchemes","fsProviders","handlePool","fileSystem","InPluginFileSystemProxy","$registerFileSystemProvider","$unregisterProvider","checkProviderExists","$readFile","readFile","$writeFile","writeFile","TextEncoder","encode","encoded","TextDecoder","decode","sourceControlMap","sourceControlsByPluginMap","sourceControl","sourceControlHandle","resourceGroupHandle","resourceGroup","getResourceGroup","resourceStateHandle","getResourceState","SourceControlImpl","sourceControls","$executeResourceCommand","groupHandle","resourceHandle","group","executeResourceCommand","$provideOriginalResource","quickDiffProvider","provideOriginalResource","$updateInputBox","$updateValue","$setSourceControlSelection","selected","$setInputBoxValue","$setInputBoxPlaceholder","_label","_rootUri","resourceGroupsMap","_selected","toDisposeOnAcceptInputCommand","toDisposeOnStatusBarCommands","_inputBox","InputBoxImpl","$registerSourceControl","$unregisterSourceControl","createResourceGroup","sourceControlResourceGroup","SourceControlResourceGroupImpl","_count","$updateSourceControl","_quickDiffProvider","hasQuickDiffProvider","_commitTemplate","commitTemplate","_acceptInputCommand","acceptInputCommand","_statusBarCommands","statusBarCommands","safeStatusBarCommands","statusBarCommand","_hideWhenEmpty","_resourceStates","resourceStatesMap","$registerGroup","$updateGroupLabel","hideWhenEmpty","$updateGroup","resources","$updateResourceState","resourceState","resourceCommand","decorations","strikeThrough","faded","theme","letter","colorId","stateHandle","$unregisterGroup","providersMap","PROVIDER_ID","onDidChangeDecorations","argument","$fireDidChangeDecorations","providerMain","provideDecoration","CancellationTokenImpl","ob","bubble","$registerDecorationProvider","$provideDecoration","PreferenceScope","lookUp","tree","_onDidChangeConfiguration","OVERRIDE_PROPERTY","OVERRIDE_PROPERTY_PATTERN","_preferences","$acceptConfigurationChanged","eventData","toConfigurationChangeEvent","extensionId","toReadonlyValue","accessor","clonedTarget","cloneTarget","cloneDeep","targ","prop","deleteProperty","descr","resourceStr","$updateConfigurationOption","$removeConfigurationOption","configInspect","user","globalValue","workspaceValue","workspaceFolder","workspaceFolderValue","readonlyProxy","isExtensible","preventExtensions","defaultConfiguration","getConfigurationModel","Default","userConfiguration","User","workspaceConfiguration","Workspace","folderConfigurations","Configuration","ConfigurationModel","parseConfigurationData","branch","affectsConfiguration","preferenceName","reverse","prevValue","curValue","folderCombinedConfigs","getCombinedResourceConfig","combinedConfiguration","folderConfiguration","getFolderResourceConfig","combinedConfig","getCombinedConfig","getFolderCombinedConfig","merge","folderConfig","folderCombinedConfig","allKeys","others","mergeContents","mergeKeys","webpackPolyfill","deprecate","DebugExtImpl","that","sessions","configurationProviders","descriptorFactories","trackerFactories","contributionPaths","onDidChangeBreakpointsEmitter","onDidChangeActiveDebugSessionEmitter","onDidTerminateDebugSessionEmitter","onDidStartDebugSessionEmitter","onDidReceiveDebugSessionCustomEmitter","_breakpoints","$appendToDebugConsole","$appendLineToDebugConsole","commandRegistryExt","contributions","contribution","$registerDebuggerContribution","added","removed","$addBreakpoints","removedIds","$removeBreakpoints","$startDebugging","tuple","providers","$onSessionCustomEvent","body","session","$sessionDidCreate","$sessionDidDestroy","$sessionDidChange","$breakpointsDidChange","bExt","toBreakpointExt","$createDebugSession","debugConfiguration","theiaSession","customRequest","$customRequest","createDebugAdapterTracker","tracker","createCommunicationProvider","communicationProvider","debugAdapterSession","PluginDebugAdapterSession","$terminateDebugSession","$getTerminalCreationOptions","doGetTerminalCreationOptions","$provideDebugConfigurations","workspaceFolderUri","provideDebugConfigurations","toWorkspaceFolder","$resolveDebugConfigurations","resolveDebugConfiguration","PluginDebugAdapterTracker","resolveDebugAdapterExecutable","descriptorFactory","createDebugAdapterDescriptor","connectDebugAdapter","startDebugAdapter","debugServer","adapterExecutableCommand","contributionPath","debuggerContribution","winx86","osx","linux","toPlatformInfo","program","programArgs","runtime","runtimeArgs","channel","onWillStartSession","onWillStopSession","onDebugAdapterError","onDidSendMessage","onWillReceiveMessage","onDebugAdapterExit","signal","onExit","DebugAdapterSessionImpl","alloc","seq","handleData","CONTENT_LENGTH","TWO_CRLF","stdio","forkOptions","execArgv","silent","fork","net","trackers","factories","_onDidAddDocuments","_onDidRemoveDocuments","_onDidChangeActiveTextEditors","$acceptEditorsAndDocumentsDelta","removedDocuments","addedDocuments","removedEditors","addedEditors","documentUri","TextEditorExt","editorPosition","activeEditorId","newActiveEditor","_selections","_visibleRanges","TextEditorOptionsExt","_viewColumn","readonly","trySetSelection","fromSelection","runOnProxy","$trySetSelections","_acceptViewColumn","undoStopBefore","undoStopAfter","TextEditorEdit","insertSnippet","snippet","posOrRange","$tryInsertSnippet","setDecorations","decorationType","rangesOrOptions","$trySetDecorations","fromRangeOrRangeWithMessage","$trySetDecorationsFast","revealRange","revealType","$tryRevealRange","editData","finalize","editRanges","rangeEnd","forceMoveMarkers","$tryApplyEdits","documentVersionId","_tabSize","_insertSpace","_cursorStyle","_lineNumbers","lineNumbers","validateTabSize","warnOnError","$trySetOptions","validateInsertSpaces","newOptions","configurationUpdate","hasUpdate","collectedEdits","addEdit","endOfLine","moveMarkers","validatedRange","rest","messageService","workspaceFoldersChangedEmitter","documentContentProviders","workspaceWillRenameFileEmitter","workspaceDidRenameFileEmitter","fileSystemWatcherManager","InPluginFileSystemWatcherProxy","folders","$onWorkspaceFoldersChanged","newFolders","roots","deltaFolders","currentFolders","foldersDiff","folder1","folder2","$pickWorkspaceFolder","includePattern","includeFolderUri","excludePatternOrDisregardExcludes","$startFileSearch","$fileChanged","onFileSystemEvent","subscriberId","onDidChangeSubscription","$registerTextDocumentContentProvider","$provideTextDocumentContent","$onTextDocumentContentChange","$unregisterTextDocumentContentProvider","documentURI","provideTextDocumentContent","resolveParent","hasFolder","dirname","resourcePath","folderPath","rootsToAdd","folderToAdd","currentWorkspaceFolders","newWorkspaceFolders","otherFolder","$updateWorkspaceFolders","$onFileRename","$onWillRename","subscribers","perSubscriberEventEmitter","subscriberPrivateData","fileWatcherSubscriberOptions","$registerFileSystemWatcher","unsubscribe","$unregisterFileSystemWatcher","FileSystemWatcher","subscriberData","isIgnoreCreateEvents","isIgnoreChangeEvents","isIgnoreDeleteEvents","onDidCreateEmitter","onDidDeleteEmitter","optionsOrFirstItem","actions","pushItem","isCloseAffordance","onCloseActionHandle","modal","actionHandle","EnvExtImpl","envSessionId","envMachineId","$getEnvVariable","queryParameters","lang","defaultShell","$getClientOperatingSystem","APP_NAME","readText","$readText","writeText","$writeText","webviewPanels","serializers","initData","$onMessage","panel","getWebviewPanel","onMessageEmitter","$onDidChangeWebviewPanelViewState","newState","setActive","setViewColumn","onDidChangeViewStateEmitter","webviewPanel","$onDidDisposeWebviewPanel","$deserializeWebviewPanel","viewState","WebviewImpl","revivedPanel","WebviewPanelImpl","deserializeWebviewPanel","webviewShowOptions","toWebviewPanelShowOptions","$createWebviewPanel","toWebviewOptions","$registerSerializer","$unregisterSerializer","onDidReceiveMessage","asWebviewUri","webviewResourceRoot","webviewCspSource","checkIsDisposed","_html","$setHtml","$setOptions","$postMessage","localResourceRoots","_viewType","_webview","onDidDispose","onDidChangeViewState","_showOptions","$disposeWebview","newTitle","_iconPath","$setIconPath","setShowOptions"],"mappings":"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","file":"worker-ext.6f15e142f14a2a5ec0fc.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 72);\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/workbench/api/common/extHostTypes.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-null/no-null */\n\nimport { UUID } from '@phosphor/coreutils/lib/uuid';\nimport { illegalArgument } from '../common/errors';\nimport * as theia from '@theia/plugin';\nimport * as crypto from 'crypto';\nimport URI from 'vscode-uri';\nimport { relative } from '../common/paths-util';\nimport { startsWithIgnoreCase } from '@theia/languages/lib/common/language-selector/strings';\nimport { MarkdownString, isMarkdownString } from './markdown-string';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\n\nexport class Disposable {\n    private disposable: undefined | (() => void);\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(...disposables: { dispose(): any }[]): Disposable {\n        return new Disposable(() => {\n            if (disposables) {\n                for (const disposable of disposables) {\n                    if (disposable && typeof disposable.dispose === 'function') {\n                        disposable.dispose();\n                    }\n                }\n            }\n        });\n    }\n\n    constructor(func: () => void) {\n        this.disposable = func;\n    }\n    /**\n     * Dispose this object.\n     */\n    dispose(): void {\n        if (this.disposable) {\n            this.disposable();\n            this.disposable = undefined;\n        }\n    }\n\n    static create(func: () => void): Disposable {\n        return new Disposable(func);\n    }\n}\n\nexport enum StatusBarAlignment {\n    Left = 1,\n    Right = 2\n}\n\nexport enum TextEditorLineNumbersStyle {\n    Off = 0,\n    On = 1,\n    Relative = 2\n}\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    Beside = -2,\n    One = 1,\n    Two = 2,\n    Three = 3,\n    Four = 4,\n    Five = 5,\n    Six = 6,\n    Seven = 7,\n    Eight = 8,\n    Nine = 9\n}\n\n/**\n * Represents sources that can cause `window.onDidChangeEditorSelection`\n */\nexport enum TextEditorSelectionChangeKind {\n    Keyboard = 1,\n\n    Mouse = 2,\n\n    Command = 3\n}\n\nexport namespace TextEditorSelectionChangeKind {\n    export function fromValue(s: string | undefined): TextEditorSelectionChangeKind | undefined {\n        switch (s) {\n            case 'keyboard': return TextEditorSelectionChangeKind.Keyboard;\n            case 'mouse': return TextEditorSelectionChangeKind.Mouse;\n            case 'api': return TextEditorSelectionChangeKind.Command;\n        }\n        return undefined;\n    }\n}\n\nexport class Position {\n    private _line: number;\n    private _character: number;\n    constructor(line: number, char: number) {\n        if (line < 0) {\n            throw new Error('line number cannot be negative');\n        }\n        if (char < 0) {\n            throw new Error('char number cannot be negative');\n        }\n        this._line = line;\n        this._character = char;\n    }\n\n    get line(): number {\n        return this._line;\n    }\n\n    get character(): number {\n        return this._character;\n    }\n\n    isBefore(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character < other._character;\n    }\n\n    isBeforeOrEqual(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character <= other._character;\n    }\n\n    isAfter(other: Position): boolean {\n        return !this.isBeforeOrEqual(other);\n    }\n\n    isAfterOrEqual(other: Position): boolean {\n        return !this.isBefore(other);\n    }\n\n    isEqual(other: Position): boolean {\n        return this._line === other._line && this._character === other._character;\n    }\n\n    compareTo(other: Position): number {\n        if (this._line < other._line) {\n            return -1;\n        } else if (this._line > other.line) {\n            return 1;\n        } else {\n            // equal line\n            if (this._character < other._character) {\n                return -1;\n            } else if (this._character > other._character) {\n                return 1;\n            } else {\n                // equal line and character\n                return 0;\n            }\n        }\n    }\n\n    translate(change: { lineDelta?: number; characterDelta?: number; }): Position;\n    translate(lineDelta?: number, characterDelta?: number): Position;\n    translate(lineDeltaOrChange: number | { lineDelta?: number; characterDelta?: number; } | undefined, characterDelta: number = 0): Position {\n\n        if (lineDeltaOrChange === null || characterDelta === null) {\n            throw illegalArgument();\n        }\n\n        let lineDelta: number;\n        if (typeof lineDeltaOrChange === 'undefined') {\n            lineDelta = 0;\n        } else if (typeof lineDeltaOrChange === 'number') {\n            lineDelta = lineDeltaOrChange;\n        } else {\n            lineDelta = typeof lineDeltaOrChange.lineDelta === 'number' ? lineDeltaOrChange.lineDelta : 0;\n            characterDelta = typeof lineDeltaOrChange.characterDelta === 'number' ? lineDeltaOrChange.characterDelta : 0;\n        }\n\n        if (lineDelta === 0 && characterDelta === 0) {\n            return this;\n        }\n        return new Position(this.line + lineDelta, this.character + characterDelta);\n    }\n\n    with(change: { line?: number; character?: number; }): Position;\n    with(line?: number, character?: number): Position;\n    with(lineOrChange: number | { line?: number; character?: number; } | undefined, character: number = this.character): Position {\n\n        if (lineOrChange === null || character === null) {\n            throw illegalArgument();\n        }\n\n        let line: number;\n        if (typeof lineOrChange === 'undefined') {\n            line = this.line;\n\n        } else if (typeof lineOrChange === 'number') {\n            line = lineOrChange;\n\n        } else {\n            line = typeof lineOrChange.line === 'number' ? lineOrChange.line : this.line;\n            character = typeof lineOrChange.character === 'number' ? lineOrChange.character : this.character;\n        }\n\n        if (line === this.line && character === this.character) {\n            return this;\n        }\n        return new Position(line, character);\n    }\n\n    static Min(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isBefore(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static Max(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isAfter(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static isPosition(other: {}): other is Position {\n        if (!other) {\n            return false;\n        }\n        if (other instanceof Position) {\n            return true;\n        }\n        const { line, character } = <Position>other;\n        if (typeof line === 'number' && typeof character === 'number') {\n            return true;\n        }\n        return false;\n    }\n}\n\nexport class Range {\n    protected _start: Position;\n    protected _end: Position;\n\n    constructor(start: Position, end: Position);\n    constructor(startLine: number, startColumn: number, endLine: number, endColumn: number);\n    constructor(startLineOrStart: number | Position, startColumnOrEnd: number | Position, endLine?: number, endColumn?: number) {\n        let start: Position | undefined = undefined;\n        let end: Position | undefined = undefined;\n\n        if (typeof startLineOrStart === 'number' && typeof startColumnOrEnd === 'number' && typeof endLine === 'number' && typeof endColumn === 'number') {\n            start = new Position(startLineOrStart, startColumnOrEnd);\n            end = new Position(endLine, endColumn);\n        } else if (startLineOrStart instanceof Position && startColumnOrEnd instanceof Position) {\n            start = startLineOrStart;\n            end = startColumnOrEnd;\n        }\n\n        if (!start || !end) {\n            throw new Error('Invalid arguments');\n        }\n\n        if (start.isBefore(end)) {\n            this._start = start;\n            this._end = end;\n        } else {\n            this._start = end;\n            this._end = start;\n        }\n    }\n\n    get start(): Position {\n        return this._start;\n    }\n\n    get end(): Position {\n        return this._end;\n    }\n\n    contains(positionOrRange: Position | Range): boolean {\n        if (positionOrRange instanceof Range) {\n            return this.contains(positionOrRange._start)\n                && this.contains(positionOrRange._end);\n\n        } else if (positionOrRange instanceof Position) {\n            if (positionOrRange.isBefore(this._start)) {\n                return false;\n            }\n            if (this._end.isBefore(positionOrRange)) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEqual(other: Range): boolean {\n        return this._start.isEqual(other._start) && this._end.isEqual(other._end);\n    }\n\n    intersection(other: Range): Range | undefined {\n        const start = Position.Max(other.start, this._start);\n        const end = Position.Min(other.end, this._end);\n        if (start.isAfter(end)) {\n            // this happens when there is no overlap:\n            // |-----|\n            //          |----|\n            return undefined;\n        }\n        return new Range(start, end);\n    }\n\n    union(other: Range): Range {\n        if (this.contains(other)) {\n            return this;\n        } else if (other.contains(this)) {\n            return other;\n        }\n        const start = Position.Min(other.start, this._start);\n        const end = Position.Max(other.end, this.end);\n        return new Range(start, end);\n    }\n\n    get isEmpty(): boolean {\n        return this._start.isEqual(this._end);\n    }\n\n    get isSingleLine(): boolean {\n        return this._start.line === this._end.line;\n    }\n\n    with(change: { start?: Position, end?: Position }): Range;\n    with(start?: Position, end?: Position): Range;\n    with(startOrChange: Position | { start?: Position, end?: Position } | undefined, end: Position = this.end): Range {\n\n        if (startOrChange === null || end === null) {\n            throw illegalArgument();\n        }\n\n        let start: Position;\n        if (!startOrChange) {\n            start = this.start;\n\n        } else if (Position.isPosition(startOrChange)) {\n            start = startOrChange;\n\n        } else {\n            start = startOrChange.start || this.start;\n            end = startOrChange.end || this.end;\n        }\n\n        if (start.isEqual(this._start) && end.isEqual(this.end)) {\n            return this;\n        }\n        return new Range(start, end);\n    }\n\n    static isRange(thing: {}): thing is theia.Range {\n        if (thing instanceof Range) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Position.isPosition((<Range>thing).start)\n            && Position.isPosition((<Range>thing).end);\n    }\n\n}\n\nexport class Selection extends Range {\n    private _anchor: Position;\n    private _active: Position;\n    constructor(anchor: Position, active: Position);\n    constructor(anchorLine: number, anchorColumn: number, activeLine: number, activeColumn: number);\n    constructor(anchorLineOrAnchor: number | Position, anchorColumnOrActive: number | Position, activeLine?: number, activeColumn?: number) {\n        let anchor: Position | undefined = undefined;\n        let active: Position | undefined = undefined;\n\n        if (typeof anchorLineOrAnchor === 'number' && typeof anchorColumnOrActive === 'number' && typeof activeLine === 'number' && typeof activeColumn === 'number') {\n            anchor = new Position(anchorLineOrAnchor, anchorColumnOrActive);\n            active = new Position(activeLine, activeColumn);\n        } else if (anchorLineOrAnchor instanceof Position && anchorColumnOrActive instanceof Position) {\n            anchor = anchorLineOrAnchor;\n            active = anchorColumnOrActive;\n        }\n\n        if (!anchor || !active) {\n            throw new Error('Invalid arguments');\n        }\n\n        super(anchor, active);\n\n        this._anchor = anchor;\n        this._active = active;\n    }\n\n    get active(): Position {\n        return this._active;\n    }\n\n    get anchor(): Position {\n        return this._anchor;\n    }\n\n    get isReversed(): boolean {\n        return this._anchor === this._end;\n    }\n}\n\nexport enum EndOfLine {\n    LF = 1,\n    CRLF = 2\n}\n\nexport class SnippetString {\n\n    static isSnippetString(thing: {}): thing is SnippetString {\n        if (thing instanceof SnippetString) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<SnippetString>thing).value === 'string';\n    }\n\n    private static _escape(value: string): string {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n\n    private _tabstop: number = 1;\n\n    value: string;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(string: string): SnippetString {\n        this.value += SnippetString._escape(string);\n        return this;\n    }\n\n    appendTabstop(number: number = this._tabstop++): SnippetString {\n        this.value += '$';\n        this.value += number;\n        return this;\n    }\n\n    appendPlaceholder(value: string | ((snippet: SnippetString) => void), number: number = this._tabstop++): SnippetString {\n\n        if (typeof value === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            value(nested);\n            this._tabstop = nested._tabstop;\n            value = nested.value;\n        } else {\n            value = SnippetString._escape(value);\n        }\n\n        this.value += '${';\n        this.value += number;\n        this.value += ':';\n        this.value += value;\n        this.value += '}';\n\n        return this;\n    }\n\n    appendVariable(name: string, defaultValue?: string | ((snippet: SnippetString) => void)): SnippetString {\n\n        if (typeof defaultValue === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            defaultValue(nested);\n            this._tabstop = nested._tabstop;\n            defaultValue = nested.value;\n\n        } else if (typeof defaultValue === 'string') {\n            defaultValue = defaultValue.replace(/\\$|}/g, '\\\\$&');\n        }\n\n        this.value += '${';\n        this.value += name;\n        if (defaultValue) {\n            this.value += ':';\n            this.value += defaultValue;\n        }\n        this.value += '}';\n\n        return this;\n    }\n}\n\nexport class ThemeColor {\n    constructor(public id: string) {\n    }\n}\n\nexport class ThemeIcon {\n\n    static readonly File: ThemeIcon = new ThemeIcon('file');\n\n    static readonly Folder: ThemeIcon = new ThemeIcon('folder');\n\n    private constructor(public id: string) {\n    }\n\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\n/**\n * These values match very carefully the values of `TrackedRangeStickiness`\n */\nexport enum DecorationRangeBehavior {\n    /**\n     * TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges\n     */\n    OpenOpen = 0,\n    /**\n     * TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n     */\n    ClosedClosed = 1,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingBefore\n     */\n    OpenClosed = 2,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingAfter\n     */\n    ClosedOpen = 3\n}\n\n/**\n * Vertical Lane in the overview ruler of the editor.\n */\nexport enum OverviewRulerLane {\n    Left = 1,\n    Center = 2,\n    Right = 4,\n    Full = 7\n}\n\nexport enum ConfigurationTarget {\n    Global = 1,\n    Workspace,\n    WorkspaceFolder,\n    Default,\n    Memory\n}\n\nexport class RelativePattern {\n\n    base: string;\n\n    constructor(base: theia.WorkspaceFolder | string, public pattern: string) {\n        if (typeof base !== 'string') {\n            if (!base || !URI.isUri(base.uri)) {\n                throw illegalArgument('base');\n            }\n        }\n\n        if (typeof pattern !== 'string') {\n            throw illegalArgument('pattern');\n        }\n\n        this.base = typeof base === 'string' ? base : base.uri.fsPath;\n    }\n\n    pathToRelative(from: string, to: string): string {\n        return relative(from, to);\n    }\n}\n\nexport enum IndentAction {\n    None = 0,\n    Indent = 1,\n    IndentOutdent = 2,\n    Outdent = 3\n}\n\nexport class TextEdit {\n\n    protected _range: Range;\n    protected _newText: string;\n    protected _newEol: EndOfLine;\n\n    get range(): Range {\n        return this._range;\n    }\n\n    set range(value: Range) {\n        if (value && !Range.isRange(value)) {\n            throw illegalArgument('range');\n        }\n        this._range = value;\n    }\n\n    get newText(): string {\n        return this._newText || '';\n    }\n\n    set newText(value: string) {\n        if (value && typeof value !== 'string') {\n            throw illegalArgument('newText');\n        }\n        this._newText = value;\n    }\n\n    get newEol(): EndOfLine {\n        return this._newEol;\n    }\n\n    set newEol(value: EndOfLine) {\n        if (value && typeof value !== 'number') {\n            throw illegalArgument('newEol');\n        }\n        this._newEol = value;\n    }\n\n    constructor(range: Range | undefined, newText: string | undefined) {\n        this.range = range!;\n        this.newText = newText!;\n    }\n\n    static isTextEdit(thing: {}): thing is TextEdit {\n        if (thing instanceof TextEdit) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<TextEdit>thing).range)\n            && typeof (<TextEdit>thing).newText === 'string';\n    }\n\n    static replace(range: Range, newText: string): TextEdit {\n        return new TextEdit(range, newText);\n    }\n\n    static insert(position: Position, newText: string): TextEdit {\n        return TextEdit.replace(new Range(position, position), newText);\n    }\n\n    static delete(range: Range): TextEdit {\n        return TextEdit.replace(range, '');\n    }\n\n    static setEndOfLine(eol: EndOfLine): TextEdit {\n        const ret = new TextEdit(undefined, undefined);\n        ret.newEol = eol;\n        return ret;\n    }\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport enum CompletionItemKind {\n    Text = 0,\n    Method = 1,\n    Function = 2,\n    Constructor = 3,\n    Field = 4,\n    Variable = 5,\n    Class = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Unit = 10,\n    Value = 11,\n    Enum = 12,\n    Keyword = 13,\n    Snippet = 14,\n    Color = 15, // eslint-disable-line no-shadow\n    File = 16,\n    Reference = 17,\n    Folder = 18,\n    EnumMember = 19,\n    Constant = 20,\n    Struct = 21,\n    Event = 22,\n    Operator = 23,\n    TypeParameter = 24\n}\n\nexport class CompletionItem implements theia.CompletionItem {\n\n    label: string;\n    kind?: CompletionItemKind;\n    detail: string;\n    documentation: string | MarkdownString;\n    sortText: string;\n    filterText: string;\n    preselect: boolean;\n    insertText: string | SnippetString;\n    range: Range;\n    textEdit: TextEdit;\n    additionalTextEdits: TextEdit[];\n    command: theia.Command;\n\n    constructor(label: string, kind?: CompletionItemKind) {\n        this.label = label;\n        this.kind = kind;\n    }\n}\n\nexport class CompletionList {\n\n    isIncomplete?: boolean;\n\n    items: theia.CompletionItem[];\n\n    constructor(items: theia.CompletionItem[] = [], isIncomplete: boolean = false) {\n        this.items = items;\n        this.isIncomplete = isIncomplete;\n    }\n}\n\nexport enum DiagnosticSeverity {\n    Error = 0,\n    Warning = 1,\n    Information = 2,\n    Hint = 3\n}\n\nexport class DiagnosticRelatedInformation {\n    location: Location;\n    message: string;\n\n    constructor(location: Location, message: string) {\n        this.location = location;\n        this.message = message;\n    }\n}\n\nexport class Location {\n    uri: URI;\n    range: Range;\n\n    constructor(uri: URI, rangeOrPosition: Range | Position | undefined) {\n        this.uri = uri;\n        if (rangeOrPosition instanceof Range) {\n            this.range = rangeOrPosition;\n        } else if (rangeOrPosition instanceof Position) {\n            this.range = new Range(rangeOrPosition, rangeOrPosition);\n        }\n    }\n\n    static isLocation(thing: {}): thing is theia.Location {\n        if (thing instanceof Location) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<Location>thing).range)\n            && URI.isUri((<Location>thing).uri);\n    }\n}\n\nexport enum DiagnosticTag {\n    Unnecessary = 1,\n}\n\nexport class Diagnostic {\n    range: Range;\n    message: string;\n    severity: DiagnosticSeverity;\n    source?: string;\n    code?: string | number;\n    relatedInformation?: DiagnosticRelatedInformation[];\n    tags?: DiagnosticTag[];\n\n    constructor(range: Range, message: string, severity: DiagnosticSeverity = DiagnosticSeverity.Error) {\n        this.range = range;\n        this.message = message;\n        this.severity = severity;\n    }\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n}\n\nexport class ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n\n    constructor(label: string | [number, number], documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n    }\n}\n\nexport class SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n\n    constructor(label: string, documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n        this.parameters = [];\n    }\n}\n\nexport enum SignatureHelpTriggerKind {\n    Invoke = 1,\n    TriggerCharacter = 2,\n    ContentChange = 3,\n}\n\nexport class SignatureHelp {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n\n    constructor() {\n        this.signatures = [];\n    }\n}\n\nexport class Hover {\n\n    public contents: MarkdownString[] | theia.MarkedString[];\n    public range?: Range;\n\n    constructor(\n        contents: MarkdownString | theia.MarkedString | MarkdownString[] | theia.MarkedString[],\n        range?: Range\n    ) {\n        if (!contents) {\n            illegalArgument('contents must be defined');\n        }\n        if (Array.isArray(contents)) {\n            this.contents = <MarkdownString[] | theia.MarkedString[]>contents;\n        } else if (isMarkdownString(contents)) {\n            this.contents = [contents];\n        } else {\n            this.contents = [contents];\n        }\n        this.range = range;\n    }\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport class DocumentHighlight {\n\n    public range: Range;\n    public kind?: DocumentHighlightKind;\n\n    constructor(\n        range: Range,\n        kind?: DocumentHighlightKind\n    ) {\n        this.range = range;\n        this.kind = kind;\n    }\n}\n\nexport type Definition = Location | Location[];\n\nexport class DocumentLink {\n    range: Range;\n    target: URI;\n\n    constructor(range: Range, target: URI) {\n        if (target && !(target instanceof URI)) {\n            throw illegalArgument('target');\n        }\n        if (!Range.isRange(range) || range.isEmpty) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.target = target;\n    }\n}\n\nexport class CodeLens {\n\n    range: Range;\n\n    command?: theia.Command;\n\n    get isResolved(): boolean {\n        return !!this.command;\n    }\n\n    constructor(range: Range, command?: theia.Command) {\n        this.range = range;\n        this.command = command;\n    }\n}\n\nexport enum CodeActionTrigger {\n    Automatic = 1,\n    Manual = 2,\n}\n\nexport class CodeActionKind {\n    private static readonly sep = '.';\n\n    public static readonly Empty = new CodeActionKind('');\n    public static readonly QuickFix = CodeActionKind.Empty.append('quickfix');\n    public static readonly Refactor = CodeActionKind.Empty.append('refactor');\n    public static readonly RefactorExtract = CodeActionKind.Refactor.append('extract');\n    public static readonly RefactorInline = CodeActionKind.Refactor.append('inline');\n    public static readonly RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n    public static readonly Source = CodeActionKind.Empty.append('source');\n    public static readonly SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n    public static readonly SourceFixAll = CodeActionKind.Source.append('fixAll');\n\n    constructor(\n        public readonly value: string\n    ) { }\n\n    public append(parts: string): CodeActionKind {\n        return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n    }\n\n    public contains(other: CodeActionKind): boolean {\n        return this.value === other.value || startsWithIgnoreCase(other.value, this.value + CodeActionKind.sep);\n    }\n\n    public intersects(other: CodeActionKind): boolean {\n        return this.contains(other) || other.contains(this);\n    }\n}\n\nexport enum TextDocumentSaveReason {\n    Manual = 1,\n    AfterDelay = 2,\n    FocusOut = 3\n}\n\nexport class CodeAction {\n    title: string;\n\n    command?: theia.Command;\n\n    edit?: WorkspaceEdit;\n\n    diagnostics?: Diagnostic[];\n\n    kind?: CodeActionKind;\n\n    constructor(title: string, kind?: CodeActionKind) {\n        this.title = title;\n        this.kind = kind;\n    }\n}\n\nexport interface FileOperationOptions {\n    overwrite?: boolean;\n    ignoreIfExists?: boolean;\n    ignoreIfNotExists?: boolean;\n    recursive?: boolean;\n}\nexport interface FileOperation {\n    _type: 1;\n    from: URI | undefined;\n    to: URI | undefined;\n    options?: FileOperationOptions;\n}\n\nexport interface FileTextEdit {\n    _type: 2;\n    uri: URI;\n    edit: TextEdit;\n}\n\nexport class WorkspaceEdit implements theia.WorkspaceEdit {\n\n    private _edits = new Array<FileOperation | FileTextEdit | undefined>();\n\n    renameFile(from: theia.Uri, to: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }): void {\n        this._edits.push({ _type: 1, from, to, options });\n    }\n\n    createFile(uri: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }): void {\n        this._edits.push({ _type: 1, from: undefined, to: uri, options });\n    }\n\n    deleteFile(uri: theia.Uri, options?: { recursive?: boolean, ignoreIfNotExists?: boolean }): void {\n        this._edits.push({ _type: 1, from: uri, to: undefined, options });\n    }\n\n    replace(uri: URI, range: Range, newText: string): void {\n        this._edits.push({ _type: 2, uri, edit: new TextEdit(range, newText) });\n    }\n\n    insert(resource: URI, position: Position, newText: string): void {\n        this.replace(resource, new Range(position, position), newText);\n    }\n\n    delete(resource: URI, range: Range): void {\n        this.replace(resource, range, '');\n    }\n\n    has(uri: URI): boolean {\n        for (const edit of this._edits) {\n            if (edit && edit._type === 2 && edit.uri.toString() === uri.toString()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    set(uri: URI, edits: TextEdit[]): void {\n        if (!edits) {\n            // remove all text edits for `uri`\n            for (let i = 0; i < this._edits.length; i++) {\n                const element = this._edits[i];\n                if (element && element._type === 2 && element.uri.toString() === uri.toString()) {\n                    this._edits[i] = undefined;\n                }\n            }\n            this._edits = this._edits.filter(e => !!e);\n        } else {\n            // append edit to the end\n            for (const edit of edits) {\n                if (edit) {\n                    this._edits.push({ _type: 2, uri, edit });\n                }\n            }\n        }\n    }\n\n    get(uri: URI): TextEdit[] {\n        const res: TextEdit[] = [];\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2 && candidate.uri.toString() === uri.toString()) {\n                res.push(candidate.edit);\n            }\n        }\n        if (res.length === 0) {\n            return undefined!;\n        }\n        return res;\n    }\n\n    entries(): [URI, TextEdit[]][] {\n        const textEdits = new Map<string, [URI, TextEdit[]]>();\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2) {\n                let textEdit = textEdits.get(candidate.uri.toString());\n                if (!textEdit) {\n                    textEdit = [candidate.uri, []];\n                    textEdits.set(candidate.uri.toString(), textEdit);\n                }\n                textEdit[1].push(candidate.edit);\n            }\n        }\n        const result: [URI, TextEdit[]][] = [];\n        textEdits.forEach(v => result.push(v));\n        return result;\n    }\n\n    _allEntries(): ([URI, TextEdit[]] | [URI, URI, FileOperationOptions])[] {\n        const res: ([URI, TextEdit[]] | [URI, URI, FileOperationOptions])[] = [];\n        for (const edit of this._edits) {\n            if (!edit) {\n                continue;\n            }\n            if (edit._type === 1) {\n                res.push([edit.from!, edit.to!, edit.options!]);\n            } else {\n                res.push([edit.uri, [edit.edit]]);\n            }\n        }\n        return res;\n    }\n\n    get size(): number {\n        return this.entries().length;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return this.entries();\n    }\n}\n\nexport class TreeItem {\n\n    label?: string | theia.TreeItemLabel;\n\n    id?: string;\n\n    iconPath?: string | URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n\n    resourceUri?: URI;\n\n    tooltip?: string | undefined;\n\n    command?: theia.Command;\n\n    contextValue?: string;\n\n    constructor(label: string | theia.TreeItemLabel, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(resourceUri: URI, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(arg1: string | theia.TreeItemLabel | URI, public collapsibleState: theia.TreeItemCollapsibleState = TreeItemCollapsibleState.None) {\n        if (arg1 instanceof URI) {\n            this.resourceUri = arg1;\n        } else {\n            this.label = arg1;\n        }\n    }\n}\n\nexport enum TreeItemCollapsibleState {\n    None = 0,\n    Collapsed = 1,\n    Expanded = 2\n}\n\nexport class SymbolInformation {\n\n    static validate(candidate: SymbolInformation): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n    }\n\n    name: string;\n    location: Location;\n    kind: SymbolKind;\n    containerName: undefined | string;\n    constructor(name: string, kind: SymbolKind, containerName: string, location: Location);\n    constructor(name: string, kind: SymbolKind, range: Range, uri?: URI, containerName?: string);\n    constructor(name: string, kind: SymbolKind, rangeOrContainer: string | Range, locationOrUri?: Location | URI, containerName?: string) {\n        this.name = name;\n        this.kind = kind;\n        this.containerName = containerName;\n\n        if (typeof rangeOrContainer === 'string') {\n            this.containerName = rangeOrContainer;\n        }\n\n        if (locationOrUri instanceof Location) {\n            this.location = locationOrUri;\n        } else if (rangeOrContainer instanceof Range) {\n            this.location = new Location(locationOrUri!, rangeOrContainer);\n        }\n\n        SymbolInformation.validate(this);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return {\n            name: this.name,\n            kind: SymbolKind[this.kind],\n            location: this.location,\n            containerName: this.containerName\n        };\n    }\n}\n\nexport class DocumentSymbol {\n\n    static validate(candidate: DocumentSymbol): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n        if (!candidate.range.contains(candidate.selectionRange)) {\n            throw new Error('selectionRange must be contained in fullRange');\n        }\n        if (candidate.children) {\n            candidate.children.forEach(DocumentSymbol.validate);\n        }\n    }\n\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    range: Range;\n    selectionRange: Range;\n    children: DocumentSymbol[];\n\n    constructor(name: string, detail: string, kind: SymbolKind, range: Range, selectionRange: Range) {\n        this.name = name;\n        this.detail = detail;\n        this.kind = kind;\n        this.range = range;\n        this.selectionRange = selectionRange;\n        this.children = [];\n\n        DocumentSymbol.validate(this);\n    }\n}\n\nexport enum FileChangeType {\n    Changed = 1,\n    Created = 2,\n    Deleted = 3,\n}\n\nexport enum CommentThreadCollapsibleState {\n    Collapsed = 0,\n    Expanded = 1\n}\n\nexport interface QuickInputButton {\n    readonly iconPath: URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n    readonly tooltip?: string | undefined;\n}\n\nexport class QuickInputButtons {\n    static readonly Back: QuickInputButton = {\n        iconPath: {\n            id: 'Back'\n        },\n        tooltip: 'Back'\n    };\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\nexport class FileSystemError extends Error {\n\n    static FileExists(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryExists', FileSystemError.FileExists);\n    }\n    static FileNotFound(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryNotFound', FileSystemError.FileNotFound);\n    }\n    static FileNotADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryNotADirectory', FileSystemError.FileNotADirectory);\n    }\n    static FileIsADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryIsADirectory', FileSystemError.FileIsADirectory);\n    }\n    static NoPermissions(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'NoPermissions', FileSystemError.NoPermissions);\n    }\n    static Unavailable(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'Unavailable', FileSystemError.Unavailable);\n    }\n\n    constructor(uriOrMessage?: string | URI, code?: string, terminator?: Function) {\n        super(URI.isUri(uriOrMessage) ? uriOrMessage.toString(true) : uriOrMessage);\n        this.name = code ? `${code} (FileSystemError)` : 'FileSystemError';\n\n        if (typeof Object.setPrototypeOf === 'function') {\n            Object.setPrototypeOf(this, FileSystemError.prototype);\n        }\n\n        if (typeof Error.captureStackTrace === 'function' && typeof terminator === 'function') {\n            Error.captureStackTrace(this, terminator);\n        }\n    }\n}\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport class ProgressOptions {\n    /**\n     * The location at which progress should show.\n     */\n    location: ProgressLocation;\n    /**\n     * A human-readable string which will be used to describe the\n     * operation.\n     */\n    title?: string;\n    /**\n     * Controls if a cancel button should show to allow the user to\n     * cancel the long running operation.  Note that currently only\n     * `ProgressLocation.Notification` is supporting to show a cancel\n     * button.\n     */\n    cancellable?: boolean;\n    constructor(location: ProgressLocation, title?: string, cancellable?: boolean) {\n        this.location = location;\n    }\n}\nexport class Progress<T> {\n    /**\n     * Report a progress update.\n     * @param value A progress item, like a message and/or an\n     * report on how much work finished\n     */\n    report(value: T): void {\n    }\n}\nexport enum ProgressLocation {\n    /**\n     * Show progress for the source control viewlet, as overlay for the icon and as progress bar\n     * inside the viewlet (when visible). Neither supports cancellation nor discrete progress.\n     */\n    SourceControl = 1,\n    /**\n     * Show progress in the status bar of the editor. Neither supports cancellation nor discrete progress.\n     */\n    Window = 10,\n    /**\n     * Show progress as notification with an optional cancel button. Supports to show infinite and discrete progress.\n     */\n    Notification = 15\n}\n\nexport class ProcessExecution {\n    private executionProcess: string;\n    private arguments: string[];\n    private executionOptions: theia.ProcessExecutionOptions | undefined;\n\n    constructor(process: string, options?: theia.ProcessExecutionOptions);\n    constructor(process: string, args: string[], options?: theia.ProcessExecutionOptions);\n    constructor(process: string, varg1?: string[] | theia.ProcessExecutionOptions, varg2?: theia.ProcessExecutionOptions) {\n        if (typeof process !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = process;\n        if (varg1 !== undefined) {\n            if (Array.isArray(varg1)) {\n                this.arguments = varg1;\n                this.executionOptions = varg2;\n            } else {\n                this.executionOptions = varg1;\n            }\n        }\n        if (this.arguments === undefined) {\n            this.arguments = [];\n        }\n    }\n\n    get process(): string {\n        return this.executionProcess;\n    }\n\n    set process(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = value;\n    }\n\n    get args(): string[] {\n        return this.arguments;\n    }\n\n    set args(value: string[]) {\n        if (!Array.isArray(value)) {\n            value = [];\n        }\n        this.arguments = value;\n    }\n\n    get options(): theia.ProcessExecutionOptions | undefined {\n        return this.executionOptions;\n    }\n\n    set options(value: theia.ProcessExecutionOptions | undefined) {\n        this.executionOptions = value;\n    }\n\n    public computeId(): string {\n        const hash = crypto.createHash('md5');\n        hash.update('process');\n        if (this.executionProcess !== undefined) {\n            hash.update(this.executionProcess);\n        }\n        if (this.arguments && this.arguments.length > 0) {\n            for (const arg of this.arguments) {\n                hash.update(arg);\n            }\n        }\n        return hash.digest('hex');\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution): boolean {\n        const candidate = value as ProcessExecution;\n        return candidate && !!candidate.process;\n    }\n}\n\nexport enum ShellQuoting {\n    Escape = 1,\n    Strong = 2,\n    Weak = 3\n}\n\nexport enum TaskPanelKind {\n    Shared = 1,\n    Dedicated = 2,\n    New = 3\n}\n\nexport enum TaskRevealKind {\n    Always = 1,\n    Silent = 2,\n    Never = 3\n}\n\nexport class ShellExecution {\n    private shellCommandLine: string;\n    private shellCommand: string | theia.ShellQuotedString;\n    private arguments: (string | theia.ShellQuotedString)[];\n    private shellOptions: theia.ShellExecutionOptions | undefined;\n\n    constructor(commandLine: string, options?: theia.ShellExecutionOptions);\n    constructor(command: string | theia.ShellQuotedString, args: (string | theia.ShellQuotedString)[], options?: theia.ShellExecutionOptions);\n\n    constructor(arg0: string | theia.ShellQuotedString, arg1?: theia.ShellExecutionOptions | (string | theia.ShellQuotedString)[], arg2?: theia.ShellExecutionOptions) {\n        if (Array.isArray(arg1) || typeof arg1 === 'string') {\n            if (!arg0) {\n                throw illegalArgument('command can\\'t be undefined or null');\n            }\n            if (typeof arg0 !== 'string' && typeof arg0.value !== 'string') {\n                throw illegalArgument('command');\n            }\n            this.shellCommand = arg0;\n            this.arguments = arg1 as (string | theia.ShellQuotedString)[];\n            this.shellOptions = arg2;\n        } else {\n            if (typeof arg0 !== 'string') {\n                throw illegalArgument('commandLine');\n            }\n            this.shellCommandLine = arg0;\n            this.shellOptions = arg1;\n        }\n    }\n\n    get commandLine(): string {\n        return this.shellCommandLine;\n    }\n\n    set commandLine(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('commandLine');\n        }\n        this.shellCommandLine = value;\n    }\n\n    get command(): string | theia.ShellQuotedString {\n        return this.shellCommand;\n    }\n\n    set command(value: string | theia.ShellQuotedString) {\n        if (typeof value !== 'string' && typeof value.value !== 'string') {\n            throw illegalArgument('command');\n        }\n        this.shellCommand = value;\n    }\n\n    get args(): (string | theia.ShellQuotedString)[] {\n        return this.arguments;\n    }\n\n    set args(value: (string | theia.ShellQuotedString)[]) {\n        this.arguments = value || [];\n    }\n\n    get options(): theia.ShellExecutionOptions | undefined {\n        return this.shellOptions;\n    }\n\n    set options(value: theia.ShellExecutionOptions | undefined) {\n        this.shellOptions = value;\n    }\n\n    public computeId(): string {\n        const hash = crypto.createHash('md5');\n        hash.update('shell');\n        if (this.shellCommandLine !== undefined) {\n            hash.update(this.shellCommandLine);\n        }\n        if (this.shellCommand !== undefined) {\n            hash.update(typeof this.shellCommand === 'string' ? this.shellCommand : this.shellCommand.value);\n        }\n        if (this.arguments && this.arguments.length > 0) {\n            for (const arg of this.arguments) {\n                hash.update(typeof arg === 'string' ? arg : arg.value);\n            }\n        }\n        return hash.digest('hex');\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution): boolean {\n        const candidate = value as ShellExecution;\n        return candidate && (!!candidate.commandLine || !!candidate.command);\n    }\n}\n\nexport class TaskGroup {\n    private groupId: string;\n\n    public static Clean: TaskGroup = new TaskGroup('clean', 'Clean');\n    public static Build: TaskGroup = new TaskGroup('build', 'Build');\n    public static Rebuild: TaskGroup = new TaskGroup('rebuild', 'Rebuild');\n    public static Test: TaskGroup = new TaskGroup('test', 'Test');\n\n    public static from(value: string): TaskGroup | undefined {\n        switch (value) {\n            case 'clean':\n                return TaskGroup.Clean;\n            case 'build':\n                return TaskGroup.Build;\n            case 'rebuild':\n                return TaskGroup.Rebuild;\n            case 'test':\n                return TaskGroup.Test;\n            default:\n                return undefined;\n        }\n    }\n\n    constructor(id: string, label: string) {\n        if (typeof id !== 'string') {\n            throw illegalArgument('id');\n        }\n        if (typeof label !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.groupId = id;\n    }\n\n    get id(): string {\n        return this.groupId;\n    }\n}\n\nexport enum TaskScope {\n    Global = 1,\n    Workspace = 2\n}\n\nexport class Task {\n    private taskDefinition: theia.TaskDefinition;\n    private taskScope: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined;\n    private taskName: string;\n    private taskExecution: ProcessExecution | ShellExecution | undefined;\n    private taskProblemMatchers: string[];\n    private hasTaskProblemMatchers: boolean;\n    private isTaskBackground: boolean;\n    private taskSource: string;\n    private taskGroup: TaskGroup | undefined;\n    private taskPresentationOptions: theia.TaskPresentationOptions | undefined;\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution,\n        problemMatchers?: string | string[]\n    );\n\n    // Deprecated constructor used by Jake vscode built-in\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution,\n        problemMatchers?: string | string[],\n    );\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(...args: any[]) {\n        let taskDefinition: theia.TaskDefinition;\n        let scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace | undefined;\n        let name: string;\n        let source: string;\n        let execution: ProcessExecution | ShellExecution | undefined;\n        let problemMatchers: string | string[] | undefined;\n\n        if (typeof args[1] === 'string') {\n            [\n                taskDefinition,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        } else {\n            [\n                taskDefinition,\n                scope,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        }\n\n        this.definition = taskDefinition;\n        this.scope = scope;\n        this.name = name;\n        this.source = source;\n        this.execution = execution;\n\n        if (typeof problemMatchers === 'string') {\n            this.taskProblemMatchers = [problemMatchers];\n            this.hasTaskProblemMatchers = true;\n        } else if (Array.isArray(problemMatchers)) {\n            this.taskProblemMatchers = problemMatchers;\n            this.hasTaskProblemMatchers = true;\n        } else {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n        }\n        this.isTaskBackground = false;\n    }\n\n    get definition(): theia.TaskDefinition {\n        return this.taskDefinition;\n    }\n\n    set definition(value: theia.TaskDefinition) {\n        if (value === undefined || value === null) {\n            throw illegalArgument('Kind can\\'t be undefined or null');\n        }\n        this.taskDefinition = value;\n    }\n\n    get scope(): theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined {\n        return this.taskScope;\n    }\n\n    set scope(value: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskScope = value;\n    }\n\n    get name(): string {\n        return this.taskName;\n    }\n\n    set name(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.taskName = value;\n    }\n\n    get execution(): ProcessExecution | ShellExecution | undefined {\n        return this.taskExecution;\n    }\n\n    set execution(value: ProcessExecution | ShellExecution | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskExecution = value;\n        this.updateDefinitionBasedOnExecution();\n    }\n\n    get problemMatchers(): string[] {\n        return this.taskProblemMatchers;\n    }\n\n    set problemMatchers(value: string[]) {\n        if (!Array.isArray(value)) {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n            return;\n        }\n        this.taskProblemMatchers = value;\n        this.hasTaskProblemMatchers = true;\n    }\n\n    get hasProblemMatchers(): boolean {\n        return this.hasTaskProblemMatchers;\n    }\n\n    get isBackground(): boolean {\n        return this.isTaskBackground;\n    }\n\n    set isBackground(value: boolean) {\n        if (value !== true && value !== false) {\n            value = false;\n        }\n        this.isTaskBackground = value;\n    }\n\n    get source(): string {\n        return this.taskSource;\n    }\n\n    set source(value: string) {\n        if (typeof value !== 'string' || value.length === 0) {\n            throw illegalArgument('source must be a string of length > 0');\n        }\n        this.taskSource = value;\n    }\n\n    get group(): TaskGroup | undefined {\n        return this.taskGroup;\n    }\n\n    set group(value: TaskGroup | undefined) {\n        if (value === undefined || value === null) {\n            this.taskGroup = undefined;\n            return;\n        }\n        this.taskGroup = value;\n    }\n\n    get presentationOptions(): theia.TaskPresentationOptions | undefined {\n        return this.taskPresentationOptions;\n    }\n\n    set presentationOptions(value: theia.TaskPresentationOptions | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskPresentationOptions = value;\n    }\n\n    private updateDefinitionBasedOnExecution(): void {\n        if (this.taskExecution instanceof ProcessExecution) {\n            Object.assign(this.taskDefinition, {\n                type: 'process',\n                id: this.taskExecution.computeId(),\n                taskType: this.taskDefinition!.type\n            });\n        } else if (this.taskExecution instanceof ShellExecution) {\n            Object.assign(this.taskDefinition, {\n                type: 'shell',\n                id: this.taskExecution.computeId(),\n                taskType: this.taskDefinition!.type\n            });\n        }\n    }\n}\n\nexport class DebugAdapterExecutable {\n    /**\n     * The command or path of the debug adapter executable.\n     * A command must be either an absolute path of an executable or the name of an command to be looked up via the PATH environment variable.\n     * The special value 'node' will be mapped to VS Code's built-in Node.js runtime.\n     */\n    readonly command: string;\n\n    /**\n     * The arguments passed to the debug adapter executable. Defaults to an empty array.\n     */\n    readonly args?: string[];\n\n    /**\n     * Optional options to be used when the debug adapter is started.\n     * Defaults to undefined.\n     */\n    readonly options?: theia.DebugAdapterExecutableOptions;\n\n    /**\n     * Creates a description for a debug adapter based on an executable program.\n     *\n     * @param command The command or executable path that implements the debug adapter.\n     * @param args Optional arguments to be passed to the command or executable.\n     * @param options Optional options to be used when starting the command or executable.\n     */\n    constructor(command: string, args?: string[], options?: theia.DebugAdapterExecutableOptions) {\n        this.command = command;\n        this.args = args;\n        this.options = options;\n    }\n}\n\n/**\n * Represents a debug adapter running as a socket based server.\n */\nexport class DebugAdapterServer {\n\n    /**\n     * The port.\n     */\n    readonly port: number;\n\n    /**\n     * The host.\n     */\n    readonly host?: string;\n\n    /**\n     * Create a description for a debug adapter running as a socket based server.\n     */\n    constructor(port: number, host?: string) {\n        this.port = port;\n        this.host = host;\n    }\n}\n\n/**\n * The base class of all breakpoint types.\n */\nexport class Breakpoint {\n    /**\n     * Is breakpoint enabled.\n     */\n    enabled: boolean;\n    /**\n     * An optional expression for conditional breakpoints.\n     */\n    condition?: string;\n    /**\n     * An optional expression that controls how many hits of the breakpoint are ignored.\n     */\n    hitCondition?: string;\n    /**\n     * An optional message that gets logged when this breakpoint is hit. Embedded expressions within {} are interpolated by the debug adapter.\n     */\n    logMessage?: string;\n\n    protected constructor(enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        this.enabled = enabled || false;\n        this.condition = condition;\n        this.hitCondition = hitCondition;\n        this.logMessage = logMessage;\n    }\n\n    private _id: string | undefined;\n    /**\n     * The unique ID of the breakpoint.\n     */\n    get id(): string {\n        if (!this._id) {\n            this._id = UUID.uuid4();\n        }\n        return this._id;\n    }\n\n}\n\n/**\n * A breakpoint specified by a source location.\n */\nexport class SourceBreakpoint extends Breakpoint {\n    /**\n     * The source and line position of this breakpoint.\n     */\n    location: Location;\n\n    /**\n     * Create a new breakpoint for a source location.\n     */\n    constructor(location: Location, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.location = location;\n    }\n}\n\n/**\n * A breakpoint specified by a function name.\n */\nexport class FunctionBreakpoint extends Breakpoint {\n    /**\n     * The name of the function to which this breakpoint is attached.\n     */\n    functionName: string;\n\n    /**\n     * Create a new function breakpoint.\n     */\n    constructor(functionName: string, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.functionName = functionName;\n    }\n}\n\nexport class Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n\n    constructor(red: number, green: number, blue: number, alpha: number) {\n        this.red = red;\n        this.green = green;\n        this.blue = blue;\n        this.alpha = alpha;\n    }\n}\n\nexport class ColorInformation {\n    range: Range;\n    color: Color;\n\n    constructor(range: Range, color: Color) {\n        if (color && !(color instanceof Color)) {\n            throw illegalArgument('color');\n        }\n        if (!Range.isRange(range)) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.color = color;\n    }\n}\n\nexport class ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n\n    constructor(label: string) {\n        if (!label || typeof label !== 'string') {\n            throw illegalArgument('label');\n        }\n        this.label = label;\n    }\n}\n\nexport enum ColorFormat {\n    RGB = 0,\n    HEX = 1,\n    HSL = 2\n}\n\nexport class FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n\n    constructor(start: number, end: number, kind?: FoldingRangeKind) {\n        this.start = start;\n        this.end = end;\n        this.kind = kind;\n    }\n}\n\nexport enum FoldingRangeKind {\n    Comment = 1,\n    Imports = 2,\n    Region = 3\n}\n\n/**\n * Enumeration of the supported operating systems.\n */\nexport enum OperatingSystem {\n    Windows = 'Windows',\n    Linux = 'Linux',\n    OSX = 'OSX'\n}\n\n/** The areas of the application shell where webview panel can reside. */\nexport enum WebviewPanelTargetArea {\n    Main = 'main',\n    Left = 'left',\n    Right = 'right',\n    Bottom = 'bottom'\n}\nexport class CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: URI;\n    range: Range;\n    selectionRange: Range;\n\n    constructor(kind: SymbolKind, name: string, detail: string, uri: URI, range: Range, selectionRange: Range) {\n        this.kind = kind;\n        this.name = name;\n        this.detail = detail;\n        this.uri = uri;\n        this.range = range;\n        this.selectionRange = selectionRange;\n    }\n\n    static isCallHierarchyItem(thing: {}): thing is theia.CallHierarchyItem {\n        if (thing instanceof CallHierarchyItem) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<CallHierarchyItem>thing).kind === 'number' &&\n            typeof (<CallHierarchyItem>thing).name === 'string' &&\n            URI.isUri((<CallHierarchyItem>thing).uri) &&\n            Range.isRange((<CallHierarchyItem>thing).range) &&\n            Range.isRange((<CallHierarchyItem>thing).selectionRange);\n    }\n}\n\nexport class CallHierarchyIncomingCall {\n\n    from: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: theia.CallHierarchyItem, fromRanges: theia.Range[]) {\n        this.fromRanges = fromRanges;\n        this.from = item;\n    }\n}\n\nexport class CallHierarchyOutgoingCall {\n\n    to: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: theia.CallHierarchyItem, fromRanges: theia.Range[]) {\n        this.fromRanges = fromRanges;\n        this.to = item;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { createProxyIdentifier, ProxyIdentifier, RPCProtocol } from './rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { PluginLifecycle, PluginModel, PluginMetadata, PluginPackage, IconUrl } from './plugin-protocol';\nimport { QueryParameters } from './env';\nimport { TextEditorCursorStyle } from './editor-options';\nimport {\n    TextEditorLineNumbersStyle,\n    EndOfLine,\n    OverviewRulerLane,\n    IndentAction,\n    FileOperationOptions,\n    QuickInputButton\n} from '../plugin/types-impl';\nimport { UriComponents } from './uri-components';\nimport { ConfigurationTarget } from '../plugin/types-impl';\nimport {\n    SerializedDocumentFilter,\n    CompletionContext,\n    MarkdownString,\n    Range,\n    Completion,\n    CompletionResultDto,\n    MarkerData,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    FormattingOptions,\n    Definition,\n    DefinitionLink,\n    DocumentLink,\n    CodeLensSymbol,\n    Command,\n    TextEdit,\n    DocumentSymbol,\n    ReferenceContext,\n    FileWatcherSubscriberOptions,\n    FileChangeEvent,\n    TextDocumentShowOptions,\n    WorkspaceRootsChangeEvent,\n    Location,\n    Breakpoint,\n    ColorPresentation,\n    RenameLocation,\n    FileMoveEvent,\n    FileWillMoveEvent,\n    SignatureHelpContext,\n    CodeAction,\n    CodeActionContext,\n    FoldingContext,\n    FoldingRange,\n    CallHierarchyDefinition,\n    CallHierarchyReference\n} from './plugin-api-rpc-model';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { SymbolInformation } from 'vscode-languageserver-types';\nimport { ArgumentProcessor } from '../plugin/command-registry';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport { QuickOpenItem, QuickOpenItemOptions } from '@theia/core/lib/common/quick-open-model';\nimport { QuickTitleButton } from '@theia/core/lib/common/quick-open-model';\n\nexport interface PreferenceData {\n    [scope: number]: any;\n}\n\nexport interface Plugin {\n    pluginPath: string;\n    pluginFolder: string;\n    model: PluginModel;\n    rawModel: PluginPackage;\n    lifecycle: PluginLifecycle;\n}\n\nexport interface ConfigStorage {\n    hostLogPath: string;\n    hostStoragePath?: string;\n    hostGlobalStoragePath: string;\n}\n\nexport interface EnvInit {\n    queryParams: QueryParameters;\n    language: string;\n    shell: string;\n}\n\nexport interface PluginAPI {\n\n}\n\nexport interface PluginManager {\n    getAllPlugins(): Plugin[];\n    getPluginById(pluginId: string): Plugin | undefined;\n    getPluginExport(pluginId: string): PluginAPI | undefined;\n    isRunning(pluginId: string): boolean;\n    isActive(pluginId: string): boolean;\n    activatePlugin(pluginId: string): PromiseLike<void>;\n    onDidChange: theia.Event<void>;\n}\n\nexport interface PluginAPIFactory {\n    (plugin: Plugin): typeof theia;\n}\n\nexport const emptyPlugin: Plugin = {\n    lifecycle: {\n        startMethod: 'empty',\n        stopMethod: 'empty'\n    },\n    model: {\n        id: 'emptyPlugin',\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engine: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty',\n        entryPoint: {\n\n        }\n    },\n    pluginPath: 'empty',\n    pluginFolder: 'empty',\n    rawModel: {\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engines: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty'\n    }\n};\n\nexport interface PluginManagerInitializeParams {\n    preferences: PreferenceData\n    globalState: KeysToKeysToAnyValue\n    workspaceState: KeysToKeysToAnyValue\n    env: EnvInit\n    extApi?: ExtPluginApi[]\n    webview: WebviewInitData\n}\n\nexport interface PluginManagerStartParams {\n    plugins: PluginMetadata[]\n    configStorage: ConfigStorage\n    activationEvents: string[]\n}\n\nexport interface PluginManagerExt {\n\n    /** initialize the manager, should be called only once */\n    $init(params: PluginManagerInitializeParams): Promise<void>;\n\n    /** load and activate plugins */\n    $start(params: PluginManagerStartParams): Promise<void>;\n\n    /** deactivate the plugin */\n    $stop(pluginId: string): Promise<void>;\n\n    /** deactivate all plugins */\n    $stop(): Promise<void>;\n\n    $updateStoragePath(path: string | undefined): Promise<void>;\n\n    $activateByEvent(event: string): Promise<void>;\n}\n\nexport interface CommandRegistryMain {\n    $registerCommand(command: theia.CommandDescription): void;\n    $unregisterCommand(id: string): void;\n\n    $registerHandler(id: string): void;\n    $unregisterHandler(id: string): void;\n\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined>;\n    $getCommands(): PromiseLike<string[]>;\n    $getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined>;\n}\n\nexport interface CommandRegistryExt {\n    $executeCommand<T>(id: string, ...ars: any[]): PromiseLike<T | undefined>;\n    registerArgumentProcessor(processor: ArgumentProcessor): void;\n}\n\nexport interface TerminalServiceExt {\n    $terminalCreated(id: string, name: string): void;\n    $terminalNameChanged(id: string, name: string): void;\n    $terminalOpened(id: string, processId: number): void;\n    $terminalClosed(id: string): void;\n    $currentTerminalChanged(id: string | undefined): void;\n}\n\nexport interface OutputChannelRegistryExt {\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel\n}\n\nexport interface ConnectionMain {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n    $sendMessage(id: string, message: string): void;\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n}\n\nexport interface ConnectionExt {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>\n    $sendMessage(id: string, message: string): void;\n}\n\nexport interface TerminalServiceMain {\n    /**\n     * Create new Terminal with Terminal options.\n     * @param options - object with parameters to create new terminal.\n     */\n    $createTerminal(id: string, options: theia.TerminalOptions): Promise<string>;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendText(id: string, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $show(id: string, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal id.\n     */\n    $hide(id: string): void;\n\n    /**\n     * Destroy terminal.\n     * @param id - terminal id.\n     */\n    $dispose(id: string): void;\n}\n\nexport interface AutoFocus {\n    autoFocusFirstEntry?: boolean;\n    // TODO\n}\n\nexport interface PickOptions {\n    placeHolder?: string;\n    autoFocus?: AutoFocus;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    ignoreFocusLost?: boolean;\n    quickNavigationConfiguration?: {}; // TODO\n    contextKey?: string;\n    canSelectMany?: boolean;\n}\n\nexport interface PickOpenItem {\n    handle: number;\n    id?: string;\n    label: string;\n    description?: string;\n    detail?: string;\n    picked?: boolean;\n    groupLabel?: string;\n    showBorder?: boolean;\n}\n\nexport enum MainMessageType {\n    Error,\n    Warning,\n    Info\n}\n\nexport interface MainMessageOptions {\n    modal?: boolean\n    onCloseActionHandle?: number\n}\n\nexport interface MessageRegistryMain {\n    $showMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: string[]): PromiseLike<number | undefined>;\n}\n\nexport interface StatusBarMessageRegistryMain {\n    $setMessage(id: string,\n        text: string | undefined,\n        priority: number,\n        alignment: theia.StatusBarAlignment,\n        color: string | undefined,\n        tooltip: string | undefined,\n        command: string | undefined): PromiseLike<void>;\n    $update(id: string, message: string): void;\n    $dispose(id: string): void;\n}\n\nexport interface QuickOpenExt {\n    $onItemSelected(handle: number): void;\n    $validateInput(input: string): PromiseLike<string | undefined> | undefined;\n\n    $acceptOnDidAccept(quickInputNumber: number): Promise<void>;\n    $acceptDidChangeValue(quickInputNumber: number, changedValue: string): Promise<void>;\n    $acceptOnDidHide(quickInputNumber: number): Promise<void>;\n    $acceptOnDidTriggerButton(quickInputNumber: number, btn: QuickTitleButton): Promise<void>;\n    $acceptDidChangeActive(quickInputNumber: number, changedItems: QuickOpenItem<QuickOpenItemOptions>[]): Promise<void>;\n    $acceptDidChangeSelection(quickInputNumber: number, selection: string): Promise<void>;\n}\n\n/**\n * Options to configure the behaviour of a file open dialog.\n */\nexport interface OpenDialogOptionsMain {\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the open button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     * \t'Images': ['png', 'jpg']\n     * \t'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file save dialog.\n */\nexport interface SaveDialogOptionsMain {\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the save button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     * \t'Images': ['png', 'jpg']\n     * \t'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file upload dialog.\n */\nexport interface UploadDialogOptionsMain {\n    /**\n     * The resource, where files should be uploaded.\n     */\n    defaultUri?: string;\n}\n\nexport interface FileUploadResultMain {\n    uploaded: string[]\n}\n\n/**\n * Options to configure the behaviour of the [workspace folder](#WorkspaceFolder) pick UI.\n */\nexport interface WorkspaceFolderPickOptionsMain {\n    /**\n     * An optional string to show as place holder in the input box to guide the user what to pick on.\n     */\n    placeHolder?: string;\n\n    /**\n     * Set to `true` to keep the picker open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean;\n}\n\nexport interface QuickInputTitleButtonHandle extends QuickTitleButton {\n    index: number; // index of where they are in buttons array if QuickInputButton or -1 if QuickInputButtons.Back\n}\n\nexport interface TransferQuickInput {\n    quickInputIndex: number;\n    title: string | undefined;\n    step: number | undefined;\n    totalSteps: number | undefined;\n    enabled: boolean;\n    busy: boolean;\n    ignoreFocusOut: boolean;\n}\n\nexport interface TransferInputBox extends TransferQuickInput {\n    value: string;\n    placeholder: string | undefined;\n    password: boolean;\n    buttons: ReadonlyArray<QuickInputButton>;\n    prompt: string | undefined;\n    validationMessage: string | undefined;\n    validateInput(value: string): MaybePromise<string | undefined>;\n}\n\nexport interface TransferQuickPick<T extends theia.QuickPickItem> extends TransferQuickInput {\n    value: string;\n    placeholder: string | undefined;\n    buttons: ReadonlyArray<QuickInputButton>;\n    items: PickOpenItem[];\n    canSelectMany: boolean;\n    matchOnDescription: boolean;\n    matchOnDetail: boolean;\n    activeItems: ReadonlyArray<T>;\n    selectedItems: ReadonlyArray<T>;\n}\n\nexport interface QuickOpenMain {\n    $show(options: PickOptions): Promise<number | number[]>;\n    $setItems(items: PickOpenItem[]): Promise<any>;\n    $setError(error: Error): Promise<any>;\n    $input(options: theia.InputBoxOptions, validateInput: boolean): Promise<string | undefined>;\n    $hide(): void;\n    $showInputBox(inputBox: TransferInputBox, validateInput: boolean): void;\n    $showCustomQuickPick<T extends theia.QuickPickItem>(inputBox: TransferQuickPick<T>): void;\n    $setQuickInputChanged(changed: object): void;\n    $refreshQuickInput(): void;\n}\n\nexport interface WorkspaceMain {\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined>;\n    $startFileSearch(includePattern: string, includeFolder: string | undefined, excludePatternOrDisregardExcludes: string | false,\n        maxResults: number | undefined, token: theia.CancellationToken): PromiseLike<UriComponents[]>;\n    $registerTextDocumentContentProvider(scheme: string): Promise<void>;\n    $unregisterTextDocumentContentProvider(scheme: string): void;\n    $onTextDocumentContentChange(uri: string, content: string): void;\n    $registerFileSystemWatcher(options: FileWatcherSubscriberOptions): Promise<string>;\n    $unregisterFileSystemWatcher(watcherId: string): Promise<void>;\n    $updateWorkspaceFolders(start: number, deleteCount?: number, ...rootsToAdd: string[]): Promise<void>;\n}\n\nexport interface WorkspaceExt {\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void;\n    $provideTextDocumentContent(uri: string): Promise<string | undefined>;\n    $fileChanged(event: FileChangeEvent): void;\n    $onFileRename(event: FileMoveEvent): void;\n    $onWillRename(event: FileWillMoveEvent): Promise<any>;\n}\n\nexport interface DialogsMain {\n    $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined>;\n    $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined>;\n    $showUploadDialog(options: UploadDialogOptionsMain): Promise<string[] | undefined>;\n}\n\nexport interface TreeViewsMain {\n    $registerTreeDataProvider(treeViewId: string): void;\n    $unregisterTreeDataProvider(treeViewId: string): void;\n    $refresh(treeViewId: string): void;\n    $reveal(treeViewId: string, treeItemId: string): Promise<any>;\n    $setMessage(treeViewId: string, message: string): void;\n    $setTitle(treeViewId: string, title: string): void;\n}\n\nexport interface TreeViewsExt {\n    $getChildren(treeViewId: string, treeItemId: string | undefined): Promise<TreeViewItem[] | undefined>;\n    $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any>;\n    $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void>;\n    $setVisible(treeViewId: string, visible: boolean): Promise<void>;\n}\n\nexport interface TreeViewItem {\n\n    id: string;\n\n    label: string;\n\n    description?: string | boolean;\n\n    /* font-awesome icon for compatibility */\n    icon?: string;\n    iconUrl?: IconUrl;\n\n    themeIconId?: 'folder' | 'file';\n\n    resourceUri?: UriComponents;\n\n    tooltip?: string;\n\n    collapsibleState?: TreeViewItemCollapsibleState;\n\n    contextValue?: string;\n\n    command?: Command;\n\n}\n\nexport interface TreeViewSelection {\n    treeViewId: string\n    treeItemId: string\n}\nexport namespace TreeViewSelection {\n    export function is(arg: Object | any): arg is TreeViewSelection {\n        return !!arg && typeof arg === 'object' && 'treeViewId' in arg && 'treeItemId' in arg;\n    }\n}\n\n/**\n * Collapsible state of the tree item\n */\nexport enum TreeViewItemCollapsibleState {\n    /**\n     * Determines an item can be neither collapsed nor expanded. Implies it has no children.\n     */\n    None = 0,\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 1,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 2\n}\n\nexport interface WindowMain {\n    $openUri(uri: UriComponents): Promise<boolean>;\n    $asExternalUri(uri: UriComponents): Promise<UriComponents>;\n}\n\nexport interface WindowStateExt {\n    $onWindowStateChanged(focus: boolean): void;\n}\n\nexport interface NotificationExt {\n    withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): PromiseLike<R>;\n}\n\nexport interface ScmCommandArg {\n    sourceControlHandle: number\n    resourceGroupHandle?: number\n    resourceStateHandle?: number\n}\nexport namespace ScmCommandArg {\n    export function is(arg: Object | undefined): arg is ScmCommandArg {\n        return !!arg && typeof arg === 'object' && 'sourceControlHandle' in arg;\n    }\n}\n\nexport interface ScmExt {\n    createSourceControl(plugin: Plugin, id: string, label: string, rootUri?: theia.Uri): theia.SourceControl;\n    getLastInputBox(plugin: Plugin): theia.SourceControlInputBox | undefined;\n    $updateInputBox(sourceControlHandle: number, message: string): Promise<void>;\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, resourceHandle: number): Promise<void>;\n    $provideOriginalResource(sourceControlHandle: number, uri: string, token: CancellationToken): Promise<UriComponents | undefined>;\n    $setSourceControlSelection(sourceControlHandle: number, selected: boolean): Promise<void>;\n}\n\nexport interface DecorationsExt {\n    registerDecorationProvider(provider: theia.DecorationProvider): theia.Disposable\n    $provideDecoration(id: number, uri: string): Promise<DecorationData | undefined>\n}\n\nexport interface DecorationsMain {\n    $registerDecorationProvider(id: number, provider: DecorationProvider): Promise<number>;\n    $fireDidChangeDecorations(id: number, arg: undefined | string | string[]): Promise<void>;\n    $dispose(id: number): Promise<void>;\n}\n\nexport interface DecorationData {\n    letter?: string;\n    title?: string;\n    color?: ThemeColor;\n    priority?: number;\n    bubble?: boolean;\n    source?: string;\n}\n\nexport interface ScmMain {\n    $registerSourceControl(sourceControlHandle: number, id: string, label: string, rootUri?: string): Promise<void>\n    $updateSourceControl(sourceControlHandle: number, features: SourceControlProviderFeatures): Promise<void>;\n    $unregisterSourceControl(sourceControlHandle: number): Promise<void>;\n\n    $registerGroup(sourceControlHandle: number, groupHandle: number, id: string, label: string): Promise<void>;\n    $updateGroup(sourceControlHandle: number, groupHandle: number, features: SourceControlGroupFeatures): Promise<void>;\n    $updateGroupLabel(sourceControlHandle: number, groupHandle: number, label: string): Promise<void>;\n    $updateResourceState(sourceControlHandle: number, groupHandle: number, resources: SourceControlResourceState[]): Promise<void>;\n    $unregisterGroup(sourceControlHandle: number, groupHandle: number): Promise<void>;\n\n    $setInputBoxValue(sourceControlHandle: number, value: string): Promise<void>;\n    $setInputBoxPlaceholder(sourceControlHandle: number, placeholder: string): Promise<void>;\n}\n\nexport interface SourceControlProviderFeatures {\n    hasQuickDiffProvider?: boolean;\n    count?: number;\n    commitTemplate?: string;\n    acceptInputCommand?: Command;\n    statusBarCommands?: Command[];\n}\n\nexport interface SourceControlGroupFeatures {\n    hideWhenEmpty: boolean | undefined;\n}\n\nexport interface SourceControlResourceState {\n    readonly handle: number\n    /**\n     * The uri of the underlying resource inside the workspace.\n     */\n    readonly resourceUri: string;\n\n    /**\n     * The command which should be run when the resource\n     * state is open in the Source Control viewlet.\n     */\n    readonly command?: Command;\n\n    /**\n     * The decorations for this source control\n     * resource state.\n     */\n    readonly decorations?: SourceControlResourceDecorations;\n\n    readonly letter?: string;\n\n    readonly colorId?: string\n}\n\n/**\n * The decorations for a [source control resource state](#SourceControlResourceState).\n * Can be independently specified for light and dark themes.\n */\nexport interface SourceControlResourceDecorations {\n\n    /**\n     * Whether the source control resource state should be striked-through in the UI.\n     */\n    readonly strikeThrough?: boolean;\n\n    /**\n     * Whether the source control resource state should be faded in the UI.\n     */\n    readonly faded?: boolean;\n\n    /**\n     * The title for a specific source control resource state.\n     */\n    readonly tooltip?: string;\n\n    /**\n     * The icon path for a specific source control resource state.\n     */\n    readonly iconPath?: string;\n}\n\nexport interface DecorationProvider {\n    provideDecoration(uri: string): Promise<DecorationData | undefined>;\n}\n\nexport interface NotificationMain {\n    $startProgress(options: NotificationMain.StartProgressOptions): Promise<string>;\n    $stopProgress(id: string): void;\n    $updateProgress(id: string, report: NotificationMain.ProgressReport): void;\n}\nexport namespace NotificationMain {\n    export interface StartProgressOptions {\n        title: string;\n        location?: string;\n        cancellable?: boolean;\n    }\n    export interface ProgressReport {\n        message?: string;\n        increment?: number;\n        total?: number;\n    }\n}\n\nexport enum EditorPosition {\n    ONE = 0,\n    TWO = 1,\n    THREE = 2,\n    FOUR = 3,\n    FIVE = 4,\n    SIX = 5,\n    SEVEN = 6,\n    EIGHT = 7,\n    NINE = 8\n}\n\nexport interface Position {\n    readonly lineNumber: number;\n    readonly column: number;\n}\n\nexport interface Selection {\n    /**\n     * The line number on which the selection has started.\n     */\n    readonly selectionStartLineNumber: number;\n    /**\n     * The column on `selectionStartLineNumber` where the selection has started.\n     */\n    readonly selectionStartColumn: number;\n    /**\n     * The line number on which the selection has ended.\n     */\n    readonly positionLineNumber: number;\n    /**\n     * The column on `positionLineNumber` where the selection has ended.\n     */\n    readonly positionColumn: number;\n}\n\nexport interface TextEditorConfiguration {\n    tabSize: number;\n    insertSpaces: boolean;\n    cursorStyle: TextEditorCursorStyle;\n    lineNumbers: TextEditorLineNumbersStyle;\n}\n\nexport interface TextEditorConfigurationUpdate {\n    tabSize?: number | 'auto';\n    insertSpaces?: boolean | 'auto';\n    cursorStyle?: TextEditorCursorStyle;\n    lineNumbers?: TextEditorLineNumbersStyle;\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\nexport interface SelectionChangeEvent {\n    selections: Selection[];\n    source?: string;\n}\n\nexport interface EditorChangedPropertiesData {\n    options?: TextEditorConfiguration;\n    selections?: SelectionChangeEvent;\n    visibleRanges?: Range[];\n}\n\nexport interface TextEditorPositionData {\n    [id: string]: EditorPosition;\n}\n\nexport interface TextEditorsExt {\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void;\n    $acceptEditorPositionData(data: TextEditorPositionData): void;\n}\n\nexport interface SingleEditOperation {\n    range?: Range;\n    text?: string;\n    forceMoveMarkers?: boolean;\n}\n\nexport interface UndoStopOptions {\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport interface ApplyEditsOptions extends UndoStopOptions {\n    setEndOfLine: EndOfLine;\n}\n\nexport interface ThemeColor {\n    id: string;\n}\n\n/**\n * Describes the behavior of decorations when typing/editing near their edges.\n */\nexport enum TrackedRangeStickiness {\n    AlwaysGrowsWhenTypingAtEdges = 0,\n    NeverGrowsWhenTypingAtEdges = 1,\n    GrowsOnlyWhenTypingBefore = 2,\n    GrowsOnlyWhenTypingAfter = 3,\n}\nexport interface ContentDecorationRenderOptions {\n    contentText?: string;\n    contentIconPath?: UriComponents;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    color?: string | ThemeColor;\n    backgroundColor?: string | ThemeColor;\n\n    margin?: string;\n    width?: string;\n    height?: string;\n}\n\nexport interface ThemeDecorationRenderOptions {\n    backgroundColor?: string | ThemeColor;\n\n    outline?: string;\n    outlineColor?: string | ThemeColor;\n    outlineStyle?: string;\n    outlineWidth?: string;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    borderRadius?: string;\n    borderSpacing?: string;\n    borderStyle?: string;\n    borderWidth?: string;\n\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    cursor?: string;\n    color?: string | ThemeColor;\n    opacity?: string;\n    letterSpacing?: string;\n\n    gutterIconPath?: UriComponents;\n    gutterIconSize?: string;\n\n    overviewRulerColor?: string | ThemeColor;\n\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationRenderOptions extends ThemeDecorationRenderOptions {\n    isWholeLine?: boolean;\n    rangeBehavior?: TrackedRangeStickiness;\n    overviewRulerLane?: OverviewRulerLane;\n\n    light?: ThemeDecorationRenderOptions;\n    dark?: ThemeDecorationRenderOptions;\n}\n\nexport interface ThemeDecorationInstanceRenderOptions {\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationInstanceRenderOptions extends ThemeDecorationInstanceRenderOptions {\n    light?: ThemeDecorationInstanceRenderOptions;\n    dark?: ThemeDecorationInstanceRenderOptions;\n}\n\nexport interface DecorationOptions {\n    range: Range;\n    hoverMessage?: MarkdownString | MarkdownString[];\n    renderOptions?: DecorationInstanceRenderOptions;\n}\n\nexport interface TextEditorsMain {\n    // $tryShowTextDocument(resource: UriComponents, options: TextDocumentShowOptions): Promise<string>;\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void;\n    $removeTextEditorDecorationType(key: string): void;\n    // $tryShowEditor(id: string, position: EditorPosition): Promise<void>;\n    // $tryHideEditor(id: string): Promise<void>;\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void>;\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void>;\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void>;\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void>;\n    $trySetSelections(id: string, selections: Selection[]): Promise<void>;\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean>;\n    $tryApplyWorkspaceEdit(workspaceEditDto: WorkspaceEditDto): Promise<boolean>;\n    $tryInsertSnippet(id: string, template: string, selections: Range[], opts: UndoStopOptions): Promise<boolean>;\n    $saveAll(includeUntitled?: boolean): Promise<boolean>;\n    // $getDiffInformation(id: string): Promise<editorCommon.ILineChange[]>;\n}\n\nexport interface ModelAddedData {\n    uri: UriComponents;\n    versionId: number;\n    lines: string[];\n    EOL: string;\n    modeId: string;\n    isDirty: boolean;\n}\n\nexport interface TextEditorAddData {\n    id: string;\n    documentUri: UriComponents;\n    options: TextEditorConfiguration;\n    selections: Selection[];\n    visibleRanges: Range[];\n    editorPosition?: EditorPosition;\n}\n\nexport interface EditorsAndDocumentsDelta {\n    removedDocuments?: UriComponents[];\n    addedDocuments?: ModelAddedData[];\n    removedEditors?: string[];\n    addedEditors?: TextEditorAddData[];\n    newActiveEditor?: string;\n}\n\nexport interface EditorsAndDocumentsExt {\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void;\n}\n\nexport interface ModelContentChange {\n    readonly range: Range;\n    readonly rangeOffset: number;\n    readonly rangeLength: number;\n    readonly text: string;\n}\nexport interface ModelChangedEvent {\n    readonly changes: ModelContentChange[];\n\n    readonly eol: string;\n\n    readonly versionId: number;\n}\n\nexport interface DocumentsExt {\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void;\n    $acceptModelSaved(strUrl: UriComponents): void;\n    $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]>;\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void;\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void;\n}\n\nexport interface DocumentsMain {\n    $tryCreateDocument(options?: { language?: string; content?: string; }): Promise<UriComponents>;\n    $tryShowDocument(uri: UriComponents, options?: TextDocumentShowOptions): Promise<void>;\n    $tryOpenDocument(uri: UriComponents): Promise<boolean>;\n    $trySaveDocument(uri: UriComponents): Promise<boolean>;\n    $tryCloseDocument(uri: UriComponents): Promise<boolean>;\n}\n\nexport interface EnvMain {\n    $getEnvVariable(envVarName: string): Promise<string | undefined>;\n    $getClientOperatingSystem(): Promise<theia.OperatingSystem>;\n}\n\nexport interface PreferenceRegistryMain {\n    $updateConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        value: any,\n        resource?: string\n    ): PromiseLike<void>;\n    $removeConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        resource?: string\n    ): PromiseLike<void>;\n}\n\nexport interface PreferenceChangeExt {\n    preferenceName: string,\n    newValue: any\n}\n\nexport interface TerminalOptionsExt {\n    attributes?: {\n        [key: string]: string;\n    }\n}\n\nexport interface PreferenceRegistryExt {\n    $acceptConfigurationChanged(data: { [key: string]: any }, eventData: PreferenceChangeExt[]): void;\n}\n\nexport interface OutputChannelRegistryMain {\n    $append(channelName: string, value: string, pluginInfo: PluginInfo): PromiseLike<void>;\n    $clear(channelName: string): PromiseLike<void>;\n    $dispose(channelName: string): PromiseLike<void>;\n    $reveal(channelName: string, preserveFocus: boolean): PromiseLike<void>;\n    $close(channelName: string): PromiseLike<void>;\n}\n\nexport type CharacterPair = [string, string];\n\nexport interface CommentRule {\n    lineComment?: string;\n    blockComment?: CharacterPair;\n}\n\nexport interface SerializedRegExp {\n    pattern: string;\n    flags?: string;\n}\n\nexport interface SerializedIndentationRule {\n    decreaseIndentPattern?: SerializedRegExp;\n    increaseIndentPattern?: SerializedRegExp;\n    indentNextLinePattern?: SerializedRegExp;\n    unIndentedLinePattern?: SerializedRegExp;\n}\n\nexport interface EnterAction {\n    indentAction: IndentAction;\n    outdentCurrentLine?: boolean;\n    appendText?: string;\n    removeText?: number;\n}\n\nexport interface SerializedOnEnterRule {\n    beforeText: SerializedRegExp;\n    afterText?: SerializedRegExp;\n    action: EnterAction;\n}\n\nexport interface SerializedLanguageConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    wordPattern?: SerializedRegExp;\n    indentationRules?: SerializedIndentationRule;\n    onEnterRules?: SerializedOnEnterRule[];\n}\n\nexport interface CodeActionDto {\n    title: string;\n    edit?: WorkspaceEditDto;\n    diagnostics?: MarkerData[];\n    command?: Command;\n    kind?: string;\n}\n\nexport interface ResourceFileEditDto {\n    oldUri: UriComponents;\n    newUri: UriComponents;\n    options: FileOperationOptions;\n}\n\nexport interface ResourceTextEditDto {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edits: TextEdit[];\n}\nexport namespace ResourceTextEditDto {\n    export function is(arg: Object): arg is ResourceTextEditDto {\n        return !!arg && typeof arg === 'object' && 'resource' in arg && 'edits' in arg;\n    }\n}\n\nexport interface WorkspaceEditDto {\n    edits: (ResourceFileEditDto | ResourceTextEditDto)[];\n    rejectReason?: string;\n}\n\nexport interface LanguagesContributionExt {\n    $start(languageServerInfo: theia.LanguageServerInfo): void;\n}\n\nexport interface LanguagesContributionMain {\n    $registerLanguageServerProvider(languageServerInfo: theia.LanguageServerInfo): void\n    $stop(id: string): void\n}\n\nexport interface CommandProperties {\n    command: string;\n    args?: string[];\n    options?: {\n        cwd?: string;\n        [key: string]: any\n    };\n}\n\nexport interface TaskDto {\n    type: string;\n    label: string;\n    source?: string;\n    scope?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n}\n\nexport interface TaskExecutionDto {\n    id: number;\n    task: TaskDto;\n}\n\nexport interface ProcessTaskDto extends TaskDto, CommandProperties {\n    windows?: CommandProperties;\n}\n\nexport interface PluginInfo {\n    id: string;\n    name: string;\n}\n\nexport interface LanguagesExt {\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: CancellationToken): Promise<CompletionResultDto | undefined>;\n    $resolveCompletionItem(handle: number, resource: UriComponents, position: Position, completion: Completion, token: CancellationToken): Promise<Completion>;\n    $releaseCompletionItems(handle: number, id: number): void;\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: CancellationToken): Promise<Location[] | undefined>;\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: CancellationToken\n    ): Promise<SignatureHelp | undefined>;\n    $releaseSignatureHelp(handle: number, id: number): void;\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Hover | undefined>;\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<DocumentHighlight[] | undefined>;\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideOnTypeFormattingEdits(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        ch: string,\n        options: FormattingOptions,\n        token: CancellationToken\n    ): Promise<TextEdit[] | undefined>;\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentLink[] | undefined>;\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: CancellationToken): Promise<DocumentLink | undefined>;\n    $releaseDocumentLinks(handle: number, ids: number[]): void;\n    $provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<CodeLensSymbol[] | undefined>;\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: CancellationToken): Promise<CodeLensSymbol | undefined>;\n    $releaseCodeLenses(handle: number, ids: number[]): void;\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: CancellationToken\n    ): Promise<CodeAction[] | undefined>;\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentSymbol[] | undefined>;\n    $provideWorkspaceSymbols(handle: number, query: string, token: CancellationToken): PromiseLike<SymbolInformation[]>;\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: CancellationToken): PromiseLike<SymbolInformation>;\n    $provideFoldingRange(\n        handle: number,\n        resource: UriComponents,\n        context: FoldingContext,\n        token: CancellationToken\n    ): PromiseLike<FoldingRange[] | undefined>;\n    $provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): PromiseLike<RawColorInfo[]>;\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: CancellationToken): PromiseLike<ColorPresentation[]>;\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: CancellationToken): PromiseLike<WorkspaceEditDto | undefined>;\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): PromiseLike<RenameLocation | undefined>;\n    $provideRootDefinition(handle: number, resource: UriComponents, location: Position, token: CancellationToken): Promise<CallHierarchyDefinition | undefined>;\n    $provideCallers(handle: number, definition: CallHierarchyDefinition, token: CancellationToken): Promise<CallHierarchyReference[] | undefined>;\n}\n\nexport const LanguagesMainFactory = Symbol('LanguagesMainFactory');\nexport interface LanguagesMainFactory {\n    (proxy: RPCProtocol): LanguagesMain;\n}\n\nexport const OutputChannelRegistryFactory = Symbol('OutputChannelRegistryFactory');\nexport interface OutputChannelRegistryFactory {\n    (): OutputChannelRegistryMain;\n}\n\nexport interface LanguagesMain {\n    $getLanguages(): Promise<string[]>;\n    $changeLanguage(resource: UriComponents, languageId: string): Promise<void>;\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void;\n    $unregister(handle: number): void;\n    $registerCompletionSupport(handle: number, pluginInfo: PluginInfo,\n        selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void;\n    $registerImplementationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerTypeDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDeclarationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerReferenceProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSignatureHelpProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], metadata: theia.SignatureHelpProviderMetadata): void;\n    $registerHoverProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentHighlightProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerQuickFixProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], codeActionKinds?: string[]): void;\n    $clearDiagnostics(id: string): void;\n    $changeDiagnostics(id: string, delta: [string, MarkerData[]][]): void;\n    $registerDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRangeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerOnTypeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void;\n    $registerDocumentLinkProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerCodeLensSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], eventHandle?: number): void;\n    $emitCodeLensEvent(eventHandle: number, event?: any): void;\n    $registerOutlineSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerWorkspaceSymbolProvider(handle: number, pluginInfo: PluginInfo): void;\n    $registerFoldingRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentColorProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRenameProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], supportsResolveInitialValues: boolean): void;\n    $registerCallHierarchyProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n}\n\nexport interface WebviewInitData {\n    webviewResourceRoot: string\n    webviewCspSource: string\n}\n\nexport interface WebviewPanelViewState {\n    readonly active: boolean;\n    readonly visible: boolean;\n    readonly position: number;\n}\n\nexport interface WebviewsExt {\n    $onMessage(handle: string, message: any): void;\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void;\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void>;\n    $deserializeWebviewPanel(newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void>;\n}\n\nexport interface WebviewsMain {\n    $createWebviewPanel(handle: string,\n        viewType: string,\n        title: string,\n        showOptions: theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions): void;\n    $disposeWebview(handle: string): void;\n    $reveal(handle: string, showOptions: theia.WebviewPanelShowOptions): void;\n    $setTitle(handle: string, value: string): void;\n    $setIconPath(handle: string, value: IconUrl | undefined): void;\n    $setHtml(handle: string, value: string): void;\n    $setOptions(handle: string, options: theia.WebviewOptions): void;\n    $postMessage(handle: string, value: any): Thenable<boolean>;\n\n    $registerSerializer(viewType: string): void;\n    $unregisterSerializer(viewType: string): void;\n}\n\nexport interface StorageMain {\n    $set(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean>;\n    $get(key: string, isGlobal: boolean): Promise<KeysToAnyValues>;\n    $getAll(isGlobal: boolean): Promise<KeysToKeysToAnyValue>;\n}\n\nexport interface StorageExt {\n    $updatePluginsWorkspaceData(data: KeysToKeysToAnyValue): void;\n}\n\nexport interface DebugExt {\n    $onSessionCustomEvent(sessionId: string, event: string, body?: any): void;\n    $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): void;\n    $sessionDidCreate(sessionId: string): void;\n    $sessionDidDestroy(sessionId: string): void;\n    $sessionDidChange(sessionId: string | undefined): void;\n    $provideDebugConfigurations(debugType: string, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration[]>;\n    $resolveDebugConfigurations(debugConfiguration: theia.DebugConfiguration, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration | undefined>;\n    $createDebugSession(debugConfiguration: theia.DebugConfiguration): Promise<string>;\n    $terminateDebugSession(sessionId: string): Promise<void>;\n    $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined>;\n}\n\nexport interface DebugMain {\n    $appendToDebugConsole(value: string): Promise<void>;\n    $appendLineToDebugConsole(value: string): Promise<void>;\n    $registerDebuggerContribution(description: DebuggerDescription): Promise<void>;\n    $unregisterDebuggerConfiguration(debugType: string): Promise<void>;\n    $addBreakpoints(breakpoints: Breakpoint[]): Promise<void>;\n    $removeBreakpoints(breakpoints: string[]): Promise<void>;\n    $startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration): Promise<boolean>;\n    $customRequest(sessionId: string, command: string, args?: any): Promise<DebugProtocol.Response>;\n}\n\nexport interface FileSystemExt {\n    $readFile(handle: number, resource: UriComponents, options?: { encoding?: string }): Promise<string>;\n    $writeFile(handle: number, resource: UriComponents, content: string, options?: { encoding?: string }): Promise<void>;\n}\n\nexport interface FileSystemMain {\n    $readFile(uri: UriComponents): Promise<string>;\n    $writeFile(uri: UriComponents, content: string): Promise<void>;\n    $registerFileSystemProvider(handle: number, scheme: string): void;\n    $unregisterProvider(handle: number): void;\n}\n\nexport interface ClipboardMain {\n    $readText(): Promise<string>;\n    $writeText(value: string): Promise<void>;\n}\n\nexport const PLUGIN_RPC_CONTEXT = {\n    COMMAND_REGISTRY_MAIN: <ProxyIdentifier<CommandRegistryMain>>createProxyIdentifier<CommandRegistryMain>('CommandRegistryMain'),\n    QUICK_OPEN_MAIN: createProxyIdentifier<QuickOpenMain>('QuickOpenMain'),\n    DIALOGS_MAIN: createProxyIdentifier<DialogsMain>('DialogsMain'),\n    WORKSPACE_MAIN: createProxyIdentifier<WorkspaceMain>('WorkspaceMain'),\n    MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<MessageRegistryMain>>createProxyIdentifier<MessageRegistryMain>('MessageRegistryMain'),\n    TEXT_EDITORS_MAIN: createProxyIdentifier<TextEditorsMain>('TextEditorsMain'),\n    DOCUMENTS_MAIN: createProxyIdentifier<DocumentsMain>('DocumentsMain'),\n    STATUS_BAR_MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<StatusBarMessageRegistryMain>>createProxyIdentifier<StatusBarMessageRegistryMain>('StatusBarMessageRegistryMain'),\n    ENV_MAIN: createProxyIdentifier<EnvMain>('EnvMain'),\n    NOTIFICATION_MAIN: createProxyIdentifier<NotificationMain>('NotificationMain'),\n    TERMINAL_MAIN: createProxyIdentifier<TerminalServiceMain>('TerminalServiceMain'),\n    TREE_VIEWS_MAIN: createProxyIdentifier<TreeViewsMain>('TreeViewsMain'),\n    PREFERENCE_REGISTRY_MAIN: createProxyIdentifier<PreferenceRegistryMain>('PreferenceRegistryMain'),\n    OUTPUT_CHANNEL_REGISTRY_MAIN: <ProxyIdentifier<OutputChannelRegistryMain>>createProxyIdentifier<OutputChannelRegistryMain>('OutputChannelRegistryMain'),\n    LANGUAGES_MAIN: createProxyIdentifier<LanguagesMain>('LanguagesMain'),\n    CONNECTION_MAIN: createProxyIdentifier<ConnectionMain>('ConnectionMain'),\n    WEBVIEWS_MAIN: createProxyIdentifier<WebviewsMain>('WebviewsMain'),\n    STORAGE_MAIN: createProxyIdentifier<StorageMain>('StorageMain'),\n    TASKS_MAIN: createProxyIdentifier<TasksMain>('TasksMain'),\n    LANGUAGES_CONTRIBUTION_MAIN: createProxyIdentifier<LanguagesContributionMain>('LanguagesContributionMain'),\n    DEBUG_MAIN: createProxyIdentifier<DebugMain>('DebugMain'),\n    FILE_SYSTEM_MAIN: createProxyIdentifier<FileSystemMain>('FileSystemMain'),\n    SCM_MAIN: createProxyIdentifier<ScmMain>('ScmMain'),\n    DECORATIONS_MAIN: createProxyIdentifier<DecorationsMain>('DecorationsMain'),\n    WINDOW_MAIN: createProxyIdentifier<WindowMain>('WindowMain'),\n    CLIPBOARD_MAIN: <ProxyIdentifier<ClipboardMain>>createProxyIdentifier<ClipboardMain>('ClipboardMain')\n};\n\nexport const MAIN_RPC_CONTEXT = {\n    HOSTED_PLUGIN_MANAGER_EXT: createProxyIdentifier<PluginManagerExt>('PluginManagerExt'),\n    COMMAND_REGISTRY_EXT: createProxyIdentifier<CommandRegistryExt>('CommandRegistryExt'),\n    QUICK_OPEN_EXT: createProxyIdentifier<QuickOpenExt>('QuickOpenExt'),\n    WINDOW_STATE_EXT: createProxyIdentifier<WindowStateExt>('WindowStateExt'),\n    NOTIFICATION_EXT: createProxyIdentifier<NotificationExt>('NotificationExt'),\n    WORKSPACE_EXT: createProxyIdentifier<WorkspaceExt>('WorkspaceExt'),\n    TEXT_EDITORS_EXT: createProxyIdentifier<TextEditorsExt>('TextEditorsExt'),\n    EDITORS_AND_DOCUMENTS_EXT: createProxyIdentifier<EditorsAndDocumentsExt>('EditorsAndDocumentsExt'),\n    DOCUMENTS_EXT: createProxyIdentifier<DocumentsExt>('DocumentsExt'),\n    TERMINAL_EXT: createProxyIdentifier<TerminalServiceExt>('TerminalServiceExt'),\n    OUTPUT_CHANNEL_REGISTRY_EXT: createProxyIdentifier<OutputChannelRegistryExt>('OutputChannelRegistryExt'),\n    TREE_VIEWS_EXT: createProxyIdentifier<TreeViewsExt>('TreeViewsExt'),\n    PREFERENCE_REGISTRY_EXT: createProxyIdentifier<PreferenceRegistryExt>('PreferenceRegistryExt'),\n    LANGUAGES_EXT: createProxyIdentifier<LanguagesExt>('LanguagesExt'),\n    CONNECTION_EXT: createProxyIdentifier<ConnectionExt>('ConnectionExt'),\n    WEBVIEWS_EXT: createProxyIdentifier<WebviewsExt>('WebviewsExt'),\n    STORAGE_EXT: createProxyIdentifier<StorageExt>('StorageExt'),\n    TASKS_EXT: createProxyIdentifier<TasksExt>('TasksExt'),\n    LANGUAGES_CONTRIBUTION_EXT: createProxyIdentifier<LanguagesContributionExt>('LanguagesContributionExt'),\n    DEBUG_EXT: createProxyIdentifier<DebugExt>('DebugExt'),\n    FILE_SYSTEM_EXT: createProxyIdentifier<FileSystemExt>('FileSystemExt'),\n    SCM_EXT: createProxyIdentifier<ScmExt>('ScmExt'),\n    DECORATIONS_EXT: createProxyIdentifier<DecorationsExt>('DecorationsExt')\n};\n\nexport interface TasksExt {\n    $provideTasks(handle: number, token?: CancellationToken): Promise<TaskDto[] | undefined>;\n    $resolveTask(handle: number, task: TaskDto, token?: CancellationToken): Promise<TaskDto | undefined>;\n    $onDidStartTask(execution: TaskExecutionDto): void;\n    $onDidEndTask(id: number): void;\n    $onDidStartTaskProcess(processId: number | undefined, execution: TaskExecutionDto): void;\n    $onDidEndTaskProcess(exitCode: number | undefined, taskId: number): void;\n}\n\nexport interface TasksMain {\n    $registerTaskProvider(handle: number, type: string): void;\n    $fetchTasks(taskVersion: string | undefined, taskType: string | undefined): Promise<TaskDto[]>;\n    $executeTask(taskDto: TaskDto): Promise<TaskExecutionDto | undefined>;\n    $taskExecutions(): Promise<TaskExecutionDto[]>;\n    $unregister(handle: number): void;\n    $terminateTask(id: number): void;\n}\n\nexport interface RawColorInfo {\n    color: [number, number, number, number];\n    range: Range;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Position as P, Range as R, SymbolInformation, SymbolKind as S } from 'vscode-languageserver-types';\nimport URI from 'vscode-uri';\nimport * as rpc from '../common/plugin-api-rpc';\nimport {\n    DecorationOptions, EditorPosition, PickOpenItem, Plugin, Position, ResourceFileEditDto,\n    ResourceTextEditDto, Selection, TaskDto, WorkspaceEditDto\n} from '../common/plugin-api-rpc';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { LanguageFilter, LanguageSelector, RelativePattern } from '@theia/languages/lib/common/language-selector';\nimport { isMarkdownString, MarkdownString } from './markdown-string';\nimport { Item } from './quick-open';\nimport * as types from './types-impl';\nimport { UriComponents } from '../common/uri-components';\n\nconst SIDE_GROUP = -2;\nconst ACTIVE_GROUP = -1;\n\nexport function toViewColumn(ep?: EditorPosition): theia.ViewColumn | undefined {\n    if (typeof ep !== 'number') {\n        return undefined;\n    }\n\n    if (ep === EditorPosition.ONE) {\n        return <number>types.ViewColumn.One;\n    } else if (ep === EditorPosition.TWO) {\n        return <number>types.ViewColumn.Two;\n    } else if (ep === EditorPosition.THREE) {\n        return <number>types.ViewColumn.Three;\n    } else if (ep === EditorPosition.FOUR) {\n        return <number>types.ViewColumn.Four;\n    } else if (ep === EditorPosition.FIVE) {\n        return <number>types.ViewColumn.Five;\n    } else if (ep === EditorPosition.SIX) {\n        return <number>types.ViewColumn.Six;\n    } else if (ep === EditorPosition.SEVEN) {\n        return <number>types.ViewColumn.Seven;\n    } else if (ep === EditorPosition.EIGHT) {\n        return <number>types.ViewColumn.Eight;\n    } else if (ep === EditorPosition.NINE) {\n        return <number>types.ViewColumn.Nine;\n    }\n\n    return undefined;\n}\n\nexport function fromViewColumn(column?: theia.ViewColumn): number {\n    if (typeof column === 'number' && column >= types.ViewColumn.One) {\n        return column - 1;\n    }\n\n    if (column! === <number>types.ViewColumn.Beside) {\n        return SIDE_GROUP;\n    }\n\n    return ACTIVE_GROUP;\n}\n\nexport function toWebviewPanelShowOptions(options: theia.ViewColumn | theia.WebviewPanelShowOptions): theia.WebviewPanelShowOptions {\n    if (typeof options === 'object') {\n        const showOptions = options as theia.WebviewPanelShowOptions;\n        return {\n            area: showOptions.area ? showOptions.area : types.WebviewPanelTargetArea.Main,\n            viewColumn: showOptions.viewColumn ? fromViewColumn(showOptions.viewColumn) : undefined,\n            preserveFocus: showOptions.preserveFocus ? showOptions.preserveFocus : false\n        };\n    }\n\n    return {\n        area: types.WebviewPanelTargetArea.Main,\n        viewColumn: fromViewColumn(options as theia.ViewColumn),\n        preserveFocus: false\n    };\n}\n\nexport function toSelection(selection: Selection): types.Selection {\n    const { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n    const start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n    const end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n    return new types.Selection(start, end);\n}\n\nexport function fromSelection(selection: types.Selection): Selection {\n    const { active, anchor } = selection;\n    return {\n        selectionStartLineNumber: anchor.line + 1,\n        selectionStartColumn: anchor.character + 1,\n        positionLineNumber: active.line + 1,\n        positionColumn: active.character + 1\n    };\n}\n\nexport function toRange(range: model.Range): types.Range {\n    // if (!range) {\n    //     return undefined;\n    // }\n\n    const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n    return new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n}\n\nexport function fromRange(range: undefined): undefined;\nexport function fromRange(range: theia.Range): model.Range;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined {\n    if (!range) {\n        return undefined;\n    }\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line + 1,\n        startColumn: start.character + 1,\n        endLineNumber: end.line + 1,\n        endColumn: end.character + 1\n    };\n}\n\nexport function fromPosition(position: types.Position): Position {\n    return { lineNumber: position.line + 1, column: position.character + 1 };\n}\n\nexport function toPosition(position: Position): types.Position {\n    return new types.Position(position.lineNumber - 1, position.column - 1);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isDecorationOptions(something: any): something is theia.DecorationOptions {\n    return (typeof something.range !== 'undefined');\n}\n\nexport function isDecorationOptionsArr(something: theia.Range[] | theia.DecorationOptions[]): something is theia.DecorationOptions[] {\n    if (something.length === 0) {\n        return true;\n    }\n    return isDecorationOptions(something[0]) ? true : false;\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: theia.Range[] | theia.DecorationOptions[]): DecorationOptions[] {\n\n    if (isDecorationOptionsArr(ranges)) {\n        return ranges.map(r => {\n            let hoverMessage;\n            if (Array.isArray(r.hoverMessage)) {\n                hoverMessage = fromManyMarkdown(r.hoverMessage);\n            } else if (r.hoverMessage) {\n                hoverMessage = fromMarkdown(r.hoverMessage);\n            } else {\n                hoverMessage = undefined;\n            }\n            return {\n                range: fromRange(r.range)!,\n                hoverMessage: hoverMessage,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                renderOptions: <any> /* URI vs Uri */r.renderOptions\n            };\n        });\n    } else {\n        return ranges.map((r): DecorationOptions =>\n            ({\n                range: fromRange(r)!\n            }));\n    }\n}\n\nexport function fromManyMarkdown(markup: (theia.MarkdownString | theia.MarkedString)[]): model.MarkdownString[] {\n    return markup.map(fromMarkdown);\n}\n\ninterface Codeblock {\n    language: string;\n    value: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isCodeblock(thing: any): thing is Codeblock {\n    return thing && typeof thing === 'object'\n        && typeof (<Codeblock>thing).language === 'string'\n        && typeof (<Codeblock>thing).value === 'string';\n}\n\nexport function fromMarkdown(markup: theia.MarkdownString | theia.MarkedString): model.MarkdownString {\n    if (isCodeblock(markup)) {\n        const { language, value } = markup;\n        return { value: '```' + language + '\\n' + value + '\\n```\\n' };\n    } else if (isMarkdownString(markup)) {\n        return markup;\n    } else if (typeof markup === 'string') {\n        return { value: <string>markup };\n    } else {\n        return { value: '' };\n    }\n}\n\nexport function toMarkdown(value: model.MarkdownString): MarkdownString {\n    const ret = new MarkdownString(value.value);\n    ret.isTrusted = value.isTrusted;\n    return ret;\n}\n\nexport function fromDocumentSelector(selector: theia.DocumentSelector | undefined): LanguageSelector | undefined {\n    if (!selector) {\n        return undefined;\n    } else if (Array.isArray(selector)) {\n        return <LanguageSelector>selector.map(fromDocumentSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return {\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        } as LanguageFilter;\n    }\n\n}\n\nexport function fromGlobPattern(pattern: theia.GlobPattern): string | RelativePattern {\n    if (typeof pattern === 'string') {\n        return pattern;\n    }\n\n    if (isRelativePattern(pattern)) {\n        return new types.RelativePattern(pattern.base, pattern.pattern);\n    }\n\n    return pattern;\n}\n\nfunction isRelativePattern(obj: {}): obj is theia.RelativePattern {\n    const rp = obj as theia.RelativePattern;\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string';\n}\n\nexport function fromCompletionItemKind(kind?: types.CompletionItemKind): model.CompletionItemKind {\n    switch (kind) {\n        case types.CompletionItemKind.Method: return model.CompletionItemKind.Method;\n        case types.CompletionItemKind.Function: return model.CompletionItemKind.Function;\n        case types.CompletionItemKind.Constructor: return model.CompletionItemKind.Constructor;\n        case types.CompletionItemKind.Field: return model.CompletionItemKind.Field;\n        case types.CompletionItemKind.Variable: return model.CompletionItemKind.Variable;\n        case types.CompletionItemKind.Class: return model.CompletionItemKind.Class;\n        case types.CompletionItemKind.Interface: return model.CompletionItemKind.Interface;\n        case types.CompletionItemKind.Struct: return model.CompletionItemKind.Struct;\n        case types.CompletionItemKind.Module: return model.CompletionItemKind.Module;\n        case types.CompletionItemKind.Property: return model.CompletionItemKind.Property;\n        case types.CompletionItemKind.Unit: return model.CompletionItemKind.Unit;\n        case types.CompletionItemKind.Value: return model.CompletionItemKind.Value;\n        case types.CompletionItemKind.Constant: return model.CompletionItemKind.Constant;\n        case types.CompletionItemKind.Enum: return model.CompletionItemKind.Enum;\n        case types.CompletionItemKind.EnumMember: return model.CompletionItemKind.EnumMember;\n        case types.CompletionItemKind.Keyword: return model.CompletionItemKind.Keyword;\n        case types.CompletionItemKind.Snippet: return model.CompletionItemKind.Snippet;\n        case types.CompletionItemKind.Text: return model.CompletionItemKind.Text;\n        case types.CompletionItemKind.Color: return model.CompletionItemKind.Color;\n        case types.CompletionItemKind.File: return model.CompletionItemKind.File;\n        case types.CompletionItemKind.Reference: return model.CompletionItemKind.Reference;\n        case types.CompletionItemKind.Folder: return model.CompletionItemKind.Folder;\n        case types.CompletionItemKind.Event: return model.CompletionItemKind.Event;\n        case types.CompletionItemKind.Operator: return model.CompletionItemKind.Operator;\n        case types.CompletionItemKind.TypeParameter: return model.CompletionItemKind.TypeParameter;\n    }\n    return model.CompletionItemKind.Property;\n}\n\nexport function toCompletionItemKind(kind?: model.CompletionItemKind): types.CompletionItemKind {\n    switch (kind) {\n        case model.CompletionItemKind.Method: return types.CompletionItemKind.Method;\n        case model.CompletionItemKind.Function: return types.CompletionItemKind.Function;\n        case model.CompletionItemKind.Constructor: return types.CompletionItemKind.Constructor;\n        case model.CompletionItemKind.Field: return types.CompletionItemKind.Field;\n        case model.CompletionItemKind.Variable: return types.CompletionItemKind.Variable;\n        case model.CompletionItemKind.Class: return types.CompletionItemKind.Class;\n        case model.CompletionItemKind.Interface: return types.CompletionItemKind.Interface;\n        case model.CompletionItemKind.Struct: return types.CompletionItemKind.Struct;\n        case model.CompletionItemKind.Module: return types.CompletionItemKind.Module;\n        case model.CompletionItemKind.Property: return types.CompletionItemKind.Property;\n        case model.CompletionItemKind.Unit: return types.CompletionItemKind.Unit;\n        case model.CompletionItemKind.Value: return types.CompletionItemKind.Value;\n        case model.CompletionItemKind.Constant: return types.CompletionItemKind.Constant;\n        case model.CompletionItemKind.Enum: return types.CompletionItemKind.Enum;\n        case model.CompletionItemKind.EnumMember: return types.CompletionItemKind.EnumMember;\n        case model.CompletionItemKind.Keyword: return types.CompletionItemKind.Keyword;\n        case model.CompletionItemKind.Snippet: return types.CompletionItemKind.Snippet;\n        case model.CompletionItemKind.Text: return types.CompletionItemKind.Text;\n        case model.CompletionItemKind.Color: return types.CompletionItemKind.Color;\n        case model.CompletionItemKind.File: return types.CompletionItemKind.File;\n        case model.CompletionItemKind.Reference: return types.CompletionItemKind.Reference;\n        case model.CompletionItemKind.Folder: return types.CompletionItemKind.Folder;\n        case model.CompletionItemKind.Event: return types.CompletionItemKind.Event;\n        case model.CompletionItemKind.Operator: return types.CompletionItemKind.Operator;\n        case model.CompletionItemKind.TypeParameter: return types.CompletionItemKind.TypeParameter;\n    }\n    return types.CompletionItemKind.Property;\n}\n\nexport function fromTextEdit(edit: theia.TextEdit): model.TextEdit {\n    return {\n        text: edit.newText,\n        range: fromRange(edit.range)\n    };\n}\n\nexport function fromLanguageSelector(selector: undefined): undefined;\nexport function fromLanguageSelector(selector: theia.DocumentSelector): LanguageSelector;\nexport function fromLanguageSelector(selector: undefined | theia.DocumentSelector): undefined | LanguageSelector {\n    if (!selector) {\n        return undefined;\n    } else if (Array.isArray(selector)) {\n        return <LanguageSelector>selector.map(fromLanguageSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return <LanguageFilter>{\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        };\n    }\n}\n\nexport function convertDiagnosticToMarkerData(diagnostic: theia.Diagnostic): model.MarkerData {\n    return {\n        code: convertCode(diagnostic.code),\n        severity: convertSeverity(diagnostic.severity),\n        message: diagnostic.message,\n        source: diagnostic.source,\n        startLineNumber: diagnostic.range.start.line + 1,\n        startColumn: diagnostic.range.start.character + 1,\n        endLineNumber: diagnostic.range.end.line + 1,\n        endColumn: diagnostic.range.end.character + 1,\n        relatedInformation: convertRelatedInformation(diagnostic.relatedInformation),\n        tags: convertTags(diagnostic.tags)\n    };\n}\n\nfunction convertCode(code: string | number | undefined): string | undefined {\n    if (typeof code === 'number') {\n        return String(code);\n    } else {\n        return code;\n    }\n}\n\nfunction convertSeverity(severity: types.DiagnosticSeverity): types.MarkerSeverity {\n    switch (severity) {\n        case types.DiagnosticSeverity.Error: return types.MarkerSeverity.Error;\n        case types.DiagnosticSeverity.Warning: return types.MarkerSeverity.Warning;\n        case types.DiagnosticSeverity.Information: return types.MarkerSeverity.Info;\n        case types.DiagnosticSeverity.Hint: return types.MarkerSeverity.Hint;\n    }\n}\n\nfunction convertRelatedInformation(diagnosticsRelatedInformation: theia.DiagnosticRelatedInformation[] | undefined): model.RelatedInformation[] | undefined {\n    if (!diagnosticsRelatedInformation) {\n        return undefined;\n    }\n\n    const relatedInformation: model.RelatedInformation[] = [];\n    for (const item of diagnosticsRelatedInformation) {\n        relatedInformation.push({\n            resource: item.location.uri.toString(),\n            message: item.message,\n            startLineNumber: item.location.range.start.line + 1,\n            startColumn: item.location.range.start.character + 1,\n            endLineNumber: item.location.range.end.line + 1,\n            endColumn: item.location.range.end.character + 1\n        });\n    }\n    return relatedInformation;\n}\n\nfunction convertTags(tags: types.DiagnosticTag[] | undefined): types.MarkerTag[] | undefined {\n    if (!tags) {\n        return undefined;\n    }\n\n    const markerTags: types.MarkerTag[] = [];\n    for (const tag of tags) {\n        switch (tag) {\n            case types.DiagnosticTag.Unnecessary: markerTags.push(types.MarkerTag.Unnecessary);\n        }\n    }\n    return markerTags;\n}\n\nexport function fromHover(hover: theia.Hover): model.Hover {\n    return <model.Hover>{\n        range: fromRange(hover.range),\n        contents: fromManyMarkdown(hover.contents)\n    };\n}\n\nexport function fromLocation(location: theia.Location): model.Location {\n    return <model.Location>{\n        uri: location.uri,\n        range: fromRange(location.range)\n    };\n}\n\nexport function fromDefinitionLink(definitionLink: theia.DefinitionLink): model.DefinitionLink {\n    return <model.DefinitionLink>{\n        uri: definitionLink.targetUri,\n        range: fromRange(definitionLink.targetRange),\n        origin: definitionLink.originSelectionRange ? fromRange(definitionLink.originSelectionRange) : undefined,\n        selectionRange: definitionLink.targetSelectionRange ? fromRange(definitionLink.targetSelectionRange) : undefined\n    };\n}\n\nexport function fromDocumentLink(definitionLink: theia.DocumentLink): model.DocumentLink {\n    return <model.DocumentLink>{\n        range: fromRange(definitionLink.range),\n        url: definitionLink.target && definitionLink.target.toString()\n    };\n}\n\nexport function fromDocumentHighlightKind(kind?: theia.DocumentHighlightKind): model.DocumentHighlightKind | undefined {\n    switch (kind) {\n        case types.DocumentHighlightKind.Text: return model.DocumentHighlightKind.Text;\n        case types.DocumentHighlightKind.Read: return model.DocumentHighlightKind.Read;\n        case types.DocumentHighlightKind.Write: return model.DocumentHighlightKind.Write;\n    }\n    return model.DocumentHighlightKind.Text;\n}\n\nexport function fromDocumentHighlight(documentHighlight: theia.DocumentHighlight): model.DocumentHighlight {\n    return <model.DocumentHighlight>{\n        range: fromRange(documentHighlight.range),\n        kind: fromDocumentHighlightKind(documentHighlight.kind)\n    };\n}\n\nexport namespace ParameterInformation {\n    export function from(info: types.ParameterInformation): model.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined\n        };\n    }\n    export function to(info: model.ParameterInformation): types.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: isMarkdownString(info.documentation) ? toMarkdown(info.documentation) : info.documentation\n        };\n    }\n}\n\nexport namespace SignatureInformation {\n\n    export function from(info: types.SignatureInformation): model.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.from)\n        };\n    }\n\n    export function to(info: model.SignatureInformation): types.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: isMarkdownString(info.documentation) ? toMarkdown(info.documentation) : info.documentation,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.to)\n        };\n    }\n}\n\nexport namespace SignatureHelp {\n\n    export function from(id: number, help: types.SignatureHelp): model.SignatureHelp {\n        return {\n            id,\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.from)\n        };\n    }\n\n    export function to(help: model.SignatureHelp): types.SignatureHelp {\n        return {\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.to)\n        };\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function fromWorkspaceEdit(value: theia.WorkspaceEdit, documents?: any): WorkspaceEditDto {\n    const result: WorkspaceEditDto = {\n        edits: []\n    };\n    for (const entry of (value as types.WorkspaceEdit)._allEntries()) {\n        const [uri, uriOrEdits] = entry;\n        if (Array.isArray(uriOrEdits)) {\n            // text edits\n            const doc = documents ? documents.getDocument(uri.toString()) : undefined;\n            result.edits.push(<ResourceTextEditDto>{ resource: uri, modelVersionId: doc && doc.version, edits: uriOrEdits.map(fromTextEdit) });\n        } else {\n            // resource edits\n            result.edits.push(<ResourceFileEditDto>{ oldUri: uri, newUri: uriOrEdits, options: entry[2] });\n        }\n    }\n    return result;\n}\n\nexport namespace SymbolKind {\n    const fromMapping: { [kind: number]: model.SymbolKind } = Object.create(null);\n    fromMapping[model.SymbolKind.File] = model.SymbolKind.File;\n    fromMapping[model.SymbolKind.Module] = model.SymbolKind.Module;\n    fromMapping[model.SymbolKind.Namespace] = model.SymbolKind.Namespace;\n    fromMapping[model.SymbolKind.Package] = model.SymbolKind.Package;\n    fromMapping[model.SymbolKind.Class] = model.SymbolKind.Class;\n    fromMapping[model.SymbolKind.Method] = model.SymbolKind.Method;\n    fromMapping[model.SymbolKind.Property] = model.SymbolKind.Property;\n    fromMapping[model.SymbolKind.Field] = model.SymbolKind.Field;\n    fromMapping[model.SymbolKind.Constructor] = model.SymbolKind.Constructor;\n    fromMapping[model.SymbolKind.Enum] = model.SymbolKind.Enum;\n    fromMapping[model.SymbolKind.Interface] = model.SymbolKind.Interface;\n    fromMapping[model.SymbolKind.Function] = model.SymbolKind.Function;\n    fromMapping[model.SymbolKind.Variable] = model.SymbolKind.Variable;\n    fromMapping[model.SymbolKind.Constant] = model.SymbolKind.Constant;\n    fromMapping[model.SymbolKind.String] = model.SymbolKind.String;\n    fromMapping[model.SymbolKind.Number] = model.SymbolKind.Number;\n    fromMapping[model.SymbolKind.Boolean] = model.SymbolKind.Boolean;\n    fromMapping[model.SymbolKind.Array] = model.SymbolKind.Array;\n    fromMapping[model.SymbolKind.Object] = model.SymbolKind.Object;\n    fromMapping[model.SymbolKind.Key] = model.SymbolKind.Key;\n    fromMapping[model.SymbolKind.Null] = model.SymbolKind.Null;\n    fromMapping[model.SymbolKind.EnumMember] = model.SymbolKind.EnumMember;\n    fromMapping[model.SymbolKind.Struct] = model.SymbolKind.Struct;\n    fromMapping[model.SymbolKind.Event] = model.SymbolKind.Event;\n    fromMapping[model.SymbolKind.Operator] = model.SymbolKind.Operator;\n    fromMapping[model.SymbolKind.TypeParameter] = model.SymbolKind.TypeParameter;\n\n    export function fromSymbolKind(kind: theia.SymbolKind): model.SymbolKind {\n        return fromMapping[kind] || model.SymbolKind.Property;\n    }\n\n    export function toSymbolKind(kind: model.SymbolKind): theia.SymbolKind {\n        for (const k in fromMapping) {\n            if (fromMapping[k] === kind) {\n                return Number(k);\n            }\n        }\n        return model.SymbolKind.Property;\n    }\n}\n\nexport function fromDocumentSymbol(info: theia.DocumentSymbol): model.DocumentSymbol {\n    const result: model.DocumentSymbol = {\n        name: info.name,\n        detail: info.detail,\n        range: fromRange(info.range)!,\n        selectionRange: fromRange(info.selectionRange)!,\n        kind: SymbolKind.fromSymbolKind(info.kind)\n    };\n    if (info.children) {\n        result.children = info.children.map(fromDocumentSymbol);\n    }\n    return result;\n}\n\nexport function toDocumentSymbol(symbol: model.DocumentSymbol): theia.DocumentSymbol {\n    return {\n        name: symbol.name,\n        detail: symbol.detail,\n        range: toRange(symbol.range)!,\n        selectionRange: toRange(symbol.selectionRange)!,\n        children: symbol.children ? symbol.children.map(toDocumentSymbol) : [],\n        kind: SymbolKind.toSymbolKind(symbol.kind)\n    };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelLocation(thing: any): thing is model.Location {\n    if (!thing) {\n        return false;\n    }\n    return isModelRange((<model.Location>thing).range) &&\n        isUriComponents((<model.Location>thing).uri);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelRange(thing: any): thing is model.Range {\n    if (!thing) {\n        return false;\n    }\n    return (('startLineNumber' in thing) && typeof thing.startLineNumber === 'number') &&\n        (('startColumn' in thing) && typeof thing.startColumn === 'number') &&\n        (('endLineNumber' in thing) && typeof thing.endLineNumber === 'number') &&\n        (('endColumn' in thing) && typeof thing.endColumn === 'number');\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isUriComponents(thing: any): thing is UriComponents {\n    if (!thing) {\n        return false;\n    }\n    return (('scheme' in thing) && typeof thing.scheme === 'string') &&\n        (('path' in thing) && typeof thing.path === 'string') &&\n        (('query' in thing) && typeof thing.query === 'string') &&\n        (('fragment' in thing) && typeof thing.fragment === 'string');\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelCallHierarchyItem(thing: any): thing is model.CallHierarchyItem {\n    if (!thing) {\n        return false;\n    }\n    return false;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelCallHierarchyIncomingCall(thing: any): thing is model.CallHierarchyIncomingCall {\n    if (!thing) {\n        return false;\n    }\n    return false;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelCallHierarchyOutgoingCall(thing: any): thing is model.CallHierarchyOutgoingCall {\n    if (!thing) {\n        return false;\n    }\n    return false;\n}\n\nexport function toLocation(value: model.Location): types.Location {\n    return new types.Location(URI.revive(value.uri), toRange(value.range));\n}\n\nexport function fromCallHierarchyItem(item: theia.CallHierarchyItem): model.CallHierarchyItem {\n    return <model.CallHierarchyItem>{\n        kind: SymbolKind.fromSymbolKind(item.kind),\n        name: item.name,\n        detail: item.detail,\n        uri: item.uri,\n        range: fromRange(item.range),\n        selectionRange: fromRange(item.selectionRange)\n    };\n}\n\nexport function toCallHierarchyItem(value: model.CallHierarchyItem): types.CallHierarchyItem {\n    return new types.CallHierarchyItem(\n        SymbolKind.toSymbolKind(value.kind),\n        value.name,\n        value.detail ? value.detail : '',\n        URI.revive(value.uri),\n        toRange(value.range),\n        toRange(value.selectionRange));\n}\n\nexport function toCallHierarchyIncomingCall(value: model.CallHierarchyIncomingCall): types.CallHierarchyIncomingCall {\n    return new types.CallHierarchyIncomingCall(\n        toCallHierarchyItem(value.from),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function toCallHierarchyOutgoingCall(value: model.CallHierarchyOutgoingCall): types.CallHierarchyOutgoingCall {\n    return new types.CallHierarchyOutgoingCall(\n        toCallHierarchyItem(value.to),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function toWorkspaceFolder(folder: model.WorkspaceFolder): theia.WorkspaceFolder {\n    return {\n        uri: URI.revive(folder.uri),\n        name: folder.name,\n        index: folder.index\n    };\n}\n\nexport function fromTask(task: theia.Task): TaskDto | undefined {\n    if (!task) {\n        return undefined;\n    }\n\n    const taskDto = {} as TaskDto;\n    taskDto.label = task.name;\n    taskDto.source = task.source;\n    taskDto.scope = typeof task.scope === 'object' ? task.scope.uri.toString() : undefined;\n\n    const taskDefinition = task.definition;\n    if (!taskDefinition) {\n        return taskDto;\n    }\n\n    taskDto.type = taskDefinition.type;\n    const { type, ...properties } = taskDefinition;\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDto[key] = properties[key];\n        }\n    }\n\n    const execution = task.execution;\n    if (!execution) {\n        return taskDto;\n    }\n\n    if (taskDefinition.type === 'shell' || types.ShellExecution.is(execution)) {\n        return fromShellExecution(<theia.ShellExecution>execution, taskDto);\n    }\n\n    if (taskDefinition.type === 'process' || types.ProcessExecution.is(execution)) {\n        return fromProcessExecution(<theia.ProcessExecution>execution, taskDto);\n    }\n\n    return taskDto;\n}\n\nexport function toTask(taskDto: TaskDto): theia.Task {\n    if (!taskDto) {\n        throw new Error('Task should be provided for converting');\n    }\n\n    const { type, label, source, scope, command, args, options, windows, ...properties } = taskDto;\n    const result = {} as theia.Task;\n    result.name = label;\n    result.source = source;\n    if (scope) {\n        const uri = URI.parse(scope);\n        result.scope = {\n            uri,\n            name: uri.toString(),\n            index: 0\n        };\n    }\n\n    const taskType = type;\n    const taskDefinition: theia.TaskDefinition = {\n        type: taskType\n    };\n\n    result.definition = taskDefinition;\n\n    if (taskType === 'process') {\n        result.execution = getProcessExecution(taskDto);\n    }\n\n    const execution = { command, args, options };\n    if (taskType === 'shell' || types.ShellExecution.is(execution)) {\n        result.execution = getShellExecution(taskDto);\n    }\n\n    if (!properties) {\n        return result;\n    }\n\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDefinition[key] = properties[key];\n        }\n    }\n\n    return result;\n}\n\nexport function fromProcessExecution(execution: theia.ProcessExecution, taskDto: TaskDto): TaskDto {\n    taskDto.command = execution.process;\n    taskDto.args = execution.args;\n\n    const options = execution.options;\n    if (options) {\n        taskDto.options = options;\n    }\n    return taskDto;\n}\n\nexport function fromShellExecution(execution: theia.ShellExecution, taskDto: TaskDto): TaskDto {\n    const options = execution.options;\n    if (options) {\n        taskDto.options = getShellExecutionOptions(options);\n    }\n\n    const commandLine = execution.commandLine;\n    if (commandLine) {\n        taskDto.command = commandLine;\n        return taskDto;\n    }\n\n    const command = execution.command;\n    if (typeof command === 'string') {\n        taskDto.command = command;\n        taskDto.args = getShellArgs(execution.args);\n        return taskDto;\n    } else {\n        throw new Error('Converting ShellQuotedString command is not implemented');\n    }\n}\n\nexport function getProcessExecution(taskDto: TaskDto): theia.ProcessExecution {\n    return new types.ProcessExecution(\n        taskDto.command,\n        taskDto.args || [],\n        taskDto.options || {});\n}\n\nexport function getShellExecution(taskDto: TaskDto): theia.ShellExecution {\n    if (taskDto.command && Array.isArray(taskDto.args) && taskDto.args.length !== 0) {\n        return new types.ShellExecution(\n            taskDto.command,\n            taskDto.args,\n            taskDto.options || {});\n    }\n    return new types.ShellExecution(\n        taskDto.command || taskDto.commandLine,\n        taskDto.options || {});\n}\n\nexport function getShellArgs(args: undefined | (string | theia.ShellQuotedString)[]): string[] {\n    if (!args || args.length === 0) {\n        return [];\n    }\n\n    const element = args[0];\n    if (typeof element === 'string') {\n        return args as string[];\n    }\n\n    const result: string[] = [];\n    const shellQuotedArgs = args as theia.ShellQuotedString[];\n\n    shellQuotedArgs.forEach(arg => {\n        result.push(arg.value);\n    });\n\n    return result;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getShellExecutionOptions(options: theia.ShellExecutionOptions): { [key: string]: any } {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = {} as { [key: string]: any };\n\n    const env = options.env;\n    if (env) {\n        result['env'] = env;\n    }\n\n    const executable = options.executable;\n    if (executable) {\n        result['executable'] = executable;\n    }\n\n    const shellQuoting = options.shellQuoting;\n    if (shellQuoting) {\n        result['shellQuoting'] = shellQuoting;\n    }\n\n    const shellArgs = options.shellArgs;\n    if (shellArgs) {\n        result['shellArgs'] = shellArgs;\n    }\n\n    const cwd = options.cwd;\n    if (cwd) {\n        Object.assign(result, { cwd });\n    }\n\n    return result;\n}\n\nexport function fromSymbolInformation(symbolInformation: theia.SymbolInformation): SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    if (symbolInformation.location && symbolInformation.location.range) {\n        const p1 = P.create(symbolInformation.location.range.start.line, symbolInformation.location.range.start.character);\n        const p2 = P.create(symbolInformation.location.range.end.line, symbolInformation.location.range.end.character);\n        return SymbolInformation.create(symbolInformation.name, symbolInformation.kind++ as S, R.create(p1, p2),\n            symbolInformation.location.uri.toString(), symbolInformation.containerName);\n    }\n\n    return <SymbolInformation>{\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind++ as S,\n        location: {\n            uri: symbolInformation.location.uri.toString()\n        }\n    };\n}\n\nexport function toSymbolInformation(symbolInformation: SymbolInformation): theia.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    return <theia.SymbolInformation>{\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind,\n        location: {\n            uri: URI.parse(symbolInformation.location.uri),\n            range: symbolInformation.location.range\n        }\n    };\n}\n\nexport function fromFoldingRange(foldingRange: theia.FoldingRange): model.FoldingRange {\n    const range: model.FoldingRange = {\n        start: foldingRange.start + 1,\n        end: foldingRange.end + 1\n    };\n    if (foldingRange.kind) {\n        range.kind = fromFoldingRangeKind(foldingRange.kind);\n    }\n    return range;\n}\n\nexport function fromFoldingRangeKind(kind: theia.FoldingRangeKind | undefined): model.FoldingRangeKind | undefined {\n    if (kind) {\n        switch (kind) {\n            case types.FoldingRangeKind.Comment:\n                return model.FoldingRangeKind.Comment;\n            case types.FoldingRangeKind.Imports:\n                return model.FoldingRangeKind.Imports;\n            case types.FoldingRangeKind.Region:\n                return model.FoldingRangeKind.Region;\n        }\n    }\n    return undefined;\n}\n\nexport function fromColor(color: types.Color): [number, number, number, number] {\n    return [color.red, color.green, color.blue, color.alpha];\n}\n\nexport function toColor(color: [number, number, number, number]): types.Color {\n    return new types.Color(color[0], color[1], color[2], color[3]);\n}\n\nexport function fromColorPresentation(colorPresentation: theia.ColorPresentation): model.ColorPresentation {\n    return {\n        label: colorPresentation.label,\n        textEdit: colorPresentation.textEdit ? fromTextEdit(colorPresentation.textEdit) : undefined,\n        additionalTextEdits: colorPresentation.additionalTextEdits ? colorPresentation.additionalTextEdits.map(value => fromTextEdit(value)) : undefined\n    };\n}\n\nexport function quickPickItemToPickOpenItem(items: Item[]): PickOpenItem[] {\n    const pickItems: PickOpenItem[] = [];\n    for (let handle = 0; handle < items.length; handle++) {\n        const item = items[handle];\n        let label: string;\n        let description: string | undefined;\n        let detail: string | undefined;\n        let picked: boolean | undefined;\n        let groupLabel: string | undefined;\n        let showBorder: boolean | undefined;\n        if (typeof item === 'string') {\n            label = item;\n        } else {\n            ({ label, description, detail, picked, groupLabel, showBorder } = item);\n        }\n\n        pickItems.push({\n            label,\n            description,\n            handle,\n            detail,\n            picked,\n            groupLabel,\n            showBorder\n        });\n    }\n    return pickItems;\n}\n\nexport namespace DecorationRenderOptions {\n    export function from(options: theia.DecorationRenderOptions): rpc.DecorationRenderOptions {\n        return {\n            isWholeLine: options.isWholeLine,\n            rangeBehavior: options.rangeBehavior ? DecorationRangeBehavior.from(options.rangeBehavior) : undefined,\n            overviewRulerLane: options.overviewRulerLane,\n            light: options.light ? ThemableDecorationRenderOptions.from(options.light) : undefined,\n            dark: options.dark ? ThemableDecorationRenderOptions.from(options.dark) : undefined,\n\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace DecorationRangeBehavior {\n    export function from(value: types.DecorationRangeBehavior): rpc.TrackedRangeStickiness {\n        if (typeof value === 'undefined') {\n            return value;\n        }\n        switch (value) {\n            case types.DecorationRangeBehavior.OpenOpen:\n                return rpc.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.ClosedClosed:\n                return rpc.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.OpenClosed:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n            case types.DecorationRangeBehavior.ClosedOpen:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n        }\n    }\n}\n\nexport namespace ThemableDecorationRenderOptions {\n    export function from(options: theia.ThemableDecorationRenderOptions): rpc.ThemeDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace ThemableDecorationAttachmentRenderOptions {\n    export function from(options: theia.ThemableDecorationAttachmentRenderOptions): rpc.ContentDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            contentText: options.contentText,\n            contentIconPath: options.contentIconPath ? pathOrURIToURI(options.contentIconPath) : undefined,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            color: <string | types.ThemeColor>options.color,\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            margin: options.margin,\n            width: options.width,\n            height: options.height,\n        };\n    }\n}\n\nexport function pathOrURIToURI(value: string | URI): URI {\n    if (typeof value === 'undefined') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        return URI.file(value);\n    } else {\n        return value;\n    }\n}\n\nexport function pluginToPluginInfo(plugin: Plugin): rpc.PluginInfo {\n    return {\n        id: plugin.model.id,\n        name: plugin.model.name\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Disposable } from './disposable';\nimport { MaybePromise } from './types';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]): Disposable;\n    /**\n     * An emitter will print a warning if more listeners are added for this event.\n     * The event.maxListeners allows the limit to be modified for this specific event.\n     * The value can be set to 0 to indicate an unlimited number of listener.\n     */\n    maxListeners: number\n}\n\nexport namespace Event {\n    const _disposable = { dispose(): void { } };\n    export const None: Event<any> = Object.assign(function (): { dispose(): void } { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n\n    /**\n     * Given an event and a `map` function, returns another event which maps each element\n     * through the mapping function.\n     */\n    export function map<I, O>(event: Event<I>, mapFunc: (i: I) => O): Event<O> {\n        return Object.assign((listener: (e: O) => any, thisArgs?: any, disposables?: Disposable[]) => event(i => listener.call(thisArgs, mapFunc(i)), undefined, disposables), {\n            maxListeners: 0,\n        });\n    }\n}\n\ntype Callback = (...args: any[]) => any;\nclass CallbackList implements Iterable<Callback> {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    // tslint:disable-next-line:typedef\n    public [Symbol.iterator]() {\n        if (!this._callbacks) {\n            return [][Symbol.iterator]();\n        }\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        return callbacks.map((callback, i) =>\n            (...args: any[]) => callback.apply(contexts[i], args)\n        )[Symbol.iterator]();\n    }\n\n    public invoke(...args: any[]): any[] {\n        const ret: any[] = [];\n        for (const callback of this) {\n            try {\n                ret.push(callback(...args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T = any> {\n\n    private static _noop = function (): void { };\n\n    private _event: Event<T>;\n    private _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    constructor(\n        private _options?: EmitterOptions\n    ) { }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                this.checkMaxListeners(this._event.maxListeners);\n\n                const result: Disposable = {\n                    dispose: () => {\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n\n                return result;\n            }, {\n                maxListeners: 30\n            }\n            );\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): void {\n        if (maxListeners === 0 || !this._callbacks) {\n            return;\n        }\n        const count = this._callbacks.length;\n        if (count > maxListeners) {\n            console.warn(new Error(`Possible Emitter memory leak detected. ${count} listeners added. Use event.maxListeners to increase the limit (${maxListeners})`));\n        }\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            this._callbacks.invoke(event);\n        }\n    }\n\n    /**\n     * Process each listener one by one.\n     * Return `false` to stop iterating over the listeners, `true` to continue.\n     */\n    async sequence(processor: (listener: (e: T) => any) => MaybePromise<boolean>): Promise<void> {\n        if (this._callbacks) {\n            for (const listener of this._callbacks) {\n                if (!await processor(listener)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    dispose(): void {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n\nexport interface WaitUntilEvent {\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    /**\n     * Allows to pause the event loop until the provided thenable resolved.\n     *\n     * *Note:* It can only be called during event dispatch and not in an asynchronous manner\n     *\n     * @param thenable A thenable that delays execution.\n     */\n    waitUntil(thenable: Promise<any>): void;\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n}\nexport namespace WaitUntilEvent {\n    export async function fire<T extends WaitUntilEvent>(\n        emitter: Emitter<T>,\n        event: Pick<T, Exclude<keyof T, 'waitUntil'>>,\n        timeout: number | undefined = undefined\n    ): Promise<void> {\n        const waitables: Promise<void>[] = [];\n        const asyncEvent = Object.assign(event, {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            waitUntil: (thenable: Promise<any>) => {\n                if (Object.isFrozen(waitables)) {\n                    throw new Error('waitUntil cannot be called asynchronously.');\n                }\n                waitables.push(thenable);\n            }\n        }) as T;\n        try {\n            emitter.fire(asyncEvent);\n            // Asynchronous calls to `waitUntil` should fail.\n            Object.freeze(waitables);\n        } finally {\n            delete asyncEvent['waitUntil'];\n        }\n        if (!waitables.length) {\n            return;\n        }\n        if (timeout !== undefined) {\n            await Promise.race([Promise.all(waitables), new Promise(resolve => setTimeout(resolve, timeout))]);\n        } else {\n            await Promise.all(waitables);\n        }\n    }\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nvar _throwOnMissingSchema = true;\n/**\n * @internal\n */\nexport function setUriThrowOnMissingScheme(value) {\n    var old = _throwOnMissingSchema;\n    _throwOnMissingSchema = value;\n    return old;\n}\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme) {\n        if (_strict || _throwOnMissingSchema) {\n            throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n            // } else {\n            // \tconsole.warn(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\n        }\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (_strict || _throwOnMissingSchema) {\n        return scheme || _empty;\n    }\n    if (!scheme) {\n        // console.trace('BAD uri lacks scheme, falling back to file-scheme.');\n        scheme = 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport default URI;\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\nvar _a;\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event, Emitter } from './event';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: any): arg is Disposable {\n        return !!arg && typeof arg === 'object' && 'dispose' in arg && typeof arg['dispose'] === 'function';\n    }\n    export function create(func: () => void): Disposable {\n        return {\n            dispose: func\n        };\n    }\n    export const NULL = create(() => { });\n}\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed || this.disposingElements) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n","module.exports = require(\"path\");","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/types.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/**\n * Returns `true` if the parameter has type \"object\" and not null, an array, a regexp, a date.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isObject(obj: any): boolean {\n    return typeof obj === 'object'\n        && obj !== null // eslint-disable-line @typescript-eslint/no-explicit-any\n        && !Array.isArray(obj)\n        && !(obj instanceof RegExp)\n        && !(obj instanceof Date);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n    if (!isObject(destination)) {\n        return source;\n    }\n\n    if (isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (key in destination) {\n                if (overwrite) {\n                    if (isObject(destination[key]) && isObject(source[key])) {\n                        mixin(destination[key], source[key], overwrite);\n                    } else {\n                        destination[key] = source[key];\n                    }\n                }\n            } else {\n                destination[key] = source[key];\n            }\n        });\n    }\n    return destination;\n}\n\nexport enum LogType {\n    Info,\n    Error\n}\n\nexport interface LogPart {\n    data: string;\n    type: LogType;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface KeysToAnyValues { [key: string]: any }\nexport interface KeysToKeysToAnyValue { [key: string]: KeysToAnyValues }\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/** copied from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostTypes.ts#L18-L27 */\nexport function es5ClassCompat<T extends Function>(target: T): T {\n    // @ts-ignore\n    function _(): any { return Reflect.construct(target, arguments, this.constructor); }\n    Object.defineProperty(_, 'name', Object.getOwnPropertyDescriptor(target, 'name')!);\n    Object.setPrototypeOf(_, target);\n    Object.setPrototypeOf(_.prototype, target.prototype);\n    return _ as unknown as T;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\nconst _typeof = {\n    number: 'number',\n    string: 'string',\n    undefined: 'undefined',\n    object: 'object',\n    function: 'function'\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n    if (Array.isArray) {\n        return Array.isArray(array);\n    }\n\n    if (array && typeof (array.length) === _typeof.number && array.constructor === Array) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: any): obj is undefined {\n    return typeof (obj) === _typeof.undefined;\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: any): obj is undefined | null {\n    return isUndefined(obj) || obj === null; // eslint-disable-line no-null/no-null\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CancellationToken, cancelled } from './cancellation';\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T> {\n    resolve: (value?: T) => void;\n    reject: (err?: any) => void; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    });\n}\n\n/**\n * @returns resolves after a specified number of milliseconds\n * @throws cancelled if a given token is cancelled before a specified number of milliseconds\n */\nexport function timeout(ms: number, token = CancellationToken.None): Promise<void> {\n    const deferred = new Deferred<void>();\n    const handle = setTimeout(() => deferred.resolve(), ms);\n    token.onCancellationRequested(() => {\n        clearTimeout(handle);\n        deferred.reject(cancelled());\n    });\n    return deferred.promise;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n\t * An event emitted when cancellation is requested\n\t * @event\n\t */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose(): void { clearTimeout(handle); } };\n}, { maxListeners: 0 }));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel(): void {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","module.exports = require(\"net\");","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport * as types from '../types-impl';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isLocationArray(array: any): array is types.Location[] {\n    return Array.isArray(array) && array.length > 0 && array[0] instanceof types.Location;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isDefinitionLinkArray(array: any): array is theia.DefinitionLink[] {\n    return Array.isArray(array) && array.length > 0 && array[0].hasOwnProperty('targetUri') && array[0].hasOwnProperty('targetRange');\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","module.exports = require(\"crypto\");","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { UriComponents } from './uri-components';\nimport { FileStat } from '@theia/filesystem/lib/common';\nimport { SymbolInformation } from 'vscode-languageserver-types';\n\n// Should contains internal Plugin API types\n\n/**\n * Represents options to configure the behavior of showing a document in an editor.\n */\nexport interface TextDocumentShowOptions {\n    /**\n     * An optional selection to apply for the document in the editor.\n     */\n    selection?: Range;\n\n    /**\n     * An optional flag that when `true` will stop the editor from taking focus.\n     */\n    preserveFocus?: boolean;\n\n    /**\n     * An optional flag that controls if an editor-tab will be replaced\n     * with the next editor or if it will be kept.\n     */\n    preview?: boolean;\n\n    /**\n     * Denotes a location of an editor in the window. Editors can be arranged in a grid\n     * and each column represents one editor location in that grid by counting the editors\n     * in order of their appearance.\n     */\n    viewColumn?: theia.ViewColumn;\n}\n\nexport interface Range {\n    /**\n     * Line number on which the range starts (starts at 1).\n     */\n    readonly startLineNumber: number;\n    /**\n     * Column on which the range starts in line `startLineNumber` (starts at 1).\n     */\n    readonly startColumn: number;\n    /**\n     * Line number on which the range ends.\n     */\n    readonly endLineNumber: number;\n    /**\n     * Column on which the range ends in line `endLineNumber`.\n     */\n    readonly endColumn: number;\n}\n\nexport interface MarkdownString {\n    value: string;\n    isTrusted?: boolean;\n    uris?: {\n        [href: string]: UriComponents;\n    };\n}\n\nexport interface SerializedDocumentFilter {\n    $serialized: true;\n    language?: string;\n    scheme?: string;\n    pattern?: theia.GlobPattern;\n}\n\nexport interface FileWatcherSubscriberOptions {\n    globPattern: theia.GlobPattern;\n    ignoreCreateEvents?: boolean;\n    ignoreChangeEvents?: boolean;\n    ignoreDeleteEvents?: boolean;\n}\n\nexport interface FileChangeEvent {\n    subscriberId: string,\n    uri: UriComponents,\n    type: FileChangeEventType\n}\n\nexport interface FileMoveEvent {\n    subscriberId: string,\n    oldUri: UriComponents,\n    newUri: UriComponents\n}\n\nexport interface FileWillMoveEvent {\n    subscriberId: string,\n    oldUri: UriComponents,\n    newUri: UriComponents\n}\n\nexport type FileChangeEventType = 'created' | 'updated' | 'deleted';\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport interface CompletionContext {\n    triggerKind: CompletionTriggerKind;\n    triggerCharacter?: string;\n}\n\nexport enum CompletionItemInsertTextRule {\n    KeepWhitespace = 1,\n    InsertAsSnippet = 4\n}\n\nexport interface Completion {\n    label: string;\n    kind: CompletionItemKind;\n    detail?: string;\n    documentation?: string | MarkdownString;\n    sortText?: string;\n    filterText?: string;\n    preselect?: boolean;\n    insertText: string;\n    insertTextRules?: CompletionItemInsertTextRule;\n    range: Range;\n    commitCharacters?: string[];\n    additionalTextEdits?: SingleEditOperation[];\n    command?: Command;\n}\n\nexport interface SingleEditOperation {\n    range: Range;\n    text: string | null;\n    /**\n     * This indicates that this operation has \"insert\" semantics.\n     * i.e. forceMoveMarkers = true => if `range` is collapsed, all markers at the position will be moved.\n     */\n    forceMoveMarkers?: boolean;\n}\n\nexport interface Command {\n    id: string;\n    title: string;\n    tooltip?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    arguments?: any[];\n}\n\nexport enum CompletionItemKind {\n    Method = 0,\n    Function = 1,\n    Constructor = 2,\n    Field = 3,\n    Variable = 4,\n    Class = 5,\n    Struct = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Event = 10,\n    Operator = 11,\n    Unit = 12,\n    Value = 13,\n    Constant = 14,\n    Enum = 15,\n    EnumMember = 16,\n    Keyword = 17,\n    Text = 18,\n    Color = 19,\n    File = 20,\n    Reference = 21,\n    Customcolor = 22,\n    Folder = 23,\n    TypeParameter = 24,\n    Snippet = 25\n}\n\nexport class IdObject {\n    id?: number;\n}\nexport interface CompletionDto extends Completion {\n    id: number;\n    parentId: number;\n}\n\nexport interface CompletionResultDto extends IdObject {\n    id: number;\n    completions: CompletionDto[];\n    incomplete?: boolean;\n}\n\nexport interface MarkerData {\n    code?: string;\n    severity: MarkerSeverity;\n    message: string;\n    source?: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n    relatedInformation?: RelatedInformation[];\n    tags?: MarkerTag[];\n}\n\nexport interface RelatedInformation {\n    resource: string;\n    message: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n}\n\nexport interface ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n}\n\nexport interface SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n}\n\nexport interface SignatureHelp extends IdObject {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n}\n\nexport interface SignatureHelpContext {\n    triggerKind: theia.SignatureHelpTriggerKind;\n    triggerCharacter?: string;\n    isRetrigger: boolean;\n    activeSignatureHelp?: SignatureHelp;\n}\n\nexport interface Hover {\n    contents: MarkdownString[];\n    range?: Range;\n}\n\nexport interface HoverProvider {\n    provideHover(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Hover | undefined | Thenable<Hover | undefined>;\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport interface DocumentHighlight {\n    range: Range;\n    kind?: DocumentHighlightKind;\n}\n\nexport interface DocumentHighlightProvider {\n    provideDocumentHighlights(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): DocumentHighlight[] | undefined;\n}\n\nexport interface FormattingOptions {\n    tabSize: number;\n    insertSpaces: boolean;\n}\n\nexport interface TextEdit {\n    range: Range;\n    text: string;\n    eol?: monaco.editor.EndOfLineSequence;\n}\n\nexport interface Location {\n    uri: UriComponents;\n    range: Range;\n}\n\nexport type Definition = Location | Location[];\n\nexport interface DefinitionLink {\n    uri: UriComponents;\n    range: Range;\n    origin?: Range;\n    selectionRange?: Range;\n}\n\nexport interface DefinitionProvider {\n    provideDefinition(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | DefinitionLink[] | undefined;\n}\n\nexport interface DeclarationProvider {\n    provideDeclaration(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | DefinitionLink[] | undefined;\n}\n\n/**\n * Value-object that contains additional information when\n * requesting references.\n */\nexport interface ReferenceContext {\n\n    /**\n     * Include the declaration of the current symbol.\n     */\n    includeDeclaration: boolean;\n}\n\nexport interface DocumentLink {\n    range: Range;\n    url?: UriComponents | string;\n    tooltip?: string;\n}\n\nexport interface DocumentLinkProvider {\n    provideLinks(model: monaco.editor.ITextModel, token: monaco.CancellationToken): DocumentLink[] | undefined | PromiseLike<DocumentLink[] | undefined>;\n    resolveLink?: (link: DocumentLink, token: monaco.CancellationToken) => DocumentLink | PromiseLike<DocumentLink[]>;\n}\n\nexport interface CodeLensSymbol {\n    range: Range;\n    command?: Command;\n}\n\nexport interface CodeAction {\n    title: string;\n    command?: Command;\n    edit?: WorkspaceEdit;\n    diagnostics?: MarkerData[];\n    kind?: string;\n}\n\nexport interface CodeActionContext {\n    only?: string;\n}\n\nexport interface CodeActionProvider {\n    provideCodeActions(\n        model: monaco.editor.ITextModel,\n        range: Range | Selection,\n        context: monaco.languages.CodeActionContext,\n        token: monaco.CancellationToken\n    ): CodeAction[] | PromiseLike<CodeAction[]>;\n\n    providedCodeActionKinds?: string[];\n}\n\nexport interface ResourceFileEdit {\n    oldUri: UriComponents;\n    newUri: UriComponents;\n    options: { overwrite?: boolean, ignoreIfNotExists?: boolean, ignoreIfExists?: boolean, recursive?: boolean };\n}\n\nexport interface ResourceTextEdit {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edits: TextEdit[];\n}\n\nexport interface WorkspaceEdit {\n    edits: Array<ResourceTextEdit | ResourceFileEdit>;\n    rejectReason?: string;\n}\n\nexport enum SymbolKind {\n    File = 0,\n    Module = 1,\n    Namespace = 2,\n    Package = 3,\n    Class = 4,\n    Method = 5,\n    Property = 6,\n    Field = 7,\n    Constructor = 8,\n    Enum = 9,\n    Interface = 10,\n    Function = 11,\n    Variable = 12,\n    Constant = 13,\n    String = 14,\n    Number = 15,\n    Boolean = 16,\n    Array = 17,\n    Object = 18,\n    Key = 19,\n    Null = 20,\n    EnumMember = 21,\n    Struct = 22,\n    Event = 23,\n    Operator = 24,\n    TypeParameter = 25\n}\n\nexport interface DocumentSymbol {\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    containerName?: string;\n    range: Range;\n    selectionRange: Range;\n    children?: DocumentSymbol[];\n}\n\nexport interface WorkspaceRootsChangeEvent {\n    roots: FileStat[];\n}\n\nexport interface WorkspaceFolder {\n    uri: UriComponents;\n    name: string;\n    index: number;\n}\n\nexport interface Breakpoint {\n    readonly id: string;\n    readonly enabled: boolean;\n    readonly condition?: string;\n    readonly hitCondition?: string;\n    readonly logMessage?: string;\n    readonly location?: Location;\n    readonly functionName?: string;\n}\n\nexport interface WorkspaceSymbolProvider {\n    provideWorkspaceSymbols(params: WorkspaceSymbolParams, token: monaco.CancellationToken): Thenable<SymbolInformation[]>;\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: monaco.CancellationToken): Thenable<SymbolInformation>\n}\n\nexport interface WorkspaceSymbolParams {\n    query: string\n}\n\nexport interface FoldingContext {\n}\n\nexport interface FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n}\n\nexport class FoldingRangeKind {\n    static readonly Comment = new FoldingRangeKind('comment');\n    static readonly Imports = new FoldingRangeKind('imports');\n    static readonly Region = new FoldingRangeKind('region');\n    public constructor(public value: string) { }\n}\n\nexport interface Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n}\n\nexport interface ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n}\n\nexport interface ColorInformation {\n    range: Range;\n    color: Color;\n}\n\nexport interface DocumentColorProvider {\n    provideDocumentColors(model: monaco.editor.ITextModel): PromiseLike<ColorInformation[]>;\n    provideColorPresentations(model: monaco.editor.ITextModel, colorInfo: ColorInformation): PromiseLike<ColorPresentation[]>;\n}\n\nexport interface Rejection {\n    rejectReason?: string;\n}\n\nexport interface RenameLocation {\n    range: Range;\n    text: string;\n}\n\nexport interface RenameProvider {\n    provideRenameEdits(model: monaco.editor.ITextModel, position: Position, newName: string): PromiseLike<WorkspaceEdit & Rejection>;\n    resolveRenameLocation?(model: monaco.editor.ITextModel, position: Position): PromiseLike<RenameLocation & Rejection>;\n}\n\nexport interface CallHierarchyDefinition {\n    name: string;\n    kind: SymbolKind;\n    detail?: string;\n    uri: UriComponents;\n    range: Range;\n    selectionRange: Range;\n}\n\nexport interface CallHierarchyReference {\n    callerDefinition: CallHierarchyDefinition,\n    references: Range[]\n}\n\nexport interface CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: UriComponents;\n    range: Range;\n    selectionRange: Range;\n}\n\nexport interface CallHierarchyIncomingCall {\n    from: CallHierarchyItem;\n    fromRanges: Range[];\n}\n\nexport interface CallHierarchyOutgoingCall {\n    to: CallHierarchyItem;\n    fromRanges: Range[];\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonRpcServer } from '@theia/core/lib/common/messaging/proxy-factory';\nimport { RPCProtocol } from './rpc-protocol';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LogPart, KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CharacterPair, CommentRule, PluginAPIFactory, Plugin } from './plugin-api-rpc';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { IJSONSchema, IJSONSchemaSnippet } from '@theia/core/lib/common/json-schema';\nimport { RecursivePartial } from '@theia/core/lib/common/types';\nimport { PreferenceSchema, PreferenceSchemaProperties } from '@theia/core/lib/common/preferences/preference-schema';\nimport { ProblemMatcherContribution, ProblemPatternContribution, TaskDefinition } from '@theia/task/lib/common';\nimport { FileStat } from '@theia/filesystem/lib/common';\nimport { ColorDefinition } from '@theia/core/lib/browser/color-registry';\n\nexport const hostedServicePath = '/services/hostedPlugin';\n\n/**\n * Plugin engine (API) type, i.e. 'theiaPlugin', 'vscode', etc.\n */\nexport type PluginEngine = string;\n\n/**\n * This interface describes a package.json object.\n */\nexport interface PluginPackage {\n    name: string;\n    publisher: string;\n    version: string;\n    engines: {\n        [type in PluginEngine]: string;\n    };\n    theiaPlugin?: {\n        frontend?: string;\n        backend?: string;\n    };\n    main?: string;\n    displayName: string;\n    description: string;\n    contributes?: PluginPackageContribution;\n    packagePath: string;\n    activationEvents?: string[];\n    extensionDependencies?: string[];\n    extensionPack?: string[];\n    icon?: string;\n}\nexport namespace PluginPackage {\n    export function toPluginUrl(pck: PluginPackage, relativePath: string): string {\n        return `hostedPlugin/${getPluginId(pck)}/${encodeURIComponent(relativePath)}`;\n    }\n}\n\n/**\n * This interface describes a package.json contribution section object.\n */\nexport interface PluginPackageContribution {\n    configuration?: RecursivePartial<PreferenceSchema> | RecursivePartial<PreferenceSchema>[];\n    configurationDefaults?: RecursivePartial<PreferenceSchemaProperties>;\n    languages?: PluginPackageLanguageContribution[];\n    grammars?: PluginPackageGrammarsContribution[];\n    viewsContainers?: { [location: string]: PluginPackageViewContainer[] };\n    views?: { [location: string]: PluginPackageView[] };\n    commands?: PluginPackageCommand | PluginPackageCommand[];\n    menus?: { [location: string]: PluginPackageMenu[] };\n    keybindings?: PluginPackageKeybinding | PluginPackageKeybinding[];\n    debuggers?: PluginPackageDebuggersContribution[];\n    snippets: PluginPackageSnippetsContribution[];\n    themes?: PluginThemeContribution[];\n    iconThemes?: PluginIconThemeContribution[];\n    colors?: PluginColorContribution[];\n    taskDefinitions?: PluginTaskDefinitionContribution[];\n    problemMatchers?: PluginProblemMatcherContribution[];\n    problemPatterns?: PluginProblemPatternContribution[];\n}\n\nexport interface PluginPackageViewContainer {\n    id: string;\n    title: string;\n    icon: string;\n}\n\nexport interface PluginPackageView {\n    id: string;\n    name: string;\n    when?: string;\n}\n\nexport interface PluginPackageCommand {\n    command: string;\n    title: string;\n    category?: string;\n    icon?: string | { light: string; dark: string; };\n}\n\nexport interface PluginPackageMenu {\n    command: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface PluginPackageKeybinding {\n    key?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n}\n\nexport interface PluginPackageGrammarsContribution {\n    language?: string;\n    scopeName: string;\n    path: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\nexport interface ScopeMap {\n    [scopeName: string]: string;\n}\n\nexport interface PluginPackageSnippetsContribution {\n    language?: string;\n    path?: string;\n}\n\nexport interface PluginColorContribution {\n    id?: string;\n    description?: string;\n    defaults?: { light?: string, dark?: string, highContrast?: string };\n}\n\nexport type PluginUiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface PluginThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PluginIconThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PlatformSpecificAdapterContribution {\n    program?: string;\n    args?: string[];\n    runtime?: string;\n    runtimeArgs?: string[];\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface PluginPackageDebuggersContribution extends PlatformSpecificAdapterContribution {\n    type: string;\n    label?: string;\n    languages?: string[];\n    enableBreakpointsFor?: { languageIds: string[] };\n    configurationAttributes: { [request: string]: IJSONSchema };\n    configurationSnippets: IJSONSchemaSnippet[];\n    variables?: ScopeMap;\n    adapterExecutableCommand?: string;\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\n/**\n * This interface describes a package.json languages contribution section object.\n */\nexport interface PluginPackageLanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: string;\n}\n\nexport interface PluginPackageLanguageContributionConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    autoClosingPairs?: (CharacterPair | AutoClosingPairConditional)[];\n    surroundingPairs?: (CharacterPair | AutoClosingPair)[];\n    wordPattern?: string;\n    indentationRules?: IndentationRules;\n    folding?: FoldingRules;\n}\n\nexport interface PluginTaskDefinitionContribution {\n    type: string;\n    required: string[];\n    properties?: {\n        [name: string]: {\n            type: string;\n            description?: string;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            [additionalProperty: string]: any;\n        }\n    }\n}\n\nexport interface PluginProblemMatcherContribution extends ProblemMatcherContribution {\n    name: string;\n}\n\nexport interface PluginProblemPatternContribution extends ProblemPatternContribution {\n    name: string;\n}\n\nexport const PluginScanner = Symbol('PluginScanner');\n/**\n * This scanner process package.json object and returns plugin metadata objects.\n */\nexport interface PluginScanner {\n    /**\n     * The type of plugin's API (engine name)\n     */\n    apiType: PluginEngine;\n\n    /**\n     * Creates plugin's model.\n     *\n     * @param {PluginPackage} plugin\n     * @returns {PluginModel}\n     */\n    getModel(plugin: PluginPackage): PluginModel;\n\n    /**\n     * Creates plugin's lifecycle.\n     *\n     * @returns {PluginLifecycle}\n     */\n    getLifecycle(plugin: PluginPackage): PluginLifecycle;\n\n    getContribution(plugin: PluginPackage): PluginContribution | undefined;\n\n    /**\n     * A mapping between a dependency as its defined in package.json\n     * and its deployable form, e.g. `publisher.name` -> `vscode:extension/publisher.name`\n     */\n    getDependencies(plugin: PluginPackage): Map<string, string> | undefined;\n}\n\n/**\n * A plugin resolver is handling how to resolve a plugin link into a local resource.\n */\nexport const PluginDeployerResolver = Symbol('PluginDeployerResolver');\n/**\n * A resolver handle a set of resource\n */\nexport interface PluginDeployerResolver {\n\n    init?(pluginDeployerResolverInit: PluginDeployerResolverInit): void;\n\n    accept(pluginSourceId: string): boolean;\n\n    resolve(pluginResolverContext: PluginDeployerResolverContext): Promise<void>;\n\n}\n\nexport const PluginDeployerDirectoryHandler = Symbol('PluginDeployerDirectoryHandler');\nexport interface PluginDeployerDirectoryHandler {\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerDirectoryHandlerContext): Promise<void>;\n}\n\nexport const PluginDeployerFileHandler = Symbol('PluginDeployerFileHandler');\nexport interface PluginDeployerFileHandler {\n\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerFileHandlerContext): Promise<void>;\n}\n\nexport interface PluginDeployerResolverInit {\n\n}\n\nexport interface PluginDeployerResolverContext {\n\n    addPlugin(pluginId: string, path: string): void;\n\n    getPlugins(): PluginDeployerEntry[];\n\n    getOriginId(): string;\n\n}\n\nexport interface PluginDeployerStartContext {\n    readonly userEntries: string[]\n    readonly systemEntries: string[]\n}\n\nexport const PluginDeployer = Symbol('PluginDeployer');\nexport interface PluginDeployer {\n\n    start(): void;\n\n}\n\nexport const PluginDeployerParticipant = Symbol('PluginDeployerParticipant');\n/**\n * A participant can hook into the plugin deployer lifecycle.\n */\nexport interface PluginDeployerParticipant {\n    onWillStart?(context: PluginDeployerStartContext): Promise<void>;\n}\n\nexport enum PluginDeployerEntryType {\n\n    FRONTEND,\n\n    BACKEND\n}\n\n/**\n * Whether a plugin installed by a user or system.\n */\nexport enum PluginType {\n    System,\n    User\n};\n\nexport interface PluginDeployerEntry {\n\n    /**\n     * ID (before any resolution)\n     */\n    id(): string;\n\n    /**\n     * Original resolved path\n     */\n    originalPath(): string;\n\n    /**\n     * Local path on the filesystem.\n     */\n    path(): string;\n\n    /**\n     * Get a specific entry\n     */\n    getValue<T>(key: string): T;\n\n    /**\n     * Store a value\n     */\n    storeValue<T>(key: string, value: T): void;\n\n    /**\n     * Update path\n     */\n    updatePath(newPath: string): void;\n\n    getChanges(): string[];\n\n    isFile(): boolean;\n\n    isDirectory(): boolean;\n\n    /**\n     * Resolved if a resolver has handle this plugin\n     */\n    isResolved(): boolean;\n\n    resolvedBy(): string;\n\n    /**\n     * Accepted when a handler is telling this location can go live\n     */\n    isAccepted(...types: PluginDeployerEntryType[]): boolean;\n\n    accept(...types: PluginDeployerEntryType[]): void;\n\n    hasError(): boolean;\n\n    type: PluginType\n    /**\n     * A fs path to a directory where a plugin is located.\n     * Depending on a plugin format it can be different from `path`.\n     * Use `path` if you want to resolve something within a plugin, like `README.md` file.\n     * Use `rootPath` if you want to manipulate the entire plugin location, like delete or move it.\n     */\n    rootPath: string\n}\n\nexport interface PluginDeployerFileHandlerContext {\n\n    unzip(sourcePath: string, destPath: string): Promise<void>;\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\nexport interface PluginDeployerDirectoryHandlerContext {\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\n/**\n * This interface describes a plugin model object, which is populated from package.json.\n */\nexport interface PluginModel {\n    id: string;\n    name: string;\n    publisher: string;\n    version: string;\n    displayName: string;\n    description: string;\n    engine: {\n        type: PluginEngine;\n        version: string;\n    };\n    entryPoint: PluginEntryPoint;\n    packagePath: string;\n    iconUrl?: string;\n    readmeUrl?: string;\n    licenseUrl?: string;\n}\n\nexport interface PluginEntryPoint {\n    frontend?: string;\n    backend?: string;\n}\n\n/**\n * This interface describes some static plugin contributions.\n */\nexport interface PluginContribution {\n    activationEvents?: string[];\n    configuration?: PreferenceSchema[];\n    configurationDefaults?: PreferenceSchemaProperties;\n    languages?: LanguageContribution[];\n    grammars?: GrammarsContribution[];\n    viewsContainers?: { [location: string]: ViewContainer[] };\n    views?: { [location: string]: View[] };\n    commands?: PluginCommand[]\n    menus?: { [location: string]: Menu[] };\n    keybindings?: Keybinding[];\n    debuggers?: DebuggerContribution[];\n    snippets?: SnippetContribution[];\n    themes?: ThemeContribution[];\n    iconThemes?: IconThemeContribution[];\n    colors?: ColorDefinition[];\n    taskDefinitions?: TaskDefinition[];\n    problemMatchers?: ProblemMatcherContribution[];\n    problemPatterns?: ProblemPatternContribution[];\n}\n\nexport interface SnippetContribution {\n    uri: string\n    source: string\n    language?: string\n}\n\nexport type UiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface ThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface IconThemeContribution {\n    id: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface GrammarsContribution {\n    format: 'json' | 'plist';\n    language?: string;\n    scope: string;\n    grammar?: string | object;\n    grammarLocation?: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\n/**\n * The language contribution\n */\nexport interface LanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: LanguageConfiguration;\n}\n\nexport interface LanguageConfiguration {\n    brackets?: CharacterPair[];\n    indentationRules?: IndentationRules;\n    surroundingPairs?: AutoClosingPair[];\n    autoClosingPairs?: AutoClosingPairConditional[];\n    comments?: CommentRule;\n    folding?: FoldingRules;\n    wordPattern?: string;\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface DebuggerContribution extends PlatformSpecificAdapterContribution {\n    type: string,\n    label?: string,\n    languages?: string[],\n    enableBreakpointsFor?: {\n        languageIds: string[]\n    },\n    configurationAttributes?: IJSONSchema[],\n    configurationSnippets?: IJSONSchemaSnippet[],\n    variables?: ScopeMap,\n    adapterExecutableCommand?: string\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\nexport interface IndentationRules {\n    increaseIndentPattern: string;\n    decreaseIndentPattern: string;\n    unIndentedLinePattern?: string;\n    indentNextLinePattern?: string;\n}\nexport interface AutoClosingPair {\n    close: string;\n    open: string;\n}\n\nexport interface AutoClosingPairConditional extends AutoClosingPair {\n    notIn?: string[];\n}\n\nexport interface FoldingMarkers {\n    start: string;\n    end: string;\n}\n\nexport interface FoldingRules {\n    offSide?: boolean;\n    markers?: FoldingMarkers;\n}\n\n/**\n * Views Containers contribution\n */\nexport interface ViewContainer {\n    id: string;\n    title: string;\n    iconUrl: string;\n}\n\n/**\n * View contribution\n */\nexport interface View {\n    id: string;\n    name: string;\n    when?: string;\n}\n\nexport interface PluginCommand {\n    command: string;\n    title: string;\n    category?: string;\n    iconUrl?: IconUrl;\n}\n\nexport type IconUrl = string | { light: string; dark: string; };\n\n/**\n * Menu contribution\n */\nexport interface Menu {\n    command: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\n/**\n * Keybinding contribution\n */\nexport interface Keybinding {\n    keybinding?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n}\n\n/**\n * This interface describes a plugin lifecycle object.\n */\nexport interface PluginLifecycle {\n    startMethod: string;\n    stopMethod: string;\n    /**\n     * Frontend module name, frontend plugin should expose this name.\n     */\n    frontendModuleName?: string;\n    /**\n     * Path to the script which should do some initialization before frontend plugin is loaded.\n     */\n    frontendInitPath?: string;\n    /**\n     * Path to the script which should do some initialization before backend plugin is loaded.\n     */\n    backendInitPath?: string;\n}\n\n/**\n * The export function of initialization module of backend plugin.\n */\nexport interface BackendInitializationFn {\n    (apiFactory: PluginAPIFactory, plugin: Plugin): void;\n}\n\nexport interface BackendLoadingFn {\n    (rpc: RPCProtocol, plugin: Plugin): void;\n}\n\nexport interface PluginContext {\n    subscriptions: Disposable[];\n}\n\nexport interface ExtensionContext {\n    subscriptions: Disposable[];\n}\n\nexport interface PluginMetadata {\n    host: string;\n    model: PluginModel;\n    lifecycle: PluginLifecycle;\n}\n\nexport const MetadataProcessor = Symbol('MetadataProcessor');\nexport interface MetadataProcessor {\n    process(pluginMetadata: PluginMetadata): void;\n}\n\nexport function getPluginId(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport function buildFrontendModuleName(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport const HostedPluginClient = Symbol('HostedPluginClient');\nexport interface HostedPluginClient {\n    postMessage(message: string): Promise<void>;\n\n    log(logPart: LogPart): void;\n\n    onDidDeploy(): void;\n}\n\nexport interface PluginDependencies {\n    metadata: PluginMetadata\n    mapping?: Map<string, string>\n}\n\nexport const PluginDeployerHandler = Symbol('PluginDeployerHandler');\nexport interface PluginDeployerHandler {\n    deployFrontendPlugins(frontendPlugins: PluginDeployerEntry[]): Promise<void>;\n    deployBackendPlugins(backendPlugins: PluginDeployerEntry[]): Promise<void>;\n\n    undeployPlugin(pluginId: string): Promise<boolean>;\n\n    getPluginDependencies(pluginToBeInstalled: PluginDeployerEntry): Promise<PluginDependencies | undefined>\n}\n\nexport interface GetDeployedPluginsParams {\n    pluginIds: string[]\n}\n\nexport interface DeployedPlugin {\n    /**\n     * defaults to system\n     */\n    type?: PluginType;\n    metadata: PluginMetadata;\n    contributes?: PluginContribution;\n}\n\nexport const HostedPluginServer = Symbol('HostedPluginServer');\nexport interface HostedPluginServer extends JsonRpcServer<HostedPluginClient> {\n\n    getDeployedPluginIds(): Promise<string[]>;\n\n    getDeployedPlugins(params: GetDeployedPluginsParams): Promise<DeployedPlugin[]>;\n\n    getExtPluginAPI(): Promise<ExtPluginApi[]>;\n\n    onMessage(message: string): Promise<void>;\n\n}\n\nexport interface WorkspaceStorageKind {\n    workspace?: FileStat | undefined;\n    roots: FileStat[];\n}\nexport type GlobalStorageKind = undefined;\nexport type PluginStorageKind = GlobalStorageKind | WorkspaceStorageKind;\n\n/**\n * The JSON-RPC workspace interface.\n */\nexport const pluginServerJsonRpcPath = '/services/plugin-ext';\nexport const PluginServer = Symbol('PluginServer');\nexport interface PluginServer {\n\n    /**\n     * Deploy a plugin.\n     *\n     * @param type whether a plugin is installed by a system or a user, defaults to a user\n     */\n    deploy(pluginEntry: string, type?: PluginType): Promise<void>;\n\n    undeploy(pluginId: string): Promise<void>;\n\n    setStorageValue(key: string, value: KeysToAnyValues, kind: PluginStorageKind): Promise<boolean>;\n    getStorageValue(key: string, kind: PluginStorageKind): Promise<KeysToAnyValues>;\n    getAllStorageValues(kind: PluginStorageKind): Promise<KeysToKeysToAnyValue>;\n}\n\nexport const ServerPluginRunner = Symbol('ServerPluginRunner');\nexport interface ServerPluginRunner {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    acceptMessage(jsonMessage: any): boolean;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(jsonMessage: any): void;\n    setClient(client: HostedPluginClient): void;\n    setDefault(defaultRunner: ServerPluginRunner): void;\n    clientClosed(): void;\n\n    /**\n     * Provides additional deployed plugins.\n     */\n    getExtraDeployedPlugins(): Promise<DeployedPlugin[]>;\n\n    /**\n     * Provides additional plugin ids.\n     */\n    getExtraDeployedPluginIds(): Promise<string[]>;\n\n}\n\nexport const PluginHostEnvironmentVariable = Symbol('PluginHostEnvironmentVariable');\nexport interface PluginHostEnvironmentVariable {\n    process(env: NodeJS.ProcessEnv): void;\n}\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/extensions/node/rpcProtocol.ts\n// with small modifications\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport VSCodeURI from 'vscode-uri';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationToken, CancellationTokenSource } from 'vscode-languageserver-protocol';\nimport { Range, Position } from '../plugin/types-impl';\n\nexport interface MessageConnection {\n    send(msg: {}): void;\n    onMessage: Event<{}>;\n}\n\nexport const RPCProtocol = Symbol('RPCProtocol');\nexport interface RPCProtocol extends Disposable {\n    /**\n     * Returns a proxy to an object addressable/named in the plugin process or in the main process.\n     */\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T;\n\n    /**\n     * Register manually created instance.\n     */\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R;\n\n}\n\nexport class ProxyIdentifier<T> {\n    public readonly id: string;\n    constructor(public readonly isMain: boolean, id: string | T) {\n        // TODO this is nasty, rewrite this\n        this.id = (id as any).toString();\n    }\n}\n\nexport function createProxyIdentifier<T>(identifier: string): ProxyIdentifier<T> {\n    return new ProxyIdentifier(false, identifier);\n}\n\nexport interface ConnectionClosedError extends Error {\n    code: 'RPC_PROTOCOL_CLOSED'\n}\nexport namespace ConnectionClosedError {\n    const code: ConnectionClosedError['code'] = 'RPC_PROTOCOL_CLOSED';\n    export function create(message: string = 'connection is closed'): ConnectionClosedError {\n        return Object.assign(new Error(message), { code });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(error: any): error is ConnectionClosedError {\n        return !!error && typeof error === 'object' && 'code' in error && error['code'] === code;\n    }\n}\n\nexport class RPCProtocolImpl implements RPCProtocol {\n\n    private readonly locals = new Map<string, any>();\n    private readonly proxies = new Map<string, any>();\n    private lastMessageId = 0;\n    private readonly cancellationTokenSources = new Map<string, CancellationTokenSource>();\n    private readonly pendingRPCReplies = new Map<string, Deferred<any>>();\n    private readonly multiplexor: RPCMultiplexer;\n    private messageToSendHostId: string | undefined;\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as no disposed */ })\n    );\n\n    constructor(connection: MessageConnection, readonly remoteHostID?: string) {\n        this.toDispose.push(\n            this.multiplexor = new RPCMultiplexer(connection, msg => this.receiveOneMessage(msg), remoteHostID)\n        );\n        this.toDispose.push(Disposable.create(() => {\n            this.proxies.clear();\n            for (const reply of this.pendingRPCReplies.values()) {\n                reply.reject(ConnectionClosedError.create());\n            }\n            this.pendingRPCReplies.clear();\n        }));\n    }\n\n    private get isDisposed(): boolean {\n        return this.toDispose.disposed;\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        let proxy = this.proxies.get(proxyId.id);\n        if (!proxy) {\n            proxy = this.createProxy(proxyId.id);\n            this.proxies.set(proxyId.id, proxy);\n        }\n        return proxy;\n    }\n\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        this.locals.set(identifier.id, instance);\n        if (Disposable.is(instance)) {\n            this.toDispose.push(instance);\n        }\n        this.toDispose.push(Disposable.create(() => this.locals.delete(identifier.id)));\n        return instance;\n    }\n\n    private createProxy<T>(proxyId: string): T {\n        const handler = {\n            get: (target: any, name: string) => {\n                if (!target[name] && name.charCodeAt(0) === 36 /* CharCode.DollarSign */) {\n                    target[name] = (...myArgs: any[]) =>\n                        this.remoteCall(proxyId, name, myArgs);\n                }\n                return target[name];\n            }\n        };\n        return new Proxy(Object.create(null), handler);\n    }\n\n    private remoteCall(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        if (this.isDisposed) {\n            return Promise.reject(ConnectionClosedError.create());\n        }\n        const cancellationToken: CancellationToken | undefined = args.length && CancellationToken.is(args[args.length - 1]) ? args.pop() : undefined;\n        if (cancellationToken && cancellationToken.isCancellationRequested) {\n            return Promise.reject(canceled());\n        }\n\n        const callId = String(++this.lastMessageId);\n        const result = new Deferred();\n\n        if (cancellationToken) {\n            args.push('add.cancellation.token');\n            cancellationToken.onCancellationRequested(() =>\n                this.multiplexor.send(MessageFactory.cancel(callId, this.messageToSendHostId))\n            );\n        }\n\n        this.pendingRPCReplies.set(callId, result);\n        this.multiplexor.send(MessageFactory.request(callId, proxyId, methodName, args, this.messageToSendHostId));\n        return result.promise;\n    }\n\n    private receiveOneMessage(rawmsg: string): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        const msg = <RPCMessage>JSON.parse(rawmsg, ObjectsTransferrer.reviver);\n\n        // handle message that sets the Host ID\n        if ((<any>msg).setHostID) {\n            this.messageToSendHostId = (<any>msg).setHostID;\n            return;\n        }\n\n        // skip message if not matching host\n        if (this.remoteHostID && (<any>msg).hostID && this.remoteHostID !== (<any>msg).hostID) {\n            return;\n        }\n\n        switch (msg.type) {\n            case MessageType.Request:\n                this.receiveRequest(msg);\n                break;\n            case MessageType.Reply:\n                this.receiveReply(msg);\n                break;\n            case MessageType.ReplyErr:\n                this.receiveReplyErr(msg);\n                break;\n            case MessageType.Cancel:\n                this.receiveCancel(msg);\n                break;\n        }\n    }\n\n    private receiveCancel(msg: CancelMessage): void {\n        const cancellationTokenSource = this.cancellationTokenSources.get(msg.id);\n        if (cancellationTokenSource) {\n            cancellationTokenSource.cancel();\n        }\n    }\n\n    private receiveRequest(msg: RequestMessage): void {\n        const callId = msg.id;\n        const proxyId = msg.proxyId;\n        // convert `null` to `undefined`, since we don't use `null` in internal plugin APIs\n        const args = msg.args.map(arg => arg === null ? undefined : arg); // eslint-disable-line no-null/no-null\n\n        const addToken = args.length && args[args.length - 1] === 'add.cancellation.token' ? args.pop() : false;\n        if (addToken) {\n            const tokenSource = new CancellationTokenSource();\n            this.cancellationTokenSources.set(callId, tokenSource);\n            args.push(tokenSource.token);\n        }\n        const invocation = this.invokeHandler(proxyId, msg.method, args);\n\n        invocation.then(result => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexor.send(MessageFactory.replyOK(callId, result, this.messageToSendHostId));\n        }, error => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexor.send(MessageFactory.replyErr(callId, error, this.messageToSendHostId));\n        });\n    }\n\n    private receiveReply(msg: ReplyMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n        pendingReply.resolve(msg.res);\n    }\n\n    private receiveReplyErr(msg: ReplyErrMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n\n        let err: Error | undefined = undefined;\n        if (msg.err && msg.err.$isError) {\n            err = new Error();\n            err.name = msg.err.name;\n            err.message = msg.err.message;\n            err.stack = msg.err.stack;\n        }\n        pendingReply.reject(err);\n    }\n\n    private invokeHandler(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        try {\n            return Promise.resolve(this.doInvokeHandler(proxyId, methodName, args));\n        } catch (err) {\n            return Promise.reject(err);\n        }\n    }\n\n    private doInvokeHandler(proxyId: string, methodName: string, args: any[]): any {\n        const actor = this.locals.get(proxyId);\n        if (!actor) {\n            throw new Error('Unknown actor ' + proxyId);\n        }\n        const method = actor[methodName];\n        if (typeof method !== 'function') {\n            throw new Error('Unknown method ' + methodName + ' on actor ' + proxyId);\n        }\n        return method.apply(actor, args);\n    }\n}\n\nfunction canceled(): Error {\n    const error = new Error('Canceled');\n    error.name = error.message;\n    return error;\n}\n\n/**\n * Sends/Receives multiple messages in one go:\n *  - multiple messages to be sent from one stack get sent in bulk at `process.nextTick`.\n *  - each incoming message is handled in a separate `process.nextTick`.\n */\nclass RPCMultiplexer implements Disposable {\n\n    private readonly connection: MessageConnection;\n    private readonly sendAccumulatedBound: () => void;\n\n    private messagesToSend: string[];\n\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(connection: MessageConnection, onMessage: (msg: string) => void, remoteHostId?: string) {\n        this.connection = connection;\n        this.sendAccumulatedBound = this.sendAccumulated.bind(this);\n\n        this.toDispose.push(Disposable.create(() => this.messagesToSend = []));\n        this.toDispose.push(this.connection.onMessage((data: string[]) => {\n            const len = data.length;\n            for (let i = 0; i < len; i++) {\n                onMessage(data[i]);\n            }\n        }));\n\n        this.messagesToSend = [];\n        if (remoteHostId) {\n            this.send(`{\"setHostID\":\"${remoteHostId}\"}`);\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private sendAccumulated(): void {\n        const tmp = this.messagesToSend;\n        this.messagesToSend = [];\n        this.connection.send(tmp);\n    }\n\n    public send(msg: string): void {\n        if (this.toDispose.disposed) {\n            throw ConnectionClosedError.create();\n        }\n        if (this.messagesToSend.length === 0) {\n            if (typeof setImmediate !== 'undefined') {\n                setImmediate(this.sendAccumulatedBound);\n            } else {\n                setTimeout(this.sendAccumulatedBound, 0);\n            }\n        }\n        this.messagesToSend.push(msg);\n    }\n}\n\nclass MessageFactory {\n\n    static cancel(req: string, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        return `{${prefix}\"type\":${MessageType.Cancel},\"id\":\"${req}\"}`;\n    }\n\n    public static request(req: string, rpcId: string, method: string, args: any[], messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        return `{${prefix}\"type\":${MessageType.Request},\"id\":\"${req}\",\"proxyId\":\"${rpcId}\",\"method\":\"${method}\",\"args\":${JSON.stringify(args, ObjectsTransferrer.replacer)}}`;\n    }\n\n    public static replyOK(req: string, res: any, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        if (typeof res === 'undefined') {\n            return `{${prefix}\"type\":${MessageType.Reply},\"id\":\"${req}\"}`;\n        }\n        return `{${prefix}\"type\":${MessageType.Reply},\"id\":\"${req}\",\"res\":${JSON.stringify(res, ObjectsTransferrer.replacer)}}`;\n    }\n\n    public static replyErr(req: string, err: any, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        err = typeof err === 'string' ? new Error(err) : err;\n        if (err instanceof Error) {\n            return `{${prefix}\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":${JSON.stringify(transformErrorForSerialization(err))}}`;\n        }\n        return `{${prefix}\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":null}`;\n    }\n}\n\n/**\n * These functions are responsible for correct transferring objects via rpc channel.\n *\n * To reach that some specific kind of objects is converted to json in some custom way\n * and then, after receiving, revived to objects again,\n * so there is feeling that object was transferred via rpc channel.\n *\n * To distinguish between regular and altered objects, field $type is added to altered ones.\n * Also value of that field specifies kind of the object.\n */\nnamespace ObjectsTransferrer {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function replacer(key: string | undefined, value: any): any {\n        if (value instanceof URI) {\n            return {\n                $type: SerializedObjectType.THEIA_URI,\n                data: value.toString()\n            } as SerializedObject;\n        } else if (value instanceof Range) {\n            const range = value as Range;\n            const serializedValue = {\n                start: {\n                    line: range.start.line,\n                    character: range.start.character\n                },\n                end: {\n                    line: range.end.line,\n                    character: range.end.character\n                }\n            };\n            return {\n                $type: SerializedObjectType.THEIA_RANGE,\n                data: JSON.stringify(serializedValue)\n            } as SerializedObject;\n        } else if (value && value['$mid'] === 1) {\n            // Given value is VSCode URI\n            // We cannot use instanceof here because VSCode URI has toJSON method which is invoked before this replacer.\n            const uri = VSCodeURI.revive(value);\n            return {\n                $type: SerializedObjectType.VSCODE_URI,\n                data: uri.toString()\n            } as SerializedObject;\n        }\n\n        return value;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function reviver(key: string | undefined, value: any): any {\n        if (isSerializedObject(value)) {\n            switch (value.$type) {\n                case SerializedObjectType.THEIA_URI:\n                    return new URI(value.data);\n                case SerializedObjectType.VSCODE_URI:\n                    return VSCodeURI.parse(value.data);\n                case SerializedObjectType.THEIA_RANGE:\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const obj: any = JSON.parse(value.data);\n                    const start = new Position(obj.start.line, obj.start.character);\n                    const end = new Position(obj.end.line, obj.end.character);\n                    return new Range(start, end);\n            }\n        }\n\n        return value;\n    }\n\n}\n\ninterface SerializedObject {\n    $type: SerializedObjectType;\n    data: string;\n}\n\nenum SerializedObjectType {\n    THEIA_URI,\n    VSCODE_URI,\n    THEIA_RANGE\n}\n\nfunction isSerializedObject(obj: any): obj is SerializedObject {\n    return obj && obj.$type !== undefined && obj.data !== undefined;\n}\n\nexport const enum MessageType {\n    Request = 1,\n    Reply = 2,\n    ReplyErr = 3,\n    Cancel = 4,\n    Terminate = 5,\n    Terminated = 6\n}\n\nclass CancelMessage {\n    type: MessageType.Cancel;\n    id: string;\n}\n\nclass RequestMessage {\n    type: MessageType.Request;\n    id: string;\n    proxyId: string;\n    method: string;\n    args: any[];\n}\n\nclass ReplyMessage {\n    type: MessageType.Reply;\n    id: string;\n    res: any;\n}\n\nclass ReplyErrMessage {\n    type: MessageType.ReplyErr;\n    id: string;\n    err: SerializedError;\n}\n\ntype RPCMessage = RequestMessage | ReplyMessage | ReplyErrMessage | CancelMessage;\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError {\n    if (error instanceof Error) {\n        const { name, message } = error;\n        const stack: string = (<any>error).stacktrace || error.stack;\n        return {\n            $isError: true,\n            name,\n            message,\n            stack\n        };\n    }\n\n    // return as is\n    return error;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * On POSIX:\n * \n *           dir             base    \n *                \n *  root                 name  ext \n * \"  /     home/user/dir / file  .txt \"\n * \n *\n * On Windows:\n * \n *            dir            base    \n *                \n *  root                 name  ext \n * \"  /c: / home/user/dir / file  .txt \"\n * \n */\nexport class Path {\n    static separator: '/' = '/';\n\n    static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    /**\n     * vscode-uri always normalizes drive letters to lower case:\n     * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n     * Theia path should be adjusted to this.\n     */\n    static normalizeDrive(path: string): string {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n            const code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n            }\n        } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n            const code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"/c:\".length === 3\n            }\n        }\n        return path;\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n    private readonly raw: string;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        raw: string\n    ) {\n        this.raw = Path.normalizeDrive(raw);\n        const firstIndex = raw.indexOf(Path.separator);\n        const lastIndex = raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? raw : raw.substr(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substr(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substr(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substr(0, index)).root;\n    }\n\n    /**\n     * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n     */\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    /**\n     * Returns `true` if this has a parent directory, `false` otherwise.\n     *\n     * _This implementation returns `true` if and only if this is not the root dir and\n     * there is a path separator in the raw path._\n     */\n    get hasDir(): boolean {\n        return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n    }\n\n    protected computeDir(): Path {\n        if (!this.hasDir) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substr(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substr(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substr(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n    relativity(path: Path): number {\n        const relative = this.relative(path);\n        if (relative) {\n            const relativeStr = relative.toString();\n            if (relativeStr === '') {\n                return 0;\n            }\n            return relativeStr.split(Path.separator).length;\n        }\n        return -1;\n    }\n\n    /*\n     * return a normalized Path, resolving '..' and '.' segments\n     */\n    normalize(): Path {\n        const trailingSlash = this.raw.endsWith('/');\n        const pathArray = this.toString().split('/');\n        const resultArray: string[] = [];\n        pathArray.forEach((value, index) => {\n            if (!value || value === '.') {\n                return;\n            }\n            if (value === '..') {\n                if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n                    resultArray.pop();\n                } else if (!this.isAbsolute) {\n                    resultArray.push('..');\n                }\n            } else {\n                resultArray.push(value);\n            }\n        });\n        if (resultArray.length === 0) {\n            if (this.isRoot) {\n                return new Path('/');\n            } else {\n                return new Path('.');\n            }\n        }\n        return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n    }\n}\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nvar random_1 = require(\"./random\");\n/**\n * The namespace for UUID related functionality.\n */\nvar UUID;\n(function (UUID) {\n    /**\n     * A function which generates UUID v4 identifiers.\n     *\n     * @returns A new UUID v4 string.\n     *\n     * #### Notes\n     * This implementation complies with RFC 4122.\n     *\n     * This uses `Random.getRandomValues()` for random bytes, which in\n     * turn will use the underlying `crypto` module of the platform if\n     * it is available. The fallback for randomness is `Math.random`.\n     */\n    UUID.uuid4 = (function () {\n        // Create a 16 byte array to hold the random values.\n        var bytes = new Uint8Array(16);\n        // Create a look up table from bytes to hex strings.\n        var lut = new Array(256);\n        // Pad the single character hex digits with a leading zero.\n        for (var i = 0; i < 16; ++i) {\n            lut[i] = '0' + i.toString(16);\n        }\n        // Populate the rest of the hex digits.\n        for (var i = 16; i < 256; ++i) {\n            lut[i] = i.toString(16);\n        }\n        // Return a function which generates the UUID.\n        return function uuid4() {\n            // Get a new batch of random values.\n            random_1.Random.getRandomValues(bytes);\n            // Set the UUID version number to 4.\n            bytes[6] = 0x40 | (bytes[6] & 0x0F);\n            // Set the clock sequence bit to the RFC spec.\n            bytes[8] = 0x80 | (bytes[8] & 0x3F);\n            // Assemble the UUID string.\n            return (lut[bytes[0]] +\n                lut[bytes[1]] +\n                lut[bytes[2]] +\n                lut[bytes[3]] +\n                '-' +\n                lut[bytes[4]] +\n                lut[bytes[5]] +\n                '-' +\n                lut[bytes[6]] +\n                lut[bytes[7]] +\n                '-' +\n                lut[bytes[8]] +\n                lut[bytes[9]] +\n                '-' +\n                lut[bytes[10]] +\n                lut[bytes[11]] +\n                lut[bytes[12]] +\n                lut[bytes[13]] +\n                lut[bytes[14]] +\n                lut[bytes[15]]);\n        };\n    })();\n})(UUID = exports.UUID || (exports.UUID = {}));\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/paths.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/* eslint-disable no-void */\n/* eslint-disable no-null/no-null */\n'use strict';\nimport { isWindows } from '@theia/core/lib/common/os';\nimport { startsWithIgnoreCase } from './strings';\nimport { CharCode } from './char-code';\n\n/**\n * The forward slash path separator.\n */\nexport const sep = '/';\n\n/**\n * The native path separator depending on the OS.\n */\nexport const nativeSep = isWindows ? '\\\\' : '/';\n\nconst _posixBadPath = /(\\/\\.\\.?\\/)|(\\/\\.\\.?)$|^(\\.\\.?\\/)|(\\/\\/+)|(\\\\)/;\nconst _winBadPath = /(\\\\\\.\\.?\\\\)|(\\\\\\.\\.?)$|^(\\.\\.?\\\\)|(\\\\\\\\+)|(\\/)/;\n\nfunction _isNormal(path: string, win: boolean): boolean {\n    return win\n        ? !_winBadPath.test(path)\n        : !_posixBadPath.test(path);\n}\n\n/**\n * @returns the base name of a path.\n */\nexport function basename(path: string): string {\n    const idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    } else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    } else {\n        return path.substr(~idx + 1);\n    }\n}\n\n/**\n * @returns `.far` from `boo.far` or the empty string.\n */\nexport function extname(path: string): string {\n    path = basename(path);\n    const idx = ~path.lastIndexOf('.');\n    return idx ? path.substring(~idx) : '';\n}\n\nexport function normalize(path: string, toOSPath?: boolean): string {\n    if (path === null || path === void 0) {\n        return path;\n    }\n\n    const len = path.length;\n    if (len === 0) {\n        return '.';\n    }\n\n    const wantsBackslash = isWindows && toOSPath;\n    if (_isNormal(path, wantsBackslash!)) {\n        return path;\n    }\n\n    // eslint-disable-next-line no-shadow\n    const sep = wantsBackslash ? '\\\\' : '/';\n    const root = getRoot(path, sep);\n\n    // skip the root-portion of the path\n    let start = root.length;\n    let skip = false;\n    let res = '';\n\n    for (let end = root.length; end <= len; end++) {\n\n        // either at the end or at a path-separator character\n        if (end === len || path.charCodeAt(end) === CharCode.Slash || path.charCodeAt(end) === CharCode.Backslash) {\n\n            if (streql(path, start, end, '..')) {\n                // skip current and remove parent (if there is already something)\n                const prev_start = res.lastIndexOf(sep);\n                const prev_part = res.slice(prev_start + 1);\n                if ((root || prev_part.length > 0) && prev_part !== '..') {\n                    res = prev_start === -1 ? '' : res.slice(0, prev_start);\n                    skip = true;\n                }\n            } else if (streql(path, start, end, '.') && (root || res || end < len - 1)) {\n                // skip current (if there is already something or if there is more to come)\n                skip = true;\n            }\n\n            if (!skip) {\n                const part = path.slice(start, end);\n                if (res !== '' && res[res.length - 1] !== sep) {\n                    res += sep;\n                }\n                res += part;\n            }\n            start = end + 1;\n            skip = false;\n        }\n    }\n\n    return root + res;\n}\nfunction streql(value: string, start: number, end: number, other: string): boolean {\n    return start + other.length === end && value.indexOf(other, start) === start;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\n// eslint-disable-next-line no-shadow\nexport function getRoot(path: string, sep: string = '/'): string {\n\n    if (!path) {\n        return '';\n    }\n\n    const len = path.length;\n    let code = path.charCodeAt(0);\n    if (code === CharCode.Slash || code === CharCode.Backslash) {\n\n        code = path.charCodeAt(1);\n        if (code === CharCode.Slash || code === CharCode.Backslash) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            code = path.charCodeAt(2);\n            if (code !== CharCode.Slash && code !== CharCode.Backslash) {\n                // eslint-disable-next-line no-shadow\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    code = path.charCodeAt(pos);\n                    if (code === CharCode.Slash || code === CharCode.Backslash) {\n                        break;\n                    }\n                }\n                code = path.charCodeAt(pos + 1);\n                if (start !== pos && code !== CharCode.Slash && code !== CharCode.Backslash) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        code = path.charCodeAt(pos);\n                        if (code === CharCode.Slash || code === CharCode.Backslash) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n\n        // /user/far\n        // ^\n        return sep;\n\n    } else if ((code >= CharCode.A && code <= CharCode.Z) || (code >= CharCode.a && code <= CharCode.z)) {\n        // check for windows drive letter c:\\ or c:\n\n        if (path.charCodeAt(1) === CharCode.Colon) {\n            code = path.charCodeAt(2);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            } else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            code = path.charCodeAt(pos);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n\n    return '';\n}\n\nexport function isEqualOrParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n    if (path === candidate) {\n        return true;\n    }\n\n    if (!path || !candidate) {\n        return false;\n    }\n\n    if (candidate.length > path.length) {\n        return false;\n    }\n\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(path, candidate);\n        if (!beginsWith) {\n            return false;\n        }\n\n        if (candidate.length === path.length) {\n            return true; // same path, different casing\n        }\n\n        let sepOffset = candidate.length;\n        if (candidate.charAt(candidate.length - 1) === nativeSep) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n\n        return path.charAt(sepOffset) === nativeSep;\n    }\n\n    if (candidate.charAt(candidate.length - 1) !== nativeSep) {\n        candidate += nativeSep;\n    }\n\n    return path.indexOf(candidate) === 0;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// based on https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/strings.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from './char-code';\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n\nexport function* split(s: string, splitter: string): IterableIterator<string> {\n    let start = 0;\n    while (start < s.length) {\n        let end = s.indexOf(splitter, start);\n        if (end === -1) {\n            end = s.length;\n        }\n\n        yield s.substring(start, end);\n        start = end + splitter.length;\n    }\n}\n\nexport function escapeInvisibleChars(value: string): string {\n    return value.replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n\nexport function unescapeInvisibleChars(value: string): string {\n    return value.replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r');\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MarkdownString as IMarkdownString } from '../common/plugin-api-rpc-model';\n\nexport class MarkdownString {\n\n    value: string;\n    isTrusted?: boolean;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(value: string): MarkdownString {\n        // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        this.value += value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&');\n        return this;\n    }\n\n    appendMarkdown(value: string): MarkdownString {\n        this.value += value;\n        return this;\n    }\n\n    appendCodeblock(code: string, language: string = ''): MarkdownString {\n        this.value += '\\n```';\n        this.value += language;\n        this.value += '\\n';\n        this.value += code;\n        this.value += '\\n```\\n';\n        return this;\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isMarkdownString(thing: any): thing is IMarkdownString {\n    if (thing instanceof MarkdownString) {\n        return true;\n    } else if (thing && typeof thing === 'object') {\n        return typeof (<MarkdownString>thing).value === 'string'\n            && (typeof (<MarkdownString>thing).isTrusted === 'boolean' || (<MarkdownString>thing).isTrusted === undefined);\n    }\n    return false;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\n\nexport interface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n    external?: string;\n}\n\n// some well known URI schemas\nexport namespace Schemes {\n    export const FILE = 'file';\n    export const UNTITLED = 'untitled';\n    export const HTTP: string = 'http';\n    export const HTTPS: string = 'https';\n    export const MAILTO: string = 'mailto';\n    export const DATA: string = 'data';\n    /**\n     * A schema is used for models that exist in memory\n     * only and that have no correspondence on a server or such.\n     */\n    export const IN_MEMORY: string = 'inmemory';\n    /** A schema is used for settings files. */\n    export const VSCODE: string = 'vscode';\n    /** A schema is used for internal private files. */\n    export const INTERNAL: string = 'private';\n    export const COMMAND: string = 'command';\n}\n\nexport function theiaUritoUriComponents(uri: URI): UriComponents {\n    return {\n        scheme: uri.scheme,\n        authority: uri.authority,\n        path: uri.path.toString(),\n        query: uri.query,\n        fragment: uri.fragment\n    };\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function ok(val?: any, message?: string): void {\n    if (!val || val === null) {\n        throw new Error(message ? `Assertion failed (${message})` : 'Assertion failed');\n    }\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { setUriThrowOnMissingScheme } from 'vscode-uri';\nimport Uri from 'vscode-uri';\nimport { Path } from './path';\n\n// TODO: disable it because of #4487\nsetUriThrowOnMissingScheme(false);\n\nexport default class URI {\n\n    private readonly codeUri: Uri;\n    private _path: Path | undefined;\n\n    constructor(uri: string | Uri = '') {\n        if (uri instanceof Uri) {\n            this.codeUri = uri;\n        } else {\n            this.codeUri = Uri.parse(uri);\n        }\n    }\n\n    /**\n     * TODO move implementation to `DefaultUriLabelProviderContribution.getName`\n     *\n     * @deprecated use `LabelProvider.getName` instead\n     */\n    get displayName(): string {\n        const base = this.path.base;\n        if (base) {\n            return base;\n        }\n        if (this.path.isRoot) {\n            return this.path.toString();\n        }\n        return '';\n    }\n\n    /**\n     * Return all uri from the current to the top most.\n     */\n    get allLocations(): URI[] {\n        const locations = [];\n        let location: URI = this;\n        while (!location.path.isRoot && location.path.hasDir) {\n            locations.push(location);\n            location = location.parent;\n        }\n        locations.push(location);\n        return locations;\n    }\n\n    get parent(): URI {\n        if (this.path.isRoot) {\n            return this;\n        }\n        return this.withPath(this.path.dir);\n    }\n\n    relative(uri: URI): Path | undefined {\n        if (this.authority !== uri.authority || this.scheme !== uri.scheme) {\n            return undefined;\n        }\n        return this.path.relative(uri.path);\n    }\n\n    resolve(path: string | Path): URI {\n        return this.withPath(this.path.join(path.toString()));\n    }\n\n    /**\n     * return a new URI replacing the current with the given scheme\n     */\n    withScheme(scheme: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return a new URI replacing the current with the given authority\n     */\n    withAuthority(authority: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            authority\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a authority\n     */\n    withoutAuthority(): URI {\n        return this.withAuthority('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given path\n     */\n    withPath(path: string | Path): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            path: path.toString()\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a path\n     */\n    withoutPath(): URI {\n        return this.withPath('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given query\n     */\n    withQuery(query: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            query\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a query\n     */\n    withoutQuery(): URI {\n        return this.withQuery('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given fragment\n     */\n    withFragment(fragment: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            fragment\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a fragment\n     */\n    withoutFragment(): URI {\n        return this.withFragment('');\n    }\n\n    /**\n     * return a new URI replacing the current with its normalized path, resolving '..' and '.' segments\n     */\n    normalizePath(): URI {\n        return this.withPath(this.path.normalize());\n    }\n\n    get scheme(): string {\n        return this.codeUri.scheme;\n    }\n\n    get authority(): string {\n        return this.codeUri.authority;\n    }\n\n    get path(): Path {\n        if (this._path === undefined) {\n            this._path = new Path(this.codeUri.path);\n        }\n        return this._path;\n    }\n\n    get query(): string {\n        return this.codeUri.query;\n    }\n\n    get fragment(): string {\n        return this.codeUri.fragment;\n    }\n\n    toString(skipEncoding?: boolean): string {\n        return this.codeUri.toString(skipEncoding);\n    }\n\n    isEqualOrParent(uri: URI): boolean {\n        return this.authority === uri.authority && this.scheme === uri.scheme && this.path.isEqualOrParent(uri.path);\n    }\n\n    static getDistinctParents(uris: URI[]): URI[] {\n        const result: URI[] = [];\n        uris.forEach((uri, i) => {\n            if (!uris.some((otherUri, index) => index !== i && otherUri.isEqualOrParent(uri))) {\n                result.push(uri);\n            }\n        });\n        return result;\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","module.exports = require(\"os\");","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function illegalArgument(message?: string): Error {\n    if (message) {\n        return new Error(`Illegal argument: ${message}`);\n    } else {\n        return new Error('Illegal argument');\n    }\n}\n\nexport function readonly(name?: string): Error {\n    if (name) {\n        return new Error(`readonly property '${name} cannot be changed'`);\n    } else {\n        return new Error('readonly property cannot be changed');\n    }\n}\n\nexport function disposed(what: string): Error {\n    const result = new Error(`${what} has been disposed`);\n    result.name = 'DISPOSED';\n    return result;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// file copied from https://github.com/wjordan/browser-path/blob/master/src/node_path.ts\n// Original license:\n/*\n====\n\nCopyright (c) 2015 John Vilk and other contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n====\n*/\n\nimport { sep } from '@theia/languages/lib/common/language-selector/paths';\n\nconst replaceRegex = new RegExp('//+', 'g');\n\nexport function resolve(...paths: string[]): string {\n    let processed: string[] = [];\n    for (const p of paths) {\n        if (typeof p !== 'string') {\n            throw new TypeError('Invalid argument type to path.join: ' + (typeof p));\n        } else if (p !== '') {\n            if (p.charAt(0) === sep) {\n                processed = [];\n            }\n            processed.push(p);\n        }\n    }\n\n    const resolved = normalize(processed.join(sep));\n    if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === sep) {\n        return resolved.substr(0, resolved.length - 1);\n    }\n\n    return resolved;\n}\n\nexport function relative(from: string, to: string): string {\n    let i: number;\n\n    from = resolve(from);\n    to = resolve(to);\n    const fromSegments = from.split(sep);\n    const toSegments = to.split(sep);\n\n    toSegments.shift();\n    fromSegments.shift();\n\n    let upCount = 0;\n    let downSegments: string[] = [];\n\n    for (i = 0; i < fromSegments.length; i++) {\n        const seg = fromSegments[i];\n        if (seg === toSegments[i]) {\n            continue;\n        }\n\n        upCount = fromSegments.length - i;\n        break;\n    }\n\n    downSegments = toSegments.slice(i);\n\n    if (fromSegments.length === 1 && fromSegments[0] === '') {\n        upCount = 0;\n    }\n\n    if (upCount > fromSegments.length) {\n        upCount = fromSegments.length;\n    }\n\n    let rv = '';\n    for (i = 0; i < upCount; i++) {\n        rv += '../';\n    }\n    rv += downSegments.join(sep);\n\n    if (rv.length > 1 && rv.charAt(rv.length - 1) === sep) {\n        rv = rv.substr(0, rv.length - 1);\n    }\n    return rv;\n}\nexport function normalize(p: string): string {\n\n    if (p === '') {\n        p = '.';\n    }\n\n    const absolute = p.charAt(0) === sep;\n\n    p = removeDuplicateSeparators(p);\n\n    const components = p.split(sep);\n    const goodComponents: string[] = [];\n    for (const c of components) {\n        if (c === '.') {\n            continue;\n        } else if (c === '..' && (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))) {\n            goodComponents.pop();\n        } else {\n            goodComponents.push(c);\n        }\n    }\n\n    if (!absolute && goodComponents.length < 2) {\n        switch (goodComponents.length) {\n            case 1:\n                if (goodComponents[0] === '') {\n                    goodComponents.unshift('.');\n                }\n                break;\n            default:\n                goodComponents.push('.');\n        }\n    }\n    p = goodComponents.join(sep);\n    if (absolute && p.charAt(0) !== sep) {\n        p = sep + p;\n    }\n    return p;\n}\n\nfunction removeDuplicateSeparators(p: string): string {\n    p = p.replace(replaceRegex, sep);\n    return p;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { StorageMain, StorageExt } from '../common/plugin-api-rpc';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../common/types';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\n\nexport class Memento implements theia.Memento {\n\n    private cache: KeysToAnyValues;\n\n    constructor(\n        private readonly pluginId: string,\n        private readonly isPluginGlobalData: boolean,\n        private readonly storage: KeyValueStorageProxy\n    ) {\n        this.cache = storage.getPerPluginData(pluginId, isPluginGlobalData);\n\n        if (!this.isPluginGlobalData) {\n            this.storage.storageDataChangedEvent((data: KeysToKeysToAnyValue) => {\n                this.cache = data[this.pluginId] ? data[this.pluginId] : {};\n            });\n        }\n    }\n\n    get<T>(key: string): T | undefined;\n    get<T>(key: string, defaultValue: T): T;\n    get<T>(key: string, defaultValue?: T): T | undefined {\n        if (key && this.cache.hasOwnProperty(key)) {\n            return this.cache[key];\n        } else {\n            return defaultValue;\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    update(key: string, value: any): Promise<void> {\n        this.cache[key] = value;\n        return this.storage.setPerPluginData(this.pluginId, this.cache, this.isPluginGlobalData).then(_ => undefined);\n    }\n}\n\n/**\n * Singleton.\n * Is used to proxy storage requests to main side.\n */\nexport class KeyValueStorageProxy implements StorageExt {\n\n    private storageDataChangedEmitter = new Emitter<KeysToKeysToAnyValue>();\n    public readonly storageDataChangedEvent: Event<KeysToKeysToAnyValue> = this.storageDataChangedEmitter.event;\n\n    private readonly proxy: StorageMain;\n\n    private globalDataCache: KeysToKeysToAnyValue;\n    private workspaceDataCache: KeysToKeysToAnyValue;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy<StorageMain>(PLUGIN_RPC_CONTEXT.STORAGE_MAIN);\n    }\n\n    init(initGlobalData: KeysToKeysToAnyValue, initWorkspaceData: KeysToKeysToAnyValue): void {\n        this.globalDataCache = initGlobalData;\n        this.workspaceDataCache = initWorkspaceData;\n    }\n\n    getPerPluginData(key: string, isGlobal: boolean): KeysToAnyValues {\n        if (isGlobal) {\n            const existed = this.globalDataCache[key];\n            return existed ? existed : {};\n        } else {\n            const existed = this.workspaceDataCache[key];\n            return existed ? existed : {};\n        }\n    }\n\n    setPerPluginData(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        if (isGlobal) {\n            this.globalDataCache[key] = value;\n        } else {\n            this.workspaceDataCache[key] = value;\n        }\n\n        return this.proxy.$set(key, value, isGlobal);\n    }\n\n    $updatePluginsWorkspaceData(workspaceData: KeysToKeysToAnyValue): void {\n        this.workspaceDataCache = workspaceData;\n        this.storageDataChangedEmitter.fire(workspaceData);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport function hookCancellationToken<T>(token: CancellationToken, promise: Promise<T>): PromiseLike<T> {\n    return new Promise<T>((resolve, reject) => {\n        const sub = token.onCancellationRequested(() => reject(new Error('This promise is cancelled')));\n        promise.then(value => {\n            sub.dispose();\n            resolve(value);\n        }).catch(err => {\n            sub.dispose();\n            reject(err);\n        });\n    });\n}\n\nexport function anyPromise<T>(promises: PromiseLike<T>[]): Promise<{ key: number; value: PromiseLike<T>; }> {\n    const result = new Deferred<{ key: number; value: PromiseLike<T>; }>();\n    if (promises.length === 0) {\n        result.resolve();\n    }\n\n    promises.forEach((val, key) => {\n        Promise.resolve(promises[key]).then(() => {\n            result.resolve({ key: key, value: promises[key] });\n        }, err => {\n            result.resolve({ key: key, value: promises[key] });\n        });\n    });\n    return result.promise;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { ModelChangedEvent, DocumentsMain } from '../common/plugin-api-rpc';\nimport { Range as ARange } from '../common/plugin-api-rpc-model';\nimport URI from 'vscode-uri';\nimport { ok } from '../common/assert';\nimport { Range, Position, EndOfLine } from './types-impl';\nimport { PrefixSumComputer } from './prefix-sum-computer';\nimport { getWordAtText, ensureValidWordDefinition } from './word-helper';\n\nconst _modeId2WordDefinition = new Map<string, RegExp | null>();\nexport function setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexport function getWordDefinitionFor(modeId: string): RegExp {\n    return _modeId2WordDefinition.get(modeId)!;\n}\n\nexport class DocumentDataExt {\n\n    private disposed = false;\n    private dirty: boolean;\n    private _document: theia.TextDocument;\n    private textLines = new Array<theia.TextLine>();\n    private lineStarts: PrefixSumComputer | undefined;\n\n    constructor(private proxy: DocumentsMain, private uri: URI, private lines: string[], private eol: string,\n        private languageId: string, private versionId: number, isDirty: boolean) {\n        this.dirty = isDirty;\n    }\n\n    dispose(): void {\n        ok(!this.disposed);\n        this.dirty = false;\n        this.disposed = true;\n    }\n\n    onEvents(e: ModelChangedEvent): void {\n        if (e.eol && e.eol !== this.eol) {\n            this.eol = e.eol;\n            this.lineStarts = undefined;\n        }\n\n        // Update my lines\n        const changes = e.changes;\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, len = changes.length; i < len; i++) {\n            const change = changes[i];\n            this.acceptDeleteRange(change.range);\n            this.acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n\n        this.versionId = e.versionId;\n    }\n    acceptIsDirty(isDirty: boolean): void {\n        ok(!this.disposed);\n        this.dirty = isDirty;\n    }\n    acceptLanguageId(langId: string): void {\n        ok(!this.disposed);\n        this.languageId = langId;\n    }\n    get document(): theia.TextDocument {\n        if (!this._document) {\n            const that = this;\n            this._document = {\n                get uri(): theia.Uri { return that.uri; },\n                get fileName(): string { return that.uri.fsPath; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get languageId(): string { return that.languageId; },\n                get version(): number { return that.versionId; },\n                get isClosed(): boolean { return that.disposed; },\n                get isDirty(): boolean { return that.dirty; },\n                save(): Promise<boolean> { return that.save(); },\n                getText(range?): string { return range ? that.getTextInRange(range) : that.getText(); },\n                get eol(): theia.EndOfLine { return that.eol === '\\n' ? EndOfLine.LF : EndOfLine.CRLF; },\n                get lineCount(): number { return that.lines.length; },\n                lineAt(lineOrPos: number | theia.Position): theia.TextLine { return that.lineAt(lineOrPos); },\n                offsetAt(pos): number { return that.offsetAt(pos); },\n                positionAt(offset): theia.Position { return that.positionAt(offset); },\n                validateRange(ran): theia.Range { return that.validateRange(ran); },\n                validatePosition(pos): theia.Position { return that.validatePosition(pos); },\n                getWordRangeAtPosition(pos, regexp?): theia.Range | undefined { return that.getWordRangeAtPosition(pos, regexp); }\n            };\n        }\n        return Object.freeze(this._document);\n    }\n\n    private acceptInsertText(position: Position, insertText: string): void {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = insertText.split(/\\r\\n|\\r|\\n/);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this.setLineText(position.line - 1,\n                this.lines[position.line - 1].substring(0, position.character - 1)\n                + insertLines[0]\n                + this.lines[position.line - 1].substring(position.character - 1)\n            );\n            return;\n        }\n\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this.lines[position.line - 1].substring(position.character - 1);\n\n        // Delete overflowing text from first line and insert text on first line\n        this.setLineText(position.line - 1,\n            this.lines[position.line - 1].substring(0, position.character - 1)\n            + insertLines[0]\n        );\n\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this.lines.splice(position.line + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this.eol.length;\n        }\n\n        if (this.lineStarts) {\n            // update prefix sum\n            this.lineStarts.insertValues(position.line, newLengths);\n        }\n    }\n\n    private acceptDeleteRange(range: ARange): void {\n\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this.setLineText(range.startLineNumber - 1,\n                this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this.lines[range.startLineNumber - 1].substring(range.endColumn - 1)\n            );\n            return;\n        }\n\n        // Take remaining text on last line and append it to remaining text on first line\n        this.setLineText(range.startLineNumber - 1,\n            this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this.lines[range.endLineNumber - 1].substring(range.endColumn - 1)\n        );\n\n        // Delete middle lines\n        this.lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this.lineStarts) {\n            this.lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n\n    private setLineText(lineIndex: number, newValue: string): void {\n        this.lines[lineIndex] = newValue;\n        if (this.lineStarts) {\n            this.lineStarts.changeValue(lineIndex, this.lines[lineIndex].length + this.eol.length);\n        }\n    }\n\n    private save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Document is closed'));\n        }\n        return this.proxy.$trySaveDocument(this.uri);\n    }\n\n    private getTextInRange(_range: theia.Range): string {\n        const range = this.validateRange(_range);\n\n        if (range.isEmpty) {\n            return '';\n        }\n\n        if (range.isSingleLine) {\n            return this.lines[range.start.line].substring(range.start.character, range.end.character);\n        }\n\n        const lineEnding = this.eol;\n        const startLineIndex = range.start.line;\n        const endLineIndex = range.end.line;\n        const resultLines: string[] = [];\n\n        resultLines.push(this.lines[startLineIndex].substring(range.start.character));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this.lines[i]);\n        }\n        resultLines.push(this.lines[endLineIndex].substring(0, range.end.character));\n\n        return resultLines.join(lineEnding);\n    }\n\n    private validateRange(range: theia.Range): theia.Range {\n        if (!(range instanceof Range)) {\n            throw new Error('Invalid argument');\n        }\n\n        const start = this.validatePosition(range.start);\n        const end = this.validatePosition(range.end);\n\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new Range(start.line, start.character, end.line, end.character);\n    }\n\n    private getText(): string {\n        return this.lines.join(this.eol);\n    }\n\n    private validatePosition(position: theia.Position): theia.Position {\n        if (!(position instanceof Position)) {\n            throw new Error('Invalid argument');\n        }\n\n        let { line, character } = position;\n        let hasChanged = false;\n\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        } else if (line >= this.lines.length) {\n            line = this.lines.length - 1;\n            character = this.lines[line].length;\n            hasChanged = true;\n        } else {\n            const maxCharacter = this.lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            } else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n\n        if (!hasChanged) {\n            return position;\n        }\n        return new Position(line, character);\n    }\n\n    private lineAt(lineOrPosition: number | theia.Position): theia.TextLine {\n\n        let line: number = -1;\n        if (lineOrPosition instanceof Position) {\n            line = lineOrPosition.line;\n        } else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n\n        if (line < 0 || line >= this.lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n\n        let result = this.textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this.lines[line]) {\n\n            const text = this.lines[line];\n            const firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)![1].length;\n            const range = new Range(line, 0, line, text.length);\n            const rangeIncludingLineBreak = line < this.lines.length - 1\n                ? new Range(line, 0, line + 1, 0)\n                : range;\n\n            result = Object.freeze({\n                lineNumber: line,\n                range,\n                rangeIncludingLineBreak,\n                text,\n                firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n\n            this.textLines[line] = result;\n        }\n\n        return result;\n    }\n\n    private offsetAt(position: theia.Position): number {\n        position = this.validatePosition(position);\n        this.ensureLineStarts();\n        return this.lineStarts!.getAccumulatedValue(position.line - 1) + position.character;\n    }\n\n    private ensureLineStarts(): void {\n        if (!this.lineStarts) {\n            const eolLength = this.eol.length;\n            const linesLength = this.lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this.lines[i].length + eolLength;\n            }\n            this.lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n\n    private positionAt(offset: number): theia.Position {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n\n        this.ensureLineStarts();\n        const out = this.lineStarts!.getIndexOf(offset);\n\n        const lineLength = this.lines[out.index].length;\n\n        return new Position(out.index, Math.min(out.remainder, lineLength));\n    }\n\n    private getWordRangeAtPosition(_position: theia.Position, regexp?: RegExp): theia.Range | undefined {\n        const position = this.validatePosition(_position);\n\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n\n        } else if (regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${regexp.source}' because it matches the empty string.`);\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n\n        const wordAtText = getWordAtText(\n            position.character + 1,\n            ensureValidWordDefinition(regexp),\n            this.lines[position.line],\n            0\n        );\n\n        if (wordAtText) {\n            return new Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    }\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (match && <any>regexp.lastIndex === 0)!;\n}\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar isWindows;\r\nif (typeof process === 'object') {\r\n    isWindows = process.platform === 'win32';\r\n}\r\nelse if (typeof navigator === 'object') {\r\n    var userAgent = navigator.userAgent;\r\n    isWindows = userAgent.indexOf('Windows') >= 0;\r\n}\r\n//#endregion\r\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\r\nvar _singleSlashStart = /^\\//;\r\nvar _doubleSlashStart = /^\\/\\//;\r\nvar _throwOnMissingSchema = true;\r\n/**\r\n * @internal\r\n */\r\nfunction setUriThrowOnMissingScheme(value) {\r\n    var old = _throwOnMissingSchema;\r\n    _throwOnMissingSchema = value;\r\n    return old;\r\n}\r\nexports.setUriThrowOnMissingScheme = setUriThrowOnMissingScheme;\r\nfunction _validateUri(ret, _strict) {\r\n    // scheme, must be set\r\n    if (!ret.scheme) {\r\n        if (_strict || _throwOnMissingSchema) {\r\n            throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\r\n            // } else {\r\n            // \tconsole.warn(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\r\n        }\r\n    }\r\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\r\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\r\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\r\n        throw new Error('[UriError]: Scheme contains illegal characters.');\r\n    }\r\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\r\n    // If a URI contains an authority component, then the path component\r\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\r\n    // does not contain an authority component, then the path cannot begin\r\n    // with two slash characters (\"//\").\r\n    if (ret.path) {\r\n        if (ret.authority) {\r\n            if (!_singleSlashStart.test(ret.path)) {\r\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\r\n            }\r\n        }\r\n        else {\r\n            if (_doubleSlashStart.test(ret.path)) {\r\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\r\n            }\r\n        }\r\n    }\r\n}\r\n// for a while we allowed uris *without* schemes and this is the migration\r\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\r\n// back to the file-scheme. that should cause the least carnage and still be a\r\n// clear warning\r\nfunction _schemeFix(scheme, _strict) {\r\n    if (_strict || _throwOnMissingSchema) {\r\n        return scheme || _empty;\r\n    }\r\n    if (!scheme) {\r\n        // console.trace('BAD uri lacks scheme, falling back to file-scheme.');\r\n        scheme = 'file';\r\n    }\r\n    return scheme;\r\n}\r\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\r\nfunction _referenceResolution(scheme, path) {\r\n    // the slash-character is our 'default base' as we don't\r\n    // support constructing URIs relative to other URIs. This\r\n    // also means that we alter and potentially break paths.\r\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\r\n    switch (scheme) {\r\n        case 'https':\r\n        case 'http':\r\n        case 'file':\r\n            if (!path) {\r\n                path = _slash;\r\n            }\r\n            else if (path[0] !== _slash) {\r\n                path = _slash + path;\r\n            }\r\n            break;\r\n    }\r\n    return path;\r\n}\r\nvar _empty = '';\r\nvar _slash = '/';\r\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\r\n/**\r\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\r\n * This class is a simple parser which creates the basic component parts\r\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\r\n * and encoding.\r\n *\r\n *       foo://example.com:8042/over/there?name=ferret#nose\r\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\r\n *        |           |            |            |        |\r\n *     scheme     authority       path        query   fragment\r\n *        |   _____________________|__\r\n *       / \\ /                        \\\r\n *       urn:example:animal:ferret:nose\r\n */\r\nvar URI = (function () {\r\n    /**\r\n     * @internal\r\n     */\r\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\r\n        if (_strict === void 0) { _strict = false; }\r\n        if (typeof schemeOrData === 'object') {\r\n            this.scheme = schemeOrData.scheme || _empty;\r\n            this.authority = schemeOrData.authority || _empty;\r\n            this.path = schemeOrData.path || _empty;\r\n            this.query = schemeOrData.query || _empty;\r\n            this.fragment = schemeOrData.fragment || _empty;\r\n            // no validation because it's this URI\r\n            // that creates uri components.\r\n            // _validateUri(this);\r\n        }\r\n        else {\r\n            this.scheme = _schemeFix(schemeOrData, _strict);\r\n            this.authority = authority || _empty;\r\n            this.path = _referenceResolution(this.scheme, path || _empty);\r\n            this.query = query || _empty;\r\n            this.fragment = fragment || _empty;\r\n            _validateUri(this, _strict);\r\n        }\r\n    }\r\n    URI.isUri = function (thing) {\r\n        if (thing instanceof URI) {\r\n            return true;\r\n        }\r\n        if (!thing) {\r\n            return false;\r\n        }\r\n        return typeof thing.authority === 'string'\r\n            && typeof thing.fragment === 'string'\r\n            && typeof thing.path === 'string'\r\n            && typeof thing.query === 'string'\r\n            && typeof thing.scheme === 'string'\r\n            && typeof thing.fsPath === 'function'\r\n            && typeof thing.with === 'function'\r\n            && typeof thing.toString === 'function';\r\n    };\r\n    Object.defineProperty(URI.prototype, \"fsPath\", {\r\n        // ---- filesystem path -----------------------\r\n        /**\r\n         * Returns a string representing the corresponding file system path of this URI.\r\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\r\n         * platform specific path separator.\r\n         *\r\n         * * Will *not* validate the path for invalid characters and semantics.\r\n         * * Will *not* look at the scheme of this URI.\r\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\r\n         *\r\n         *\r\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\r\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\r\n         *\r\n         * ```ts\r\n            const u = URI.parse('file://server/c$/folder/file.txt')\r\n            u.authority === 'server'\r\n            u.path === '/shares/c$/file.txt'\r\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\r\n        ```\r\n         *\r\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\r\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\r\n         * with URIs that represent files on disk (`file` scheme).\r\n         */\r\n        get: function () {\r\n            // if (this.scheme !== 'file') {\r\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\r\n            // }\r\n            return _makeFsPath(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // ---- modify to new -------------------------\r\n    URI.prototype.with = function (change) {\r\n        if (!change) {\r\n            return this;\r\n        }\r\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\r\n        if (scheme === undefined) {\r\n            scheme = this.scheme;\r\n        }\r\n        else if (scheme === null) {\r\n            scheme = _empty;\r\n        }\r\n        if (authority === undefined) {\r\n            authority = this.authority;\r\n        }\r\n        else if (authority === null) {\r\n            authority = _empty;\r\n        }\r\n        if (path === undefined) {\r\n            path = this.path;\r\n        }\r\n        else if (path === null) {\r\n            path = _empty;\r\n        }\r\n        if (query === undefined) {\r\n            query = this.query;\r\n        }\r\n        else if (query === null) {\r\n            query = _empty;\r\n        }\r\n        if (fragment === undefined) {\r\n            fragment = this.fragment;\r\n        }\r\n        else if (fragment === null) {\r\n            fragment = _empty;\r\n        }\r\n        if (scheme === this.scheme\r\n            && authority === this.authority\r\n            && path === this.path\r\n            && query === this.query\r\n            && fragment === this.fragment) {\r\n            return this;\r\n        }\r\n        return new _URI(scheme, authority, path, query, fragment);\r\n    };\r\n    // ---- parse & validate ------------------------\r\n    /**\r\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\r\n     * `file:///usr/home`, or `scheme:with/path`.\r\n     *\r\n     * @param value A string which represents an URI (see `URI#toString`).\r\n     */\r\n    URI.parse = function (value, _strict) {\r\n        if (_strict === void 0) { _strict = false; }\r\n        var match = _regexp.exec(value);\r\n        if (!match) {\r\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\r\n        }\r\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\r\n    };\r\n    /**\r\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\r\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\r\n     *\r\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\r\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\r\n     * `URI.parse('file://' + path)` because the path might contain characters that are\r\n     * interpreted (# and ?). See the following sample:\r\n     * ```ts\r\n    const good = URI.file('/coding/c#/project1');\r\n    good.scheme === 'file';\r\n    good.path === '/coding/c#/project1';\r\n    good.fragment === '';\r\n    const bad = URI.parse('file://' + '/coding/c#/project1');\r\n    bad.scheme === 'file';\r\n    bad.path === '/coding/c'; // path is now broken\r\n    bad.fragment === '/project1';\r\n    ```\r\n     *\r\n     * @param path A file system path (see `URI#fsPath`)\r\n     */\r\n    URI.file = function (path) {\r\n        var authority = _empty;\r\n        // normalize to fwd-slashes on windows,\r\n        // on other systems bwd-slashes are valid\r\n        // filename character, eg /f\\oo/ba\\r.txt\r\n        if (isWindows) {\r\n            path = path.replace(/\\\\/g, _slash);\r\n        }\r\n        // check for authority as used in UNC shares\r\n        // or use the path as given\r\n        if (path[0] === _slash && path[1] === _slash) {\r\n            var idx = path.indexOf(_slash, 2);\r\n            if (idx === -1) {\r\n                authority = path.substring(2);\r\n                path = _slash;\r\n            }\r\n            else {\r\n                authority = path.substring(2, idx);\r\n                path = path.substring(idx) || _slash;\r\n            }\r\n        }\r\n        return new _URI('file', authority, path, _empty, _empty);\r\n    };\r\n    URI.from = function (components) {\r\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\r\n    };\r\n    // ---- printing/externalize ---------------------------\r\n    /**\r\n     * Creates a string representation for this URI. It's guaranteed that calling\r\n     * `URI.parse` with the result of this function creates an URI which is equal\r\n     * to this URI.\r\n     *\r\n     * * The result shall *not* be used for display purposes but for externalization or transport.\r\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\r\n     * ignore the scheme-specific encoding rules.\r\n     *\r\n     * @param skipEncoding Do not encode the result, default is `false`\r\n     */\r\n    URI.prototype.toString = function (skipEncoding) {\r\n        if (skipEncoding === void 0) { skipEncoding = false; }\r\n        return _asFormatted(this, skipEncoding);\r\n    };\r\n    URI.prototype.toJSON = function () {\r\n        return this;\r\n    };\r\n    URI.revive = function (data) {\r\n        if (!data) {\r\n            return data;\r\n        }\r\n        else if (data instanceof URI) {\r\n            return data;\r\n        }\r\n        else {\r\n            var result = new _URI(data);\r\n            result._formatted = data.external;\r\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\r\n            return result;\r\n        }\r\n    };\r\n    return URI;\r\n}());\r\nexports.default = URI;\r\nvar _pathSepMarker = isWindows ? 1 : undefined;\r\n// tslint:disable-next-line:class-name\r\nvar _URI = (function (_super) {\r\n    __extends(_URI, _super);\r\n    function _URI() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._formatted = null;\r\n        _this._fsPath = null;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\r\n        get: function () {\r\n            if (!this._fsPath) {\r\n                this._fsPath = _makeFsPath(this);\r\n            }\r\n            return this._fsPath;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    _URI.prototype.toString = function (skipEncoding) {\r\n        if (skipEncoding === void 0) { skipEncoding = false; }\r\n        if (!skipEncoding) {\r\n            if (!this._formatted) {\r\n                this._formatted = _asFormatted(this, false);\r\n            }\r\n            return this._formatted;\r\n        }\r\n        else {\r\n            // we don't cache that\r\n            return _asFormatted(this, true);\r\n        }\r\n    };\r\n    _URI.prototype.toJSON = function () {\r\n        var res = {\r\n            $mid: 1\r\n        };\r\n        // cached state\r\n        if (this._fsPath) {\r\n            res.fsPath = this._fsPath;\r\n            res._sep = _pathSepMarker;\r\n        }\r\n        if (this._formatted) {\r\n            res.external = this._formatted;\r\n        }\r\n        // uri components\r\n        if (this.path) {\r\n            res.path = this.path;\r\n        }\r\n        if (this.scheme) {\r\n            res.scheme = this.scheme;\r\n        }\r\n        if (this.authority) {\r\n            res.authority = this.authority;\r\n        }\r\n        if (this.query) {\r\n            res.query = this.query;\r\n        }\r\n        if (this.fragment) {\r\n            res.fragment = this.fragment;\r\n        }\r\n        return res;\r\n    };\r\n    return _URI;\r\n}(URI));\r\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\r\nvar encodeTable = (_a = {},\r\n    _a[58 /* Colon */] = '%3A',\r\n    _a[47 /* Slash */] = '%2F',\r\n    _a[63 /* QuestionMark */] = '%3F',\r\n    _a[35 /* Hash */] = '%23',\r\n    _a[91 /* OpenSquareBracket */] = '%5B',\r\n    _a[93 /* CloseSquareBracket */] = '%5D',\r\n    _a[64 /* AtSign */] = '%40',\r\n    _a[33 /* ExclamationMark */] = '%21',\r\n    _a[36 /* DollarSign */] = '%24',\r\n    _a[38 /* Ampersand */] = '%26',\r\n    _a[39 /* SingleQuote */] = '%27',\r\n    _a[40 /* OpenParen */] = '%28',\r\n    _a[41 /* CloseParen */] = '%29',\r\n    _a[42 /* Asterisk */] = '%2A',\r\n    _a[43 /* Plus */] = '%2B',\r\n    _a[44 /* Comma */] = '%2C',\r\n    _a[59 /* Semicolon */] = '%3B',\r\n    _a[61 /* Equals */] = '%3D',\r\n    _a[32 /* Space */] = '%20',\r\n    _a);\r\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\r\n    var res = undefined;\r\n    var nativeEncodePos = -1;\r\n    for (var pos = 0; pos < uriComponent.length; pos++) {\r\n        var code = uriComponent.charCodeAt(pos);\r\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\r\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\r\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\r\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\r\n            || code === 45 /* Dash */\r\n            || code === 46 /* Period */\r\n            || code === 95 /* Underline */\r\n            || code === 126 /* Tilde */\r\n            || (allowSlash && code === 47 /* Slash */)) {\r\n            // check if we are delaying native encode\r\n            if (nativeEncodePos !== -1) {\r\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\r\n                nativeEncodePos = -1;\r\n            }\r\n            // check if we write into a new string (by default we try to return the param)\r\n            if (res !== undefined) {\r\n                res += uriComponent.charAt(pos);\r\n            }\r\n        }\r\n        else {\r\n            // encoding needed, we need to allocate a new string\r\n            if (res === undefined) {\r\n                res = uriComponent.substr(0, pos);\r\n            }\r\n            // check with default table first\r\n            var escaped = encodeTable[code];\r\n            if (escaped !== undefined) {\r\n                // check if we are delaying native encode\r\n                if (nativeEncodePos !== -1) {\r\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\r\n                    nativeEncodePos = -1;\r\n                }\r\n                // append escaped variant to result\r\n                res += escaped;\r\n            }\r\n            else if (nativeEncodePos === -1) {\r\n                // use native encode only when needed\r\n                nativeEncodePos = pos;\r\n            }\r\n        }\r\n    }\r\n    if (nativeEncodePos !== -1) {\r\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\r\n    }\r\n    return res !== undefined ? res : uriComponent;\r\n}\r\nfunction encodeURIComponentMinimal(path) {\r\n    var res = undefined;\r\n    for (var pos = 0; pos < path.length; pos++) {\r\n        var code = path.charCodeAt(pos);\r\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\r\n            if (res === undefined) {\r\n                res = path.substr(0, pos);\r\n            }\r\n            res += encodeTable[code];\r\n        }\r\n        else {\r\n            if (res !== undefined) {\r\n                res += path[pos];\r\n            }\r\n        }\r\n    }\r\n    return res !== undefined ? res : path;\r\n}\r\n/**\r\n * Compute `fsPath` for the given uri\r\n */\r\nfunction _makeFsPath(uri) {\r\n    var value;\r\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\r\n        // unc path: file://shares/c$/far/boo\r\n        value = \"//\" + uri.authority + uri.path;\r\n    }\r\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\r\n        && ((uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122) /* z */)\r\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\r\n        // windows drive letter: file:///c:/far/boo\r\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\r\n    }\r\n    else {\r\n        // other path\r\n        value = uri.path;\r\n    }\r\n    if (isWindows) {\r\n        value = value.replace(/\\//g, '\\\\');\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Create the external version of a uri\r\n */\r\nfunction _asFormatted(uri, skipEncoding) {\r\n    var encoder = !skipEncoding\r\n        ? encodeURIComponentFast\r\n        : encodeURIComponentMinimal;\r\n    var res = '';\r\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\r\n    if (scheme) {\r\n        res += scheme;\r\n        res += ':';\r\n    }\r\n    if (authority || scheme === 'file') {\r\n        res += _slash;\r\n        res += _slash;\r\n    }\r\n    if (authority) {\r\n        var idx = authority.indexOf('@');\r\n        if (idx !== -1) {\r\n            // <user>@<auth>\r\n            var userinfo = authority.substr(0, idx);\r\n            authority = authority.substr(idx + 1);\r\n            idx = userinfo.indexOf(':');\r\n            if (idx === -1) {\r\n                res += encoder(userinfo, false);\r\n            }\r\n            else {\r\n                // <user>:<pass>@<auth>\r\n                res += encoder(userinfo.substr(0, idx), false);\r\n                res += ':';\r\n                res += encoder(userinfo.substr(idx + 1), false);\r\n            }\r\n            res += '@';\r\n        }\r\n        authority = authority.toLowerCase();\r\n        idx = authority.indexOf(':');\r\n        if (idx === -1) {\r\n            res += encoder(authority, false);\r\n        }\r\n        else {\r\n            // <auth>:<port>\r\n            res += encoder(authority.substr(0, idx), false);\r\n            res += authority.substr(idx);\r\n        }\r\n    }\r\n    if (path) {\r\n        // lower-case windows drive letters in /C:/fff or C:/fff\r\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\r\n            var code = path.charCodeAt(1);\r\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\r\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\r\n            }\r\n        }\r\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\r\n            var code = path.charCodeAt(0);\r\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\r\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\r\n            }\r\n        }\r\n        // encode the rest of the path\r\n        res += encoder(path, true);\r\n    }\r\n    if (query) {\r\n        res += '?';\r\n        res += encoder(query, false);\r\n    }\r\n    if (fragment) {\r\n        res += '#';\r\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\r\n    }\r\n    return res;\r\n}\r\nvar _a;\r\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from './strings';\nimport * as paths from './paths';\nimport { CharCode } from './char-code';\n/* eslint-disable no-shadow, no-null/no-null */\nexport interface IExpression {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // eslint-disable-next-line prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // eslint-disable-next-line prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // eslint-disable-next-line prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behaviour\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trivial glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// eslint-disable-next-line max-len\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function (): boolean {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substr(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename): string {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename): string | Promise<string> {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common ppatterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string): string {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // eslint-disable-next-line no-shadow\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename): string {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // eslint-disable-next-line no-shadow\n    } : function (path, basename): string {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string): string {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string): boolean {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>): ((name: string) => Promise<boolean>) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]): ((name: string) => boolean) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]): Record<string, true> {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isRelativePattern(obj: any): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // eslint-disable-next-line no-shadow\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // eslint-disable-next-line no-shadow\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string): string | Promise<string> {\n            // eslint-disable-next-line no-shadow\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // eslint-disable-next-line no-shadow\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // eslint-disable-next-line no-shadow\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> {\n        let name: string = null!;\n\n        // eslint-disable-next-line no-shadow\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Here we expose types from @theia/plugin, so it becomes a direct dependency\nexport * from './plugin-protocol';\nexport * from './plugin-api-rpc';\nexport * from './plugin-ext-api-contribution';\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as path from 'path';\nimport Uri from 'vscode-uri';\nimport { IconUrl, PluginPackage } from '../common/plugin-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\n\nexport type PluginIconPath = string | Uri | {\n    light: string | Uri,\n    dark: string | Uri\n};\nexport namespace PluginIconPath {\n    export function toUrl(iconPath: PluginIconPath | undefined, plugin: Plugin): IconUrl | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        if (typeof iconPath === 'object' && 'light' in iconPath) {\n            return {\n                light: asString(iconPath.light, plugin),\n                dark: asString(iconPath.dark, plugin)\n            };\n        }\n        return asString(iconPath, plugin);\n    }\n    export function asString(arg: string | Uri, plugin: Plugin): string {\n        arg = arg instanceof Uri && arg.scheme === 'file' ? arg.fsPath : arg;\n        if (typeof arg !== 'string') {\n            return arg.toString(true);\n        }\n        const { packagePath } = plugin.rawModel;\n        const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n        const normalizedPath = path.normalize(absolutePath);\n        const relativePath = path.relative(packagePath, normalizedPath);\n        return PluginPackage.toPluginUrl(plugin.rawModel, relativePath);\n    }\n}\n","module.exports = require(\"child_process\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from './socket';\nexport * from './reader';\nexport * from './writer';\nexport * from './connection';\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n\nimport { DataCallback, AbstractMessageReader } from \"vscode-jsonrpc/lib/messageReader\";\nimport { IWebSocket } from \"./socket\";\n\nexport class WebSocketMessageReader extends AbstractMessageReader {\n\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor(protected readonly socket: IWebSocket) {\n        super();\n        this.socket.onMessage(message =>\n            this.readMessage(message)\n        );\n        this.socket.onError(error =>\n            this.fireError(error)\n        );\n        this.socket.onClose((code, reason) => {\n            if (code !== 1000) {\n                const error: Error = {\n                    name: '' + code,\n                    message: `Error during socket reconnect: code = ${code}, reason = ${reason}`\n                };\n                this.fireError(error);\n            }\n            this.fireClose();\n        });\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n\n    protected readMessage(message: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    protected fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    protected fireClose(): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n\nimport { Message } from \"vscode-jsonrpc/lib/messages\";\nimport { AbstractMessageWriter } from \"vscode-jsonrpc/lib/messageWriter\";\nimport { IWebSocket } from \"./socket\";\n\nexport class WebSocketMessageWriter extends AbstractMessageWriter {\n\n    protected errorCount = 0;\n\n    constructor(protected readonly socket: IWebSocket) {\n        super();\n    }\n\n    write(msg: Message): void {\n        try {\n            const content = JSON.stringify(msg);\n            this.socket.send(content);\n        } catch (e) {\n            this.errorCount++;\n            this.fireError(e, msg, this.errorCount);\n        }\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Logger } from \"vscode-jsonrpc\";\n\nexport class ConsoleLogger implements Logger {\n    public error(message: string): void {\n        console.error(message);\n    }\n\n    public warn(message: string): void {\n        console.warn(message);\n    }\n\n    public info(message: string): void {\n        console.info(message);\n    }\n\n    public log(message: string): void {\n        console.log(message);\n    }\n\n    public debug(message: string): void {\n        console.debug(message);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable } from './disposable-util';\nimport { PluginMessageReader } from './plugin-message-reader';\nimport { PluginMessageWriter } from './plugin-message-writer';\nimport { MessageReader, MessageWriter, Message } from 'vscode-jsonrpc';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\n\n/**\n * The interface for describing the connection between plugins and main side.\n */\nexport interface Connection extends Disposable {\n    readonly reader: MessageReader;\n    readonly writer: MessageWriter;\n    /**\n     * Allows to forward messages to another connection.\n     *\n     * @param to the connection to forward messages\n     * @param map the function in which the message can be changed before forwarding\n     */\n    forward(to: Connection, map?: (message: Message) => Message): void;\n}\n\n/**\n * The container for message reader and writer which can be used to create connection between plugins and main side.\n */\nexport class PluginConnection implements Connection {\n    constructor(\n        readonly reader: PluginMessageReader,\n        readonly writer: PluginMessageWriter,\n        readonly dispose: () => void) {\n    }\n\n    forward(to: Connection, map: (message: Message) => Message = message => message): void {\n        this.reader.listen(input => {\n            const output = map(input);\n            to.writer.write(output);\n        });\n    }\n}\n\n/**\n * [IWebSocket](#IWebSocket) implementation over RPC.\n */\nexport class PluginWebSocketChannel implements IWebSocket {\n    constructor(protected readonly connection: PluginConnection) { }\n\n    send(content: string): void {\n        this.connection.writer.write(content);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(cb: (data: any) => void): void {\n        this.connection.reader.listen(cb);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onError(cb: (reason: any) => void): void {\n        this.connection.reader.onError(e => cb(e));\n    }\n\n    onClose(cb: (code: number, reason: string) => void): void {\n        this.connection.reader.onClose(() => cb(-1, 'closed'));\n    }\n\n    dispose(): void {\n        this.connection.dispose();\n    }\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocolImpl } from '../../../common/rpc-protocol';\nimport { PluginManagerExtImpl } from '../../../plugin/plugin-manager';\nimport { MAIN_RPC_CONTEXT, Plugin, emptyPlugin } from '../../../common/plugin-api-rpc';\nimport { createAPIFactory } from '../../../plugin/plugin-context';\nimport { getPluginId, PluginMetadata, PluginPackage } from '../../../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { PreferenceRegistryExtImpl } from '../../../plugin/preference-registry';\nimport { ExtPluginApi } from '../../../common/plugin-ext-api-contribution';\nimport { createDebugExtStub } from './debug-stub';\nimport { EditorsAndDocumentsExtImpl } from '../../../plugin/editors-and-documents';\nimport { WorkspaceExtImpl } from '../../../plugin/workspace';\nimport { MessageRegistryExt } from '../../../plugin/message-registry';\nimport { WorkerEnvExtImpl } from './worker-env-ext';\nimport { ClipboardExt } from '../../../plugin/clipboard-ext';\nimport { KeyValueStorageProxy } from '../../../plugin/plugin-storage';\nimport { WebviewsExtImpl } from '../../../plugin/webviews';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ctx = self as any;\n\nconst pluginsApiImpl = new Map<string, typeof theia>();\nconst pluginsModulesNames = new Map<string, Plugin>();\n\nconst emitter = new Emitter();\nconst rpc = new RPCProtocolImpl({\n    onMessage: emitter.event,\n    send: (m: {}) => {\n        ctx.postMessage(m);\n    }\n});\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\naddEventListener('message', (message: any) => {\n    emitter.fire(message.data);\n});\nfunction initialize(contextPath: string, pluginMetadata: PluginMetadata): void {\n    ctx.importScripts('/context/' + contextPath);\n}\nconst envExt = new WorkerEnvExtImpl(rpc);\nconst storageProxy = new KeyValueStorageProxy(rpc);\nconst editorsAndDocuments = new EditorsAndDocumentsExtImpl(rpc);\nconst messageRegistryExt = new MessageRegistryExt(rpc);\nconst workspaceExt = new WorkspaceExtImpl(rpc, editorsAndDocuments, messageRegistryExt);\nconst preferenceRegistryExt = new PreferenceRegistryExtImpl(rpc, workspaceExt);\nconst debugExt = createDebugExtStub(rpc);\nconst clipboardExt = new ClipboardExt(rpc);\nconst webviewExt = new WebviewsExtImpl(rpc, workspaceExt);\n\nconst pluginManager = new PluginManagerExtImpl({\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any {\n        if (isElectron()) {\n            ctx.importScripts(plugin.pluginPath);\n        } else {\n            ctx.importScripts('/hostedPlugin/' + getPluginId(plugin.model) + '/' + plugin.pluginPath);\n        }\n\n        if (plugin.lifecycle.frontendModuleName) {\n            if (!ctx[plugin.lifecycle.frontendModuleName]) {\n                console.error(`WebWorker: Cannot start plugin \"${plugin.model.name}\". Frontend plugin not found: \"${plugin.lifecycle.frontendModuleName}\"`);\n                return;\n            }\n            return ctx[plugin.lifecycle.frontendModuleName];\n        }\n    },\n    init(rawPluginData: PluginMetadata[]): [Plugin[], Plugin[]] {\n        const result: Plugin[] = [];\n        const foreign: Plugin[] = [];\n        for (const plg of rawPluginData) {\n            const pluginModel = plg.model;\n            const pluginLifecycle = plg.lifecycle;\n            if (pluginModel.entryPoint!.frontend) {\n                let frontendInitPath = pluginLifecycle.frontendInitPath;\n                if (frontendInitPath) {\n                    initialize(frontendInitPath, plg);\n                } else {\n                    frontendInitPath = '';\n                }\n                const plugin: Plugin = {\n                    pluginPath: pluginModel.entryPoint.frontend!,\n                    pluginFolder: pluginModel.packagePath,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    get rawModel(): PluginPackage {\n                        throw new Error('not supported');\n                    }\n                };\n                result.push(plugin);\n                const apiImpl = apiFactory(plugin);\n                pluginsApiImpl.set(plugin.model.id, apiImpl);\n                pluginsModulesNames.set(plugin.lifecycle.frontendModuleName!, plugin);\n            } else {\n                foreign.push({\n                    pluginPath: pluginModel.entryPoint.backend!,\n                    pluginFolder: pluginModel.packagePath,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    get rawModel(): PluginPackage {\n                        throw new Error('not supported');\n                    }\n                });\n            }\n        }\n\n        return [result, foreign];\n    },\n    initExtApi(extApi: ExtPluginApi[]): void {\n        for (const api of extApi) {\n            try {\n                if (api.frontendExtApi) {\n                    ctx.importScripts(api.frontendExtApi.initPath);\n                    ctx[api.frontendExtApi.initVariable][api.frontendExtApi.initFunction](rpc, pluginsModulesNames);\n                }\n\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n}, envExt, storageProxy, preferenceRegistryExt, webviewExt, rpc);\n\nconst apiFactory = createAPIFactory(\n    rpc,\n    pluginManager,\n    envExt,\n    debugExt,\n    preferenceRegistryExt,\n    editorsAndDocuments,\n    workspaceExt,\n    messageRegistryExt,\n    clipboardExt,\n    webviewExt\n);\nlet defaultApi: typeof theia;\n\nconst handler = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get: (target: any, name: string) => {\n        const plugin = pluginsModulesNames.get(name);\n        if (plugin) {\n            const apiImpl = pluginsApiImpl.get(plugin.model.id);\n            return apiImpl;\n        }\n\n        if (!defaultApi) {\n            defaultApi = apiFactory(emptyPlugin);\n        }\n\n        return defaultApi;\n    }\n};\nctx['theia'] = new Proxy(Object.create(null), handler);\n\nrpc.set(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT, pluginManager);\nrpc.set(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT, editorsAndDocuments);\nrpc.set(MAIN_RPC_CONTEXT.WORKSPACE_EXT, workspaceExt);\nrpc.set(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT, preferenceRegistryExt);\nrpc.set(MAIN_RPC_CONTEXT.WEBVIEWS_EXT, webviewExt);\n\nfunction isElectron(): boolean {\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The namespace for random number related functionality.\n */\nvar Random;\n(function (Random) {\n    /**\n     * A function which generates random bytes.\n     *\n     * @param buffer - The `Uint8Array` to fill with random bytes.\n     *\n     * #### Notes\n     * A cryptographically strong random number generator will be used if\n     * available. Otherwise, `Math.random` will be used as a fallback for\n     * randomness.\n     *\n     * The following RNGs are supported, listed in order of precedence:\n     *   - `window.crypto.getRandomValues`\n     *   - `window.msCrypto.getRandomValues`\n     *   - `require('crypto').randomFillSync\n     *   - `require('crypto').randomBytes\n     *   - `Math.random`\n     */\n    Random.getRandomValues = (function () {\n        // Look up the crypto module if available.\n        var crypto = ((typeof window !== 'undefined' && (window.crypto || window.msCrypto)) ||\n            (typeof require !== 'undefined' && require('crypto')) || null);\n        // Modern browsers and IE 11\n        if (crypto && typeof crypto.getRandomValues === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.getRandomValues(buffer);\n            };\n        }\n        // Node 7+\n        if (crypto && typeof crypto.randomFillSync === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.randomFillSync(buffer);\n            };\n        }\n        // Node 0.10+\n        if (crypto && typeof crypto.randomBytes === 'function') {\n            return function getRandomValues(buffer) {\n                var bytes = crypto.randomBytes(buffer.length);\n                for (var i = 0, n = bytes.length; i < n; ++i) {\n                    buffer[i] = bytes[i];\n                }\n            };\n        }\n        // Fallback\n        return function getRandomValues(buffer) {\n            var value = 0;\n            for (var i = 0, n = buffer.length; i < n; ++i) {\n                if (i % 4 === 0) {\n                    value = Math.random() * 0xFFFFFFFF >>> 0;\n                }\n                buffer[i] = value & 0xFF;\n                value >>>= 8;\n            }\n        };\n    })();\n})(Random = exports.Random || (exports.Random = {}));\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    NotificationMain,\n    MainMessageType,\n    MessageRegistryMain,\n    PluginManagerExt,\n    PluginManager,\n    Plugin,\n    PluginAPI,\n    ConfigStorage,\n    PluginManagerInitializeParams,\n    PluginManagerStartParams\n} from '../common/plugin-api-rpc';\nimport { PluginMetadata } from '../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { join } from 'path';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { EnvExtImpl } from './env';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { Memento, KeyValueStorageProxy } from './plugin-storage';\nimport { ExtPluginApi } from '../common/plugin-ext-api-contribution';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { WebviewsExtImpl } from './webviews';\n\nexport interface PluginHost {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any;\n\n    init(data: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> | [Plugin[], Plugin[]];\n\n    initExtApi(extApi: ExtPluginApi[]): void;\n\n    loadTests?(): Promise<void>;\n}\n\ninterface StopFn {\n    (): void | Promise<void>;\n}\n\ninterface StopOptions {\n    /**\n     * if terminating then stopping will ignore all errors,\n     * since the main side is already gone and any requests are likely to fail\n     * or hang\n     */\n    terminating: boolean\n}\n\nclass ActivatedPlugin {\n    constructor(public readonly pluginContext: theia.PluginContext,\n        public readonly exports?: PluginAPI,\n        public readonly stopFn?: StopFn) {\n    }\n}\n\nexport class PluginManagerExtImpl implements PluginManagerExt, PluginManager {\n\n    static SUPPORTED_ACTIVATION_EVENTS = new Set([\n        '*',\n        'onLanguage',\n        'onCommand',\n        'onDebug', 'onDebugInitialConfigurations', 'onDebugResolve', 'onDebugAdapterProtocolTracker',\n        'workspaceContains',\n        'onView',\n        'onUri',\n        'onWebviewPanel'\n    ]);\n\n    private readonly registry = new Map<string, Plugin>();\n    private readonly activations = new Map<string, (() => Promise<void>)[] | undefined>();\n    /** promises to whether loading each plugin has been successful */\n    private readonly loadedPlugins = new Map<string, Promise<boolean>>();\n    private readonly activatedPlugins = new Map<string, ActivatedPlugin>();\n    private readonly pluginActivationPromises = new Map<string, Deferred<void>>();\n    private readonly pluginContextsMap = new Map<string, theia.PluginContext>();\n\n    private onDidChangeEmitter = new Emitter<void>();\n    private messageRegistryProxy: MessageRegistryMain;\n    private notificationMain: NotificationMain;\n    protected fireOnDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    constructor(\n        private readonly host: PluginHost,\n        private readonly envExt: EnvExtImpl,\n        private readonly storageProxy: KeyValueStorageProxy,\n        private readonly preferencesManager: PreferenceRegistryExtImpl,\n        private readonly webview: WebviewsExtImpl,\n        private readonly rpc: RPCProtocol\n    ) {\n        this.messageRegistryProxy = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN);\n        this.notificationMain = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async $stop(pluginId?: string): Promise<void> {\n        if (!pluginId) {\n            return this.stopAll();\n        }\n        this.registry.delete(pluginId);\n        this.pluginActivationPromises.delete(pluginId);\n        this.pluginContextsMap.delete(pluginId);\n        this.loadedPlugins.delete(pluginId);\n        const plugin = this.activatedPlugins.get(pluginId);\n        if (!plugin) {\n            return;\n        }\n        this.activatedPlugins.delete(pluginId);\n        return this.stopPlugin(pluginId, plugin);\n    }\n\n    async terminate(): Promise<void> {\n        return this.stopAll({ terminating: true });\n    }\n\n    protected async stopAll(options: StopOptions = { terminating: false }): Promise<void> {\n        const promises = [];\n        for (const [id, plugin] of this.activatedPlugins) {\n            promises.push(this.stopPlugin(id, plugin, options));\n        }\n\n        this.registry.clear();\n        this.loadedPlugins.clear();\n        this.activatedPlugins.clear();\n        this.pluginActivationPromises.clear();\n        this.pluginContextsMap.clear();\n        await Promise.all(promises);\n    }\n\n    protected async stopPlugin(id: string, plugin: ActivatedPlugin, options: StopOptions = { terminating: false }): Promise<void> {\n        let result;\n        if (plugin.stopFn) {\n            try {\n                result = plugin.stopFn();\n            } catch (e) {\n                if (!options.terminating) {\n                    console.error(`[${id}]: failed to stop:`, e);\n                }\n            }\n        }\n\n        const pluginContext = plugin.pluginContext;\n        if (pluginContext) {\n            for (const subscription of pluginContext.subscriptions) {\n                try {\n                    subscription.dispose();\n                } catch (e) {\n                    if (!options.terminating) {\n                        console.error(`[${id}]: failed to dispose subscription:`, e);\n                    }\n                }\n            }\n        }\n\n        try {\n            await result;\n        } catch (e) {\n            if (!options.terminating) {\n                console.error(`[${id}]: failed to stop:`, e);\n            }\n        }\n    }\n\n    async $init(params: PluginManagerInitializeParams): Promise<void> {\n        this.storageProxy.init(params.globalState, params.workspaceState);\n\n        this.envExt.setQueryParameters(params.env.queryParams);\n        this.envExt.setLanguage(params.env.language);\n        this.envExt.setShell(params.env.shell);\n\n        this.preferencesManager.init(params.preferences);\n\n        if (params.extApi) {\n            this.host.initExtApi(params.extApi);\n        }\n\n        this.webview.init(params.webview);\n    }\n\n    async $start(params: PluginManagerStartParams): Promise<void> {\n        const [plugins, foreignPlugins] = await this.host.init(params.plugins);\n        // add foreign plugins\n        for (const plugin of foreignPlugins) {\n            this.registerPlugin(plugin, params.configStorage);\n        }\n        // add own plugins, before initialization\n        for (const plugin of plugins) {\n            this.registerPlugin(plugin, params.configStorage);\n        }\n\n        // run eager plugins\n        await this.$activateByEvent('*');\n        for (const activationEvent of params.activationEvents) {\n            await this.$activateByEvent(activationEvent);\n        }\n\n        if (this.host.loadTests) {\n            return this.host.loadTests();\n        }\n\n        this.fireOnDidChange();\n    }\n\n    protected registerPlugin(plugin: Plugin, configStorage: ConfigStorage): void {\n        this.registry.set(plugin.model.id, plugin);\n        if (plugin.pluginPath && Array.isArray(plugin.rawModel.activationEvents)) {\n            const activation = async () => {\n                const title = `Activating ${plugin.model.displayName || plugin.model.name}`;\n                const id = await this.notificationMain.$startProgress({ title, location: 'window' });\n                await this.loadPlugin(plugin, configStorage);\n                this.notificationMain.$stopProgress(id);\n            };\n            // an internal activation event is a subject to change\n            this.setActivation(`onPlugin:${plugin.model.id}`, activation);\n            const unsupportedActivationEvents = plugin.rawModel.activationEvents.filter(e => !PluginManagerExtImpl.SUPPORTED_ACTIVATION_EVENTS.has(e.split(':')[0]));\n            if (unsupportedActivationEvents.length) {\n                console.warn(`Unsupported activation events: ${unsupportedActivationEvents.join(', ')}, please open an issue: https://github.com/eclipse-theia/theia/issues/new`);\n                console.warn(`${plugin.model.id} extension will be activated eagerly.`);\n                this.setActivation('*', activation);\n            } else {\n                for (let activationEvent of plugin.rawModel.activationEvents) {\n                    if (activationEvent === 'onUri') {\n                        activationEvent = `onUri:theia://${plugin.model.id}`;\n                    }\n                    this.setActivation(activationEvent, activation);\n                }\n            }\n        }\n    }\n    protected setActivation(activationEvent: string, activation: () => Promise<void>): void {\n        const activations = this.activations.get(activationEvent) || [];\n        activations.push(activation);\n        this.activations.set(activationEvent, activations);\n    }\n\n    protected async loadPlugin(plugin: Plugin, configStorage: ConfigStorage, visited = new Set<string>()): Promise<boolean> {\n        // in order to break cycles\n        if (visited.has(plugin.model.id)) {\n            return true;\n        }\n        visited.add(plugin.model.id);\n\n        let loading = this.loadedPlugins.get(plugin.model.id);\n        if (!loading) {\n            loading = (async () => {\n                if (plugin.rawModel.extensionDependencies) {\n                    for (const dependencyId of plugin.rawModel.extensionDependencies) {\n                        const dependency = this.registry.get(dependencyId.toLowerCase());\n                        const id = plugin.model.displayName || plugin.model.id;\n                        if (dependency) {\n                            const depId = dependency.model.displayName || dependency.model.id;\n                            const loadedSuccessfully = await this.loadPlugin(dependency, configStorage, visited);\n                            if (!loadedSuccessfully) {\n                                const message = `Cannot activate extension '${id}' because it depends on extension '${depId}', which failed to activate.`;\n                                this.messageRegistryProxy.$showMessage(MainMessageType.Error, message, {}, []);\n                                return false;\n                            }\n                        } else {\n                            const message = `Cannot activate the '${id}' extension because it depends on the '${dependencyId}' extension, which is not installed.`;\n                            this.messageRegistryProxy.$showMessage(MainMessageType.Error, message, {}, []);\n                            console.warn(message);\n                            return false;\n                        }\n                    }\n                }\n\n                let pluginMain = this.host.loadPlugin(plugin);\n                // see https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L372-L376\n                pluginMain = pluginMain || {};\n                return this.startPlugin(plugin, configStorage, pluginMain);\n            })();\n        }\n        this.loadedPlugins.set(plugin.model.id, loading);\n        return loading;\n    }\n\n    async $updateStoragePath(path: string | undefined): Promise<void> {\n        this.pluginContextsMap.forEach((pluginContext: theia.PluginContext, pluginId: string) => {\n            pluginContext.storagePath = path ? join(path, pluginId) : undefined;\n        });\n    }\n\n    async $activateByEvent(activationEvent: string): Promise<void> {\n        const activations = this.activations.get(activationEvent);\n        if (!activations) {\n            return;\n        }\n        this.activations.set(activationEvent, undefined);\n        while (activations.length) {\n            await activations.pop()!();\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async startPlugin(plugin: Plugin, configStorage: ConfigStorage, pluginMain: any): Promise<boolean> {\n        const subscriptions: theia.Disposable[] = [];\n        const asAbsolutePath = (relativePath: string): string => join(plugin.pluginFolder, relativePath);\n        const logPath = join(configStorage.hostLogPath, plugin.model.id); // todo check format\n        const storagePath = configStorage.hostStoragePath ? join(configStorage.hostStoragePath, plugin.model.id) : undefined;\n        const globalStoragePath = join(configStorage.hostGlobalStoragePath, plugin.model.id);\n        const pluginContext: theia.PluginContext = {\n            extensionPath: plugin.pluginFolder,\n            globalState: new Memento(plugin.model.id, true, this.storageProxy),\n            workspaceState: new Memento(plugin.model.id, false, this.storageProxy),\n            subscriptions: subscriptions,\n            asAbsolutePath: asAbsolutePath,\n            logPath: logPath,\n            storagePath: storagePath,\n            globalStoragePath: globalStoragePath\n        };\n        this.pluginContextsMap.set(plugin.model.id, pluginContext);\n\n        let stopFn = undefined;\n        if (typeof pluginMain[plugin.lifecycle.stopMethod] === 'function') {\n            stopFn = pluginMain[plugin.lifecycle.stopMethod];\n        }\n        const id = plugin.model.displayName || plugin.model.id;\n        if (typeof pluginMain[plugin.lifecycle.startMethod] === 'function') {\n            try {\n                const pluginExport = await pluginMain[plugin.lifecycle.startMethod].apply(getGlobal(), [pluginContext]);\n                this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginExport, stopFn));\n\n                // resolve activation promise\n                if (this.pluginActivationPromises.has(plugin.model.id)) {\n                    this.pluginActivationPromises.get(plugin.model.id)!.resolve();\n                    this.pluginActivationPromises.delete(plugin.model.id);\n                }\n            } catch (err) {\n                if (this.pluginActivationPromises.has(plugin.model.id)) {\n                    this.pluginActivationPromises.get(plugin.model.id)!.reject(err);\n                }\n                this.messageRegistryProxy.$showMessage(MainMessageType.Error, `Activating extension ${id} failed: ${err.message}.`, {}, []);\n                console.error(`Error on activation of ${plugin.model.name}`, err);\n                return false;\n            }\n        } else {\n            // https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L400-L401\n            console.log(`plugin ${id}, ${plugin.lifecycle.startMethod} method is undefined so the module is the extension's exports`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginMain));\n        }\n        return true;\n    }\n\n    getAllPlugins(): Plugin[] {\n        return Array.from(this.registry.values());\n    }\n    getPluginExport(pluginId: string): PluginAPI | undefined {\n        const activePlugin = this.activatedPlugins.get(pluginId);\n        if (activePlugin) {\n            return activePlugin.exports;\n        }\n        return undefined;\n    }\n\n    getPluginById(pluginId: string): Plugin | undefined {\n        return this.registry.get(pluginId);\n    }\n\n    isRunning(pluginId: string): boolean {\n        return this.registry.has(pluginId);\n    }\n\n    isActive(pluginId: string): boolean {\n        return this.activatedPlugins.has(pluginId);\n    }\n\n    activatePlugin(pluginId: string): PromiseLike<void> {\n        if (this.pluginActivationPromises.has(pluginId)) {\n            return this.pluginActivationPromises.get(pluginId)!.promise;\n        }\n\n        const deferred = new Deferred<void>();\n\n        if (this.activatedPlugins.get(pluginId)) {\n            deferred.resolve();\n        }\n        this.pluginActivationPromises.set(pluginId, deferred);\n        return deferred.promise;\n    }\n\n    get onDidChange(): theia.Event<void> {\n        return this.onDidChangeEmitter.event;\n    }\n\n}\n\n// for electron\nfunction getGlobal(): Window | NodeJS.Global | null {\n    return typeof self === 'undefined' ? typeof global === 'undefined' ? null : global : self;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* tslint:disable:typedef */\n\nimport * as theia from '@theia/plugin';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { QuickOpenExtImpl } from './quick-open';\nimport {\n    MAIN_RPC_CONTEXT,\n    Plugin as InternalPlugin,\n    PluginManager,\n    PluginAPIFactory,\n    MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageRegistryExt } from './message-registry';\nimport { StatusBarMessageRegistryExt } from './status-bar-message-registry';\nimport { WindowStateExtImpl } from './window-state';\nimport { WorkspaceExtImpl } from './workspace';\nimport { EnvExtImpl } from './env';\nimport { QueryParameters } from '../common/env';\nimport {\n    ConfigurationTarget,\n    Disposable,\n    Position,\n    Range,\n    Selection,\n    ViewColumn,\n    TextEditorSelectionChangeKind,\n    EndOfLine,\n    SnippetString,\n    ThemeColor,\n    ThemeIcon,\n    TextEditorRevealType,\n    TextEditorLineNumbersStyle,\n    DecorationRangeBehavior,\n    OverviewRulerLane,\n    StatusBarAlignment,\n    RelativePattern,\n    IndentAction,\n    CompletionItem,\n    CompletionItemKind,\n    CompletionList,\n    TextEdit,\n    CompletionTriggerKind,\n    Diagnostic,\n    DiagnosticRelatedInformation,\n    DiagnosticSeverity,\n    DiagnosticTag,\n    Location,\n    Progress,\n    ProgressOptions,\n    ProgressLocation,\n    ParameterInformation,\n    SignatureInformation,\n    SignatureHelp,\n    SignatureHelpTriggerKind,\n    Hover,\n    DocumentHighlightKind,\n    DocumentHighlight,\n    DocumentLink,\n    CodeLens,\n    CodeActionKind,\n    CodeActionTrigger,\n    TextDocumentSaveReason,\n    CodeAction,\n    TreeItem,\n    TreeItemCollapsibleState,\n    DocumentSymbol,\n    WorkspaceEdit,\n    SymbolInformation,\n    FileType,\n    FileChangeType,\n    ShellQuoting,\n    ShellExecution,\n    ProcessExecution,\n    TaskScope,\n    TaskPanelKind,\n    TaskRevealKind,\n    TaskGroup,\n    Task,\n    DebugAdapterExecutable,\n    DebugAdapterServer,\n    Breakpoint,\n    SourceBreakpoint,\n    FunctionBreakpoint,\n    FoldingRange,\n    FoldingRangeKind,\n    Color,\n    ColorInformation,\n    ColorPresentation,\n    OperatingSystem,\n    WebviewPanelTargetArea,\n    FileSystemError,\n    CommentThreadCollapsibleState,\n    QuickInputButtons,\n    CommentMode,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall\n} from './types-impl';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorsExtImpl } from './text-editors';\nimport { DocumentsExtImpl } from './documents';\nimport Uri from 'vscode-uri';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { OutputChannelRegistryExtImpl } from './output-channel-registry';\nimport { TerminalServiceExtImpl, TerminalExtImpl } from './terminal-ext';\nimport { LanguagesExtImpl } from './languages';\nimport { fromDocumentSelector, pluginToPluginInfo } from './type-converters';\nimport { DialogsExtImpl } from './dialogs';\nimport { NotificationExtImpl } from './notification';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { score } from '@theia/languages/lib/common/language-selector';\nimport { MarkdownString } from './markdown-string';\nimport { TreeViewsExtImpl } from './tree/tree-views';\nimport { LanguagesContributionExtImpl } from './languages-contribution-ext';\nimport { ConnectionExtImpl } from './connection-ext';\nimport { TasksExtImpl } from './tasks/tasks';\nimport { DebugExtImpl } from './node/debug/debug';\nimport { FileSystemExtImpl } from './file-system';\nimport { QuickPick, QuickPickItem } from '@theia/plugin';\nimport { ScmExtImpl } from './scm';\nimport { DecorationProvider, LineChange } from '@theia/plugin';\nimport { DecorationsExtImpl } from './decorations';\nimport { TextEditorExt } from './text-editor';\nimport { ClipboardExt } from './clipboard-ext';\nimport { WebviewsExtImpl } from './webviews';\n\nexport function createAPIFactory(\n    rpc: RPCProtocol,\n    pluginManager: PluginManager,\n    envExt: EnvExtImpl,\n    debugExt: DebugExtImpl,\n    preferenceRegistryExt: PreferenceRegistryExtImpl,\n    editorsAndDocumentsExt: EditorsAndDocumentsExtImpl,\n    workspaceExt: WorkspaceExtImpl,\n    messageRegistryExt: MessageRegistryExt,\n    clipboard: ClipboardExt,\n    webviewExt: WebviewsExtImpl\n): PluginAPIFactory {\n\n    const commandRegistry = rpc.set(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT, new CommandRegistryImpl(rpc));\n    const quickOpenExt = rpc.set(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT, new QuickOpenExtImpl(rpc));\n    const dialogsExt = new DialogsExtImpl(rpc);\n    const windowStateExt = rpc.set(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT, new WindowStateExtImpl(rpc));\n    const notificationExt = rpc.set(MAIN_RPC_CONTEXT.NOTIFICATION_EXT, new NotificationExtImpl(rpc));\n    const editors = rpc.set(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT, new TextEditorsExtImpl(rpc, editorsAndDocumentsExt));\n    const documents = rpc.set(MAIN_RPC_CONTEXT.DOCUMENTS_EXT, new DocumentsExtImpl(rpc, editorsAndDocumentsExt));\n    const statusBarMessageRegistryExt = new StatusBarMessageRegistryExt(rpc);\n    const terminalExt = rpc.set(MAIN_RPC_CONTEXT.TERMINAL_EXT, new TerminalServiceExtImpl(rpc));\n    const outputChannelRegistryExt = rpc.set(MAIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_EXT, new OutputChannelRegistryExtImpl(rpc));\n    const languagesExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_EXT, new LanguagesExtImpl(rpc, documents, commandRegistry));\n    const treeViewsExt = rpc.set(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT, new TreeViewsExtImpl(rpc, commandRegistry));\n    const tasksExt = rpc.set(MAIN_RPC_CONTEXT.TASKS_EXT, new TasksExtImpl(rpc));\n    const connectionExt = rpc.set(MAIN_RPC_CONTEXT.CONNECTION_EXT, new ConnectionExtImpl(rpc));\n    const languagesContributionExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_CONTRIBUTION_EXT, new LanguagesContributionExtImpl(rpc, connectionExt));\n    const fileSystemExt = rpc.set(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT, new FileSystemExtImpl(rpc));\n    const scmExt = rpc.set(MAIN_RPC_CONTEXT.SCM_EXT, new ScmExtImpl(rpc, commandRegistry));\n    const decorationsExt = rpc.set(MAIN_RPC_CONTEXT.DECORATIONS_EXT, new DecorationsExtImpl(rpc));\n    rpc.set(MAIN_RPC_CONTEXT.DEBUG_EXT, debugExt);\n\n    return function (plugin: InternalPlugin): typeof theia {\n        const commands: typeof theia.commands = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerCommand(command: theia.CommandDescription, handler?: <T>(...args: any[]) => T | Thenable<T | undefined>, thisArg?: any): Disposable {\n                return commandRegistry.registerCommand(command, handler, thisArg);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            executeCommand<T>(commandId: string, ...args: any[]): PromiseLike<T | undefined> {\n                return commandRegistry.executeCommand<T>(commandId, ...args);\n            },\n            registerTextEditorCommand(command: string, handler: (textEditor: theia.TextEditor, edit: theia.TextEditorEdit, ...arg: any[]) => void, thisArg?: any): Disposable {\n                return commandRegistry.registerCommand({ id: command }, (...args: any[]): any => {\n                    const activeTextEditor = editors.getActiveEditor();\n                    if (!activeTextEditor) {\n                        console.warn('Cannot execute ' + command + ' because there is no active text editor.');\n                        return undefined;\n                    }\n\n                    return activeTextEditor.edit((edit: theia.TextEditorEdit) => {\n                        args.unshift(activeTextEditor, edit);\n                        handler.apply(thisArg, args);\n                    }).then(result => {\n                        if (!result) {\n                            console.warn('Edits from command ' + command + ' were not applied.');\n                        }\n                    }, err => {\n                        console.warn('An error occurred while running command ' + command, err);\n                    });\n                });\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerHandler(commandId: string, handler: (...args: any[]) => any, thisArg?: any): Disposable {\n                return commandRegistry.registerHandler(commandId, handler, thisArg);\n            },\n            getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n                return commandRegistry.getKeyBinding(commandId);\n            },\n            getCommands(filterInternal: boolean = false): PromiseLike<string[]> {\n                return commandRegistry.getCommands(filterInternal);\n            },\n            registerDiffInformationCommand(command: string, callback: (diff: LineChange[], ...args: any[]) => any, thisArg?: any): Disposable {\n                // Dummy implementation.\n                return new Disposable(() => { });\n            }\n        };\n\n        const { onDidChangeActiveTerminal, onDidCloseTerminal, onDidOpenTerminal } = terminalExt;\n        const showInformationMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Info);\n        const showWarningMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Warning);\n        const showErrorMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Error);\n        const window: typeof theia.window = {\n\n            get activeTerminal(): TerminalExtImpl | undefined {\n                return terminalExt.activeTerminal;\n            },\n            get activeTextEditor(): TextEditorExt | undefined {\n                return editors.getActiveEditor();\n            },\n            get visibleTextEditors(): theia.TextEditor[] {\n                return editors.getVisibleTextEditors();\n            },\n            get terminals(): TerminalExtImpl[] {\n                return terminalExt.terminals;\n            },\n            onDidChangeActiveTerminal,\n            onDidChangeActiveTextEditor(listener, thisArg?, disposables?) {\n                return editors.onDidChangeActiveTextEditor(listener, thisArg, disposables);\n            },\n            onDidChangeVisibleTextEditors(listener, thisArg?, disposables?) {\n                return editors.onDidChangeVisibleTextEditors(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorSelection(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorOptions(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorOptions(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorViewColumn(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorViewColumn(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            async showTextDocument(documentArg: theia.TextDocument | Uri,\n                columnOrOptions?: theia.TextDocumentShowOptions | theia.ViewColumn,\n                preserveFocus?: boolean\n            ): Promise<theia.TextEditor> {\n                let documentOptions: theia.TextDocumentShowOptions | undefined;\n                const uri: Uri = documentArg instanceof Uri ? documentArg : documentArg.uri;\n                if (typeof columnOrOptions === 'number') {\n                    documentOptions = {\n                        viewColumn: columnOrOptions\n                    };\n                } else if (columnOrOptions && (columnOrOptions.preserveFocus || columnOrOptions.preview || columnOrOptions.selection || columnOrOptions.viewColumn)) {\n                    documentOptions = {\n                        ...columnOrOptions\n                    };\n                }\n                if (preserveFocus) {\n                    if (documentOptions) {\n                        documentOptions.preserveFocus = preserveFocus;\n                    } else {\n                        documentOptions = { preserveFocus };\n                    }\n                }\n                await documents.showDocument(uri, documentOptions);\n                const textEditor = editors.getVisibleTextEditors().find(editor => editor.document.uri.toString() === uri.toString());\n                if (textEditor) {\n                    return Promise.resolve(textEditor);\n                } else {\n                    throw new Error(`Failed to show text document ${documentArg.toString()}`);\n                }\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            showQuickPick(items: any, options: theia.QuickPickOptions, token?: theia.CancellationToken): any {\n                if (token) {\n                    const coreEvent = Object.assign(token.onCancellationRequested, { maxListeners: 0 });\n                    const coreCancellationToken = { isCancellationRequested: token.isCancellationRequested, onCancellationRequested: coreEvent };\n                    return quickOpenExt.showQuickPick(items, options, coreCancellationToken);\n                } else {\n                    return quickOpenExt.showQuickPick(items, options);\n                }\n            },\n            createQuickPick<T extends QuickPickItem>(): QuickPick<T> {\n                return quickOpenExt.createQuickPick(plugin);\n            },\n            showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n                return workspaceExt.pickWorkspaceFolder(options);\n            },\n            showInformationMessage,\n            showWarningMessage,\n            showErrorMessage,\n            showOpenDialog(options: theia.OpenDialogOptions): PromiseLike<Uri[] | undefined> {\n                return dialogsExt.showOpenDialog(options);\n            },\n            showSaveDialog(options: theia.SaveDialogOptions): PromiseLike<Uri | undefined> {\n                return dialogsExt.showSaveDialog(options);\n            },\n            showUploadDialog(options: theia.UploadDialogOptions): PromiseLike<Uri[] | undefined> {\n                return dialogsExt.showUploadDialog(options);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n                return statusBarMessageRegistryExt.setStatusBarMessage(text, arg);\n            },\n            showInputBox(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined> {\n                if (token) {\n                    const coreEvent = Object.assign(token.onCancellationRequested, { maxListeners: 0 });\n                    const coreCancellationToken = { isCancellationRequested: token.isCancellationRequested, onCancellationRequested: coreEvent };\n                    return quickOpenExt.showInput(options, coreCancellationToken);\n                } else {\n                    return quickOpenExt.showInput(options);\n                }\n            },\n            createStatusBarItem(alignment?: theia.StatusBarAlignment, priority?: number): theia.StatusBarItem {\n                return statusBarMessageRegistryExt.createStatusBarItem(alignment, priority);\n            },\n            createOutputChannel(name: string): theia.OutputChannel {\n                return outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin));\n            },\n            createWebviewPanel(viewType: string,\n                title: string,\n                showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n                options: theia.WebviewPanelOptions & theia.WebviewOptions = {}): theia.WebviewPanel {\n                return webviewExt.createWebview(viewType, title, showOptions, options, plugin);\n            },\n            registerWebviewPanelSerializer(viewType: string, serializer: theia.WebviewPanelSerializer): theia.Disposable {\n                return webviewExt.registerWebviewPanelSerializer(viewType, serializer, plugin);\n            },\n            get state(): theia.WindowState {\n                return windowStateExt.getWindowState();\n            },\n            onDidChangeWindowState(listener, thisArg?, disposables?): theia.Disposable {\n                return windowStateExt.onDidChangeWindowState(listener, thisArg, disposables);\n            },\n            createTerminal(nameOrOptions: theia.TerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): theia.Terminal {\n                return terminalExt.createTerminal(nameOrOptions, shellPath, shellArgs);\n            },\n            onDidCloseTerminal,\n            onDidOpenTerminal,\n            createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n                return editors.createTextEditorDecorationType(options);\n            },\n            registerTreeDataProvider<T>(viewId: string, treeDataProvider: theia.TreeDataProvider<T>): Disposable {\n                return treeViewsExt.registerTreeDataProvider(plugin, viewId, treeDataProvider);\n            },\n            createTreeView<T>(viewId: string, options: { treeDataProvider: theia.TreeDataProvider<T> }): theia.TreeView<T> {\n                return treeViewsExt.createTreeView(plugin, viewId, options);\n            },\n            withProgress<R>(\n                options: ProgressOptions,\n                task: (progress: Progress<{ message?: string; increment?: number }>, token: theia.CancellationToken) => PromiseLike<R>\n            ): PromiseLike<R> {\n                return notificationExt.withProgress(options, task);\n            },\n            registerDecorationProvider(provider: DecorationProvider): theia.Disposable {\n                return decorationsExt.registerDecorationProvider(provider);\n            },\n            registerUriHandler(handler: theia.UriHandler): theia.Disposable {\n                // TODO ?\n                return new Disposable(() => { });\n            },\n            createInputBox(): theia.InputBox {\n                return quickOpenExt.createInputBox(plugin);\n            }\n        };\n\n        const workspace: typeof theia.workspace = {\n\n            get fs(): theia.FileSystem {\n                return fileSystemExt.fs;\n            },\n\n            get rootPath(): string | undefined {\n                return workspaceExt.rootPath;\n            },\n            get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n                return workspaceExt.workspaceFolders;\n            },\n            get name(): string | undefined {\n                return workspaceExt.name;\n            },\n            onDidChangeWorkspaceFolders(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidChangeWorkspaceFolders(listener, thisArg, disposables);\n            },\n            get textDocuments(): theia.TextDocument[] {\n                return documents.getAllDocumentData().map(data => data.document);\n            },\n            onDidChangeTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidChangeDocument(listener, thisArg, disposables);\n            },\n            onDidCloseTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidRemoveDocument(listener, thisArg, disposables);\n            },\n            onDidOpenTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidAddDocument(listener, thisArg, disposables);\n            },\n            onWillSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onWillSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidSaveTextDocument(listener, thisArg, disposables);\n            },\n            getConfiguration(section?, resource?): theia.WorkspaceConfiguration {\n                return preferenceRegistryExt.getConfiguration(section, resource);\n            },\n            onDidChangeConfiguration(listener, thisArgs?, disposables?): theia.Disposable {\n                return preferenceRegistryExt.onDidChangeConfiguration(listener, thisArgs, disposables);\n            },\n            async openTextDocument(uriOrFileNameOrOptions?: theia.Uri | string | { language?: string; content?: string; }): Promise<theia.TextDocument | undefined> {\n                const options = uriOrFileNameOrOptions as { language?: string; content?: string; };\n\n                let uri: Uri;\n                if (typeof uriOrFileNameOrOptions === 'string') {\n                    uri = Uri.file(uriOrFileNameOrOptions);\n\n                } else if (uriOrFileNameOrOptions instanceof Uri) {\n                    uri = uriOrFileNameOrOptions;\n\n                } else if (!options || typeof options === 'object') {\n                    uri = await documents.createDocumentData(options);\n\n                } else {\n                    return Promise.reject(new Error('illegal argument - uriOrFileNameOrOptions'));\n                }\n\n                const data = await documents.openDocument(uri);\n                return data && data.document;\n            },\n            createFileSystemWatcher(globPattern: theia.GlobPattern,\n                ignoreCreateEvents?: boolean,\n                ignoreChangeEvents?: boolean,\n                ignoreDeleteEvents?: boolean): theia.FileSystemWatcher {\n                return workspaceExt.createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n            },\n            findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number, token?: CancellationToken): PromiseLike<Uri[]> {\n                return workspaceExt.findFiles(include, exclude, maxResults, token);\n            },\n            saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n                return editors.saveAll(includeUntitled);\n            },\n            applyEdit(edit: theia.WorkspaceEdit): PromiseLike<boolean> {\n                return editors.applyWorkspaceEdit(edit);\n            },\n            registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n                return workspaceExt.registerTextDocumentContentProvider(scheme, provider);\n            },\n            registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider): theia.Disposable {\n                return fileSystemExt.registerFileSystemProvider(scheme, provider);\n            },\n            getWorkspaceFolder(uri: theia.Uri): theia.WorkspaceFolder | undefined {\n                return workspaceExt.getWorkspaceFolder(uri);\n            },\n            asRelativePath(pathOrUri: theia.Uri | string, includeWorkspace?: boolean): string | undefined {\n                return workspaceExt.getRelativePath(pathOrUri, includeWorkspace);\n            },\n            updateWorkspaceFolders: (index, deleteCount, ...workspaceFoldersToAdd) =>\n                workspaceExt.updateWorkspaceFolders(index, deleteCount || 0, ...workspaceFoldersToAdd)\n            ,\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasks.registerTaskProvider(type, provider);\n            },\n            // Experimental API https://github.com/eclipse-theia/theia/issues/4167\n            onDidRenameFile(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidRenameFile(listener, thisArg, disposables);\n            },\n            onWillRenameFile(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onWillRenameFile(listener, thisArg, disposables);\n            }\n        };\n\n        const env: typeof theia.env = Object.freeze({\n            get appName(): string { return envExt.appName; },\n            get appRoot(): string { return envExt.appRoot; },\n            get language(): string { return envExt.language; },\n            get machineId(): string { return envExt.machineId; },\n            get sessionId(): string { return envExt.sessionId; },\n            get uriScheme(): string { return envExt.uriScheme; },\n            get shell(): string { return envExt.shell; },\n            clipboard,\n            getEnvVariable(envVarName: string): PromiseLike<string | undefined> {\n                return envExt.getEnvVariable(envVarName);\n            },\n            getQueryParameter(queryParamName: string): string | string[] | undefined {\n                return envExt.getQueryParameter(queryParamName);\n            },\n            getQueryParameters(): QueryParameters {\n                return envExt.getQueryParameters();\n            },\n            getClientOperatingSystem(): PromiseLike<theia.OperatingSystem> {\n                return envExt.getClientOperatingSystem();\n            },\n            openExternal(uri: theia.Uri): PromiseLike<boolean> {\n                return windowStateExt.openUri(uri);\n            },\n            asExternalUri(target: theia.Uri): PromiseLike<theia.Uri> {\n                return windowStateExt.asExternalUri(target);\n            }\n        });\n\n        const languageServer: typeof theia.languageServer = {\n            registerLanguageServerProvider(languageServerInfo: theia.LanguageServerInfo): Disposable {\n                return languagesContributionExt.registerLanguageServerProvider(languageServerInfo);\n            },\n            stop(id: string): void {\n                languagesContributionExt.stop(id);\n            }\n        };\n\n        const languages: typeof theia.languages = {\n            getLanguages(): PromiseLike<string[]> {\n                return languagesExt.getLanguages();\n            },\n            setTextDocumentLanguage(document: theia.TextDocument, languageId: string): PromiseLike<theia.TextDocument> {\n                return languagesExt.changeLanguage(document.uri, languageId);\n            },\n            match(selector: theia.DocumentSelector, document: theia.TextDocument): number {\n                return score(fromDocumentSelector(selector), document.uri.scheme, document.uri.path, document.languageId, true);\n            },\n            get onDidChangeDiagnostics(): theia.Event<theia.DiagnosticChangeEvent> {\n                return languagesExt.onDidChangeDiagnostics;\n            },\n            getDiagnostics(resource?: Uri) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                return <any>languagesExt.getDiagnostics(resource);\n            },\n            createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n                return languagesExt.createDiagnosticCollection(name);\n            },\n            setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n                return languagesExt.setLanguageConfiguration(language, configuration);\n            },\n            registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerCompletionItemProvider(selector, provider, triggerCharacters, pluginToPluginInfo(plugin));\n            },\n            registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n                return languagesExt.registerDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider): theia.Disposable {\n                return languagesExt.registerDeclarationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSignatureHelpProvider(\n                selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, first?: string | theia.SignatureHelpProviderMetadata, ...remaining: string[]\n            ): theia.Disposable {\n                let metadata: theia.SignatureHelpProviderMetadata;\n                if (typeof first === 'object') {\n                    metadata = first;\n                } else {\n                    const triggerCharacters: string[] = [];\n                    metadata = { triggerCharacters, retriggerCharacters: [] };\n                    if (first) {\n                        triggerCharacters.push(first, ...remaining);\n                    }\n                }\n                return languagesExt.registerSignatureHelpProvider(selector, provider, metadata, pluginToPluginInfo(plugin));\n            },\n            registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider): theia.Disposable {\n                return languagesExt.registerTypeDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider): theia.Disposable {\n                return languagesExt.registerImplementationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n                return languagesExt.registerHoverProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider): theia.Disposable {\n                return languagesExt.registerDocumentHighlightProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider): theia.Disposable {\n                return languagesExt.registerWorkspaceSymbolProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentRangeFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerOnTypeFormattingEditProvider(\n                selector: theia.DocumentSelector,\n                provider: theia.OnTypeFormattingEditProvider,\n                firstTriggerCharacter: string,\n                ...moreTriggerCharacters: string[]\n            ): theia.Disposable {\n                return languagesExt.registerOnTypeFormattingEditProvider(selector, provider, [firstTriggerCharacter].concat(moreTriggerCharacters), pluginToPluginInfo(plugin));\n            },\n            registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n                return languagesExt.registerLinkProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerCodeActionsProvider(selector: theia.DocumentSelector, provider: theia.CodeActionProvider, metadata?: theia.CodeActionProviderMetadata): theia.Disposable {\n                return languagesExt.registerCodeActionsProvider(selector, provider, plugin.model, pluginToPluginInfo(plugin), metadata);\n            },\n            registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n                return languagesExt.registerCodeLensProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n                return languagesExt.registerReferenceProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider): theia.Disposable {\n                return languagesExt.registerDocumentSymbolProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider): theia.Disposable {\n                return languagesExt.registerColorProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider): theia.Disposable {\n                return languagesExt.registerFoldingRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider): theia.Disposable {\n                return languagesExt.registerRenameProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n                return languagesExt.registerCallHierarchyProvider(selector, provider);\n            }\n        };\n\n        const plugins: typeof theia.plugins = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get all(): theia.Plugin<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new Plugin(pluginManager, plg));\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getPlugin(pluginId: string): theia.Plugin<any> | undefined {\n                const plg = pluginManager.getPluginById(pluginId.toLowerCase());\n                if (plg) {\n                    return new Plugin(pluginManager, plg);\n                }\n                return undefined;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        };\n\n        const debuggersContributions = plugin.rawModel.contributes && plugin.rawModel.contributes.debuggers || [];\n        debugExt.assistedInject(connectionExt, commandRegistry);\n        debugExt.registerDebuggersContributions(plugin.pluginFolder, debuggersContributions);\n        const debug: typeof theia.debug = {\n            get activeDebugSession(): theia.DebugSession | undefined {\n                return debugExt.activeDebugSession;\n            },\n            get activeDebugConsole(): theia.DebugConsole {\n                return debugExt.activeDebugConsole;\n            },\n            get breakpoints(): theia.Breakpoint[] {\n                return debugExt.breakpoints;\n            },\n            get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n                return debugExt.onDidChangeActiveDebugSession;\n            },\n            get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidStartDebugSession;\n            },\n            get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n                return debugExt.onDidReceiveDebugSessionCustomEvent;\n            },\n            get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidTerminateDebugSession;\n            },\n            get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n                return debugExt.onDidChangeBreakpoints;\n            },\n            registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n                return debugExt.registerDebugAdapterDescriptorFactory(debugType, factory);\n            },\n            registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider): Disposable {\n                return debugExt.registerDebugConfigurationProvider(debugType, provider);\n            },\n            registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n                return debugExt.registerDebugAdapterTrackerFactory(debugType, factory);\n            },\n            startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration): Thenable<boolean> {\n                return debugExt.startDebugging(folder, nameOrConfiguration);\n            },\n            addBreakpoints(breakpoints: theia.Breakpoint[]): void {\n                debugExt.addBreakpoints(breakpoints);\n            },\n            removeBreakpoints(breakpoints: theia.Breakpoint[]): void {\n                debugExt.removeBreakpoints(breakpoints);\n            }\n        };\n\n        const tasks: typeof theia.tasks = {\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasksExt.registerTaskProvider(type, provider);\n            },\n\n            fetchTasks(filter?: theia.TaskFilter): Thenable<theia.Task[]> {\n                return tasksExt.fetchTasks(filter);\n            },\n\n            executeTask(task: theia.Task): Thenable<theia.TaskExecution> {\n                return tasksExt.executeTask(task);\n            },\n\n            get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n                return tasksExt.taskExecutions;\n            },\n            onDidStartTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTask(listener, thisArg, disposables);\n            },\n            onDidEndTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTask(listener, thisArg, disposables);\n            },\n            onDidStartTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTaskProcess(listener, thisArg, disposables);\n            },\n            onDidEndTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTaskProcess(listener, thisArg, disposables);\n            }\n        };\n\n        const scm: typeof theia.scm = {\n            get inputBox(): theia.SourceControlInputBox {\n                const inputBox = scmExt.getLastInputBox(plugin);\n                if (inputBox) {\n                    return inputBox;\n                } else {\n                    throw new Error('Input box not found!');\n                }\n            },\n            createSourceControl(id: string, label: string, rootUri?: Uri): theia.SourceControl {\n                return scmExt.createSourceControl(plugin, id, label, rootUri);\n            }\n        };\n\n        const comment: typeof theia.comment = {\n            createCommentController(id: string, label: string): theia.CommentController {\n                return {\n                    id, label, inputBox: undefined,\n                    createCommentThread(commentId: string, resource: Uri, range: Range, comments: theia.Comment[]): theia.CommentThread {\n                        return {\n                            id: commentId,\n                            resource,\n                            range,\n                            comments,\n                            collapsibleState: 0,\n                            dispose(): void {\n                            }\n                        };\n                    },\n                    dispose(): void {\n                    }\n                };\n            }\n        };\n\n        return <typeof theia>{\n            version: require('../../package.json').version,\n            commands,\n            comment,\n            window,\n            workspace,\n            env,\n            languageServer,\n            languages,\n            plugins,\n            debug,\n            tasks,\n            scm,\n            // Types\n            StatusBarAlignment: StatusBarAlignment,\n            Disposable: Disposable,\n            EventEmitter: Emitter,\n            CancellationTokenSource: CancellationTokenSource,\n            MarkdownString,\n            Position: Position,\n            Range: Range,\n            Selection: Selection,\n            ViewColumn: ViewColumn,\n            TextEditorSelectionChangeKind: TextEditorSelectionChangeKind,\n            Uri: Uri,\n            EndOfLine,\n            TextEditorRevealType,\n            TextEditorCursorStyle,\n            TextEditorLineNumbersStyle,\n            ThemeColor,\n            ThemeIcon,\n            SnippetString,\n            DecorationRangeBehavior,\n            OverviewRulerLane,\n            ConfigurationTarget,\n            RelativePattern,\n            IndentAction,\n            CompletionItem,\n            CompletionItemKind,\n            CompletionList,\n            DiagnosticSeverity,\n            DiagnosticRelatedInformation,\n            Location,\n            DiagnosticTag,\n            Diagnostic,\n            CompletionTriggerKind,\n            TextEdit,\n            ProgressLocation,\n            ProgressOptions,\n            Progress,\n            ParameterInformation,\n            SignatureInformation,\n            SignatureHelp,\n            SignatureHelpTriggerKind,\n            Hover,\n            DocumentHighlightKind,\n            DocumentHighlight,\n            DocumentLink,\n            CodeLens,\n            CodeActionKind,\n            CodeActionTrigger,\n            TextDocumentSaveReason,\n            CodeAction,\n            TreeItem,\n            TreeItem2: TreeItem,\n            TreeItemCollapsibleState,\n            SymbolKind,\n            DocumentSymbol,\n            WorkspaceEdit,\n            SymbolInformation,\n            FileType,\n            FileChangeType,\n            ShellQuoting,\n            ShellExecution,\n            ProcessExecution,\n            TaskScope,\n            TaskRevealKind,\n            TaskPanelKind,\n            TaskGroup,\n            Task,\n            DebugAdapterExecutable,\n            DebugAdapterServer,\n            Breakpoint,\n            SourceBreakpoint,\n            FunctionBreakpoint,\n            Color,\n            ColorInformation,\n            ColorPresentation,\n            FoldingRange,\n            FoldingRangeKind,\n            OperatingSystem,\n            WebviewPanelTargetArea,\n            FileSystemError,\n            CommentThreadCollapsibleState,\n            QuickInputButtons,\n            CommentMode,\n            CallHierarchyItem,\n            CallHierarchyIncomingCall,\n            CallHierarchyOutgoingCall\n        };\n    };\n}\n\nclass Plugin<T> implements theia.Plugin<T> {\n    id: string;\n    pluginPath: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    packageJSON: any;\n    pluginType: theia.PluginType;\n    constructor(private readonly pluginManager: PluginManager, plugin: InternalPlugin) {\n        this.id = plugin.model.id;\n        this.pluginPath = plugin.pluginFolder;\n        this.packageJSON = plugin.rawModel;\n        this.pluginType = plugin.model.entryPoint.frontend ? 'frontend' : 'backend';\n    }\n\n    get isActive(): boolean {\n        return this.pluginManager.isActive(this.id);\n    }\n\n    get exports(): T {\n        return <T>this.pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { CommandRegistryExt, PLUGIN_RPC_CONTEXT as Ext, CommandRegistryMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable } from './types-impl';\nimport { DisposableCollection } from '@theia/core';\nimport { KnownCommands } from './known-commands';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Handler = <T>(...args: any[]) => T | PromiseLike<T | undefined>;\n\nexport interface ArgumentProcessor {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    processArgument(arg: any): any;\n}\n\nexport class CommandRegistryImpl implements CommandRegistryExt {\n\n    private proxy: CommandRegistryMain;\n    private readonly commands = new Set<string>();\n    private readonly handlers = new Map<string, Handler>();\n    private readonly argumentProcessors: ArgumentProcessor[];\n    private readonly commandsConverter: CommandsConverter;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.COMMAND_REGISTRY_MAIN);\n        this.argumentProcessors = [];\n        this.commandsConverter = new CommandsConverter(this);\n    }\n\n    get converter(): CommandsConverter {\n        return this.commandsConverter;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerCommand(command: theia.CommandDescription, handler?: Handler, thisArg?: any): Disposable {\n        if (this.commands.has(command.id)) {\n            throw new Error(`Command ${command.id} already exist`);\n        }\n        this.commands.add(command.id);\n        this.proxy.$registerCommand(command);\n\n        const toDispose: Disposable[] = [];\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler, thisArg));\n        }\n        toDispose.push(Disposable.create(() => {\n            this.commands.delete(command.id);\n            this.proxy.$unregisterCommand(command.id);\n        }));\n        return Disposable.from(...toDispose);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerHandler(commandId: string, handler: Handler, thisArg?: any): Disposable {\n        if (this.handlers.has(commandId)) {\n            throw new Error(`Command \"${commandId}\" already has handler`);\n        }\n        this.proxy.$registerHandler(commandId);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.handlers.set(commandId, (...args: any[]) => handler.apply(thisArg, args));\n        return Disposable.create(() => {\n            this.handlers.delete(commandId);\n            this.proxy.$unregisterHandler(commandId);\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else {\n            return Promise.reject(new Error(`Command: ${id} does not exist.`));\n        }\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else if (KnownCommands.mapped(id)) {\n            // Using the KnownCommand exclusions, convert the commands manually\n            return KnownCommands.map(id, args, (mappedId: string, mappedArgs: any[] | undefined, mappedResult: KnownCommands.ConversionFunction) => {\n                const mr: KnownCommands.ConversionFunction = mappedResult;\n                return this.proxy.$executeCommand(mappedId, ...mappedArgs).then((result: any) => {\n                    if (!result) {\n                        return undefined;\n                    }\n                    if (!mr) {\n                        return result;\n                    }\n                    return mr(result);\n                });\n            }\n            );\n        } else {\n            return this.proxy.$executeCommand(id, ...args);\n        }\n    }\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n\n    getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        return this.proxy.$getKeyBinding(commandId);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async executeLocalCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            return handler<T>(...args.map(arg => this.argumentProcessors.reduce((r, p) => p.processArgument(r), arg)));\n        } else {\n            throw new Error(`Command ${id} doesn't exist`);\n        }\n    }\n\n    async getCommands(filterUnderscoreCommands: boolean = false): Promise<string[]> {\n        const result = await this.proxy.$getCommands();\n        if (filterUnderscoreCommands) {\n            return result.filter(command => command[0] !== '_');\n        }\n        return result;\n    }\n\n    registerArgumentProcessor(processor: ArgumentProcessor): void {\n        this.argumentProcessors.push(processor);\n    }\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.37.1/src/vs/workbench/api/common/extHostCommands.ts#L217-L259\nexport class CommandsConverter {\n\n    private readonly safeCommandId: string;\n    private readonly commands: CommandRegistryImpl;\n    private readonly commandsMap = new Map<number, theia.Command>();\n    private handle = 0;\n    private isSafeCommandRegistered: boolean;\n\n    constructor(commands: CommandRegistryImpl) {\n        this.safeCommandId = `theia_safe_cmd_${Date.now().toString()}`;\n        this.commands = commands;\n        this.isSafeCommandRegistered = false;\n    }\n\n    /**\n     * Convert to a command that can be safely passed over JSON-RPC.\n     */\n    toSafeCommand(command: undefined, disposables: DisposableCollection): undefined;\n    toSafeCommand(command: theia.Command, disposables: DisposableCollection): model.Command;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n        const result = this.toInternalCommand(command);\n        if (KnownCommands.mapped(result.id)) {\n            return result;\n        }\n\n        if (!this.isSafeCommandRegistered) {\n            this.commands.registerCommand({ id: this.safeCommandId }, this.executeSafeCommand, this);\n            this.isSafeCommandRegistered = true;\n        }\n\n        if (command.command && command.arguments && command.arguments.length > 0) {\n            const id = this.handle++;\n            this.commandsMap.set(id, command);\n            disposables.push(new Disposable(() => this.commandsMap.delete(id)));\n            result.id = this.safeCommandId;\n            result.arguments = [id];\n        }\n\n        return result;\n    }\n\n    protected toInternalCommand(external: theia.Command): model.Command {\n        // we're deprecating Command.id, so it has to be optional.\n        // Existing code will have compiled against a non - optional version of the field, so asserting it to exist is ok\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return KnownCommands.map((external.command || external.id)!, external.arguments, (mappedId: string, mappedArgs: any[]) =>\n            ({\n                id: mappedId,\n                title: external.title || external.label || ' ',\n                tooltip: external.tooltip,\n                arguments: mappedArgs\n            }));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private executeSafeCommand<R>(...args: any[]): PromiseLike<R | undefined> {\n        const command = this.commandsMap.get(args[0]);\n        if (!command || !command.command) {\n            return Promise.reject('command NOT FOUND');\n        }\n        return this.commands.executeCommand(command.command, ...(command.arguments || []));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Range as R, Position as P, Location as L } from 'vscode-languageserver-types';\nimport URI from 'vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { cloneAndChange } from '../common/objects';\nimport { Position, Range, Location, CallHierarchyItem } from './types-impl';\nimport {\n    fromPosition, fromRange, fromLocation,\n    isModelLocation, toLocation,\n    isModelCallHierarchyItem, fromCallHierarchyItem, toCallHierarchyItem,\n    isModelCallHierarchyIncomingCall, toCallHierarchyIncomingCall,\n    isModelCallHierarchyOutgoingCall, toCallHierarchyOutgoingCall\n} from './type-converters';\n\n// Here is a mapping of VSCode commands to monaco commands with their conversions\nexport namespace KnownCommands {\n\n    /**\n     * Commands that you want to apply custom conversions to rather than pass through the automatic args converter.\n     * Would be useful in the case where theia provides some command and you need to provide custom conversions\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const mappings: { [id: string]: [string, (args: any[] | undefined) => any[] | undefined, ((results: any[] | undefined) => any[] | undefined)?] } = {};\n    mappings['editor.action.showReferences'] = ['textEditor.commands.showReferences', createConversionFunction(\n        (uri: URI) => uri.toString(),\n        fromPositionToP,\n        toArrayConversion(fromLocationToL)),\n        createConversionFunction()];\n\n    /**\n     * Mapping of all editor.action commands to their conversion function.\n     * executeCommand<T> inside of the plugin command registry will automatically convert\n     * incoming arguments from vscode api types to monaco types\n     */\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_VSCODE_TO_MONACO = (args: any[] | undefined) => {\n        if (!args) {\n            return args;\n        }\n        const argStack: ConversionFunction[] = [];\n        args.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => vscodeToMonacoArgsConverter(arg));\n        });\n        if (args) {\n            return createConversionFunction(...argStack)(args);\n        }\n    };\n\n    mappings['editor.action.select.all'] = ['editor.action.select.all', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleHighContrast'] = ['editor.action.toggleHighContrast', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretLeftAction'] = ['editor.action.moveCarretLeftAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretRightAction'] = ['editor.action.moveCarretRightAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transposeLetters'] = ['editor.action.transposeLetters', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.clipboardCopyWithSyntaxHighlightingAction'] = ['editor.action.clipboardCopyWithSyntaxHighlightingAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.commentLine'] = ['editor.action.commentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCommentLine'] = ['editor.action.addCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.removeCommentLine'] = ['editor.action.removeCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.blockComment'] = ['editor.action.blockComment', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showContextMenu'] = ['editor.action.showContextMenu', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUndo'] = ['cursorUndo', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfold'] = ['editor.unfold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldRecursively'] = ['editor.unfoldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.fold'] = ['editor.fold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldRecursively'] = ['editor.foldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAll'] = ['editor.foldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAll'] = ['editor.unfoldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllBlockComments'] = ['editor.foldAllBlockComments', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllMarkerRegions'] = ['editor.foldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAllMarkerRegions'] = ['editor.unfoldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel1'] = ['editor.foldLevel1', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel2'] = ['editor.foldLevel2', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel3'] = ['editor.foldLevel3', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel4'] = ['editor.foldLevel4', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel5'] = ['editor.foldLevel5', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel6'] = ['editor.foldLevel6', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel7'] = ['editor.foldLevel7', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomIn'] = ['editor.action.fontZoomIn', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomOut'] = ['editor.action.fontZoomOut', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomReset'] = ['editor.action.fontZoomReset', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatDocument'] = ['editor.action.formatDocument', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatSelection'] = ['editor.action.formatSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesUpAction'] = ['editor.action.copyLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesDownAction'] = ['editor.action.copyLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesUpAction'] = ['editor.action.moveLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesDownAction'] = ['editor.action.moveLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesAscending'] = ['editor.action.sortLinesAscending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesDescending'] = ['editor.action.sortLinesDescending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.trimTrailingWhitespace'] = ['editor.action.trimTrailingWhitespace', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.deleteLines'] = ['editor.action.deleteLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.indentLines'] = ['editor.action.indentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.outdentLines'] = ['editor.action.outdentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineBefore'] = ['editor.action.insertLineBefore', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineAfter'] = ['editor.action.insertLineAfter', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllLeft'] = ['deleteAllLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllRight'] = ['deleteAllRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.joinLines'] = ['editor.action.joinLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transpose'] = ['editor.action.transpose', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToUppercase'] = ['editor.action.transformToUppercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToLowercase'] = ['editor.action.transformToLowercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToTitlecase'] = ['editor.action.transformToTitlecase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.expand'] = ['editor.action.smartSelect.expand', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.shrink'] = ['editor.action.smartSelect.shrink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.forceRetokenize'] = ['editor.action.forceRetokenize', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleTabFocusMode'] = ['editor.action.toggleTabFocusMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.gotoLine'] = ['editor.action.gotoLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickOutline'] = ['editor.action.quickOutline', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.up'] = ['editor.action.inPlaceReplace.up', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.down'] = ['editor.action.inPlaceReplace.down', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.next'] = ['editor.action.diffReview.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.prev'] = ['editor.action.diffReview.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectToBracket'] = ['editor.action.selectToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.jumpToBracket'] = ['editor.action.jumpToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['actions.findWithSelection'] = ['actions.findWithSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextMatchFindAction'] = ['editor.action.nextMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousMatchFindAction'] = ['editor.action.previousMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextSelectionMatchFindAction'] = ['editor.action.nextSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousSelectionMatchFindAction'] = ['editor.action.previousSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.openLink'] = ['editor.action.openLink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickFix'] = ['editor.action.quickFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.refactor'] = ['editor.action.refactor', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sourceAction'] = ['editor.action.sourceAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.organizeImports'] = ['editor.action.organizeImports', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.autoFix'] = ['editor.action.autoFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fixAll'] = ['editor.action.fixAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.rename'] = ['editor.action.rename', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAbove'] = ['editor.action.insertCursorAbove', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorBelow'] = ['editor.action.insertCursorBelow', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAtEndOfEachLineSelected'] = ['editor.action.insertCursorAtEndOfEachLineSelected', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToNextFindMatch'] = ['editor.action.addSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToPreviousFindMatch'] = ['editor.action.addSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToNextFindMatch'] = ['editor.action.moveSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToPreviousFindMatch'] = ['editor.action.moveSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectHighlights'] = ['editor.action.selectHighlights', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.changeAll'] = ['editor.action.changeAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToBottom'] = ['editor.action.addCursorsToBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToTop'] = ['editor.action.addCursorsToTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerParameterHints'] = ['editor.action.triggerParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.next'] = ['editor.action.wordHighlight.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.prev'] = ['editor.action.wordHighlight.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.trigger'] = ['editor.action.wordHighlight.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showAccessibilityHelp'] = ['editor.action.showAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inspectTokens'] = ['editor.action.inspectTokens', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.next'] = ['editor.action.marker.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prev'] = ['editor.action.marker.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.nextInFiles'] = ['editor.action.marker.nextInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prevInFiles'] = ['editor.action.marker.prevInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showHover'] = ['editor.action.showHover', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinition'] = ['editor.action.revealDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinitionAside'] = ['editor.action.revealDefinitionAside', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDefinition'] = ['editor.action.peekDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDeclaration'] = ['editor.action.revealDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDeclaration'] = ['editor.action.peekDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToImplementation'] = ['editor.action.goToImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekImplementation'] = ['editor.action.peekImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToTypeDefinition'] = ['editor.action.goToTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekTypeDefinition'] = ['editor.action.peekTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.referenceSearch.trigger'] = ['editor.action.referenceSearch.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerSuggest'] = ['editor.action.triggerSuggest', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearchEditor'] = ['closeReferenceSearchEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelSelection'] = ['cancelSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottom'] = ['cursorBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottomSelect'] = ['cursorBottomSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDown'] = ['cursorDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDownSelect'] = ['cursorDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEnd'] = ['cursorEnd', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEndSelect'] = ['cursorEndSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHome'] = ['cursorHome', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHomeSelect'] = ['cursorHomeSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeft'] = ['cursorLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeftSelect'] = ['cursorLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDown'] = ['cursorPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDownSelect'] = ['cursorPageDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUp'] = ['cursorPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUpSelect'] = ['cursorPageUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRight'] = ['cursorRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRightSelect'] = ['cursorRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTop'] = ['cursorTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTopSelect'] = ['cursorTopSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUp'] = ['cursorUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUpSelect'] = ['cursorUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteLeft'] = ['deleteLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteRight'] = ['deleteRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAll'] = ['editor.action.selectAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['expandLineSelection'] = ['expandLineSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['outdent'] = ['outdent', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineDown'] = ['scrollLineDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineUp'] = ['scrollLineUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageDown'] = ['scrollPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageUp'] = ['scrollPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['tab'] = ['tab', CONVERT_VSCODE_TO_MONACO];\n    mappings['removeSecondaryCursors'] = ['removeSecondaryCursors', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRightSelect'] = ['cursorWordEndRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeftSelect'] = ['cursorWordStartLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordLeft'] = ['deleteWordLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordRight'] = ['deleteWordRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.cancelOperation'] = ['editor.cancelOperation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult'] = ['editor.gotoNextSymbolFromResult', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult.cancel'] = ['editor.gotoNextSymbolFromResult.cancel', CONVERT_VSCODE_TO_MONACO];\n    mappings['openReferenceToSide'] = ['openReferenceToSide', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleExplainMode'] = ['toggleExplainMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeFindWidget'] = ['closeFindWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceAll'] = ['editor.action.replaceAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceOne'] = ['editor.action.replaceOne', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAllMatches'] = ['editor.action.selectAllMatches', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindCaseSensitive'] = ['toggleFindCaseSensitive', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindInSelection'] = ['toggleFindInSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindRegex'] = ['toggleFindRegex', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindWholeWord'] = ['toggleFindWholeWord', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToNextSnippetPlaceholder'] = ['jumpToNextSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToPrevSnippetPlaceholder'] = ['jumpToPrevSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveEditorMessage'] = ['leaveEditorMessage', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveSnippet'] = ['leaveSnippet', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeMarkersNavigation'] = ['closeMarkersNavigation', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReferenceFromEmbeddedEditor'] = ['goToNextReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReferenceFromEmbeddedEditor'] = ['goToPreviousReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeParameterHints'] = ['closeParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['showNextParameterHint'] = ['showNextParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['showPrevParameterHint'] = ['showPrevParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestion'] = ['acceptSelectedSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestionOnEnter'] = ['acceptSelectedSuggestionOnEnter', CONVERT_VSCODE_TO_MONACO];\n    mappings['hideSuggestWidget'] = ['hideSuggestWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertBestCompletion'] = ['insertBestCompletion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertNextSuggestion'] = ['insertNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertPrevSuggestion'] = ['insertPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextPageSuggestion'] = ['selectNextPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextSuggestion'] = ['selectNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevPageSuggestion'] = ['selectPrevPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevSuggestion'] = ['selectPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionDetails'] = ['toggleSuggestionDetails', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionFocus'] = ['toggleSuggestionFocus', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptRenameInput'] = ['acceptRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelRenameInput'] = ['cancelRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeAccessibilityHelp'] = ['closeAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showNext'] = ['history.showNext', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showPrevious'] = ['history.showPrevious', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearch'] = ['closeReferenceSearch', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReference'] = ['goToNextReference', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReference'] = ['goToPreviousReference', CONVERT_VSCODE_TO_MONACO];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_MONACO_TO_VSCODE = (args: any | undefined) => {\n        if (!args) {\n            return args;\n        }\n        if (!Array.isArray(args)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return monacoToVscodeArgsConverter(args);\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const argsArray: any[] = args;\n        const argStack: ConversionFunction[] = [];\n        argsArray.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => monacoToVscodeArgsConverter(arg));\n        });\n        if (argsArray) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return createConversionFunction(...argStack)(argsArray);\n        }\n    };\n\n    // vscode-'executeXXX'-like commands\n    mappings['vscode.executeReferenceProvider'] = ['vscode.executeReferenceProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeImplementationProvider'] = ['vscode.executeImplementationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.prepareCallHierarchy'] = ['vscode.prepareCallHierarchy', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideIncomingCalls'] = ['vscode.provideIncomingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideOutgoingCalls'] = ['vscode.provideOutgoingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function map<T>(id: string, args: any[] | undefined, toDo: (mappedId: string, mappedArgs: any[] | undefined, mappedResult: ConversionFunction | undefined) => T): T {\n        if (mappings[id]) {\n            return toDo(mappings[id][0], mappings[id][1](args), mappings[id][2] ? (result => mappings[id][2]!(result)) : undefined);\n        } else {\n            return toDo(id, args, undefined);\n        }\n    }\n\n    export function mapped(id: string): boolean {\n        return !!mappings[id];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export type ConversionFunction = ((parameter: any) => any) | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function createConversionFunction(...conversions: ConversionFunction[]): (args: any[] | undefined) => any[] | undefined {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return function (args: any[] | undefined): any[] | undefined {\n            if (!args) {\n                return args;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return args.map(function (arg: any, index: number): any {\n                if (index < conversions.length) {\n                    const conversion = conversions[index];\n                    if (conversion) {\n                        return conversion(arg);\n                    }\n                }\n                return arg;\n            });\n        };\n    }\n\n    function fromPositionToP(p: theia.Position): P {\n        return P.create(p.line, p.character);\n    }\n\n    function fromRangeToR(r: theia.Range): R {\n        return R.create(fromPositionToP(r.start), fromPositionToP(r.end));\n    }\n\n    function fromLocationToL(l: theia.Location): L {\n        return L.create(l.uri.toString(), fromRangeToR(l.range));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function vscodeToMonacoArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (Position.isPosition(value)) {\n                return fromPosition(value);\n            }\n            if (Range.isRange(value)) {\n                return fromRange(value);\n            }\n            if (Location.isLocation(value)) {\n                return fromLocation(value);\n            }\n            if (CallHierarchyItem.isCallHierarchyItem(value)) {\n                return fromCallHierarchyItem(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function monacoToVscodeArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (isModelLocation(value)) {\n                return toLocation(value);\n            }\n            if (isModelCallHierarchyItem(value)) {\n                return toCallHierarchyItem(value);\n            }\n            if (isModelCallHierarchyIncomingCall(value)) {\n                return toCallHierarchyIncomingCall(value);\n            }\n            if (isModelCallHierarchyOutgoingCall(value)) {\n                return toCallHierarchyOutgoingCall(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n\n        });\n    }\n}\n\nfunction toArrayConversion<T, U>(f: (a: T) => U): (a: T[]) => U[] {\n    // tslint:disable-next-line:typedef\n    return function (a: T[]) {\n        return a.map(f);\n    };\n}\n","/* eslint-disable */\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/objects.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\nimport { isUndefinedOrNull, isArray, isObject } from './types';\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n    return _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    if (isUndefinedOrNull(obj)) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (typeof changed !== 'undefined') {\n        return changed;\n    }\n\n    if (isArray(obj)) {\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(_cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (let i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                (r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { QuickOpenExt, PLUGIN_RPC_CONTEXT as Ext, QuickOpenMain, TransferInputBox, Plugin, TransferQuickPick, QuickInputTitleButtonHandle } from '../common/plugin-api-rpc';\nimport { QuickPickOptions, QuickPickItem, InputBoxOptions, InputBox, QuickPick, QuickInput } from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { anyPromise } from '../common/async-util';\nimport { hookCancellationToken } from '../common/async-util';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { QuickInputButtons, QuickInputButton, ThemeIcon } from './types-impl';\nimport URI from 'vscode-uri';\nimport * as path from 'path';\nimport { quickPickItemToPickOpenItem } from './type-converters';\nimport { QuickOpenItem, QuickOpenItemOptions } from '@theia/core/lib/browser/quick-open/quick-open-model';\nimport { PluginPackage } from '../common/plugin-protocol';\n\nexport type Item = string | QuickPickItem;\n\nexport class QuickOpenExtImpl implements QuickOpenExt {\n    private proxy: QuickOpenMain;\n    private selectItemHandler: undefined | ((handle: number) => void);\n    private validateInputHandler: undefined | ((input: string) => string | PromiseLike<string | undefined> | undefined);\n\n    private createdQuickInputs = new Map<number, QuickInputExt>(); // Each quickinput will have a number so that we know where to fire events\n    private currentQuickInputs = 0;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.QUICK_OPEN_MAIN);\n    }\n    $onItemSelected(handle: number): void {\n        if (this.selectItemHandler) {\n            this.selectItemHandler(handle);\n        }\n    }\n    $validateInput(input: string): PromiseLike<string | undefined> | undefined {\n        if (this.validateInputHandler) {\n            return Promise.resolve(this.validateInputHandler(input));\n        }\n        return undefined;\n    }\n\n    showQuickPick(promiseOrItems: QuickPickItem[] | PromiseLike<QuickPickItem[]>, options?: QuickPickOptions, token?: CancellationToken): PromiseLike<QuickPickItem | undefined>;\n    // eslint-disable-next-line max-len\n    showQuickPick(promiseOrItems: QuickPickItem[] | PromiseLike<QuickPickItem[]>, options?: QuickPickOptions & { canSelectMany: true; }, token?: CancellationToken): PromiseLike<QuickPickItem[] | undefined>;\n    showQuickPick(promiseOrItems: string[] | PromiseLike<string[]>, options?: QuickPickOptions, token?: CancellationToken): PromiseLike<string | undefined>;\n    // eslint-disable-next-line max-len\n    showQuickPick(promiseOrItems: Item[] | PromiseLike<Item[]>, options?: QuickPickOptions, token: CancellationToken = CancellationToken.None): PromiseLike<Item | Item[] | undefined> {\n        this.selectItemHandler = undefined;\n        const itemPromise = Promise.resolve(promiseOrItems);\n        const widgetPromise = this.proxy.$show({\n            canSelectMany: options && options.canPickMany,\n            placeHolder: options && options.placeHolder,\n            autoFocus: { autoFocusFirstEntry: true },\n            matchOnDescription: options && options.matchOnDescription,\n            matchOnDetail: options && options.matchOnDetail,\n            ignoreFocusLost: options && options.ignoreFocusOut\n        });\n\n        const promise = anyPromise(<PromiseLike<number | Item[]>[]>[widgetPromise, itemPromise]).then(values => {\n            if (values.key === 0) {\n                return undefined;\n            }\n            return itemPromise.then(items => {\n\n                const pickItems = quickPickItemToPickOpenItem(items);\n\n                if (options && typeof options.onDidSelectItem === 'function') {\n                    this.selectItemHandler = handle => {\n                        options.onDidSelectItem!(items[handle]);\n                    };\n                }\n\n                this.proxy.$setItems(pickItems);\n\n                return widgetPromise.then(handle => {\n                    if (typeof handle === 'number') {\n                        if (options && options.canPickMany) {\n                            return Array.of(items[handle]);\n                        } else {\n                            return items[handle];\n                        }\n\n                    } else if (Array.isArray(handle)) {\n                        return handle.map(h => items[h]);\n                    }\n                    return undefined;\n                });\n            }, err => {\n                this.proxy.$setError(err);\n                return Promise.reject(err);\n            });\n        });\n        return hookCancellationToken<Item | Item[] | undefined>(token, promise);\n    }\n\n    showCustomQuickPick<T extends QuickPickItem>(options: TransferQuickPick<T>): void {\n        this.proxy.$showCustomQuickPick(options);\n    }\n\n    createQuickPick<T extends QuickPickItem>(plugin: Plugin): QuickPick<T> {\n        const newQuickInput = new QuickPickExt<T>(this, this.proxy, plugin, this.currentQuickInputs);\n        this.createdQuickInputs.set(this.currentQuickInputs, newQuickInput);\n        this.currentQuickInputs += 1;\n        return newQuickInput;\n    }\n\n    showInput(options?: InputBoxOptions, token: CancellationToken = CancellationToken.None): PromiseLike<string | undefined> {\n        this.validateInputHandler = options && options.validateInput;\n\n        if (!options) {\n            options = {\n                placeHolder: ''\n            };\n        }\n\n        const promise = this.proxy.$input(options, typeof this.validateInputHandler === 'function');\n        return hookCancellationToken(token, promise);\n    }\n\n    hide(): void {\n        this.proxy.$hide();\n    }\n    showInputBox(options: TransferInputBox): void {\n        this.validateInputHandler = options && options.validateInput;\n        this.proxy.$showInputBox(options, typeof this.validateInputHandler === 'function');\n    }\n\n    createInputBox(plugin: Plugin): InputBox {\n        const newQuickInput = new InputBoxExt(this, this.proxy, plugin, this.currentQuickInputs);\n        this.createdQuickInputs.set(this.currentQuickInputs, newQuickInput);\n        this.currentQuickInputs += 1;\n        return newQuickInput;\n    }\n\n    async $acceptOnDidAccept(createdQuickInputNumber: number): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput) {\n            currentQuickInput._fireAccept();\n        }\n    }\n\n    async $acceptDidChangeValue(createdQuickInputNumber: number, changedValue: string): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput) {\n            currentQuickInput._fireChangedValue(changedValue);\n        }\n    }\n\n    async $acceptOnDidHide(createdQuickInputNumber: number): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput) {\n            currentQuickInput._fireHide();\n        }\n    }\n\n    async $acceptOnDidTriggerButton(createdQuickInputNumber: number, btn: QuickInputTitleButtonHandle): Promise<void> {\n        const thisQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (thisQuickInput) {\n            if (btn.index === -1) {\n                thisQuickInput._fireButtonTrigger(QuickInputButtons.Back);\n            } else if (thisQuickInput && (thisQuickInput instanceof InputBoxExt || thisQuickInput instanceof QuickPickExt)) {\n                const btnFromIndex = thisQuickInput.buttons[btn.index];\n                thisQuickInput._fireButtonTrigger(btnFromIndex as QuickInputButton);\n            }\n        }\n    }\n\n    async $acceptDidChangeActive(createdQuickInputNumber: number, changedItems: QuickOpenItem<QuickOpenItemOptions>[]): Promise<void> {\n        const thisQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (thisQuickInput && thisQuickInput instanceof QuickPickExt) {\n            thisQuickInput._fireChangedActiveItem(changedItems);\n        }\n    }\n\n    async $acceptDidChangeSelection(createdQuickInputNumber: number, selection: string): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput && currentQuickInput instanceof QuickPickExt) {\n            // Find the item that matches that particular label\n            const findMatchingItem = currentQuickInput.items.filter(x => x.label === selection);\n            currentQuickInput._fireChangedSelection(findMatchingItem);\n        }\n    }\n}\n\nexport class QuickInputExt implements QuickInput {\n\n    private _busy: boolean;\n    private _enabled: boolean;\n    private _ignoreFocusOut: boolean;\n    private _step: number | undefined;\n    private _title: string | undefined;\n    private _totalSteps: number | undefined;\n    private _value: string;\n\n    protected visible: boolean;\n\n    protected disposableCollection: DisposableCollection;\n\n    private onDidAcceptEmitter: Emitter<void>;\n    private onDidChangeValueEmitter: Emitter<string>;\n    private onDidHideEmitter: Emitter<void>;\n    private onDidTriggerButtonEmitter: Emitter<QuickInputButton>;\n\n    constructor(readonly quickOpen: QuickOpenExtImpl, readonly quickOpenMain: QuickOpenMain, readonly plugin: Plugin) {\n        this.title = undefined;\n        this.step = undefined;\n        this.totalSteps = undefined;\n        this.enabled = true;\n        this.busy = false;\n        this.ignoreFocusOut = false;\n        this.value = '';\n\n        this.visible = false;\n\n        this.disposableCollection = new DisposableCollection();\n        this.disposableCollection.push(this.onDidAcceptEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidChangeValueEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidHideEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidTriggerButtonEmitter = new Emitter());\n    }\n\n    get title(): string | undefined {\n        return this._title;\n    }\n\n    set title(title: string | undefined) {\n        this._title = title;\n        this.update({ title });\n    }\n\n    get step(): number | undefined {\n        return this._step;\n    }\n\n    set step(step: number | undefined) {\n        this._step = step;\n        this.update({ step });\n    }\n\n    get totalSteps(): number | undefined {\n        return this._totalSteps;\n    }\n\n    set totalSteps(totalSteps: number | undefined) {\n        this._totalSteps = totalSteps;\n        this.update({ totalSteps });\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        this._enabled = enabled;\n        this.update({ enabled });\n    }\n\n    get busy(): boolean {\n        return this._busy;\n    }\n\n    set busy(busy: boolean) {\n        this._busy = busy;\n        this.update({ busy });\n    }\n\n    get ignoreFocusOut(): boolean {\n        return this._ignoreFocusOut;\n    }\n\n    set ignoreFocusOut(ignoreFocusOut: boolean) {\n        this._ignoreFocusOut = ignoreFocusOut;\n        this.update({ ignoreFocusOut });\n    }\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this._value = value;\n        this.update({ value });\n    }\n\n    show(): void {\n        throw new Error('Method implementation must be provided by extenders');\n    }\n\n    dispose(): void {\n        this.disposableCollection.dispose();\n    }\n\n    protected update(changed: object): void {\n        /**\n         * The args are just going to be set when we call show for the first time.\n         * We return early when its invisible to avoid race condition\n         */\n        if (!this.visible || changed === undefined) {\n            return;\n        }\n\n        this.quickOpenMain.$setQuickInputChanged(changed);\n    }\n\n    hide(): void {\n        this.quickOpen.hide();\n        this.dispose();\n    }\n\n    protected convertURL(iconPath: URI | { light: string | URI; dark: string | URI } | ThemeIcon): URI | { light: string | URI; dark: string | URI } | ThemeIcon {\n        const toUrl = (arg: string | URI) => {\n            arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n            if (typeof arg !== 'string') {\n                return arg.toString(true);\n            }\n            const { packagePath } = this.plugin.rawModel;\n            const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n            const normalizedPath = path.normalize(absolutePath);\n            const relativePath = path.relative(packagePath, normalizedPath);\n            return PluginPackage.toPluginUrl(this.plugin.rawModel, relativePath);\n        };\n        if ('id' in iconPath || iconPath instanceof ThemeIcon) {\n            return iconPath;\n        } else if (typeof iconPath === 'string' || iconPath instanceof URI) {\n            return URI.parse(toUrl(iconPath));\n        } else {\n            const { light, dark } = iconPath as { light: string | URI, dark: string | URI };\n            return {\n                light: toUrl(light),\n                dark: toUrl(dark)\n            };\n        }\n    }\n\n    _fireAccept(): void {\n        this.onDidAcceptEmitter.fire(undefined);\n    }\n\n    _fireChangedValue(changedValue: string): void {\n        this.onDidChangeValueEmitter.fire(changedValue);\n    }\n\n    _fireHide(): void {\n        this.onDidHideEmitter.fire(undefined);\n    }\n\n    _fireButtonTrigger(btn: QuickInputButton): void {\n        this.onDidTriggerButtonEmitter.fire(btn);\n    }\n\n    get onDidHide(): Event<void> {\n        return this.onDidHideEmitter.event;\n    }\n\n    get onDidAccept(): Event<void> {\n        return this.onDidAcceptEmitter.event;\n    }\n\n    get onDidChangeValue(): Event<string> {\n        return this.onDidChangeValueEmitter.event;\n    }\n\n    get onDidTriggerButton(): Event<QuickInputButton> {\n        return this.onDidTriggerButtonEmitter.event;\n    }\n}\n\n/**\n * Base implementation of {@link InputBox} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5109\n */\nexport class InputBoxExt extends QuickInputExt implements InputBox {\n\n    /**\n     * Input Box API Start\n     */\n    private _placeholder: string | undefined;\n    private _password: boolean;\n\n    private _buttons: ReadonlyArray<QuickInputButton>;\n    private _prompt: string | undefined;\n    private _validationMessage: string | undefined;\n    /**\n     * Input Box API End\n     */\n\n    constructor(readonly quickOpen: QuickOpenExtImpl,\n        readonly quickOpenMain: QuickOpenMain,\n        readonly plugin: Plugin,\n        readonly quickInputIndex: number) {\n\n        super(quickOpen, quickOpenMain, plugin);\n\n        this.buttons = [];\n        this.password = false;\n        this.value = '';\n    }\n\n    get buttons(): ReadonlyArray<QuickInputButton> {\n        return this._buttons;\n    }\n\n    set buttons(buttons: ReadonlyArray<QuickInputButton>) {\n        this._buttons = buttons;\n        this.update({ buttons });\n    }\n\n    get password(): boolean {\n        return this._password;\n    }\n\n    set password(password: boolean) {\n        this._password = password;\n        this.update({ password });\n    }\n\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string | undefined) {\n        this._placeholder = placeholder;\n        this.update({ placeholder });\n    }\n\n    get prompt(): string | undefined {\n        return this._prompt;\n    }\n\n    set prompt(prompt: string | undefined) {\n        this._prompt = prompt;\n        this.update({ prompt });\n    }\n\n    get validationMessage(): string | undefined {\n        return this._validationMessage;\n    }\n\n    set validationMessage(validationMessage: string | undefined) {\n        if (this._validationMessage !== validationMessage) {\n            this._validationMessage = validationMessage;\n            this.update({ validationMessage });\n            this.quickOpenMain.$refreshQuickInput();\n        }\n    }\n\n    show(): void {\n        this.visible = true;\n        const update = (value: string) => {\n            this.value = value;\n            // this.onDidChangeValueEmitter.fire(value);\n            if (this.validationMessage && this.validationMessage.length > 0) {\n                return this.validationMessage;\n            }\n        };\n        this.quickOpen.showInputBox({\n            quickInputIndex: this.quickInputIndex,\n            busy: this.busy,\n            buttons: this.buttons.map(btn => ({\n                'iconPath': this.convertURL(btn.iconPath),\n                'tooltip': btn.tooltip\n            })),\n            enabled: this.enabled,\n            ignoreFocusOut: this.ignoreFocusOut,\n            password: this.password,\n            placeholder: this.placeholder,\n            prompt: this.prompt,\n            step: this.step,\n            title: this.title,\n            totalSteps: this.totalSteps,\n            validationMessage: this.validationMessage,\n            value: this.value,\n            validateInput(value: string): string | undefined {\n                if (value.length > 0) {\n                    return update(value);\n                }\n            }\n        });\n    }\n}\n\n/**\n * Base implementation of {@link QuickPick} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5059\n */\nexport class QuickPickExt<T extends QuickPickItem> extends QuickInputExt implements QuickPick<T> {\n\n    buttons: ReadonlyArray<QuickInputButton>;\n    canSelectMany: boolean;\n    matchOnDescription: boolean;\n    matchOnDetail: boolean;\n    selectedItems: ReadonlyArray<T>;\n    value: string;\n\n    private _items: T[];\n    private _activeItems: T[];\n    private _placeholder: string | undefined;\n    private readonly onDidChangeActiveEmitter: Emitter<T[]>;\n    private readonly onDidChangeSelectionEmitter: Emitter<T[]>;\n\n    constructor(readonly quickOpen: QuickOpenExtImpl,\n        readonly quickOpenMain: QuickOpenMain,\n        readonly plugin: Plugin,\n        readonly quickInputIndex: number) {\n\n        super(quickOpen, quickOpenMain, plugin);\n        this._items = [];\n        this._activeItems = [];\n        this._placeholder = '';\n        this.buttons = [];\n        this.value = '';\n\n        this.disposableCollection.push(this.onDidChangeActiveEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidChangeSelectionEmitter = new Emitter());\n    }\n\n    get items(): T[] {\n        return this._items;\n    }\n\n    set items(items: T[]) {\n        this._items = items;\n        this.update({ items });\n    }\n\n    get activeItems(): T[] {\n        return this._activeItems;\n    }\n\n    set activeItems(activeItems: T[]) {\n        this._activeItems = activeItems;\n        this.update({ activeItems });\n    }\n\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string | undefined) {\n        this._placeholder = placeholder;\n        this.update({ placeholder });\n    }\n\n    _fireChangedSelection(selections: T[]): void {\n        this.onDidChangeSelectionEmitter.fire(selections);\n    }\n\n    _fireChangedActiveItem(changedItems: QuickOpenItem<QuickOpenItemOptions>[]): void {\n        this.onDidChangeActiveEmitter.fire(changedItems as unknown as T[]);\n    }\n\n    get onDidChangeActive(): Event<T[]> {\n        return this.onDidChangeActiveEmitter.event;\n    }\n\n    get onDidChangeSelection(): Event<T[]> {\n        return this.onDidChangeSelectionEmitter.event;\n    }\n\n    show(): void {\n        this.visible = true;\n        this.quickOpen.showCustomQuickPick({\n            quickInputIndex: this.quickInputIndex,\n            title: this.title,\n            step: this.step,\n            totalSteps: this.totalSteps,\n            enabled: this.enabled,\n            busy: this.busy,\n            ignoreFocusOut: this.ignoreFocusOut,\n            value: this.value,\n            placeholder: this.placeholder,\n            buttons: this.buttons.map(btn => ({\n                'iconPath': this.convertURL(btn.iconPath),\n                'tooltip': btn.tooltip\n            })),\n            items: quickPickItemToPickOpenItem(this.items),\n            canSelectMany: this.canSelectMany,\n            matchOnDescription: this.matchOnDescription,\n            matchOnDetail: this.matchOnDetail,\n            activeItems: this.activeItems,\n            selectedItems: this.selectedItems\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable, StatusBarAlignment } from './types-impl';\nimport { StatusBarItem } from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, StatusBarMessageRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { StatusBarItemImpl } from './status-bar/status-bar-item';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class StatusBarMessageRegistryExt {\n\n    proxy: StatusBarMessageRegistryMain;\n\n    protected readonly statusMessage: StatusBarMessage;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.STATUS_BAR_MESSAGE_REGISTRY_MAIN);\n        this.statusMessage = new StatusBarMessage(this);\n    }\n\n    // copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L174\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setStatusBarMessage(text: string, timeoutOrThenable?: number | PromiseLike<any>): Disposable {\n        const d = this.statusMessage.setMessage(text);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let handle: any;\n\n        if (typeof timeoutOrThenable === 'number') {\n            handle = setTimeout(() => d.dispose(), timeoutOrThenable);\n        } else if (typeof timeoutOrThenable !== 'undefined') {\n            timeoutOrThenable.then(() => d.dispose(), () => d.dispose());\n        }\n\n        return new Disposable(() => {\n            d.dispose();\n            clearTimeout(handle);\n        });\n\n    }\n\n    createStatusBarItem(alignment?: StatusBarAlignment, priority?: number): StatusBarItem {\n        return new StatusBarItemImpl(this.proxy, alignment, priority);\n    }\n}\n\n// copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L122\nclass StatusBarMessage {\n\n    private _item: StatusBarItem;\n    private _messages: { message: string }[] = [];\n\n    constructor(statusBar: StatusBarMessageRegistryExt) {\n        this._item = statusBar.createStatusBarItem(StatusBarAlignment.Left, Number.MIN_VALUE);\n    }\n\n    dispose(): void {\n        this._messages.length = 0;\n        this._item.dispose();\n    }\n\n    setMessage(message: string): Disposable {\n        const data: { message: string } = { message }; // use object to not confuse equal strings\n        this._messages.unshift(data);\n        this._update();\n\n        return new Disposable(() => {\n            const idx = this._messages.indexOf(data);\n            if (idx >= 0) {\n                this._messages.splice(idx, 1);\n                this._update();\n            }\n        });\n    }\n\n    private _update(): void {\n        if (this._messages.length > 0) {\n            this._item.text = this._messages[0].message;\n            this._item.show();\n        } else {\n            this._item.hide();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { ThemeColor, StatusBarAlignment } from '../types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { UUID } from '@phosphor/coreutils/lib/uuid';\n\nexport class StatusBarItemImpl implements theia.StatusBarItem {\n\n    private readonly id = StatusBarItemImpl.nextId();\n\n    private _alignment: StatusBarAlignment;\n    private _priority: number;\n\n    private _text: string;\n    private _tooltip: string;\n    private _color: string | ThemeColor;\n    private _command: string;\n\n    private _isVisible: boolean;\n    private _timeoutHandle: NodeJS.Timer | undefined;\n\n    _proxy: StatusBarMessageRegistryMain;\n\n    constructor(_proxy: StatusBarMessageRegistryMain,\n        alignment: StatusBarAlignment = StatusBarAlignment.Left,\n        priority: number = 0) {\n        this._proxy = _proxy;\n        this._alignment = alignment;\n        this._priority = priority;\n    }\n\n    public get alignment(): theia.StatusBarAlignment {\n        return <theia.StatusBarAlignment>this._alignment;\n    }\n\n    public get priority(): number {\n        return this._priority;\n    }\n\n    public get text(): string {\n        return this._text;\n    }\n\n    public get tooltip(): string {\n        return this._tooltip;\n    }\n\n    public get color(): string | ThemeColor {\n        return this._color;\n    }\n\n    public get command(): string {\n        return this._command;\n    }\n\n    public set text(text: string) {\n        this._text = text;\n        this.update();\n    }\n\n    public set tooltip(tooltip: string) {\n        this._tooltip = tooltip;\n        this.update();\n    }\n\n    public set color(color: string | ThemeColor) {\n        this._color = color;\n        this.update();\n    }\n\n    public set command(command: string) {\n        this._command = command;\n        this.update();\n    }\n\n    public show(): void {\n        this._isVisible = true;\n        this.update();\n    }\n\n    public hide(): void {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        this._proxy.$dispose(this.id);\n        this._isVisible = false;\n    }\n\n    private update(): void {\n        if (!this._isVisible) {\n            return;\n        }\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        // Defer the update so that multiple changes to setters don't cause a redraw each\n        this._timeoutHandle = setTimeout(() => {\n            this._timeoutHandle = undefined;\n\n            // Set to status bar\n            this._proxy.$setMessage(this.id, this.text,\n                this.priority,\n                this.alignment,\n                typeof this.color === 'string' ? this.color : this.color && this.color.id,\n                this.tooltip,\n                this.command);\n        }, 0);\n    }\n\n    public dispose(): void {\n        this.hide();\n    }\n\n    static nextId(): string {\n        return StatusBarItemImpl.ID_PREFIX + ':' + UUID.uuid4();\n    }\n    static ID_PREFIX = 'plugin-status-bar-item';\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri';\nimport { WindowState } from '@theia/plugin';\nimport { WindowStateExt, WindowMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Schemes } from '../common/uri-components';\n\nexport class WindowStateExtImpl implements WindowStateExt {\n\n    private windowStateCached: WindowState;\n\n    private windowStateChangedEmitter = new Emitter<WindowState>();\n    public readonly onDidChangeWindowState: Event<WindowState> = this.windowStateChangedEmitter.event;\n\n    private readonly proxy: WindowMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WINDOW_MAIN);\n        this.windowStateCached = { focused: true }; // supposed tab is active on start\n    }\n\n    getWindowState(): WindowState {\n        return this.windowStateCached;\n    }\n\n    $onWindowStateChanged(focused: boolean): void {\n        const state = { focused: focused };\n        if (state === this.windowStateCached) {\n            return;\n        }\n\n        this.windowStateCached = state;\n        this.windowStateChangedEmitter.fire(state);\n    }\n\n    openUri(uri: URI): Promise<boolean> {\n        return this.proxy.$openUri(uri);\n    }\n\n    async asExternalUri(target: URI): Promise<URI> {\n        if (!target.scheme.trim().length) {\n            throw new Error('Invalid scheme - cannot be empty');\n        }\n        if (Schemes.HTTP !== target.scheme && Schemes.HTTPS !== target.scheme) {\n            throw new Error(`Invalid scheme '${target.scheme}'`);\n        }\n\n        const uri = await this.proxy.$asExternalUri(target);\n        return URI.revive(uri);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TextEditorsExt, EditorChangedPropertiesData, TextEditorPositionData, TextEditorsMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorExt } from './text-editor';\nimport * as Converters from './type-converters';\nimport { TextEditorSelectionChangeKind } from './types-impl';\nimport { IdGenerator } from '../common/id-generator';\n\nexport class TextEditorsExtImpl implements TextEditorsExt {\n\n    private readonly _onDidChangeTextEditorSelection = new Emitter<theia.TextEditorSelectionChangeEvent>();\n    private readonly _onDidChangeTextEditorOptions = new Emitter<theia.TextEditorOptionsChangeEvent>();\n    private readonly _onDidChangeTextEditorVisibleRanges = new Emitter<theia.TextEditorVisibleRangesChangeEvent>();\n    private readonly _onDidChangeTextEditorViewColumn = new Emitter<theia.TextEditorViewColumnChangeEvent>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<theia.TextEditor | undefined>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<theia.TextEditor[]>();\n\n    readonly onDidChangeTextEditorSelection: Event<theia.TextEditorSelectionChangeEvent> = this._onDidChangeTextEditorSelection.event;\n    readonly onDidChangeTextEditorOptions = this._onDidChangeTextEditorOptions.event;\n    readonly onDidChangeTextEditorVisibleRanges = this._onDidChangeTextEditorVisibleRanges.event;\n    readonly onDidChangeTextEditorViewColumn = this._onDidChangeTextEditorViewColumn.event;\n    readonly onDidChangeActiveTextEditor = this._onDidChangeActiveTextEditor.event;\n    readonly onDidChangeVisibleTextEditors = this._onDidChangeVisibleTextEditors.event;\n\n    private proxy: TextEditorsMain;\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN);\n\n        this.editorsAndDocuments.onDidChangeActiveTextEditor(e => this._onDidChangeActiveTextEditor.fire(e));\n        this.editorsAndDocuments.onDidChangeVisibleTextEditors(e => this._onDidChangeVisibleTextEditors.fire(e));\n    }\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void {\n        const textEditor = this.editorsAndDocuments.getEditor(id);\n        if (!textEditor) {\n            return;\n        }\n\n        if (props.options) {\n            textEditor.acceptOptions(props.options);\n        }\n        if (props.selections) {\n            const selections = props.selections.selections.map(Converters.toSelection);\n            textEditor.acceptSelections(selections);\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            textEditor.acceptVisibleRanges(visibleRanges);\n        }\n\n        if (props.options) {\n            this._onDidChangeTextEditorOptions.fire({\n                textEditor,\n                options: props.options\n            });\n        }\n\n        if (props.selections) {\n            const kind = TextEditorSelectionChangeKind.fromValue(props.selections.source);\n            const selections = props.selections.selections.map(Converters.toSelection);\n            this._onDidChangeTextEditorSelection.fire({\n                textEditor,\n                selections,\n                kind\n            });\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            this._onDidChangeTextEditorVisibleRanges.fire({\n                textEditor,\n                visibleRanges\n            });\n        }\n    }\n    $acceptEditorPositionData(data: TextEditorPositionData): void {\n        for (const id in data) {\n            if (data.hasOwnProperty(id)) {\n                const textEditor = this.editorsAndDocuments.getEditor(id);\n                const viewColumn = Converters.toViewColumn(data[id]);\n                if (textEditor && viewColumn) {\n                    if (textEditor.viewColumn !== viewColumn) {\n                        textEditor.acceptViewColumn(viewColumn);\n                        this._onDidChangeTextEditorViewColumn.fire({ textEditor, viewColumn });\n                    }\n                }\n            }\n        }\n    }\n\n    getActiveEditor(): TextEditorExt | undefined {\n        return this.editorsAndDocuments.activeEditor();\n    }\n\n    getVisibleTextEditors(): theia.TextEditor[] {\n        return this.editorsAndDocuments.allEditors();\n    }\n\n    createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n        return new TextEditorDecorationType(this.proxy, options);\n    }\n\n    applyWorkspaceEdit(edit: theia.WorkspaceEdit): Promise<boolean> {\n        const dto = Converters.fromWorkspaceEdit(edit, this.editorsAndDocuments);\n        return this.proxy.$tryApplyWorkspaceEdit(dto);\n    }\n\n    saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n        return this.proxy.$saveAll(includeUntitled);\n    }\n\n}\n\nexport class TextEditorDecorationType implements theia.TextEditorDecorationType {\n\n    private static readonly Keys = new IdGenerator('TextEditorDecorationType');\n\n    private proxy: TextEditorsMain;\n    public key: string;\n\n    constructor(proxy: TextEditorsMain, options: theia.DecorationRenderOptions) {\n        this.key = TextEditorDecorationType.Keys.nextId();\n        this.proxy = proxy;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.proxy.$registerTextEditorDecorationType(this.key, Converters.DecorationRenderOptions.from(options));\n    }\n\n    dispose(): void {\n        this.proxy.$removeTextEditorDecorationType(this.key);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport class IdGenerator {\n    private lastId: number;\n    constructor(private prefix: string) {\n        this.lastId = 0;\n    }\n\n    nextId(): string {\n        return this.prefix + (++this.lastId);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * based on https://github.com/Microsoft/vscode/blob/bf9a27ec01f2ef82fc45f69e0c946c7d74a57d3e/src/vs/workbench/api/node/extHostDocumentSaveParticipant.ts\n */\nimport { DocumentsExt, ModelChangedEvent, PLUGIN_RPC_CONTEXT, DocumentsMain, SingleEditOperation } from '../common/plugin-api-rpc';\nimport URI from 'vscode-uri';\nimport { UriComponents } from '../common/uri-components';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt, setWordDefinitionFor } from './document-data';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport * as Converter from './type-converters';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Range, TextDocumentShowOptions } from '../common/plugin-api-rpc-model';\nimport { TextEdit } from './types-impl';\n\nexport class DocumentsExtImpl implements DocumentsExt {\n    private toDispose = new DisposableCollection();\n    private _onDidAddDocument = new Emitter<theia.TextDocument>();\n    private _onDidRemoveDocument = new Emitter<theia.TextDocument>();\n    private _onDidChangeDocument = new Emitter<theia.TextDocumentChangeEvent>();\n    private _onDidSaveTextDocument = new Emitter<theia.TextDocument>();\n    private _onWillSaveTextDocument = new Emitter<theia.TextDocumentWillSaveEvent>();\n\n    readonly onDidAddDocument: Event<theia.TextDocument> = this._onDidAddDocument.event;\n    readonly onDidRemoveDocument: Event<theia.TextDocument> = this._onDidRemoveDocument.event;\n    readonly onDidChangeDocument: Event<theia.TextDocumentChangeEvent> = this._onDidChangeDocument.event;\n    readonly onDidSaveTextDocument: Event<theia.TextDocument> = this._onDidSaveTextDocument.event;\n    readonly onWillSaveTextDocument: Event<theia.TextDocumentWillSaveEvent> = this._onWillSaveTextDocument.event;\n\n    private proxy: DocumentsMain;\n    private loadingDocuments = new Map<string, Promise<DocumentDataExt | undefined>>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN);\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidAddDocuments(documents => {\n                for (const document of documents) {\n                    this._onDidAddDocument.fire(document.document);\n                }\n            })\n        );\n\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidRemoveDocuments(documents => {\n                for (const data of documents) {\n                    this._onDidRemoveDocument.fire(data.document);\n                }\n            })\n        );\n    }\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void {\n        const uri = URI.revive(startUrl);\n        const uriString = uri.toString();\n\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            this._onDidRemoveDocument.fire(data.document);\n            data.acceptLanguageId(newModeId);\n            this._onDidAddDocument.fire(data.document);\n        }\n    }\n    $acceptModelSaved(strUrl: UriComponents): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        this.$acceptDirtyStateChanged(strUrl, false);\n        if (data) {\n            this._onDidSaveTextDocument.fire(data.document);\n        }\n    }\n\n    async $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]> {\n        const uri = URI.revive(strUrl).toString();\n        const operations: SingleEditOperation[] = [];\n        let didTimeout = false;\n        // try to timeout early to squeeze edits at least from some save participants\n        const didTimeoutHandle = setTimeout(() => didTimeout = true, saveTimeout - 250);\n        try {\n            await this._onWillSaveTextDocument.sequence(async fireEvent => {\n                if (didTimeout) {\n                    return false;\n                }\n                try {\n                    const documentData = this.editorsAndDocuments.getDocument(uri);\n                    if (documentData) {\n                        const { document } = documentData;\n                        await this.fireTextDocumentWillSaveEvent({\n                            document, reason, fireEvent,\n                            accept: operation => operations.push(operation)\n                        });\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n                return !didTimeout;\n            });\n        } finally {\n            clearTimeout(didTimeoutHandle);\n        }\n        return operations;\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    protected async fireTextDocumentWillSaveEvent({\n        document, reason, fireEvent, accept\n    }: {\n        document: theia.TextDocument,\n        reason: theia.TextDocumentSaveReason,\n        fireEvent: (e: theia.TextDocumentWillSaveEvent) => any,\n        accept: (operation: SingleEditOperation) => void\n    }): Promise<void> {\n\n        const promises: PromiseLike<TextEdit[] | any>[] = [];\n        fireEvent(Object.freeze({\n            document, reason,\n            waitUntil(p: PromiseLike<TextEdit[] | any>): void {\n                if (Object.isFrozen(promises)) {\n                    throw new Error('waitUntil can not be called async');\n                }\n                promises.push(p);\n            }\n        }));\n        Object.freeze(promises);\n\n        await Promise.all(promises).then(allEdits => allEdits.forEach(edits => {\n            if (Array.isArray(edits)) {\n                edits.forEach(edit => {\n                    if (TextEdit.isTextEdit(edit)) {\n                        accept(Converter.fromTextEdit(edit));\n                    }\n                });\n            }\n        }));\n    }\n    /* eslint-enable  @typescript-eslint/no-explicit-any */\n\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            contentChanges: []\n        });\n    }\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        data.onEvents(e);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            contentChanges: e.changes.map(change =>\n                ({\n                    range: Converter.toRange(change.range),\n                    rangeOffset: change.rangeOffset,\n                    rangeLength: change.rangeLength,\n                    text: change.text\n                }))\n        });\n    }\n    getAllDocumentData(): DocumentDataExt[] {\n        return this.editorsAndDocuments.allDocuments();\n    }\n\n    getDocumentData(resource: theia.Uri): DocumentDataExt | undefined {\n        if (resource) {\n            return this.editorsAndDocuments.getDocument(resource.toString());\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Retrieve document and open it in the editor if need.\n     *\n     * @param uri path to the resource\n     * @param options if options exists, resource will be opened in editor, otherwise only document object is returned\n     */\n    async showDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        // Determine whether the document is already loading\n        const loadingDocument = this.loadingDocuments.get(uri.toString());\n        if (loadingDocument) {\n            // return the promise if document is already loading\n            return loadingDocument;\n        }\n\n        try {\n            // start opening document\n            const document = this.loadDocument(uri, options);\n            // add loader to the map\n            this.loadingDocuments.set(uri.toString(), document);\n            // wait the document being opened\n            await document;\n            // return opened document\n            return document;\n        } catch (error) {\n            return Promise.reject(error);\n        } finally {\n            // remove loader from the map\n            this.loadingDocuments.delete(uri.toString());\n        }\n    }\n\n    async openDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        const cached = this.editorsAndDocuments.getDocument(uri.toString());\n        if (cached) {\n            return cached;\n        }\n\n        await this.proxy.$tryOpenDocument(uri);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    private async loadDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        let documentOptions: TextDocumentShowOptions | undefined;\n        if (options) {\n            let selection: Range | undefined;\n            if (options.selection) {\n                const { start, end } = options.selection;\n                selection = {\n                    startLineNumber: start.line,\n                    startColumn: start.character,\n                    endLineNumber: end.line,\n                    endColumn: end.character\n                };\n            }\n            documentOptions = {\n                selection,\n                preserveFocus: options.preserveFocus,\n                preview: options.preview,\n                viewColumn: options.viewColumn\n            };\n        }\n        await this.proxy.$tryShowDocument(uri, documentOptions);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    async createDocumentData(options?: { language?: string; content?: string }): Promise<URI> {\n        return this.proxy.$tryCreateDocument(options).then(data => URI.revive(data));\n    }\n\n    setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n        setWordDefinitionFor(modeId, wordDefinition);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Copied from https://github.com/Microsoft/vscode/blob/master/src/vs/editor/common/viewModel/prefixSumComputer.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Max unsigned integer that fits on 32 bits.\n */\nconst MAX_UINT_32 = 4294967295; // 2^32 - 1\n\nexport function toUint32(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > MAX_UINT_32) {\n        return MAX_UINT_32;\n    }\n    return v | 0;\n}\n\nexport class PrefixSumIndexOfResult {\n    _prefixSumIndexOfResultBrand: void;\n\n    index: number;\n    remainder: number;\n\n    constructor(index: number, remainder: number) {\n        this.index = index;\n        this.remainder = remainder;\n    }\n}\n\nexport class PrefixSumComputer {\n\n    /**\n     * values[i] is the value at index i\n     */\n    private values: Uint32Array;\n\n    /**\n     * prefixSum[i] = SUM(heights[j]), 0 <= j <= i\n     */\n    private prefixSum: Uint32Array;\n\n    /**\n     * prefixSum[i], 0 <= i <= prefixSumValidIndex can be trusted\n     */\n    private prefixSumValidIndex: Int32Array;\n\n    constructor(values: Uint32Array) {\n        this.values = values;\n        this.prefixSum = new Uint32Array(values.length);\n        this.prefixSumValidIndex = new Int32Array(1);\n        this.prefixSumValidIndex[0] = -1;\n    }\n\n    public getCount(): number {\n        return this.values.length;\n    }\n\n    public insertValues(insertIndex: number, insertValues: Uint32Array): boolean {\n        insertIndex = toUint32(insertIndex);\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n        const insertValuesLen = insertValues.length;\n\n        if (insertValuesLen === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n        this.values.set(insertValues, insertIndex);\n\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = insertIndex - 1;\n        }\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public changeValue(index: number, value: number): boolean {\n        index = toUint32(index);\n        value = toUint32(value);\n\n        if (this.values[index] === value) {\n            return false;\n        }\n        this.values[index] = value;\n        if (index - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = index - 1;\n        }\n        return true;\n    }\n\n    public removeValues(startIndex: number, cnt: number): boolean {\n        startIndex = toUint32(startIndex);\n        cnt = toUint32(cnt);\n\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n\n        if (startIndex >= oldValues.length) {\n            return false;\n        }\n\n        const maxCnt = oldValues.length - startIndex;\n        if (cnt >= maxCnt) {\n            cnt = maxCnt;\n        }\n\n        if (cnt === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length - cnt);\n        this.values.set(oldValues.subarray(0, startIndex), 0);\n        this.values.set(oldValues.subarray(startIndex + cnt), startIndex);\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = startIndex - 1;\n        }\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public getTotalValue(): number {\n        if (this.values.length === 0) {\n            return 0;\n        }\n        return this._getAccumulatedValue(this.values.length - 1);\n    }\n\n    public getAccumulatedValue(index: number): number {\n        if (index < 0) {\n            return 0;\n        }\n\n        index = toUint32(index);\n        return this._getAccumulatedValue(index);\n    }\n\n    private _getAccumulatedValue(index: number): number {\n        if (index <= this.prefixSumValidIndex[0]) {\n            return this.prefixSum[index];\n        }\n\n        let startIndex = this.prefixSumValidIndex[0] + 1;\n        if (startIndex === 0) {\n            this.prefixSum[0] = this.values[0];\n            startIndex++;\n        }\n\n        if (index >= this.values.length) {\n            index = this.values.length - 1;\n        }\n\n        for (let i = startIndex; i <= index; i++) {\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n        }\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n        return this.prefixSum[index];\n    }\n\n    public getIndexOf(accumulatedValue: number): PrefixSumIndexOfResult {\n        accumulatedValue = Math.floor(accumulatedValue);\n\n        // Compute all sums (to get a fully valid prefixSum)\n        this.getTotalValue();\n\n        let low = 0;\n        let high = this.values.length - 1;\n        let mid: number;\n        let midStop: number;\n        let midStart: number;\n\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n\n            midStop = this.prefixSum[mid];\n            midStart = midStop - this.values[mid];\n\n            if (accumulatedValue < midStart) {\n                high = mid - 1;\n            } else if (accumulatedValue >= midStop) {\n                low = mid + 1;\n            } else {\n                break;\n            }\n        }\n\n        return new PrefixSumIndexOfResult(mid!, accumulatedValue - midStart!);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Word inside a model.\n */\nexport interface WordAtPosition {\n    /**\n     * The word.\n     */\n    readonly word: string;\n    /**\n     * The column where the word starts.\n     */\n    readonly startColumn: number;\n    /**\n     * The column where the word ends.\n     */\n    readonly endColumn: number;\n}\n\nexport const USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords: string = ''): RegExp {\n    let source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (let i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\n            continue;\n        }\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexport const DEFAULT_WORD_REGEXP = createWordRegExp();\n\nexport function ensureValidWordDefinition(wordDefinition?: RegExp): RegExp {\n    let result: RegExp = DEFAULT_WORD_REGEXP;\n\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            let flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        } else {\n            result = wordDefinition;\n        }\n    }\n\n    result.lastIndex = 0;\n\n    return result;\n}\n\nfunction getWordAtPosFast(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // find whitespace enclosed text around column and match from there\n\n    const pos = column - 1 - textOffset;\n    const start = text.lastIndexOf(' ', pos - 1) + 1;\n    let end = text.indexOf(' ', pos);\n    if (end === -1) {\n        end = text.length;\n    }\n\n    wordDefinition.lastIndex = start;\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n        if (match.index! <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nfunction getWordAtPosSlow(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n\n    const pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n\n        if (match.index! > pos) {\n            // |nW -> matched only after the pos\n            return undefined;\n\n        } else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nexport function getWordAtText(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    const match = wordDefinition.exec(text);\n    if (!match) {\n        return undefined;\n    }\n    // todo@joh the `match` could already be the (first) word\n    const ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n\n    return ret;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): string {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, OutputChannelRegistryMain, PluginInfo, OutputChannelRegistryExt\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { OutputChannelImpl } from './output-channel/output-channel-item';\n\nexport class OutputChannelRegistryExtImpl implements OutputChannelRegistryExt {\n\n    proxy: OutputChannelRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.OUTPUT_CHANNEL_REGISTRY_MAIN);\n    }\n\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel {\n        name = name.trim();\n        if (!name) {\n            throw new Error('illegal argument \\'name\\'. must not be falsy');\n        } else {\n            return new OutputChannelImpl(name, this.proxy, pluginInfo);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\nexport class OutputChannelImpl implements theia.OutputChannel {\n\n    private disposed: boolean;\n\n    constructor(readonly name: string, private proxy: OutputChannelRegistryMain, private readonly pluginInfo: PluginInfo) {\n    }\n\n    dispose(): void {\n        if (!this.disposed) {\n            this.proxy.$dispose(this.name).then(() => {\n                this.disposed = true;\n            });\n        }\n    }\n\n    append(value: string): void {\n        this.validate();\n        this.proxy.$append(this.name, value, this.pluginInfo);\n    }\n\n    appendLine(value: string): void {\n        this.validate();\n        this.append(value + '\\n');\n    }\n\n    clear(): void {\n        this.validate();\n        this.proxy.$clear(this.name);\n    }\n\n    show(preserveFocus: boolean | undefined): void {\n        this.validate();\n        this.proxy.$reveal(this.name, !!preserveFocus);\n    }\n\n    hide(): void {\n        this.validate();\n        this.proxy.$close(this.name);\n    }\n\n    private validate(): void {\n        if (this.disposed) {\n            throw new Error('Channel has been closed');\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { UUID } from '@phosphor/coreutils/lib/uuid';\nimport { Terminal, TerminalOptions } from '@theia/plugin';\nimport { TerminalServiceExt, TerminalServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport * as theia from '@theia/plugin';\n\n/**\n * Provides high level terminal plugin api to use in the Theia plugins.\n * This service allow(with help proxy) create and use terminal emulator.\n */\nexport class TerminalServiceExtImpl implements TerminalServiceExt {\n\n    private readonly proxy: TerminalServiceMain;\n\n    private readonly _terminals = new Map<string, TerminalExtImpl>();\n\n    private readonly onDidCloseTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidCloseTerminal: theia.Event<Terminal> = this.onDidCloseTerminalEmitter.event;\n\n    private readonly onDidOpenTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidOpenTerminal: theia.Event<Terminal> = this.onDidOpenTerminalEmitter.event;\n\n    private readonly onDidChangeActiveTerminalEmitter = new Emitter<Terminal | undefined>();\n    readonly onDidChangeActiveTerminal: theia.Event<Terminal | undefined> = this.onDidChangeActiveTerminalEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN);\n    }\n\n    get terminals(): TerminalExtImpl[] {\n        return [...this._terminals.values()];\n    }\n\n    createTerminal(nameOrOptions: TerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): Terminal {\n        let options: TerminalOptions;\n        if (typeof nameOrOptions === 'object') {\n            options = nameOrOptions;\n        } else {\n            options = {\n                name: nameOrOptions,\n                shellPath: shellPath,\n                shellArgs: shellArgs\n            };\n        }\n        const id = `plugin-terminal-${UUID.uuid4()}`;\n        this.proxy.$createTerminal(id, options);\n        return this.obtainTerminal(id, options.name || 'Terminal');\n    }\n\n    protected obtainTerminal(id: string, name: string): TerminalExtImpl {\n        let terminal = this._terminals.get(id);\n        if (!terminal) {\n            terminal = new TerminalExtImpl(this.proxy);\n            this._terminals.set(id, terminal);\n        }\n        terminal.name = name;\n        return terminal;\n    }\n\n    $terminalCreated(id: string, name: string): void {\n        const terminal = this.obtainTerminal(id, name);\n        terminal.id.resolve(id);\n        this.onDidOpenTerminalEmitter.fire(terminal);\n    }\n\n    $terminalNameChanged(id: string, name: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            terminal.name = name;\n        }\n    }\n\n    $terminalOpened(id: string, processId: number): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            // resolve for existing clients\n            terminal.deferredProcessId.resolve(processId);\n            // install new if terminal is reconnected\n            terminal.deferredProcessId = new Deferred<number>();\n            terminal.deferredProcessId.resolve(processId);\n        }\n    }\n\n    $terminalClosed(id: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            this.onDidCloseTerminalEmitter.fire(terminal);\n            this._terminals.delete(id);\n        }\n    }\n\n    private activeTerminalId: string | undefined;\n    get activeTerminal(): TerminalExtImpl | undefined {\n        return this.activeTerminalId && this._terminals.get(this.activeTerminalId) || undefined;\n    }\n    $currentTerminalChanged(id: string | undefined): void {\n        this.activeTerminalId = id;\n        this.onDidChangeActiveTerminalEmitter.fire(this.activeTerminal);\n    }\n\n}\n\nexport class TerminalExtImpl implements Terminal {\n\n    name: string;\n\n    readonly id = new Deferred<string>();\n\n    deferredProcessId = new Deferred<number>();\n    get processId(): Thenable<number> {\n        return this.deferredProcessId.promise;\n    }\n\n    constructor(private readonly proxy: TerminalServiceMain) { }\n\n    sendText(text: string, addNewLine: boolean = true): void {\n        this.id.promise.then(id => this.proxy.$sendText(id, text, addNewLine));\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.id.promise.then(id => this.proxy.$show(id, preserveFocus));\n    }\n\n    hide(): void {\n        this.id.promise.then(id => this.proxy.$hide(id));\n    }\n\n    dispose(): void {\n        this.id.promise.then(id => this.proxy.$dispose(id));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    LanguagesExt,\n    PLUGIN_RPC_CONTEXT,\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    SerializedRegExp,\n    SerializedOnEnterRule,\n    SerializedIndentationRule,\n    Position,\n    Selection,\n    RawColorInfo,\n    WorkspaceEditDto,\n    PluginInfo\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from './documents';\nimport { PluginModel } from '../common/plugin-protocol';\nimport { Disposable } from './types-impl';\nimport URI from 'vscode-uri/lib/umd';\nimport { UriComponents } from '../common/uri-components';\nimport {\n    CompletionContext,\n    CompletionResultDto,\n    Completion,\n    SerializedDocumentFilter,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    Range,\n    TextEdit,\n    FormattingOptions,\n    Definition,\n    DefinitionLink,\n    DocumentLink,\n    CodeLensSymbol,\n    DocumentSymbol,\n    ReferenceContext,\n    Location,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeActionContext,\n    CodeAction,\n    FoldingRange,\n    CallHierarchyDefinition,\n    CallHierarchyReference\n} from '../common/plugin-api-rpc-model';\nimport { CompletionAdapter } from './languages/completion';\nimport { Diagnostics } from './languages/diagnostics';\nimport { SignatureHelpAdapter } from './languages/signature';\nimport { HoverAdapter } from './languages/hover';\nimport { DocumentHighlightAdapter } from './languages/document-highlight';\nimport { DocumentFormattingAdapter } from './languages/document-formatting';\nimport { RangeFormattingAdapter } from './languages/range-formatting';\nimport { OnTypeFormattingAdapter } from './languages/on-type-formatting';\nimport { DefinitionAdapter } from './languages/definition';\nimport { ImplementationAdapter } from './languages/implementation';\nimport { TypeDefinitionAdapter } from './languages/type-definition';\nimport { CodeActionAdapter } from './languages/code-action';\nimport { LinkProviderAdapter } from './languages/link-provider';\nimport { CodeLensAdapter } from './languages/lens';\nimport { OutlineAdapter } from './languages/outline';\nimport { ReferenceAdapter } from './languages/reference';\nimport { WorkspaceSymbolAdapter } from './languages/workspace-symbol';\nimport { SymbolInformation } from 'vscode-languageserver-types';\nimport { FoldingProviderAdapter } from './languages/folding';\nimport { ColorProviderAdapter } from './languages/color';\nimport { RenameAdapter } from './languages/rename';\nimport { Event } from '@theia/core/lib/common/event';\nimport { CommandRegistryImpl } from './command-registry';\nimport { DeclarationAdapter } from './languages/declaration';\nimport { CallHierarchyAdapter } from './languages/call-hierarchy';\n\n/* eslint-disable @typescript-eslint/indent */\ntype Adapter = CompletionAdapter |\n    SignatureHelpAdapter |\n    HoverAdapter |\n    DocumentHighlightAdapter |\n    DocumentFormattingAdapter |\n    RangeFormattingAdapter |\n    OnTypeFormattingAdapter |\n    DefinitionAdapter |\n    DeclarationAdapter |\n    ImplementationAdapter |\n    TypeDefinitionAdapter |\n    LinkProviderAdapter |\n    CodeLensAdapter |\n    CodeActionAdapter |\n    OutlineAdapter |\n    ReferenceAdapter |\n    WorkspaceSymbolAdapter |\n    FoldingProviderAdapter |\n    ColorProviderAdapter |\n    RenameAdapter |\n    CallHierarchyAdapter;\n/* eslint-enable @typescript-eslint/indent */\n\nexport class LanguagesExtImpl implements LanguagesExt {\n\n    private proxy: LanguagesMain;\n\n    private readonly diagnostics: Diagnostics;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, Adapter>();\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n        this.diagnostics = new Diagnostics(rpc);\n    }\n\n    get onDidChangeDiagnostics(): Event<theia.DiagnosticChangeEvent> {\n        return this.diagnostics.onDidChangeDiagnostics;\n    }\n\n    getLanguages(): Promise<string[]> {\n        return this.proxy.$getLanguages();\n    }\n\n    changeLanguage(uri: URI, languageId: string): Promise<theia.TextDocument> {\n        return this.proxy.$changeLanguage(uri, languageId).then(() => {\n            const doc = this.documents.getDocumentData(uri);\n            if (!doc) {\n                throw new Error('No document found by URI ' + uri.toString());\n            }\n            return doc.document;\n        });\n    }\n\n    setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n        const { wordPattern } = configuration;\n\n        if (wordPattern) {\n            this.documents.setWordDefinitionFor(language, wordPattern);\n        } else {\n            this.documents.setWordDefinitionFor(language, null);\n        }\n\n        const callId = this.nextCallId();\n\n        const config: SerializedLanguageConfiguration = {\n            brackets: configuration.brackets,\n            comments: configuration.comments,\n            onEnterRules: serializeEnterRules(configuration.onEnterRules),\n            wordPattern: serializeRegExp(configuration.wordPattern),\n            indentationRules: serializeIndentation(configuration.indentationRules)\n        };\n\n        this.proxy.$setLanguageConfiguration(callId, language, config);\n        return this.createDisposable(callId);\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    private addNewAdapter(adapter: Adapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private withAdapter<A, R>(handle: number, ctor: { new(...args: any[]): A }, callback: (adapter: A) => Promise<R>): Promise<R> {\n        const adapter = this.adaptersMap.get(handle);\n        if (!(adapter instanceof ctor)) {\n            return Promise.reject(new Error('no adapter found'));\n        }\n        return callback(<A>adapter);\n    }\n\n    private transformDocumentSelector(selector: theia.DocumentSelector): SerializedDocumentFilter[] {\n        if (Array.isArray(selector)) {\n            return selector.map(sel => this.doTransformDocumentSelector(sel)!);\n        }\n\n        return [this.doTransformDocumentSelector(selector)!];\n    }\n\n    private doTransformDocumentSelector(selector: string | theia.DocumentFilter): SerializedDocumentFilter | undefined {\n        if (typeof selector === 'string') {\n            return {\n                $serialized: true,\n                language: selector\n            };\n        }\n\n        if (selector) {\n            return {\n                $serialized: true,\n                language: selector.language,\n                scheme: selector.scheme,\n                pattern: selector.pattern\n            };\n        }\n\n        return undefined;\n    }\n\n    // ### Completion begin\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token));\n    }\n\n    $resolveCompletionItem(handle: number, resource: UriComponents, position: Position, completion: Completion, token: theia.CancellationToken): Promise<Completion> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.resolveCompletionItem(URI.revive(resource), position, completion, token));\n    }\n\n    $releaseCompletionItems(handle: number, id: number): void {\n        this.withAdapter(handle, CompletionAdapter, async adapter => adapter.releaseCompletionItems(id));\n    }\n\n    registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, triggerCharacters: string[],\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CompletionAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerCompletionSupport(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters, CompletionAdapter.hasResolveSupport(provider));\n        return this.createDisposable(callId);\n    }\n    // ### Completion end\n\n    // ### Definition provider begin\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token));\n    }\n\n    registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DefinitionAdapter(provider, this.documents));\n        this.proxy.$registerDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Definition provider end\n\n    // ### Declaration provider begin\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token));\n    }\n\n    registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DeclarationAdapter(provider, this.documents));\n        this.proxy.$registerDeclarationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Declaration provider end\n\n    // ### Signature help begin\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: theia.CancellationToken\n    ): Promise<SignatureHelp | undefined> {\n        return this.withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, token, context));\n    }\n\n    $releaseSignatureHelp(handle: number, id: number): void {\n        this.withAdapter(handle, SignatureHelpAdapter, async adapter => adapter.releaseSignatureHelp(id));\n    }\n\n    registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, metadata: theia.SignatureHelpProviderMetadata,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SignatureHelpAdapter(provider, this.documents));\n        this.proxy.$registerSignatureHelpProvider(callId, pluginInfo, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Signature help end\n\n    // ### Diagnostics begin\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        return this.diagnostics.getDiagnostics(resource!);\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        return this.diagnostics.createDiagnosticCollection(name);\n    }\n    // ### Diagnostics end\n\n    // ### Implementation provider begin\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token));\n    }\n\n    registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ImplementationAdapter(provider, this.documents));\n        this.proxy.$registerImplementationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Implementation provider end\n\n    // ### Type Definition provider begin\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token));\n    }\n\n    registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeDefinitionAdapter(provider, this.documents));\n        this.proxy.$registerTypeDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Type Definition provider end\n\n    // ### Hover Provider begin\n    registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new HoverAdapter(provider, this.documents));\n        this.proxy.$registerHoverProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        return this.withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, token));\n    }\n    // ### Hover Provider end\n\n    // ### Document Highlight Provider begin\n    registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentHighlightAdapter(provider, this.documents));\n        this.proxy.$registerDocumentHighlightProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        return this.withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token));\n    }\n    // ### Document Highlight Provider end\n\n    // ### WorkspaceSymbol Provider begin\n    registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new WorkspaceSymbolAdapter(provider));\n        this.proxy.$registerWorkspaceSymbolProvider(callId, pluginInfo);\n        return this.createDisposable(callId);\n    }\n\n    $provideWorkspaceSymbols(handle: number, query: string, token: theia.CancellationToken): PromiseLike<SymbolInformation[]> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.provideWorkspaceSymbols(query, token));\n    }\n\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: theia.CancellationToken): PromiseLike<SymbolInformation> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token));\n    }\n    // ### WorkspaceSymbol Provider end\n\n    // ### Document Formatting Edit begin\n    registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentFormattingAdapter(provider, this.documents));\n        this.proxy.$registerDocumentFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token));\n    }\n    // ### Document Formatting Edit end\n\n    // ### Document Range Formatting Edit begin\n    registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RangeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerRangeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token));\n    }\n    // ### Document Range Formatting Edit end\n\n    // ### On Type Formatting Edit begin\n    registerOnTypeFormattingEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.OnTypeFormattingEditProvider,\n        triggerCharacters: string[],\n        pluginInfo: PluginInfo\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new OnTypeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerOnTypeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n\n    $provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token));\n    }\n    // ### On Type Formatting Edit end\n\n    // ### Document Link Provider begin\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token));\n    }\n\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(link, token));\n    }\n\n    registerLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new LinkProviderAdapter(provider, this.documents));\n        this.proxy.$registerDocumentLinkProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $releaseDocumentLinks(handle: number, ids: number[]): void {\n        this.withAdapter(handle, LinkProviderAdapter, async adapter => adapter.releaseDocumentLinks(ids));\n    }\n\n    // ### Document Link Provider end\n\n    // ### Code Actions Provider begin\n    registerCodeActionsProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.CodeActionProvider,\n        pluginModel: PluginModel,\n        pluginInfo: PluginInfo,\n        metadata?: theia.CodeActionProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeActionAdapter(provider, this.documents, this.diagnostics, pluginModel ? pluginModel.id : '', this.commands));\n        this.proxy.$registerQuickFixProvider(\n            callId,\n            pluginInfo,\n            this.transformDocumentSelector(selector),\n            metadata && metadata.providedCodeActionKinds ? metadata.providedCodeActionKinds.map(kind => kind.value!) : undefined\n        );\n        return this.createDisposable(callId);\n    }\n\n    $provideCodeActions(handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: theia.CancellationToken\n    ): Promise<CodeAction[] | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeAction(URI.revive(resource), rangeOrSelection, context, token));\n    }\n    // ### Code Actions Provider end\n\n    // ### Code Lens Provider begin\n    registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeLensAdapter(provider, this.documents, this.commands));\n        const eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this.nextCallId() : undefined;\n        this.proxy.$registerCodeLensSupport(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined && provider.onDidChangeCodeLenses) {\n            const subscription = provider.onDidChangeCodeLenses(e => this.proxy.$emitCodeLensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideCodeLenses(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token));\n    }\n\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(URI.revive(resource), symbol, token));\n    }\n\n    $releaseCodeLenses(handle: number, ids: number[]): void {\n        this.withAdapter(handle, CodeLensAdapter, async adapter => adapter.releaseCodeLenses(ids));\n    }\n    // ### Code Lens Provider end\n\n    // ### Code Reference Provider begin\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        return this.withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token));\n    }\n\n    registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ReferenceAdapter(provider, this.documents));\n        this.proxy.$registerReferenceProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Code Reference Provider end\n\n    // ### Document Symbol Provider begin\n    registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new OutlineAdapter(this.documents, provider));\n        this.proxy.$registerOutlineSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        return this.withAdapter(handle, OutlineAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token));\n    }\n    // ### Document Symbol Provider end\n\n    // ### Color Provider begin\n    registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ColorProviderAdapter(this.documents, provider));\n        this.proxy.$registerDocumentColorProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentColors(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token));\n    }\n\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token));\n    }\n    // ### Color Provider end\n\n    // ### Folding Range Provider begin\n    registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new FoldingProviderAdapter(provider, this.documents));\n        this.proxy.$registerFoldingRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideFoldingRange(\n        callId: number,\n        resource: UriComponents,\n        context: theia.FoldingContext,\n        token: theia.CancellationToken\n    ): Promise<FoldingRange[] | undefined> {\n        return this.withAdapter(callId, FoldingProviderAdapter, adapter => adapter.provideFoldingRanges(URI.revive(resource), context, token));\n    }\n    // ### Folding Range Provider end\n\n    // ### Rename Provider begin\n    registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RenameAdapter(provider, this.documents));\n        this.proxy.$registerRenameProvider(callId, pluginInfo, this.transformDocumentSelector(selector), RenameAdapter.supportsResolving(provider));\n        return this.createDisposable(callId);\n    }\n\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token));\n    }\n\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<RenameLocation | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token));\n    }\n    // ### Rename Provider end\n\n    // ### Call Hierarchy Provider begin\n    registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new CallHierarchyAdapter(provider, this.documents));\n        this.proxy.$registerCallHierarchyProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideRootDefinition(handle: number, resource: UriComponents, location: Position, token: theia.CancellationToken): Promise<CallHierarchyDefinition | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideRootDefinition(URI.revive(resource), location, token));\n    }\n\n    $provideCallers(handle: number, definition: CallHierarchyDefinition, token: theia.CancellationToken): Promise<CallHierarchyReference[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallers(definition, token));\n    }\n    // ### Call Hierarchy Provider end\n}\n\nfunction serializeEnterRules(rules?: theia.OnEnterRule[]): SerializedOnEnterRule[] | undefined {\n    if (typeof rules === 'undefined' || rules === null) {\n        return undefined;\n    }\n\n    return rules.map(r =>\n        ({\n            action: r.action,\n            beforeText: serializeRegExp(r.beforeText),\n            afterText: serializeRegExp(r.afterText)\n        } as SerializedOnEnterRule));\n}\n\nfunction serializeRegExp(regexp?: RegExp): SerializedRegExp | undefined {\n    if (typeof regexp === 'undefined' || regexp === null) {\n        return undefined;\n    }\n\n    return {\n        pattern: regexp.source,\n        flags: (regexp.global ? 'g' : '') + (regexp.ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '')\n    };\n}\n\nfunction serializeIndentation(indentationRules?: theia.IndentationRule): SerializedIndentationRule | undefined {\n    if (typeof indentationRules === 'undefined' || indentationRules === null) {\n        return undefined;\n    }\n\n    return {\n        increaseIndentPattern: serializeRegExp(indentationRules.increaseIndentPattern),\n        decreaseIndentPattern: serializeRegExp(indentationRules.decreaseIndentPattern),\n        indentNextLinePattern: serializeRegExp(indentationRules.indentNextLinePattern),\n        unIndentedLinePattern: serializeRegExp(indentationRules.unIndentedLinePattern)\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { CompletionList, Range, SnippetString } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { mixin } from '../../common/types';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { CompletionContext, CompletionResultDto, Completion, CompletionDto, CompletionItemInsertTextRule } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CompletionAdapter {\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CompletionItem[]>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly delegate: theia.CompletionItemProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCompletionItems(resource: URI, position: Position, context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const doc = document.document;\n\n        const pos = Converter.toPosition(position);\n        return Promise.resolve(this.delegate.provideCompletionItems(doc, pos, token, context)).then(value => {\n            const id = this.cacheId++;\n\n            const toDispose = new DisposableCollection();\n            this.disposables.set(id, toDispose);\n\n            const result: CompletionResultDto = {\n                id,\n                completions: [],\n            };\n\n            let list: CompletionList;\n            if (!value) {\n                return undefined;\n            } else if (Array.isArray(value)) {\n                list = new CompletionList(value);\n            } else {\n                list = value;\n                result.incomplete = list.isIncomplete;\n            }\n\n            const wordRangeBeforePos = (doc.getWordRangeAtPosition(pos) as Range || new Range(pos, pos))\n                .with({ end: pos });\n\n            for (let i = 0; i < list.items.length; i++) {\n                const suggestion = this.convertCompletionItem(list.items[i], pos, wordRangeBeforePos, i, id);\n                if (suggestion) {\n                    result.completions.push(suggestion);\n                }\n            }\n            this.cache.set(id, list.items);\n\n            return result;\n        });\n    }\n\n    resolveCompletionItem(resource: URI, position: Position, completion: Completion, token: theia.CancellationToken): Promise<Completion> {\n        if (typeof this.delegate.resolveCompletionItem !== 'function') {\n            return Promise.resolve(completion);\n        }\n\n        const { parentId, id } = (<CompletionDto>completion);\n        const item = this.cache.has(parentId) && this.cache.get(parentId)![id];\n        if (!item) {\n            return Promise.resolve(completion);\n        }\n\n        return Promise.resolve(this.delegate.resolveCompletionItem(item, token)).then(resolvedItem => {\n\n            if (!resolvedItem) {\n                return completion;\n            }\n\n            const doc = this.documents.getDocumentData(resource)!.document;\n            const pos = Converter.toPosition(position);\n            const wordRangeBeforePos = (doc.getWordRangeAtPosition(pos) as Range || new Range(pos, pos)).with({ end: pos });\n            const newCompletion = this.convertCompletionItem(resolvedItem, pos, wordRangeBeforePos, id, parentId);\n            if (newCompletion) {\n                mixin(completion, newCompletion, true);\n            }\n\n            return completion;\n        });\n    }\n\n    async releaseCompletionItems(id: number): Promise<void> {\n        this.cache.delete(id);\n        const toDispose = this.disposables.get(id);\n        if (toDispose) {\n            toDispose.dispose();\n            this.disposables.delete(id);\n        }\n    }\n\n    private convertCompletionItem(item: theia.CompletionItem, position: theia.Position, defaultRange: theia.Range, id: number, parentId: number): CompletionDto | undefined {\n        if (typeof item.label !== 'string' || item.label.length === 0) {\n            console.warn('Invalid Completion Item -> must have at least a label');\n            return undefined;\n        }\n\n        const toDispose = this.disposables.get(parentId);\n        if (!toDispose) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        const range = item.textEdit ? item.textEdit.range : item.range || defaultRange;\n        if (range && (!range.isSingleLine || range.start.line !== position.line)) {\n            console.warn('Invalid Completion Item -> must be single line and on the same line');\n            return undefined;\n        }\n\n        let insertText = item.label;\n        let insertTextRules = item.keepWhitespace ? CompletionItemInsertTextRule.KeepWhitespace : 0;\n        if (item.textEdit) {\n            insertText = item.textEdit.newText;\n        } else if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        } else if (item.insertText instanceof SnippetString) {\n            insertText = item.insertText.value;\n            insertTextRules |= CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        return {\n            id,\n            parentId,\n            label: item.label,\n            kind: Converter.fromCompletionItemKind(item.kind),\n            detail: item.detail,\n            documentation: item.documentation,\n            filterText: item.filterText,\n            sortText: item.sortText,\n            preselect: item.preselect,\n            insertText,\n            insertTextRules,\n            range: Converter.fromRange(range),\n            additionalTextEdits: item.additionalTextEdits && item.additionalTextEdits.map(Converter.fromTextEdit),\n            command: this.commands.converter.toSafeCommand(item.command, toDispose),\n            commitCharacters: item.commitCharacters\n        };\n    }\n\n    static hasResolveSupport(provider: theia.CompletionItemProvider): boolean {\n        return typeof provider.resolveCompletionItem === 'function';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { convertDiagnosticToMarkerData } from '../type-converters';\nimport { DiagnosticSeverity, MarkerSeverity } from '../types-impl';\nimport { MarkerData } from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMain } from '../../common/plugin-api-rpc';\nimport URI from 'vscode-uri';\nimport { v4 } from 'uuid';\n\nexport class DiagnosticCollection implements theia.DiagnosticCollection {\n    private static DIAGNOSTICS_PRIORITY = [\n        DiagnosticSeverity.Error, DiagnosticSeverity.Warning, DiagnosticSeverity.Information, DiagnosticSeverity.Hint\n    ];\n\n    private collectionName: string;\n    private diagnosticsLimitPerResource: number;\n    private proxy: LanguagesMain;\n    private onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>;\n\n    private diagnostics: Map<string, theia.Diagnostic[]>; // uri -> diagnostics\n    private isDisposed: boolean;\n    private onDisposeCallback: (() => void) | undefined;\n\n    constructor(name: string, maxCountPerFile: number, proxy: LanguagesMain, onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>) {\n        this.collectionName = name;\n        this.diagnosticsLimitPerResource = maxCountPerFile;\n        this.proxy = proxy;\n        this.onDidChangeDiagnosticsEmitter = onDidChangeDiagnosticsEmitter;\n\n        this.diagnostics = new Map<string, theia.Diagnostic[]>();\n        this.isDisposed = false;\n        this.onDisposeCallback = undefined;\n    }\n\n    get name(): string {\n        return this.collectionName;\n    }\n\n    set(uri: theia.Uri, diagnostics: theia.Diagnostic[] | undefined): void;\n    set(entries: [theia.Uri, theia.Diagnostic[] | undefined][]): void;\n    set(arg: theia.Uri | [theia.Uri, theia.Diagnostic[] | undefined][], diagnostics?: theia.Diagnostic[] | undefined): void {\n        this.ensureNotDisposed();\n\n        if (arg instanceof URI) {\n            this.setDiagnosticsForUri(arg, diagnostics);\n        } else if (!arg) {\n            this.clear();\n        } else if (arg instanceof Array) {\n            this.setDiagnostics(arg);\n        }\n    }\n\n    private setDiagnosticsForUri(uri: URI, diagnostics?: theia.Diagnostic[]): void {\n        if (!diagnostics) {\n            this.diagnostics.delete(uri.toString());\n        } else {\n            this.diagnostics.set(uri.toString(), diagnostics);\n        }\n        this.fireDiagnosticChangeEvent(uri);\n        this.sendChangesToEditor([uri]);\n    }\n\n    private setDiagnostics(entries: [URI, theia.Diagnostic[] | undefined][]): void {\n        const delta: URI[] = [];\n\n        // clear old diagnostics for given resources\n        for (const [uri] of entries) {\n            this.diagnostics.delete(uri.toString());\n        }\n\n        for (const [uri, diagnostics] of entries) {\n            const uriString = uri.toString();\n\n            if (!diagnostics) {\n                // clear existed\n                this.diagnostics.delete(uriString);\n                delta.push(uri);\n            } else {\n                // merge with existed if any\n                const existedDiagnostics = this.diagnostics.get(uriString);\n                if (existedDiagnostics) {\n                    existedDiagnostics.push(...diagnostics);\n                } else {\n                    this.diagnostics.set(uriString, diagnostics);\n                }\n            }\n\n            if (delta.indexOf(uri) === -1) {\n                delta.push(uri);\n            }\n        }\n\n        this.fireDiagnosticChangeEvent(delta);\n        this.sendChangesToEditor(delta);\n    }\n\n    delete(uri: URI): void {\n        if (this.has(uri)) {\n            this.fireDiagnosticChangeEvent(uri);\n            this.diagnostics.delete(uri.toString());\n            this.proxy.$changeDiagnostics(this.name, [[uri.toString(), []]]);\n        }\n    }\n\n    clear(): void {\n        this.ensureNotDisposed();\n        this.fireDiagnosticChangeEvent(this.getAllResourcesUris());\n        this.diagnostics.clear();\n        this.proxy.$clearDiagnostics(this.name);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (uri: URI, diagnostics: theia.Diagnostic[], collection: theia.DiagnosticCollection) => any, thisArg?: any): void {\n        this.ensureNotDisposed();\n        this.diagnostics.forEach((diagnostics, uriString) => {\n            const uri = URI.parse(uriString);\n            callback.apply(thisArg, [uri, this.getDiagnosticsByUri(uri), this]);\n        });\n    }\n\n    get(uri: URI): theia.Diagnostic[] | undefined {\n        this.ensureNotDisposed();\n        return this.getDiagnosticsByUri(uri);\n    }\n\n    has(uri: URI): boolean {\n        this.ensureNotDisposed();\n        return (this.diagnostics.get(uri.toString()) instanceof Array);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            if (this.onDisposeCallback) {\n                this.onDisposeCallback();\n            }\n            this.clear();\n            this.isDisposed = true;\n        }\n    }\n\n    setOnDisposeCallback(onDisposeCallback: (() => void) | undefined): void {\n        this.onDisposeCallback = onDisposeCallback;\n    }\n\n    private ensureNotDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('Diagnostic collection with name \"' + this.name + '\" is already disposed.');\n        }\n    }\n\n    private getAllResourcesUris(): string[] {\n        const resourcesUris: string[] = [];\n        this.diagnostics.forEach((diagnostics, uri) => resourcesUris.push(uri));\n        return resourcesUris;\n    }\n\n    private getDiagnosticsByUri(uri: URI): theia.Diagnostic[] | undefined {\n        const diagnostics = this.diagnostics.get(uri.toString());\n        return (diagnostics instanceof Array) ? <theia.Diagnostic[]>Object.freeze(diagnostics) : undefined;\n    }\n\n    private fireDiagnosticChangeEvent(arg: string | string[] | URI | URI[]): void {\n        this.onDidChangeDiagnosticsEmitter.fire({ uris: this.toUrisArray(arg) });\n    }\n\n    private toUrisArray(arg: string | string[] | URI | URI[]): URI[] {\n        if (arg instanceof Array) {\n            if (arg.length === 0) {\n                return [];\n            }\n\n            if (arg[0] instanceof URI) {\n                return arg as URI[];\n            } else {\n                const result: URI[] = [];\n                for (const uriString of arg as string[]) {\n                    result.push(URI.parse(uriString));\n                }\n                return result;\n            }\n        } else {\n            if (arg instanceof URI) {\n                return [arg];\n            } else {\n                return [URI.parse(arg)];\n            }\n        }\n    }\n\n    private sendChangesToEditor(uris: URI[]): void {\n        const markers: [string, MarkerData[]][] = [];\n        nextUri:\n        for (const uri of uris) {\n            const uriMarkers: MarkerData[] = [];\n            const uriDiagnostics = this.diagnostics.get(uri.toString());\n            if (uriDiagnostics) {\n                if (uriDiagnostics.length > this.diagnosticsLimitPerResource) {\n                    for (const severity of DiagnosticCollection.DIAGNOSTICS_PRIORITY) {\n                        for (const diagnostic of uriDiagnostics) {\n                            if (severity === diagnostic.severity) {\n                                if (uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)) + 1 === this.diagnosticsLimitPerResource) {\n                                    const lastMarker = uriMarkers[uriMarkers.length - 1];\n                                    uriMarkers.push({\n                                        severity: MarkerSeverity.Info,\n                                        message: 'Limit of diagnostics is reached. ' + (uriDiagnostics.length - this.diagnosticsLimitPerResource) + ' items are hidden',\n                                        startLineNumber: lastMarker.startLineNumber,\n                                        startColumn: lastMarker.startColumn,\n                                        endLineNumber: lastMarker.endLineNumber,\n                                        endColumn: lastMarker.endColumn\n                                    });\n                                    markers.push([uri.toString(), uriMarkers]);\n                                    continue nextUri;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    uriDiagnostics.forEach(diagnostic => uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)));\n                    markers.push([uri.toString(), uriMarkers]);\n                }\n            } else {\n                markers.push([uri.toString(), []]);\n            }\n        }\n\n        this.proxy.$changeDiagnostics(this.name, markers);\n    }\n}\n\nexport class Diagnostics {\n    public static MAX_DIAGNOSTICS_PER_FILE = 1000;\n    private static GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX = '_generated_diagnostic_collection_name_#';\n\n    private proxy: LanguagesMain;\n    private diagnosticCollections: Map<string, DiagnosticCollection>; // id -> diagnostic collection\n\n    private diagnosticsChangedEmitter = new Emitter<theia.DiagnosticChangeEvent>();\n    public readonly onDidChangeDiagnostics: Event<theia.DiagnosticChangeEvent> = this.diagnosticsChangedEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n\n        this.diagnosticCollections = new Map<string, DiagnosticCollection>();\n    }\n\n    getDiagnostics(resource: theia.Uri): theia.Diagnostic[];\n    getDiagnostics(): [theia.Uri, theia.Diagnostic[]][];\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        if (resource) {\n            return this.getAllDiagnosticsForResource(resource);\n        } else {\n            return this.getAllDiagnostics();\n        }\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        if (!name) {\n            do {\n                name = Diagnostics.GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX + this.getNextId();\n            } while (this.diagnosticCollections.has(name));\n        } else if (this.diagnosticCollections.has(name)) {\n            console.warn(`Diagnostic collection with name '${name}' already exist.`);\n        }\n\n        const diagnosticCollection = new DiagnosticCollection(name, Diagnostics.MAX_DIAGNOSTICS_PER_FILE, this.proxy, this.diagnosticsChangedEmitter);\n        diagnosticCollection.setOnDisposeCallback(() => {\n            this.diagnosticCollections.delete(name!);\n        });\n        this.diagnosticCollections.set(name, diagnosticCollection);\n        return diagnosticCollection;\n    }\n\n    private getNextId(): string {\n        return v4();\n    }\n\n    private getAllDiagnosticsForResource(uri: URI): theia.Diagnostic[] {\n        let result: theia.Diagnostic[] = [];\n        this.diagnosticCollections.forEach(diagnosticCollection => {\n            const diagnostics = diagnosticCollection.get(uri);\n            if (diagnostics) {\n                result = result.concat(...diagnostics);\n            }\n        });\n        return result;\n    }\n\n    private getAllDiagnostics(): [URI, theia.Diagnostic[]][] {\n        const result: [URI, theia.Diagnostic[]][] = [];\n        // Holds uri index in result array of tuples.\n        const urisIndexes = new Map<string, number>();\n        let nextIndex = 0;\n        this.diagnosticCollections.forEach(diagnosticsCollection =>\n            diagnosticsCollection.forEach((uri, diagnostics) => {\n                let uriIndex = urisIndexes.get(uri.toString());\n                if (uriIndex === undefined) {\n                    uriIndex = nextIndex++;\n                    urisIndexes.set(uri.toString(), uriIndex);\n                    result.push([uri, [...diagnostics]]);\n                } else {\n                    result[uriIndex][1] = result[uriIndex][1].concat(...diagnostics);\n                }\n            })\n        );\n        return result;\n    }\n\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L771\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { SignatureHelp, SignatureHelpContext } from '../../common/plugin-api-rpc-model';\n\nexport class SignatureHelpAdapter {\n\n    private idSequence = 1;\n    private readonly cache = new Map<number, theia.SignatureHelp>();\n\n    constructor(\n        private readonly delegate: theia.SignatureHelpProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    async provideSignatureHelp(resource: URI, position: Position, token: theia.CancellationToken, context: SignatureHelpContext): Promise<SignatureHelp | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n        const pluginHelpContext = this.reviveContext(context);\n\n        const value = await this.delegate.provideSignatureHelp(document, zeroBasedPosition, token, pluginHelpContext);\n        if (!value) {\n            return undefined;\n        }\n        const id = this.idSequence++;\n        this.cache.set(id, value);\n        return Converter.SignatureHelp.from(id, value);\n    }\n\n    private reviveContext(context: SignatureHelpContext): theia.SignatureHelpContext {\n        let activeSignatureHelp: theia.SignatureHelp | undefined = undefined;\n        if (context.activeSignatureHelp) {\n            const revivedSignatureHelp = Converter.SignatureHelp.to(context.activeSignatureHelp);\n            const saved = typeof context.activeSignatureHelp.id === 'number' && this.cache.get(context.activeSignatureHelp.id);\n            if (saved) {\n                activeSignatureHelp = saved;\n                activeSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n                activeSignatureHelp.activeParameter = revivedSignatureHelp.activeParameter;\n            } else {\n                activeSignatureHelp = revivedSignatureHelp;\n            }\n        }\n        return { ...context, activeSignatureHelp };\n    }\n\n    releaseSignatureHelp(id: number): void {\n        this.cache.delete(id);\n    }\n\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { Hover } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Range } from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class HoverAdapter {\n\n    constructor(\n        private readonly provider: theia.HoverProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    public provideHover(resource: URI, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideHover(doc, pos, token)).then(value => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (!value || !Array.isArray(value.contents) || (value.contents as Array<any>).length === 0) {\n                return undefined;\n            }\n            if (!value.range) {\n                value.range = doc.getWordRangeAtPosition(pos);\n            }\n            if (!value.range) {\n                value.range = new Range(pos, pos);\n            }\n\n            return Converter.fromHover(value);\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { DocumentHighlight } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentHighlightAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentHighlightProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDocumentHighlights(resource: URI, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDocumentHighlights(document, zeroBasedPosition, token)).then(documentHighlights => {\n            if (!documentHighlights) {\n                return undefined;\n            }\n\n            if (this.isDocumentHighlightArray(documentHighlights)) {\n                const highlights: DocumentHighlight[] = [];\n\n                for (const highlight of documentHighlights) {\n                    highlights.push(Converter.fromDocumentHighlight(highlight));\n                }\n\n                return highlights;\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private isDocumentHighlightArray(array: any): array is types.DocumentHighlight[] {\n        return Array.isArray(array) && array.length > 0 && array[0] instanceof types.DocumentHighlight;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentFormattingEdits(resource: URI, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentFormattingEdits(doc, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, TextEdit, Range } from '../../common/plugin-api-rpc-model';\n\nexport class RangeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentRangeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentRangeFormattingEdits(resource: URI, range: Range, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = Converter.toRange(range);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentRangeFormattingEdits(doc, ran, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class OnTypeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.OnTypeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideOnTypeFormattingEdits(resource: URI, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideOnTypeFormattingEdits(doc, pos, ch, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DefinitionAdapter {\n\n    constructor(\n        private readonly delegate: theia.DefinitionProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class ImplementationAdapter {\n\n    constructor(\n        private readonly provider: theia.ImplementationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideImplementation(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideImplementation(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class TypeDefinitionAdapter {\n\n    constructor(\n        private readonly provider: theia.TypeDefinitionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideTypeDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideTypeDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri/lib/umd';\nimport { Selection } from '../../common/plugin-api-rpc';\nimport { Range, CodeActionContext, CodeAction } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { Diagnostics } from './diagnostics';\nimport { CodeActionKind } from '../types-impl';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CodeActionAdapter {\n\n    constructor(\n        private readonly provider: theia.CodeActionProvider,\n        private readonly document: DocumentsExtImpl,\n        private readonly diagnostics: Diagnostics,\n        private readonly pluginId: string,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    async provideCodeAction(resource: URI, rangeOrSelection: Range | Selection,\n        context: CodeActionContext, token: theia.CancellationToken): Promise<CodeAction[] | undefined> {\n        const document = this.document.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = CodeActionAdapter._isSelection(rangeOrSelection)\n            ? <theia.Selection>Converter.toSelection(rangeOrSelection)\n            : <theia.Range>Converter.toRange(rangeOrSelection);\n        const allDiagnostics: theia.Diagnostic[] = [];\n\n        for (const diagnostic of this.diagnostics.getDiagnostics(resource)) {\n            if (ran.intersection(diagnostic.range)) {\n                allDiagnostics.push(diagnostic);\n            }\n        }\n\n        const codeActionContext: theia.CodeActionContext = {\n            diagnostics: allDiagnostics,\n            only: context.only ? new CodeActionKind(context.only) : undefined\n        };\n\n        const commandsOrActions = await this.provider.provideCodeActions(doc, ran, codeActionContext, token);\n\n        if (!Array.isArray(commandsOrActions) || commandsOrActions.length === 0) {\n            return undefined;\n        }\n        // TODO cache toDispose and dispose it\n        const toDispose = new DisposableCollection();\n        const result: CodeAction[] = [];\n        for (const candidate of commandsOrActions) {\n            if (!candidate) {\n                continue;\n            }\n            if (CodeActionAdapter._isCommand(candidate)) {\n                result.push({\n                    title: candidate.title || '',\n                    command: this.commands.converter.toSafeCommand(candidate, toDispose)\n                });\n            } else {\n                if (codeActionContext.only) {\n                    if (!candidate.kind) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n                    } else if (!codeActionContext.only.contains(candidate.kind)) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code action.`);\n                    }\n                }\n\n                result.push({\n                    title: candidate.title,\n                    command: this.commands.converter.toSafeCommand(candidate.command, toDispose),\n                    diagnostics: candidate.diagnostics && candidate.diagnostics.map(Converter.convertDiagnosticToMarkerData),\n                    edit: candidate.edit && Converter.fromWorkspaceEdit(candidate.edit),\n                    kind: candidate.kind && candidate.kind.value\n                });\n            }\n        }\n\n        return result;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static _isCommand(smth: any): smth is theia.Command {\n        return typeof (<theia.Command>smth).command === 'string' || typeof (<theia.Command>smth).id === 'string';\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static _isSelection(obj: any): obj is Selection {\n        return (\n            obj\n            && (typeof obj.selectionStartLineNumber === 'number')\n            && (typeof obj.selectionStartColumn === 'number')\n            && (typeof obj.positionLineNumber === 'number')\n            && (typeof obj.positionColumn === 'number')\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { DocumentLink } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\n\nexport class LinkProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.DocumentLink>();\n\n    constructor(\n        private readonly provider: theia.DocumentLinkProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideLinks(resource: URI, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentLinks(doc, token)).then(links => {\n            if (!Array.isArray(links)) {\n                return undefined;\n            }\n            const result: DocumentLink[] = [];\n            for (const link of links) {\n                const data = Converter.fromDocumentLink(link);\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, link);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveLink(link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        if (typeof this.provider.resolveDocumentLink !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(link);\n        const item = this.cache.get(id);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n        return Promise.resolve(this.provider.resolveDocumentLink(item, token)).then(value => {\n            if (value) {\n                return Converter.fromDocumentLink(value);\n            }\n            return undefined;\n        });\n    }\n\n    releaseDocumentLinks(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { CodeLensSymbol } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n/** Adapts the calls from main to extension thread for providing/resolving the code lenses. */\nexport class CodeLensAdapter {\n\n    private static readonly BAD_CMD: theia.Command = { command: 'missing', title: '<<MISSING COMMAND>>' };\n\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CodeLens>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.CodeLensProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCodeLenses(resource: URI, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideCodeLenses(doc, token)).then(lenses => {\n            if (Array.isArray(lenses)) {\n                return lenses.map(lens => {\n                    const cacheId = this.cacheId++;\n                    const toDispose = new DisposableCollection();\n                    const lensSymbol = ObjectIdentifier.mixin({\n                        range: Converter.fromRange(lens.range)!,\n                        command: this.commands.converter.toSafeCommand(lens.command, toDispose)\n                    }, cacheId);\n                    this.cache.set(cacheId, lens);\n                    this.disposables.set(cacheId, toDispose);\n                    return lensSymbol;\n                });\n            }\n            return undefined;\n        });\n    }\n\n    async resolveCodeLens(resource: URI, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        const cacheId = ObjectIdentifier.of(symbol);\n        const lens = this.cache.get(cacheId);\n        if (!lens) {\n            return undefined;\n        }\n\n        let newLens: theia.CodeLens | undefined;\n        if (typeof this.provider.resolveCodeLens === 'function' && !lens.isResolved) {\n            newLens = await this.provider.resolveCodeLens(lens, token);\n            if (token.isCancellationRequested) {\n                return undefined;\n            }\n        }\n        newLens = newLens || lens;\n\n        const disposables = this.disposables.get(cacheId);\n        if (!disposables) {\n            // already been disposed of\n            return undefined;\n        }\n        symbol.command = this.commands.converter.toSafeCommand(newLens.command ? newLens.command : CodeLensAdapter.BAD_CMD, disposables);\n        return symbol;\n    }\n\n    releaseCodeLenses(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { DocumentSymbol, Range } from '../../common/plugin-api-rpc-model';\nimport * as types from '../types-impl';\n\n/** Adapts the calls from main to extension thread for providing the document symbols. */\nexport class OutlineAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.DocumentSymbolProvider\n    ) { }\n\n    provideDocumentSymbols(resource: URI, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentSymbols(doc, token)).then(value => {\n            if (!value || value.length === 0) {\n                return undefined;\n            }\n            if (value[0] instanceof types.DocumentSymbol) {\n                return (<types.DocumentSymbol[]>value).map(Converter.fromDocumentSymbol);\n            } else {\n                return OutlineAdapter.asDocumentSymbolTree(resource, <types.SymbolInformation[]>value);\n            }\n        });\n    }\n\n    private static asDocumentSymbolTree(resource: URI, info: types.SymbolInformation[]): DocumentSymbol[] {\n        // first sort by start (and end) and then loop over all elements\n        // and build a tree based on containment.\n        info = info.slice(0).sort((a, b) => {\n            let r = a.location.range.start.compareTo(b.location.range.start);\n            if (r === 0) {\n                r = b.location.range.end.compareTo(a.location.range.end);\n            }\n            return r;\n        });\n        const res: DocumentSymbol[] = [];\n        const parentStack: DocumentSymbol[] = [];\n        for (let i = 0; i < info.length; i++) {\n            const element = <DocumentSymbol>{\n                name: info[i].name,\n                detail: '',\n                kind: Converter.SymbolKind.fromSymbolKind(info[i].kind),\n                containerName: info[i].containerName,\n                range: Converter.fromRange(info[i].location.range),\n                selectionRange: Converter.fromRange(info[i].location.range),\n                children: []\n            };\n\n            while (true) {\n                if (parentStack.length === 0) {\n                    parentStack.push(element);\n                    res.push(element);\n                    break;\n                }\n                const parent = parentStack[parentStack.length - 1];\n                if (OutlineAdapter.containsRange(parent.range, element.range) && !OutlineAdapter.equalsRange(parent.range, element.range)) {\n                    parent.children!.push(element);\n                    parentStack.push(element);\n                    break;\n                }\n                parentStack.pop();\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n     */\n    private static containsRange(range: Range, otherRange: Range): boolean {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Test if range `a` equals `b`.\n     */\n    private static equalsRange(a: Range, b: Range): boolean {\n        return (\n            !!a &&\n            !!b &&\n            a.startLineNumber === b.startLineNumber &&\n            a.startColumn === b.startColumn &&\n            a.endLineNumber === b.endLineNumber &&\n            a.endColumn === b.endColumn\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { ReferenceContext, Location } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { isLocationArray } from './util';\n\nexport class ReferenceAdapter {\n\n    constructor(\n        private readonly provider: theia.ReferenceProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideReferences(resource: URI, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideReferences(document, zeroBasedPosition, context, token)).then(reference => {\n            if (!reference) {\n                return undefined;\n            }\n\n            if (isLocationArray(reference)) {\n                const locations: Location[] = [];\n\n                for (const location of reference) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SymbolInformation } from 'vscode-languageserver-types';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\n\nexport class WorkspaceSymbolAdapter {\n\n    constructor(\n        private readonly provider: theia.WorkspaceSymbolProvider\n    ) { }\n\n    provideWorkspaceSymbols(query: string, token: theia.CancellationToken): Promise<SymbolInformation[]> {\n        return Promise.resolve(this.provider.provideWorkspaceSymbols(query, token)).then(workspaceSymbols => {\n            if (!workspaceSymbols) {\n                return [];\n            }\n\n            const newSymbols: SymbolInformation[] = [];\n            for (const sym of workspaceSymbols) {\n                const convertedSymbol = Converter.fromSymbolInformation(sym);\n                if (convertedSymbol) {\n                    newSymbols.push(convertedSymbol);\n                }\n            }\n            return newSymbols;\n        });\n    }\n\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: theia.CancellationToken): Promise<SymbolInformation> {\n        if (this.provider.resolveWorkspaceSymbol && typeof this.provider.resolveWorkspaceSymbol === 'function') {\n            const theiaSymbol = Converter.toSymbolInformation(symbol);\n            if (!theiaSymbol) {\n                return Promise.resolve(symbol);\n            } else {\n                return Promise.resolve(this.provider.resolveWorkspaceSymbol(theiaSymbol, token)).then(workspaceSymbol => {\n                    if (!workspaceSymbol) {\n                        return symbol;\n                    }\n\n                    const converted = Converter.fromSymbolInformation(workspaceSymbol);\n                    if (converted) {\n                        return converted;\n                    }\n                    return symbol;\n                });\n            }\n        }\n        return Promise.resolve(symbol);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport URI from 'vscode-uri/lib/umd';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\n\nexport class FoldingProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.FoldingRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideFoldingRanges(resource: URI, context: model.FoldingContext, token: theia.CancellationToken): Promise<model.FoldingRange[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideFoldingRanges(doc, context, token)).then(ranges => {\n            if (!Array.isArray(ranges)) {\n                return undefined;\n            }\n\n            return ranges.map(Converter.fromFoldingRange);\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri/lib/umd';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { RawColorInfo } from '../../common/plugin-api-rpc';\nimport { ColorPresentation } from '../../common/plugin-api-rpc-model';\n\nexport class ColorProviderAdapter {\n\n    constructor(\n        private documents: DocumentsExtImpl,\n        private provider: theia.DocumentColorProvider\n    ) { }\n\n    provideColors(resource: URI, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(\n            this.provider.provideDocumentColors(doc, token)\n        ).then(colors => {\n            if (!Array.isArray(colors)) {\n                return [];\n            }\n\n            const colorInfos: RawColorInfo[] = colors.map(colorInfo => ({\n                color: Converter.fromColor(colorInfo.color),\n                range: Converter.fromRange(colorInfo.range)!\n            }));\n\n            return colorInfos;\n        });\n    }\n\n    provideColorPresentations(resource: URI, raw: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const range = Converter.toRange(raw.range);\n        const color = Converter.toColor(raw.color);\n        return Promise.resolve(\n            this.provider.provideColorPresentations(color, { document: doc, range: range }, token)\n        ).then(value => {\n            if (!Array.isArray(value)) {\n                return [];\n            }\n\n            return value.map(Converter.fromColorPresentation);\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Range } from '../types-impl';\nimport { isObject } from '../../common/types';\n\nexport class RenameAdapter {\n\n    static supportsResolving(provider: theia.RenameProvider): boolean {\n        return typeof provider.prepareRename === 'function';\n    }\n\n    constructor(\n        private readonly provider: theia.RenameProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideRenameEdits(resource: URI, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.provideRenameEdits(doc, pos, newName, token)\n        ).then(value => {\n            if (!value) {\n                return undefined;\n            }\n\n            return Converter.fromWorkspaceEdit(value);\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return <WorkspaceEditDto>{\n                    rejectReason,\n                    edits: []\n                };\n            } else {\n                return Promise.reject<WorkspaceEditDto>(error);\n            }\n        });\n    }\n\n    resolveRenameLocation(resource: URI, position: Position, token: theia.CancellationToken): Promise<model.RenameLocation & model.Rejection | undefined> {\n        if (typeof this.provider.prepareRename !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.prepareRename(doc, pos, token)\n        ).then(rangeOrLocation => {\n\n            let range: theia.Range | undefined;\n            let text: string;\n            if (rangeOrLocation && Range.isRange(rangeOrLocation)) {\n                range = rangeOrLocation;\n                text = doc.getText(rangeOrLocation);\n            } else if (rangeOrLocation && isObject(rangeOrLocation)) {\n                range = rangeOrLocation.range;\n                text = rangeOrLocation.placeholder;\n            }\n\n            if (!range) {\n                return undefined;\n            }\n            if (range.start.line > pos.line || range.end.line < pos.line) {\n                console.warn('INVALID rename location: position line must be within range start/end lines');\n                return undefined;\n            }\n            return {\n                range: Converter.fromRange(range)!,\n                text: text!\n            };\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return Promise.resolve(<model.RenameLocation & model.Rejection>{\n                    rejectReason,\n                    range: undefined!,\n                    text: undefined!\n                });\n            } else {\n                return Promise.reject(error);\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static asMessage(err: any): string | undefined {\n        if (typeof err === 'string') {\n            return err;\n        } else if (err instanceof Error && typeof err.message === 'string') {\n            return err.message;\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DeclarationAdapter {\n\n    constructor(\n        private readonly provider: theia.DeclarationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDeclaration(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDeclaration(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport * as types from '../types-impl';\n\nexport class CallHierarchyAdapter {\n\n    constructor(\n        private readonly provider: theia.CallHierarchyProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    async provideRootDefinition(resource: URI, position: rpc.Position, token: theia.CancellationToken): Promise<model.CallHierarchyDefinition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const definition = await this.provider.prepareCallHierarchy(documentData.document,\n            new types.Position(\n                position.lineNumber,\n                position.column\n            ),\n            token);\n        if (!definition) {\n            return undefined;\n        }\n\n        return this.fromCallHierarchyitem(definition);\n    }\n\n    async provideCallers(definition: model.CallHierarchyDefinition, token: theia.CancellationToken): Promise<model.CallHierarchyReference[] | undefined> {\n        const callers = await this.provider.provideCallHierarchyIncomingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callers) {\n            return undefined;\n        }\n\n        return callers.map(item => this.fromCallHierarchyIncomingCall(item));\n    }\n\n    private fromCallHierarchyitem(item: theia.CallHierarchyItem): model.CallHierarchyDefinition {\n        return {\n            uri: item.uri,\n            range: this.fromRange(item.range),\n            selectionRange: this.fromRange(item.selectionRange),\n            name: item.name,\n            kind: item.kind\n        };\n    }\n\n    private fromRange(range: theia.Range): model.Range {\n        return {\n            startLineNumber: range.start.line,\n            startColumn: range.start.character,\n            endLineNumber: range.end.line,\n            endColumn: range.end.character\n        };\n    }\n\n    private toRange(range: model.Range): types.Range {\n        return new types.Range(\n            range.startLineNumber,\n            range.startColumn,\n            range.endLineNumber,\n            range.endColumn\n        );\n    }\n\n    private toCallHierarchyItem(definition: model.CallHierarchyDefinition): theia.CallHierarchyItem {\n        return new types.CallHierarchyItem(\n            Converter.SymbolKind.toSymbolKind(definition.kind),\n            definition.name,\n            definition.detail ? definition.detail : '',\n            URI.revive(definition.uri),\n            this.toRange(definition.range),\n            this.toRange(definition.selectionRange),\n        );\n    }\n\n    private fromCallHierarchyIncomingCall(caller: theia.CallHierarchyIncomingCall): model.CallHierarchyReference {\n        return {\n            callerDefinition: this.fromCallHierarchyitem(caller.from),\n            references: caller.fromRanges.map(l => this.fromRange(l))\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { PLUGIN_RPC_CONTEXT as Ext, OpenDialogOptionsMain, DialogsMain, SaveDialogOptionsMain, UploadDialogOptionsMain } from '../common/plugin-api-rpc';\nimport { OpenDialogOptions, SaveDialogOptions, UploadDialogOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport Uri from 'vscode-uri';\n\nexport class DialogsExtImpl {\n    private proxy: DialogsMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DIALOGS_MAIN);\n    }\n\n    showOpenDialog(options: OpenDialogOptions): PromiseLike<Uri[] | undefined> {\n        const optionsMain = {\n            openLabel: options.openLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            canSelectFiles: options.canSelectFiles ? options.canSelectFiles : true,\n            canSelectFolders: options.canSelectFolders ? options.canSelectFolders : false,\n            canSelectMany: options.canSelectMany,\n            filters: options.filters\n        } as OpenDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showOpenDialog(optionsMain).then(result => {\n                if (result) {\n                    const uris = [];\n                    for (let i = 0; i < result.length; i++) {\n                        const uri = Uri.parse('file://' + result[i]);\n                        uris.push(uri);\n                    }\n                    resolve(uris);\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showSaveDialog(options: SaveDialogOptions): PromiseLike<Uri | undefined> {\n        const optionsMain = {\n            saveLabel: options.saveLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            filters: options.filters\n        } as SaveDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showSaveDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(Uri.parse('file://' + result));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showUploadDialog(options: UploadDialogOptions): PromiseLike<Uri[] | undefined> {\n        const optionsMain = {\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined\n        } as UploadDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showUploadDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(result.map(uri => Uri.parse(uri)));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { PLUGIN_RPC_CONTEXT, NotificationExt, NotificationMain } from '../common/plugin-api-rpc';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { ProgressLocation } from './types-impl';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport class NotificationExtImpl implements NotificationExt {\n    private readonly proxy: NotificationMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): Promise<R> {\n        const id = new Deferred<string>();\n        const tokenSource = new CancellationTokenSource();\n        const progress = task({ report: async item => this.proxy.$updateProgress(await id.promise, item)}, tokenSource.token);\n        const title = options.title ? options.title : '';\n        const location = this.mapLocation(options.location);\n        const cancellable = options.cancellable;\n        id.resolve(await this.proxy.$startProgress({ title, location, cancellable }));\n        const stop = async () => this.proxy.$stopProgress(await id.promise);\n        const promise = Promise.all([\n            progress,\n            new Promise(resolve => setTimeout(resolve, 250)) // try to show even if it's done immediately\n        ]);\n        promise.then(stop, stop);\n        return progress;\n    }\n\n    protected mapLocation(pluginLocation: ProgressLocation): string | undefined {\n        switch (pluginLocation) {\n            case ProgressLocation.Notification: return 'notification';\n            case ProgressLocation.SourceControl: return 'scm';\n            case ProgressLocation.Window: return 'window';\n            default: return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './language-selector';\nexport * from './glob';\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { match as matchGlobPattern } from './glob';\n\nexport interface RelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport interface LanguageFilter {\n    language?: string;\n    scheme?: string;\n    pattern?: string | RelativePattern;\n    hasAccessToAllModels?: boolean;\n}\nexport type LanguageSelector = string | LanguageFilter | (string | LanguageFilter)[];\n\nexport function score(selector: LanguageSelector | undefined, uriScheme: string, path: string, candidateLanguage: string, candidateIsSynchronized: boolean): number {\n\n    if (Array.isArray(selector)) {\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, uriScheme, path, candidateLanguage, candidateIsSynchronized);\n            if (value === 10) {\n                return value;\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n\n    } else if (typeof selector === 'string') {\n\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n\n        if (selector === '*') {\n            return 5;\n        } else if (selector === candidateLanguage) {\n            return 10;\n        } else {\n            return 0;\n        }\n\n    } else if (selector) {\n        const { language, pattern, scheme, hasAccessToAllModels } = selector;\n\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n\n        let result = 0;\n\n        if (scheme) {\n            if (scheme === uriScheme) {\n                result = 10;\n            } else if (scheme === '*') {\n                result = 5;\n            } else {\n                return 0;\n            }\n        }\n\n        if (language) {\n            if (language === candidateLanguage) {\n                result = 10;\n            } else if (language === '*') {\n                result = Math.max(result, 5);\n            } else {\n                return 0;\n            }\n        }\n\n        if (pattern) {\n            if (pattern === path || matchGlobPattern(pattern, path)) {\n                result = 10;\n            } else {\n                return 0;\n            }\n        }\n\n        return result;\n\n    } else {\n        return 0;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n    TreeDataProvider, TreeView, TreeViewExpansionEvent, TreeItem2, TreeItemLabel,\n    TreeViewSelectionChangeEvent, TreeViewVisibilityChangeEvent\n} from '@theia/plugin';\n// TODO: extract `@theia/util` for event, disposable, cancellation and common types\n// don't use @theia/core directly from plugin host\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Disposable as PluginDisposable, ThemeIcon } from '../types-impl';\nimport { Plugin, PLUGIN_RPC_CONTEXT, TreeViewsExt, TreeViewsMain, TreeViewItem } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl, CommandsConverter } from '../command-registry';\nimport { TreeViewSelection } from '../../common';\nimport { PluginIconPath } from '../plugin-icon-path';\n\nexport class TreeViewsExtImpl implements TreeViewsExt {\n\n    private proxy: TreeViewsMain;\n\n    private treeViews: Map<string, TreeViewExtImpl<any>> = new Map<string, TreeViewExtImpl<any>>();\n\n    constructor(rpc: RPCProtocol, readonly commandRegistry: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN);\n        commandRegistry.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TreeViewSelection.is(arg)) {\n                    return arg;\n                }\n                const { treeViewId, treeItemId } = arg;\n                const treeView = this.treeViews.get(treeViewId);\n                return treeView && treeView.getTreeItem(treeItemId);\n            }\n        });\n    }\n\n    registerTreeDataProvider<T>(plugin: Plugin, treeViewId: string, treeDataProvider: TreeDataProvider<T>): PluginDisposable {\n        const treeView = this.createTreeView(plugin, treeViewId, { treeDataProvider });\n\n        return PluginDisposable.create(() => {\n            this.treeViews.delete(treeViewId);\n            treeView.dispose();\n        });\n    }\n\n    createTreeView<T>(plugin: Plugin, treeViewId: string, options: { treeDataProvider: TreeDataProvider<T> }): TreeView<T> {\n        if (!options || !options.treeDataProvider) {\n            throw new Error('Options with treeDataProvider is mandatory');\n        }\n\n        const treeView = new TreeViewExtImpl(plugin, treeViewId, options.treeDataProvider, this.proxy, this.commandRegistry.converter);\n        this.treeViews.set(treeViewId, treeView);\n\n        return {\n            // tslint:disable:typedef\n            get onDidExpandElement() {\n                return treeView.onDidExpandElement;\n            },\n            get onDidCollapseElement() {\n                return treeView.onDidCollapseElement;\n            },\n            get selection() {\n                return treeView.selectedElements;\n            },\n            get onDidChangeSelection() {\n                return treeView.onDidChangeSelection;\n            },\n            get visible() {\n                return treeView.visible;\n            },\n            get onDidChangeVisibility() {\n                return treeView.onDidChangeVisibility;\n            },\n            get message(): string {\n                return treeView.message;\n            },\n            set message(message: string) {\n                treeView.message = message;\n            },\n            get title(): string {\n                return treeView.title;\n            },\n            set title(title: string) {\n                treeView.title = title;\n            },\n            // tslint:enable:typedef\n            reveal: (element: T, selectionOptions: { select?: boolean }): Thenable<void> =>\n                treeView.reveal(element, selectionOptions),\n\n            dispose: () => {\n                this.treeViews.delete(treeViewId);\n                treeView.dispose();\n            }\n        };\n    }\n\n    async $getChildren(treeViewId: string, treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n\n        return treeView.getChildren(treeItemId);\n    }\n\n    async $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n\n        if (expanded) {\n            return treeView.onExpanded(treeItemId);\n        } else {\n            return treeView.onCollapsed(treeItemId);\n        }\n    }\n\n    async $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n        treeView.setSelection(treeItemIds);\n    }\n\n    async $setVisible(treeViewId: string, isVisible: boolean): Promise<void> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n        treeView.setVisible(isVisible);\n    }\n\n}\n\ninterface TreeExtNode<T> extends Disposable {\n    id: string\n    value?: T\n    children?: TreeExtNode<T>[]\n}\n\nclass TreeViewExtImpl<T> implements Disposable {\n\n    private readonly onDidExpandElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidExpandElement = this.onDidExpandElementEmitter.event;\n\n    private readonly onDidCollapseElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidCollapseElement = this.onDidCollapseElementEmitter.event;\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<TreeViewSelectionChangeEvent<T>>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private readonly onDidChangeVisibilityEmitter = new Emitter<TreeViewVisibilityChangeEvent>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    private readonly nodes = new Map<string, TreeExtNode<T>>();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.clearAll()),\n        this.onDidExpandElementEmitter,\n        this.onDidCollapseElementEmitter,\n        this.onDidChangeSelectionEmitter,\n        this.onDidChangeVisibilityEmitter\n    );\n\n    constructor(\n        private plugin: Plugin,\n        private treeViewId: string,\n        private treeDataProvider: TreeDataProvider<T>,\n        private proxy: TreeViewsMain,\n        readonly commandsConverter: CommandsConverter) {\n\n        proxy.$registerTreeDataProvider(treeViewId);\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterTreeDataProvider(treeViewId)));\n\n        if (treeDataProvider.onDidChangeTreeData) {\n            treeDataProvider.onDidChangeTreeData((e: T) => {\n                proxy.$refresh(treeViewId);\n            });\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async reveal(element: T, selectionOptions?: { select?: boolean }): Promise<void> {\n        // find element id in a cache\n        let elementId;\n        this.nodes.forEach((el, id) => {\n            if (Object.is(el, element)) {\n                elementId = id;\n            }\n        });\n\n        if (elementId) {\n            return this.proxy.$reveal(this.treeViewId, elementId);\n        }\n    }\n\n    private _message: string = '';\n    get message(): string {\n        return this._message;\n    }\n\n    set message(message: string) {\n        this._message = message;\n        this.proxy.$setMessage(this.treeViewId, this._message);\n    }\n\n    private _title: string = '';\n    get title(): string {\n        return this._title;\n    }\n\n    set title(title: string) {\n        this._title = title;\n        this.proxy.$setTitle(this.treeViewId, title);\n    }\n\n    getTreeItem(treeItemId: string): T | undefined {\n        const element = this.nodes.get(treeItemId);\n        return element && element.value;\n    }\n\n    async getChildren(parentId: string): Promise<TreeViewItem[] | undefined> {\n        const parentNode = this.nodes.get(parentId);\n        const parent = parentNode && parentNode.value;\n        if (parentId && !parent) {\n            console.error(`No tree item with id '${parentId}' found.`);\n            return [];\n        }\n        this.clearChildren(parentNode);\n\n        // ask data provider for children for cached element\n        const result = await this.treeDataProvider.getChildren(parent);\n        if (result) {\n            const treeItems: TreeViewItem[] = [];\n            const promises = result.map(async (value, index) => {\n\n                // Ask data provider for a tree item for the value\n                // Data provider must return theia.TreeItem\n                const treeItem: TreeItem2 = await this.treeDataProvider.getTreeItem(value);\n                // Convert theia.TreeItem to the TreeViewItem\n\n                // Take a label\n                let label: string | undefined;\n                const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n                if (typeof treeItemLabel === 'object' && typeof treeItemLabel.label === 'string') {\n                    label = treeItemLabel.label;\n                } else {\n                    label = treeItem.label;\n                }\n\n                let idLabel = label;\n                // Use resource URI if label is not set\n                if (idLabel === undefined && treeItem.resourceUri) {\n                    idLabel = treeItem.resourceUri.path.toString();\n                    idLabel = decodeURIComponent(idLabel);\n                    if (idLabel.indexOf('/') >= 0) {\n                        idLabel = idLabel.substring(idLabel.lastIndexOf('/') + 1);\n                    }\n                }\n\n                // Generate the ID\n                // ID is used for caching the element\n                const id = treeItem.id || `${parentId}/${index}:${idLabel}`;\n\n                const toDisposeElement = new DisposableCollection();\n                const node: TreeExtNode<T> = {\n                    id,\n                    value,\n                    dispose: () => toDisposeElement.dispose()\n                };\n                if (parentNode) {\n                    const children = parentNode.children || [];\n                    children.push(node);\n                    parentNode.children = children;\n                }\n                this.nodes.set(id, node);\n\n                let icon;\n                let iconUrl;\n                let themeIconId;\n                const { iconPath } = treeItem;\n                if (typeof iconPath === 'string' && iconPath.indexOf('fa-') !== -1) {\n                    icon = iconPath;\n                } else if (iconPath instanceof ThemeIcon) {\n                    themeIconId = iconPath.id;\n                } else {\n                    iconUrl = PluginIconPath.toUrl(<PluginIconPath | undefined>iconPath, this.plugin);\n                }\n\n                const treeViewItem = {\n                    id,\n                    label,\n                    icon,\n                    iconUrl,\n                    themeIconId,\n                    description: treeItem.description,\n                    resourceUri: treeItem.resourceUri,\n                    tooltip: treeItem.tooltip,\n                    collapsibleState: treeItem.collapsibleState,\n                    contextValue: treeItem.contextValue,\n                    command: this.commandsConverter.toSafeCommand(treeItem.command, toDisposeElement)\n                } as TreeViewItem;\n\n                treeItems.push(treeViewItem);\n            });\n\n            await Promise.all(promises);\n            return treeItems;\n        } else {\n            return undefined;\n        }\n    }\n\n    private clearChildren(parentNode?: TreeExtNode<T>): void {\n        if (parentNode) {\n            if (parentNode.children) {\n                for (const child of parentNode.children) {\n                    this.clear(child);\n                }\n            }\n            delete parentNode['children'];\n        } else {\n            this.clearAll();\n        }\n    }\n\n    private clear(node: TreeExtNode<T>): void {\n        if (node.children) {\n            for (const child of node.children) {\n                this.clear(child);\n            }\n        }\n        this.nodes.delete(node.id);\n        node.dispose();\n    }\n\n    private clearAll(): void {\n        this.nodes.forEach(node => node.dispose());\n        this.nodes.clear();\n    }\n\n    async onExpanded(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidExpandElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onCollapsed(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidCollapseElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    private selectedItemIds = new Set<string>();\n    get selectedElements(): T[] {\n        const items: T[] = [];\n        for (const id of this.selectedItemIds) {\n            const item = this.getTreeItem(id);\n            if (item) {\n                items.push(item);\n            }\n        }\n        return items;\n    }\n\n    setSelection(selectedItemIds: string[]): void {\n        const toDelete = new Set<string>(this.selectedItemIds);\n        for (const id of this.selectedItemIds) {\n            toDelete.delete(id);\n            if (!this.selectedItemIds.has(id)) {\n                this.doSetSelection(selectedItemIds);\n                return;\n            }\n        }\n        if (toDelete.size) {\n            this.doSetSelection(selectedItemIds);\n        }\n    }\n    protected doSetSelection(selectedItemIts: string[]): void {\n        this.selectedItemIds = new Set(selectedItemIts);\n        this.onDidChangeSelectionEmitter.fire(Object.freeze({ selection: this.selectedElements }));\n    }\n\n    private _visible = false;\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    setVisible(visible: boolean): void {\n        if (visible !== this._visible) {\n            this._visible = visible;\n            this.onDidChangeVisibilityEmitter.fire(Object.freeze({ visible: this._visible }));\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { RPCProtocol } from './rpc-protocol';\nimport { PluginManager, Plugin } from './plugin-api-rpc';\nimport { interfaces } from 'inversify';\n\nexport const ExtPluginApiProvider = 'extPluginApi';\n/**\n * Provider for extension API description\n */\nexport interface ExtPluginApiProvider {\n    /**\n     * Provide API description\n     */\n    provideApi(): ExtPluginApi;\n}\n\n/**\n * Plugin API extension description.\n * This interface describes scripts for both plugin runtimes: frontend(WebWorker) and backend(NodeJs)\n */\nexport interface ExtPluginApi {\n\n    /**\n     * Path to the script which should be loaded to provide api, module should export `provideApi` function with\n     * [ExtPluginApiBackendInitializationFn](#ExtPluginApiBackendInitializationFn) signature\n     */\n    backendInitPath?: string;\n\n    /**\n     * Initialization information for frontend part of Plugin API\n     */\n    frontendExtApi?: FrontendExtPluginApi;\n}\n\nexport interface ExtPluginApiFrontendInitializationFn {\n    (rpc: RPCProtocol, plugins: Map<string, Plugin>): void;\n}\n\nexport interface ExtPluginApiBackendInitializationFn {\n    (rpc: RPCProtocol, pluginManager: PluginManager): void;\n}\n\n/**\n * Interface contains information for frontend(WebWorker) Plugin API extension initialization\n */\nexport interface FrontendExtPluginApi {\n    /**\n     * path to js file\n     */\n    initPath: string;\n    /** global variable name */\n    initVariable: string;\n    /**\n     * init function name,\n     * function should have  [ExtPluginApiFrontendInitializationFn](#ExtPluginApiFrontendInitializationFn)\n     */\n    initFunction: string;\n}\n\nexport const MainPluginApiProvider = Symbol('mainPluginApi');\n\n/**\n * Implementation should contains main(Theia) part of new namespace in Plugin API.\n * [initialize](#initialize) will be called once per plugin runtime\n */\nexport interface MainPluginApiProvider {\n    initialize(rpc: RPCProtocol, container: interfaces.Container): void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    LanguagesContributionExt,\n    LanguagesContributionMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { ConnectionExtImpl } from './connection-ext';\nimport { ChildProcess, spawn, SpawnOptions } from 'child_process';\nimport { StreamMessageReader, StreamMessageWriter, Message } from 'vscode-jsonrpc';\nimport { Connection } from '../common/connection';\nimport { Disposable } from './types-impl';\nimport { InitializeRequest, InitializeParams } from 'vscode-languageserver-protocol';\nimport { isRequestMessage } from 'vscode-ws-jsonrpc';\n\n/**\n * Implementation of languages contribution system of the plugin API.\n * It allows to register new language contribution in main side and to start language server.\n */\nexport class LanguagesContributionExtImpl implements LanguagesContributionExt {\n    private proxy: LanguagesContributionMain;\n    private serverConnections = new Map<string, Connection>();\n\n    constructor(rpc: RPCProtocol,\n        protected readonly connectionExt: ConnectionExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_CONTRIBUTION_MAIN);\n    }\n\n    /**\n     * Says main side to register new language server.\n     *\n     * @param languageServerInfo information about new language server contribution\n     */\n    registerLanguageServerProvider(languageServerInfo: theia.LanguageServerInfo): Disposable {\n        this.proxy.$registerLanguageServerProvider(languageServerInfo);\n        return Disposable.create(() => {\n            this.stop(languageServerInfo.id);\n        });\n    }\n\n    /**\n     * Stops the language server.\n     *\n     * @param id language server's id\n     */\n    stop(id: string): void {\n        const connection = this.serverConnections.get(id);\n        if (!connection) {\n            return;\n        }\n        connection.dispose();\n        this.serverConnections.delete(id);\n\n        this.proxy.$stop(id);\n    }\n\n    /**\n     * Starts language server.\n     *\n     * @param languageContribution is information about language server contribution\n     */\n    async $start(languageServerInfo: theia.LanguageServerInfo): Promise<void> {\n        const clientConnection = await this.connectionExt.ensureConnection(languageServerInfo.id);\n\n        if (!languageServerInfo.command) {\n            throw new Error('The command to start language server has to be set');\n        }\n\n        const childProcess = this.spawnProcess(languageServerInfo.command, languageServerInfo.args);\n        const serverConnection = createConnection(childProcess);\n\n        this.serverConnections.set(languageServerInfo.id, serverConnection);\n\n        clientConnection.forward(serverConnection, this.map.bind(this));\n        serverConnection.forward(clientConnection, this.map.bind(this));\n    }\n\n    private spawnProcess(command: string, args: string[], options?: SpawnOptions): ChildProcess {\n        return spawn(command,\n            args,\n            options);\n    }\n\n    private map(message: Message): Message {\n        if (isRequestMessage(message)) {\n            if (message.method === InitializeRequest.type.method) {\n                const initializeParams = message.params as InitializeParams;\n                initializeParams.processId = process.pid;\n            }\n        }\n        return message;\n    }\n}\n\nexport function createConnection(childProcess: ChildProcess): Connection {\n    const reader = new StreamMessageReader(childProcess.stdout);\n    const writer = new StreamMessageWriter(childProcess.stdin);\n    return {\n        reader, writer,\n        forward(to: Connection, map: (message: Message) => Message = message => message): void {\n            reader.listen(input => {\n                const output = map(input);\n                to.writer.write(output);\n            });\n        },\n        dispose: () => {\n            childProcess.kill();\n            reader.dispose();\n            writer.dispose();\n        }\n    };\n}\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from 'vscode-jsonrpc';\nexport * from 'vscode-jsonrpc/lib/messages';\nexport * from './disposable';\nexport * from './socket';\nexport * from './logger';\nexport * from './connection';","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Disposable } from 'vscode-jsonrpc/lib/events';\n\nexport {\n    Disposable\n}\n\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n\n    dispose(): void {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop()!.dispose();\n        }\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose(): void {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        }\n    }\n\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageConnection, createMessageConnection, Logger } from \"vscode-jsonrpc\";\nimport { IWebSocket } from \"./socket\";\nimport { WebSocketMessageReader } from \"./reader\";\nimport { WebSocketMessageWriter } from \"./writer\";\n\nexport function createWebSocketConnection(socket: IWebSocket, logger: Logger): MessageConnection {\n    const messageReader = new WebSocketMessageReader(socket);\n    const messageWriter = new WebSocketMessageWriter(socket);\n    const connection = createMessageConnection(messageReader, messageWriter, logger);\n    connection.onClose(() => connection.dispose());\n    return connection;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageConnection, Logger } from 'vscode-jsonrpc';\nimport { createWebSocketConnection, IWebSocket } from './socket';\nimport { ConsoleLogger } from './logger';\n\nexport function listen(options: {\n    webSocket: WebSocket;\n    logger?: Logger;\n    onConnection: (connection: MessageConnection) => void;\n}) {\n    const { webSocket, onConnection } = options;\n    const logger = options.logger || new ConsoleLogger();\n    webSocket.onopen = () => {\n        const socket = toSocket(webSocket);\n        const connection = createWebSocketConnection(socket, logger);\n        onConnection(connection);\n    };\n}\n\nexport function toSocket(webSocket: WebSocket): IWebSocket {\n    return {\n        send: content => webSocket.send(content),\n        onMessage: cb => webSocket.onmessage = event => cb(event.data),\n        onError: cb => webSocket.onerror = event => {\n            if ('message' in event) {\n                cb((event as any).message)\n            }\n        },\n        onClose: cb => webSocket.onclose = event => cb(event.code, event.reason),\n        dispose: () => webSocket.close()\n    }\n}","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ConnectionExt, PLUGIN_RPC_CONTEXT, ConnectionMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PluginConnection } from '../common/connection';\nimport { PluginMessageReader } from '../common/plugin-message-reader';\nimport { PluginMessageWriter } from '../common/plugin-message-writer';\n\n/**\n * Implementation of connection system of the plugin API.\n * It allows to communicate with main side to send and read messages.\n */\nexport class ConnectionExtImpl implements ConnectionExt {\n    private proxy: ConnectionMain;\n    private connections = new Map<string, PluginConnection>();\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN);\n    }\n\n    /**\n     * Gets the connection between plugin by id and sends string message to it.\n     *\n     * @param id connection's id\n     * @param message incoming message\n     */\n    async $sendMessage(id: string, message: string): Promise<void> {\n        if (this.connections.has(id)) {\n            this.connections.get(id)!.reader.readMessage(message);\n        } else {\n            console.warn('It is not possible to read message. Connection missed.');\n        }\n    }\n\n    /**\n     * Instantiates a new connection by the given id.\n     * @param id the connection id\n     */\n    async $createConnection(id: string): Promise<void> {\n        await this.doEnsureConnection(id);\n    }\n\n    /**\n     * Deletes a connection.\n     * @param id the connection id\n     */\n    async $deleteConnection(id: string): Promise<void> {\n        this.connections.delete(id);\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async ensureConnection(id: string): Promise<PluginConnection> {\n        const connection = await this.doEnsureConnection(id);\n        this.proxy.$createConnection(id);\n        return connection;\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async doEnsureConnection(id: string): Promise<PluginConnection> {\n        const connection = this.connections.get(id) || await this.doCreateConnection(id);\n        this.connections.set(id, connection);\n        return connection;\n    }\n\n    protected async doCreateConnection(id: string): Promise<PluginConnection> {\n        const reader = new PluginMessageReader();\n        const writer = new PluginMessageWriter(id, this.proxy);\n        return new PluginConnection(\n            reader,\n            writer,\n            () => {\n                this.connections.delete(id);\n                this.proxy.$deleteConnection(id);\n            });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { es5ClassCompat } from './types';\nimport { AbstractMessageReader, DataCallback } from 'vscode-jsonrpc/lib/messageReader';\n\n/**\n * Support for reading string message through RPC protocol.\n */\nexport class PluginMessageReader extends es5ClassCompat(AbstractMessageReader) {\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor() {\n        super();\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n\n    readMessage(message: string): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    fireClose(): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { es5ClassCompat } from './types';\nimport { AbstractMessageWriter, MessageWriter } from 'vscode-jsonrpc/lib/messageWriter';\nimport { ConnectionMain, ConnectionExt } from './plugin-api-rpc';\nimport { Message } from 'vscode-jsonrpc';\n\n/**\n * Support for writing string message through RPC protocol.\n */\nexport class PluginMessageWriter extends es5ClassCompat(AbstractMessageWriter) implements MessageWriter {\n    constructor(\n        protected readonly id: string,\n        protected readonly proxy: ConnectionMain | ConnectionExt) {\n        super();\n    }\n\n    write(message: string): void;\n    write(message: Message): void;\n    write(arg: string | Message): void {\n        const content = JSON.stringify(arg);\n        this.proxy.$sendMessage(this.id, content);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    TasksExt,\n    TasksMain,\n    TaskDto,\n    TaskExecutionDto\n} from '../../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport * as converter from '../type-converters';\nimport { Disposable } from '../types-impl';\nimport { RPCProtocol, ConnectionClosedError } from '../../common/rpc-protocol';\nimport { TaskProviderAdapter } from './task-provider';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\n\nexport class TasksExtImpl implements TasksExt {\n    private proxy: TasksMain;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, TaskProviderAdapter>();\n    private executions = new Map<number, theia.TaskExecution>();\n\n    private readonly onDidExecuteTask: Emitter<theia.TaskStartEvent> = new Emitter<theia.TaskStartEvent>();\n    private readonly onDidTerminateTask: Emitter<theia.TaskEndEvent> = new Emitter<theia.TaskEndEvent>();\n    private readonly onDidExecuteTaskProcess: Emitter<theia.TaskProcessStartEvent> = new Emitter<theia.TaskProcessStartEvent>();\n    private readonly onDidTerminateTaskProcess: Emitter<theia.TaskProcessEndEvent> = new Emitter<theia.TaskProcessEndEvent>();\n\n    private disposed = false;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TASKS_MAIN);\n        this.fetchTaskExecutions();\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n        return [...this.executions.values()];\n    }\n\n    get onDidStartTask(): Event<theia.TaskStartEvent> {\n        return this.onDidExecuteTask.event;\n    }\n\n    $onDidStartTask(execution: TaskExecutionDto): void {\n        this.onDidExecuteTask.fire({\n            execution: this.getTaskExecution(execution)\n        });\n    }\n\n    get onDidEndTask(): Event<theia.TaskEndEvent> {\n        return this.onDidTerminateTask.event;\n    }\n\n    $onDidEndTask(id: number): void {\n        const taskExecution = this.executions.get(id);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${id} is not found`);\n        }\n\n        this.executions.delete(id);\n\n        this.onDidTerminateTask.fire({\n            execution: taskExecution\n        });\n    }\n\n    get onDidStartTaskProcess(): Event<theia.TaskProcessStartEvent> {\n        return this.onDidExecuteTaskProcess.event;\n    }\n\n    $onDidStartTaskProcess(processId: number, executionDto: TaskExecutionDto): void {\n        this.onDidExecuteTaskProcess.fire({\n            processId,\n            execution: this.getTaskExecution(executionDto)\n        });\n    }\n\n    get onDidEndTaskProcess(): Event<theia.TaskProcessEndEvent> {\n        return this.onDidTerminateTaskProcess.event;\n    }\n\n    $onDidEndTaskProcess(exitCode: number, taskId: number): void {\n        const taskExecution = this.executions.get(taskId);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${taskId} is not found`);\n        }\n\n        this.onDidTerminateTaskProcess.fire({\n            execution: taskExecution,\n            exitCode\n        });\n    }\n\n    registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TaskProviderAdapter(provider));\n        this.proxy.$registerTaskProvider(callId, type);\n        return this.createDisposable(callId);\n    }\n\n    async fetchTasks(filter?: theia.TaskFilter): Promise<theia.Task[]> {\n        const taskVersion = filter ? filter.version : undefined;\n        const taskType = filter ? filter.type : undefined;\n        const taskDtos = await this.proxy.$fetchTasks(taskVersion, taskType);\n        return taskDtos.map(dto => converter.toTask(dto));\n    }\n\n    async executeTask(task: theia.Task): Promise<theia.TaskExecution> {\n        const taskDto = converter.fromTask(task);\n        if (taskDto) {\n            const executionDto = await this.proxy.$executeTask(taskDto);\n            if (executionDto) {\n                const taskExecution = this.getTaskExecution(executionDto);\n                return taskExecution;\n            }\n            throw new Error('Run task config does not return after being started');\n        }\n        throw new Error('Task was not successfully transformed into a task config');\n    }\n\n    $provideTasks(handle: number, token?: theia.CancellationToken): Promise<TaskDto[] | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.provideTasks(token);\n        } else {\n            return Promise.reject(new Error('No adapter found to provide tasks'));\n        }\n    }\n\n    $resolveTask(handle: number, task: TaskDto, token?: theia.CancellationToken): Promise<TaskDto | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.resolveTask(task, token);\n        } else {\n            return Promise.reject(new Error('No adapter found to resolve task'));\n        }\n    }\n\n    private addNewAdapter(adapter: TaskProviderAdapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    private async fetchTaskExecutions(): Promise<void> {\n        try {\n            const taskExecutions = await this.proxy.$taskExecutions();\n            taskExecutions.forEach(execution => this.getTaskExecution(execution));\n        } catch (error) {\n            if (this.disposed && ConnectionClosedError.is(error)) {\n                return;\n            }\n            console.error(`Can not fetch running tasks: ${error}`);\n        }\n    }\n\n    private getTaskExecution(execution: TaskExecutionDto): theia.TaskExecution {\n        const executionId = execution.id;\n        let result: theia.TaskExecution | undefined = this.executions.get(executionId);\n        if (result) {\n            return result;\n        }\n\n        result = {\n            task: converter.toTask(execution.task),\n            terminate: () => {\n                this.proxy.$terminateTask(executionId);\n            }\n        };\n        this.executions.set(executionId, result);\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { TaskDto } from '../../common';\n\nexport class TaskProviderAdapter {\n\n    constructor(private readonly provider: theia.TaskProvider) { }\n\n    provideTasks(token?: theia.CancellationToken): Promise<TaskDto[] | undefined> {\n        return Promise.resolve(this.provider.provideTasks(token)).then(tasks => {\n            if (!Array.isArray(tasks)) {\n                return undefined;\n            }\n            const result: TaskDto[] = [];\n            for (const task of tasks) {\n                const data = Converter.fromTask(task);\n                if (!data) {\n                    continue;\n                }\n\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveTask(task: TaskDto, token?: theia.CancellationToken): Promise<TaskDto | undefined> {\n        if (typeof this.provider.resolveTask !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const item = Converter.toTask(task);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n\n        return Promise.resolve(this.provider.resolveTask(item, token)).then(value => {\n            if (value) {\n                return Converter.fromTask(value);\n            }\n            return undefined;\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { PLUGIN_RPC_CONTEXT, FileSystemExt, FileSystemMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { UriComponents, Schemes } from '../common/uri-components';\nimport { Disposable } from './types-impl';\nimport { InPluginFileSystemProxy } from './in-plugin-filesystem-proxy';\n\nexport class FileSystemExtImpl implements FileSystemExt {\n\n    private readonly proxy: FileSystemMain;\n    private readonly usedSchemes = new Set<string>();\n    private readonly fsProviders = new Map<number, theia.FileSystemProvider>();\n    private fileSystem: InPluginFileSystemProxy;\n\n    private handlePool: number = 0;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN);\n        this.usedSchemes.add(Schemes.FILE);\n        this.usedSchemes.add(Schemes.UNTITLED);\n        this.usedSchemes.add(Schemes.VSCODE);\n        this.usedSchemes.add(Schemes.IN_MEMORY);\n        this.usedSchemes.add(Schemes.INTERNAL);\n        this.usedSchemes.add(Schemes.HTTP);\n        this.usedSchemes.add(Schemes.HTTPS);\n        this.usedSchemes.add(Schemes.MAILTO);\n        this.usedSchemes.add(Schemes.DATA);\n        this.usedSchemes.add(Schemes.COMMAND);\n        this.fileSystem = new InPluginFileSystemProxy(this.proxy);\n\n    }\n\n    get fs(): theia.FileSystem {\n        return this.fileSystem;\n    }\n\n    registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider): theia.Disposable {\n        if (this.usedSchemes.has(scheme)) {\n            throw new Error(`A provider for the scheme '${scheme}' is already registered`);\n        }\n\n        const handle = this.handlePool++;\n        this.usedSchemes.add(scheme);\n        this.fsProviders.set(handle, provider);\n\n        this.proxy.$registerFileSystemProvider(handle, scheme);\n\n        return new Disposable(() => {\n            this.usedSchemes.delete(scheme);\n            this.fsProviders.delete(handle);\n            this.proxy.$unregisterProvider(handle);\n        });\n    }\n\n    private checkProviderExists(handle: number): void {\n        if (!this.fsProviders.has(handle)) {\n            const err = new Error();\n            err.name = 'ENOPRO';\n            err.message = 'no provider';\n            throw err;\n        }\n    }\n\n    // forwarding calls\n\n    $readFile(handle: number, resource: UriComponents, options?: { encoding?: string }): Promise<string> {\n        this.checkProviderExists(handle);\n\n        return Promise.resolve(this.fsProviders.get(handle)!.readFile(URI.revive(resource))).then(data => {\n            const buffer = Buffer.isBuffer(data) ? data : Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n            const encoding = options === null ? undefined : options && options.encoding;\n            return buffer.toString(encoding);\n        }\n        );\n    }\n\n    $writeFile(handle: number, resource: UriComponents, content: string, options?: { encoding?: string }): Promise<void> {\n        this.checkProviderExists(handle);\n        const uri = URI.revive(resource);\n        const encoding = options === null ? undefined : options && options.encoding;\n        const buffer = Buffer.from(content, encoding);\n        const opts = { create: true, overwrite: true };\n        return Promise.resolve(this.fsProviders.get(handle)!.writeFile(uri, buffer, opts));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { TextEncoder, TextDecoder } from 'util';\nimport { FileSystemMain } from '../common/plugin-api-rpc';\nimport { UriComponents } from '../common/uri-components';\nimport { FileSystemError } from './types-impl';\n\n/**\n * This class is managing FileSystem proxy\n */\nexport class InPluginFileSystemProxy implements theia.FileSystem {\n\n    private proxy: FileSystemMain;\n\n    constructor(proxy: FileSystemMain) {\n        this.proxy = proxy;\n    }\n\n    async readFile(uri: UriComponents): Promise<Uint8Array> {\n        try {\n            const val = await this.proxy.$readFile(uri);\n            return new TextEncoder().encode(val);\n        } catch (error) {\n            throw this.handleError(error);\n        }\n    }\n    async writeFile(uri: UriComponents, content: Uint8Array): Promise<void> {\n        const encoded = new TextDecoder().decode(content);\n\n        try {\n            await this.proxy.$writeFile(uri, encoded);\n        } catch (error) {\n            throw this.handleError(error);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    handleError(error: any): Error {\n        if (!(error instanceof Error)) {\n            return new FileSystemError(String(error));\n        }\n\n        // file system error\n        return new FileSystemError(error.message, error.name);\n    }\n\n}\n","module.exports = require(\"util\");","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Plugin as InternalPlugin, PLUGIN_RPC_CONTEXT, ScmExt, ScmMain, ScmCommandArg } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { UriComponents } from '../common/uri-components';\nimport URI from '@theia/core/lib/common/uri';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Command } from '../common/plugin-api-rpc-model';\n\nexport class ScmExtImpl implements ScmExt {\n    private handle: number = 0;\n    private readonly proxy: ScmMain;\n    private readonly sourceControlMap = new Map<number, SourceControlImpl>();\n    private readonly sourceControlsByPluginMap: Map<string, theia.SourceControl[]> = new Map();\n\n    constructor(readonly rpc: RPCProtocol, private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SCM_MAIN);\n        commands.registerArgumentProcessor({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            processArgument: (arg: any) => {\n                if (!ScmCommandArg.is(arg)) {\n                    return arg;\n                }\n                const sourceControl = this.sourceControlMap.get(arg.sourceControlHandle);\n                if (!sourceControl) {\n                    return undefined;\n                }\n                if (typeof arg.resourceGroupHandle !== 'number') {\n                    return sourceControl;\n                }\n                const resourceGroup = sourceControl.getResourceGroup(arg.resourceGroupHandle);\n                if (typeof arg.resourceStateHandle !== 'number') {\n                    return resourceGroup;\n                }\n                return resourceGroup && resourceGroup.getResourceState(arg.resourceStateHandle);\n            }\n        });\n    }\n\n    createSourceControl(plugin: InternalPlugin, id: string, label: string, rootUri?: theia.Uri): theia.SourceControl {\n        const sourceControl = new SourceControlImpl(this.proxy, this.commands, id, label, rootUri);\n        this.sourceControlMap.set(this.handle++, sourceControl);\n        const sourceControls = this.sourceControlsByPluginMap.get(plugin.model.id) || [];\n        sourceControls.push(sourceControl);\n        this.sourceControlsByPluginMap.set(plugin.model.id, sourceControls);\n        return sourceControl;\n    }\n\n    getLastInputBox(plugin: InternalPlugin): theia.SourceControlInputBox | undefined {\n        const sourceControls = this.sourceControlsByPluginMap.get(plugin.model.id);\n        const sourceControl = sourceControls && sourceControls[sourceControls.length - 1];\n        const inputBox = sourceControl && sourceControl.inputBox;\n        return inputBox;\n    }\n\n    async $executeResourceCommand(sourceControlHandle: number, groupHandle: number, resourceHandle: number): Promise<void> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        if (sourceControl) {\n            const group = (sourceControl as SourceControlImpl).getResourceGroup(groupHandle);\n            if (group) {\n                (group as SourceControlResourceGroupImpl).executeResourceCommand(resourceHandle);\n            }\n        }\n    }\n\n    async $provideOriginalResource(sourceControlHandle: number, uri: string, token: CancellationToken): Promise<UriComponents | undefined> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        console.log(sourceControl);\n        if (sourceControl && sourceControl.quickDiffProvider && sourceControl.quickDiffProvider.provideOriginalResource) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const newUri: any = new URI(uri);\n            newUri.fsPath = uri;\n            return sourceControl.quickDiffProvider.provideOriginalResource(newUri, token);\n        }\n    }\n\n    async $updateInputBox(sourceControlHandle: number, value: string): Promise<void> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        if (sourceControl) {\n            sourceControl.inputBox.$updateValue(value);\n        }\n    }\n\n    async $setSourceControlSelection(sourceControlHandle: number, selected: boolean): Promise<void> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        if (sourceControl) {\n            sourceControl.selected = selected;\n        }\n    }\n}\n\nclass InputBoxImpl implements theia.SourceControlInputBox {\n    private _placeholder: string;\n    private _value: string;\n\n    constructor(private proxy: ScmMain, private sourceControlHandle: number) {\n    }\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this.$updateValue(value);\n        this.proxy.$setInputBoxValue(this.sourceControlHandle, value);\n    }\n\n    $updateValue(value: string): void {\n        this._value = value;\n    }\n\n    get placeholder(): string {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string) {\n        this._placeholder = placeholder;\n        this.proxy.$setInputBoxPlaceholder(this.sourceControlHandle, placeholder);\n    }\n}\n\nclass SourceControlImpl implements theia.SourceControl {\n    private static handle: number = 0;\n    private static resourceGroupHandle: number = 0;\n    private handle = SourceControlImpl.handle++;\n\n    private readonly resourceGroupsMap = new Map<number, SourceControlResourceGroupImpl>();\n\n    private readonly _inputBox: InputBoxImpl;\n    private _count: number | undefined;\n    private _quickDiffProvider: theia.QuickDiffProvider | undefined;\n    private _commitTemplate: string | undefined;\n    private _acceptInputCommand: theia.Command | undefined;\n    private _statusBarCommands: theia.Command[] | undefined;\n    private _selected: boolean = false;\n\n    private readonly toDispose = new DisposableCollection();\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<boolean>();\n    readonly onDidChangeSelection: theia.Event<boolean> = this.onDidChangeSelectionEmitter.event;\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private _id: string,\n        private _label: string,\n        private _rootUri?: theia.Uri\n    ) {\n        this._inputBox = new InputBoxImpl(proxy, this.handle);\n        this.proxy.$registerSourceControl(this.handle, _id, _label, _rootUri ? _rootUri.path : undefined);\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterSourceControl(this.handle)));\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get rootUri(): theia.Uri | undefined {\n        return this._rootUri;\n    }\n\n    createResourceGroup(id: string, label: string): theia.SourceControlResourceGroup {\n        const sourceControlResourceGroup = new SourceControlResourceGroupImpl(this.proxy, this.commands, this.handle, id, label);\n        this.resourceGroupsMap.set(SourceControlImpl.resourceGroupHandle++, sourceControlResourceGroup);\n        this.toDispose.push(sourceControlResourceGroup);\n        return sourceControlResourceGroup;\n    }\n\n    get inputBox(): InputBoxImpl {\n        return this._inputBox;\n    }\n\n    get count(): number | undefined {\n        return this._count;\n    }\n\n    set count(count: number | undefined) {\n        if (this._count !== count) {\n            this._count = count;\n            this.proxy.$updateSourceControl(this.handle, { count });\n        }\n    }\n\n    get quickDiffProvider(): theia.QuickDiffProvider | undefined {\n        return this._quickDiffProvider;\n    }\n\n    set quickDiffProvider(quickDiffProvider: theia.QuickDiffProvider | undefined) {\n        this._quickDiffProvider = quickDiffProvider;\n        this.proxy.$updateSourceControl(this.handle, { hasQuickDiffProvider: !!quickDiffProvider });\n    }\n\n    get commitTemplate(): string | undefined {\n        return this._commitTemplate;\n    }\n\n    set commitTemplate(commitTemplate: string | undefined) {\n        this._commitTemplate = commitTemplate;\n        this.proxy.$updateSourceControl(this.handle, { commitTemplate });\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected toDisposeOnAcceptInputCommand = new DisposableCollection();\n\n    get acceptInputCommand(): theia.Command | undefined {\n        return this._acceptInputCommand;\n    }\n\n    set acceptInputCommand(acceptInputCommand: theia.Command | undefined) {\n        this.toDisposeOnAcceptInputCommand.dispose();\n        this.toDispose.push(this.toDisposeOnAcceptInputCommand);\n\n        this._acceptInputCommand = acceptInputCommand;\n\n        this.proxy.$updateSourceControl(this.handle, {\n            acceptInputCommand: this.commands.converter.toSafeCommand(acceptInputCommand, this.toDisposeOnAcceptInputCommand)\n        });\n    }\n\n    protected toDisposeOnStatusBarCommands = new DisposableCollection();\n\n    get statusBarCommands(): theia.Command[] | undefined {\n        return this._statusBarCommands;\n    }\n\n    set statusBarCommands(statusBarCommands: theia.Command[] | undefined) {\n        this.toDisposeOnStatusBarCommands.dispose();\n        this.toDispose.push(this.toDisposeOnStatusBarCommands);\n\n        this._statusBarCommands = statusBarCommands;\n\n        let safeStatusBarCommands: Command[] | undefined;\n        if (statusBarCommands) {\n            safeStatusBarCommands = statusBarCommands.map(statusBarCommand => this.commands.converter.toSafeCommand(statusBarCommand, this.toDisposeOnStatusBarCommands));\n        }\n        this.proxy.$updateSourceControl(this.handle, {\n            statusBarCommands: safeStatusBarCommands\n        });\n    }\n\n    getResourceGroup(handle: number): SourceControlResourceGroupImpl | undefined {\n        return this.resourceGroupsMap.get(handle);\n    }\n\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    set selected(selected: boolean) {\n        this._selected = selected;\n        this.onDidChangeSelectionEmitter.fire(selected);\n    }\n}\n\nclass SourceControlResourceGroupImpl implements theia.SourceControlResourceGroup {\n\n    private static handle: number = 0;\n    private static resourceHandle: number = 0;\n    private handle = SourceControlResourceGroupImpl.handle++;\n    private _hideWhenEmpty: boolean | undefined = undefined;\n    private _resourceStates: theia.SourceControlResourceState[] = [];\n    private resourceStatesMap: Map<number, theia.SourceControlResourceState> = new Map();\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private sourceControlHandle: number,\n        private _id: string,\n        private _label: string,\n    ) {\n        this.proxy.$registerGroup(sourceControlHandle, this.handle, _id, _label);\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    set label(label: string) {\n        this._label = label;\n        this.proxy.$updateGroupLabel(this.sourceControlHandle, this.handle, label);\n    }\n\n    get hideWhenEmpty(): boolean | undefined {\n        return this._hideWhenEmpty;\n    }\n\n    set hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n        this._hideWhenEmpty = hideWhenEmpty;\n        this.proxy.$updateGroup(this.sourceControlHandle, this.handle, { hideWhenEmpty });\n    }\n\n    get resourceStates(): theia.SourceControlResourceState[] {\n        return this._resourceStates;\n    }\n\n    set resourceStates(resources: theia.SourceControlResourceState[]) {\n        this._resourceStates = resources;\n        this.resourceStatesMap.clear();\n        this.proxy.$updateResourceState(this.sourceControlHandle, this.handle, resources.map(resourceState => {\n            const handle = SourceControlResourceGroupImpl.resourceHandle++;\n            let resourceCommand;\n            let decorations;\n            if (resourceState.command) {\n                const { command, title, tooltip } = resourceState.command;\n                resourceCommand = { id: command ? command : '', title: title ? title : '', tooltip };\n            }\n            if (resourceState.decorations) {\n                const { strikeThrough, faded, tooltip, light, dark } = resourceState.decorations;\n                const theme = light || dark;\n                let iconPath;\n                if (theme && theme.iconPath) {\n                    iconPath = typeof theme.iconPath === 'string' ? theme.iconPath : theme.iconPath.path;\n                }\n                decorations = { strikeThrough, faded, tooltip, iconPath };\n            }\n            this.resourceStatesMap.set(handle, resourceState);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const resource: any = resourceState;\n            return { handle, resourceUri: resourceState.resourceUri.path, command: resourceCommand, decorations, letter: resource.letter, colorId: resource.color.id };\n        }));\n    }\n\n    async executeResourceCommand(stateHandle: number): Promise<void> {\n        const state = this.resourceStatesMap.get(stateHandle);\n        if (state && state.command) {\n            const command = state.command;\n            if (command.command) {\n                await this.commands.$executeCommand(command.command, ...command.arguments);\n            }\n        }\n    }\n\n    getResourceState(handle: number): theia.SourceControlResourceState | undefined {\n        return this.resourceStatesMap.get(handle);\n    }\n\n    dispose(): void {\n        this.proxy.$unregisterGroup(this.sourceControlHandle, this.handle);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport {\n    DecorationData,\n    DecorationProvider,\n    DecorationsExt,\n    DecorationsMain,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { Event } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport URI from 'vscode-uri';\nimport { Disposable } from './types-impl';\n\nexport class DecorationsExtImpl implements DecorationsExt {\n    static PROVIDER_ID: number = 0;\n\n    private readonly providersMap: Map<number, DecorationProvider>;\n    private readonly proxy: DecorationsMain;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN);\n        this.providersMap = new Map();\n    }\n\n    registerDecorationProvider(provider: theia.DecorationProvider): Disposable {\n        const id = DecorationsExtImpl.PROVIDER_ID ++;\n        provider.onDidChangeDecorations(arg => {\n            let argument;\n            if (Array.isArray(arg)) {\n                argument = arg.map(uri => uri.toString());\n            } else if (arg) {\n                argument = arg.toString();\n            }\n            this.proxy.$fireDidChangeDecorations(id, argument);\n        });\n        const providerMain: DecorationProvider = {\n            async provideDecoration(uri: string): Promise<DecorationData | undefined> {\n                const res = await provider.provideDecoration(URI.parse(uri), new CancellationTokenImpl());\n                if (res) {\n                    let color;\n                    if (res.color) {\n                        /* eslint-disable @typescript-eslint/no-explicit-any */\n                        const ob: any = res.color;\n                        color = { id: ob.id };\n                    }\n                    return {\n                        letter: res.letter,\n                        title: res.title,\n                        color: color,\n                        priority: res.priority,\n                        bubble: res.bubble,\n                        source: res.source\n                    };\n                }\n            }\n        };\n        this.proxy.$registerDecorationProvider(id, providerMain);\n        this.providersMap.set(id, providerMain);\n        return new Disposable( () => {\n            this.proxy.$dispose(id);\n        });\n    }\n\n    async $provideDecoration(id: number, uri: string): Promise<DecorationData | undefined> {\n        const provider = this.providersMap.get(id);\n        if (provider) {\n            return provider.provideDecoration(uri);\n        }\n    }\n}\n\nclass CancellationTokenImpl implements theia.CancellationToken {\n    readonly isCancellationRequested: boolean;\n    readonly onCancellationRequested: Event<any>;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT,\n    PreferenceRegistryExt,\n    PreferenceRegistryMain,\n    PreferenceData,\n    PreferenceChangeExt\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject, mixin } from '../common/types';\nimport { Configuration, ConfigurationModel } from './preferences/configuration';\nimport { WorkspaceExtImpl } from './workspace';\nimport cloneDeep = require('lodash.clonedeep');\n\nenum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2,\n    WorkspaceFolder = 3\n}\n\nenum PreferenceScope {\n    Default,\n    User,\n    Workspace,\n    Folder,\n}\n\ninterface ConfigurationInspect<T> {\n    key: string;\n    defaultValue?: T;\n    globalValue?: T;\n    workspaceValue?: T;\n    workspaceFolderValue?: T;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction lookUp(tree: any, key: string): any {\n    if (!key) {\n        return;\n    }\n\n    const parts = key.split('.');\n    let node = tree;\n    for (let i = 0; node && i < parts.length; i++) {\n        node = node[parts[i]];\n    }\n    return node;\n}\n\nexport class PreferenceRegistryExtImpl implements PreferenceRegistryExt {\n    private proxy: PreferenceRegistryMain;\n    private _preferences: Configuration;\n    private readonly _onDidChangeConfiguration = new Emitter<theia.ConfigurationChangeEvent>();\n\n    readonly onDidChangeConfiguration: Event<theia.ConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN);\n    }\n\n    init(data: PreferenceData): void {\n        this._preferences = this.parse(data);\n    }\n\n    $acceptConfigurationChanged(data: PreferenceData, eventData: PreferenceChangeExt[]): void {\n        this.init(data);\n        this._onDidChangeConfiguration.fire(this.toConfigurationChangeEvent(eventData));\n    }\n\n    getConfiguration(section?: string, resource?: theia.Uri | null, extensionId?: string): theia.WorkspaceConfiguration {\n        resource = resource === null ? undefined : resource;\n        const preferences = this.toReadonlyValue(section\n            ? lookUp(this._preferences.getValue(undefined, this.workspace, resource), section)\n            : this._preferences.getValue(undefined, this.workspace, resource));\n\n        const configuration: theia.WorkspaceConfiguration = {\n            has(key: string): boolean {\n                return typeof lookUp(preferences, key) !== 'undefined';\n            },\n            get: <T>(key: string, defaultValue?: T) => {\n                const result = lookUp(preferences, key);\n                if (typeof result === 'undefined') {\n                    return defaultValue;\n                } else {\n                    let clonedConfig: any = undefined;\n                    const cloneOnWriteProxy = (target: any, accessor: string): any => {\n                        let clonedTarget: any = undefined;\n                        const cloneTarget = () => {\n                            clonedConfig = clonedConfig ? clonedConfig : cloneDeep(preferences);\n                            clonedTarget = clonedTarget ? cloneTarget : lookUp(clonedConfig, accessor);\n                        };\n\n                        if (!isObject(target)) {\n                            return target;\n                        }\n                        return new Proxy(target, {\n                            get: (targ: any, prop: string) => {\n                                if (typeof prop === 'string' && prop.toLowerCase() === 'tojson') {\n                                    cloneTarget();\n                                    return () => clonedTarget;\n                                }\n                                if (clonedConfig) {\n                                    clonedTarget = cloneTarget ? cloneTarget : lookUp(clonedConfig, accessor);\n                                    return clonedTarget[prop];\n                                }\n                                const res = targ[prop];\n                                if (typeof prop === 'string') {\n                                    return cloneOnWriteProxy(res, `${accessor}.${prop}`);\n                                }\n                                return res;\n                            },\n                            set: (targ: any, prop: string, val: any) => {\n                                cloneTarget();\n                                clonedTarget[prop] = val;\n                                return true;\n                            },\n                            deleteProperty: (targ: any, prop: string) => {\n                                cloneTarget();\n                                delete clonedTarget[prop];\n                                return true;\n                            },\n                            defineProperty: (targ: any, prop: string, descr: any) => {\n                                cloneTarget();\n                                Object.defineProperty(clonedTarget, prop, descr);\n                                return true;\n                            }\n                        });\n                    };\n                    return cloneOnWriteProxy(result, key);\n                }\n            },\n            update: (key: string, value: any, arg?: ConfigurationTarget | boolean): PromiseLike<void> => {\n                key = section ? `${section}.${key}` : key;\n                const resourceStr: string | undefined = resource ? resource.toString() : undefined;\n                if (typeof value !== 'undefined') {\n                    return this.proxy.$updateConfigurationOption(arg, key, value, resourceStr);\n                } else {\n                    return this.proxy.$removeConfigurationOption(arg, key, resourceStr);\n                }\n            },\n            inspect: <T>(key: string): ConfigurationInspect<T> | undefined => {\n                key = section ? `${section}.${key}` : key;\n                resource = resource === null ? undefined : resource;\n                const result = cloneDeep(this._preferences.inspect<T>(key, this.workspace, resource));\n\n                if (!result) {\n                    return undefined;\n                }\n\n                const configInspect: ConfigurationInspect<T> = { key };\n                if (typeof result.default !== 'undefined') {\n                    configInspect.defaultValue = result.default;\n                }\n                if (typeof result.user !== 'undefined') {\n                    configInspect.globalValue = result.user;\n                }\n                if (typeof result.workspace !== 'undefined') {\n                    configInspect.workspaceValue = result.workspace;\n                }\n                if (typeof result.workspaceFolder !== 'undefined') {\n                    configInspect.workspaceFolderValue = result.workspaceFolder;\n                }\n                return configInspect;\n            }\n        };\n\n        if (typeof preferences === 'object') {\n            mixin(configuration, preferences, false);\n        }\n\n        return Object.freeze(configuration);\n    }\n\n    private toReadonlyValue(data: any): any {\n        const readonlyProxy = (target: any): any => isObject(target)\n            ? new Proxy(target, {\n                get: (targ: any, prop: string) => readonlyProxy(targ[prop]),\n                set: (targ: any, prop: string, val: any) => {\n                    throw new Error(`TypeError: Cannot assign to read only property '${prop}' of object`);\n                },\n                deleteProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot delete read only property '${prop}' of object`);\n                },\n                defineProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot define property '${prop}' of a readonly object`);\n                },\n                setPrototypeOf: (targ: any) => {\n                    throw new Error('TypeError: Cannot set prototype for a readonly object');\n                },\n                isExtensible: () => false,\n                preventExtensions: () => true\n            })\n            : target;\n        return readonlyProxy(data);\n    }\n\n    private parse(data: PreferenceData): Configuration {\n        const defaultConfiguration = this.getConfigurationModel(data[PreferenceScope.Default]);\n        const userConfiguration = this.getConfigurationModel(data[PreferenceScope.User]);\n        const workspaceConfiguration = this.getConfigurationModel(data[PreferenceScope.Workspace]);\n        const folderConfigurations = {} as { [resource: string]: ConfigurationModel };\n        Object.keys(data[PreferenceScope.Folder]).forEach(resource => {\n            folderConfigurations[resource] = this.getConfigurationModel(data[PreferenceScope.Folder][resource]);\n        });\n        return new Configuration(defaultConfiguration, userConfiguration, workspaceConfiguration, folderConfigurations);\n    }\n\n    private getConfigurationModel(data: { [key: string]: any }): ConfigurationModel {\n        if (!data) {\n            return new ConfigurationModel();\n        }\n        return new ConfigurationModel(this.parseConfigurationData(data), Object.keys(data));\n    }\n\n    private readonly OVERRIDE_PROPERTY = '\\\\[(.*)\\\\]$';\n    private readonly OVERRIDE_PROPERTY_PATTERN = new RegExp(this.OVERRIDE_PROPERTY);\n\n    private parseConfigurationData(data: { [key: string]: any }): { [key: string]: any } {\n        return Object.keys(data).reduce((result: any, key: string) => {\n            const parts = key.split('.');\n            let branch = result;\n\n            for (let i = 0; i < parts.length; i++) {\n                if (i === parts.length - 1) {\n                    branch[parts[i]] = data[key];\n                    continue;\n                }\n                if (!branch[parts[i]]) {\n                    branch[parts[i]] = {};\n                }\n                branch = branch[parts[i]];\n\n                // overridden properties should be transformed into\n                // \"[overridden_identifier]\" : {\n                //              \"property1\" : \"value1\"\n                //              \"property2\" : \"value2\"\n                //  }\n                if (i === 0 && this.OVERRIDE_PROPERTY_PATTERN.test(parts[i])) {\n                    branch[key.substring(parts[0].length + 1)] = data[key];\n                    break;\n                }\n            }\n            return result;\n        }, {});\n    }\n\n    private toConfigurationChangeEvent(eventData: PreferenceChangeExt[]): theia.ConfigurationChangeEvent {\n        return Object.freeze({\n            affectsConfiguration: (section: string, uri?: theia.Uri): boolean => {\n                // TODO respect uri\n                // TODO respect scopes shadowing\n                for (const change of eventData) {\n                    const tree = change.preferenceName\n                        .split('.')\n                        .reverse()\n                        .reduce((prevValue: any, curValue: any) => ({ [curValue]: prevValue }), change.newValue);\n                    return typeof lookUp(tree, section) !== 'undefined';\n                }\n                return false;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { WorkspaceExtImpl } from '../workspace';\nimport { isObject } from '../../common/types';\nimport cloneDeep = require('lodash.clonedeep');\nimport URI from 'vscode-uri';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport class Configuration {\n\n    private combinedConfig: ConfigurationModel | undefined;\n    private folderCombinedConfigs: { [resource: string]: ConfigurationModel } = {};\n\n    constructor(\n        private defaultConfiguration: ConfigurationModel,\n        private userConfiguration: ConfigurationModel,\n        private workspaceConfiguration: ConfigurationModel = new ConfigurationModel(),\n        private folderConfigurations: { [resource: string]: ConfigurationModel } = {},\n    ) { }\n\n    getValue(section: string | undefined, workspace: WorkspaceExtImpl, resource?: URI): any {\n        return this.getCombinedResourceConfig(workspace, resource).getValue(section);\n    }\n\n    inspect<C>(key: string, workspace: WorkspaceExtImpl, resource?: URI): {\n        default: C,\n        user: C,\n        workspace: C | undefined,\n        workspaceFolder: C | undefined,\n        value: C,\n    } {\n        const combinedConfiguration = this.getCombinedResourceConfig(workspace, resource);\n        const folderConfiguration = this.getFolderResourceConfig(workspace, resource);\n        return {\n            default: this.defaultConfiguration.getValue(key),\n            user: this.userConfiguration.getValue(key),\n            workspace: workspace ? this.workspaceConfiguration.getValue(key) : undefined,\n            workspaceFolder: folderConfiguration ? folderConfiguration.getValue(key) : undefined,\n            value: combinedConfiguration.getValue(key)\n        };\n    }\n\n    private getCombinedResourceConfig(workspace: WorkspaceExtImpl, resource?: URI): ConfigurationModel {\n        const combinedConfig = this.getCombinedConfig();\n        if (!workspace || !resource) {\n            return combinedConfig;\n        }\n\n        const workspaceFolder = workspace.getWorkspaceFolder(resource);\n        if (!workspaceFolder) {\n            return combinedConfig;\n        }\n\n        return this.getFolderCombinedConfig(workspaceFolder.uri.toString()) || combinedConfig;\n    }\n\n    private getCombinedConfig(): ConfigurationModel {\n        if (!this.combinedConfig) {\n            this.combinedConfig = this.defaultConfiguration.merge(this.userConfiguration, this.workspaceConfiguration);\n        }\n        return this.combinedConfig;\n    }\n\n    private getFolderCombinedConfig(folder: string): ConfigurationModel | undefined {\n        if (this.folderCombinedConfigs[folder]) {\n            return this.folderCombinedConfigs[folder];\n        }\n\n        const combinedConfig = this.getCombinedConfig();\n        const folderConfig = this.folderConfigurations[folder];\n        if (!folderConfig) {\n            return combinedConfig;\n        }\n\n        const folderCombinedConfig = combinedConfig.merge(folderConfig);\n        this.folderCombinedConfigs[folder] = folderCombinedConfig;\n\n        return folderCombinedConfig;\n    }\n\n    private getFolderResourceConfig(workspace: WorkspaceExtImpl, resource?: URI): ConfigurationModel | undefined {\n        if (!workspace || !resource) {\n            return;\n        }\n\n        const workspaceFolder = workspace.getWorkspaceFolder(resource);\n        if (!workspaceFolder) {\n            return;\n        }\n        return this.folderConfigurations[workspaceFolder.uri.toString()];\n    }\n\n}\n\nexport class ConfigurationModel {\n\n    constructor(\n        private contents: any = {},\n        private keys: string[] = [],\n    ) { }\n\n    getValue(section?: string): any {\n        if (!section) {\n            return this.contents;\n        }\n\n        const path = section.split('.');\n        let current = this.contents;\n        for (let i = 0; i < path.length; i++) {\n            if (typeof current !== 'object' || current === null) {\n                return undefined;\n            }\n            current = current[path[i]];\n        }\n        return current;\n    }\n\n    merge(...others: ConfigurationModel[]): ConfigurationModel {\n        const contents = cloneDeep(this.contents);\n        const allKeys = [...this.keys];\n\n        for (const other of others) {\n            this.mergeContents(contents, other.contents);\n            this.mergeKeys(allKeys, other.keys);\n        }\n        return new ConfigurationModel(contents, allKeys);\n    }\n\n    private mergeContents(source: any, target: any): void {\n        for (const key of Object.keys(target)) {\n            if (key in source) {\n                if (isObject(source[key]) && isObject(target[key])) {\n                    this.mergeContents(source[key], target[key]);\n                    continue;\n                }\n            }\n            source[key] = cloneDeep(target[key]);\n        }\n    }\n\n    private mergeKeys(source: string[], target: string[]): void {\n        for (const key of target) {\n            if (source.indexOf(key) === -1) {\n                source.push(key);\n            }\n        }\n    }\n\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugExtImpl } from '../../../plugin/node/debug/debug';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport function createDebugExtStub(rpc: RPCProtocol): DebugExtImpl {\n    return new Proxy(new DebugExtImpl(rpc), {\n        apply: function (target, that, args): void {\n            console.error('Debug API works only in plugin container');\n        }\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Path } from '@theia/core/lib/common/path';\nimport { CommunicationProvider } from '@theia/debug/lib/common/debug-model';\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri';\nimport { Breakpoint } from '../../../common/plugin-api-rpc-model';\nimport { DebugExt, DebugMain, PLUGIN_RPC_CONTEXT as Ext, TerminalOptionsExt } from '../../../common/plugin-api-rpc';\nimport { PluginPackageDebuggersContribution } from '../../../common/plugin-protocol';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { PluginWebSocketChannel } from '../../../common/connection';\nimport { CommandRegistryImpl } from '../../command-registry';\nimport { ConnectionExtImpl } from '../../connection-ext';\nimport { Disposable, Breakpoint as BreakpointExt, SourceBreakpoint, FunctionBreakpoint, Location, Range } from '../../types-impl';\nimport { resolveDebugAdapterExecutable } from './plugin-debug-adapter-executable-resolver';\nimport { PluginDebugAdapterSession } from './plugin-debug-adapter-session';\nimport { connectDebugAdapter, startDebugAdapter } from './plugin-debug-adapter-starter';\nimport { PluginDebugAdapterTracker } from './plugin-debug-adapter-tracker';\nimport uuid = require('uuid');\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n// TODO: rename file to `debug-ext.ts`\n\n/**\n * It is supposed to work at node only.\n */\nexport class DebugExtImpl implements DebugExt {\n    // debug sessions by sessionId\n    private sessions = new Map<string, PluginDebugAdapterSession>();\n\n    // providers by type\n    private configurationProviders = new Map<string, Set<theia.DebugConfigurationProvider>>();\n    /**\n     * Only use internally, don't send it to the frontend. It's expensive!\n     * It's already there as a part of the plugin metadata.\n     */\n    private debuggersContributions = new Map<string, PluginPackageDebuggersContribution>();\n    private descriptorFactories = new Map<string, theia.DebugAdapterDescriptorFactory>();\n    private trackerFactories: [string, theia.DebugAdapterTrackerFactory][] = [];\n    private contributionPaths = new Map<string, string>();\n\n    private connectionExt: ConnectionExtImpl;\n    private commandRegistryExt: CommandRegistryImpl;\n\n    private proxy: DebugMain;\n\n    private readonly onDidChangeBreakpointsEmitter = new Emitter<theia.BreakpointsChangeEvent>();\n    private readonly onDidChangeActiveDebugSessionEmitter = new Emitter<theia.DebugSession | undefined>();\n    private readonly onDidTerminateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidStartDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidReceiveDebugSessionCustomEmitter = new Emitter<theia.DebugSessionCustomEvent>();\n\n    activeDebugSession: theia.DebugSession | undefined;\n    activeDebugConsole: theia.DebugConsole;\n\n    private readonly _breakpoints = new Map<string, theia.Breakpoint>();\n\n    get breakpoints(): theia.Breakpoint[] {\n        return [...this._breakpoints.values()];\n    }\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DEBUG_MAIN);\n        this.activeDebugConsole = {\n            append: (value: string) => this.proxy.$appendToDebugConsole(value),\n            appendLine: (value: string) => this.proxy.$appendLineToDebugConsole(value)\n        };\n    }\n\n    /**\n     * Sets dependencies.\n     */\n    assistedInject(connectionExt: ConnectionExtImpl, commandRegistryExt: CommandRegistryImpl): void {\n        this.connectionExt = connectionExt;\n        this.commandRegistryExt = commandRegistryExt;\n    }\n\n    /**\n     * Registers contributions.\n     * @param pluginFolder plugin folder path\n     * @param contributions available debuggers contributions\n     */\n    registerDebuggersContributions(pluginFolder: string, contributions: PluginPackageDebuggersContribution[]): void {\n        contributions.forEach(contribution => {\n            this.contributionPaths.set(contribution.type, pluginFolder);\n            this.debuggersContributions.set(contribution.type, contribution);\n            this.proxy.$registerDebuggerContribution({\n                type: contribution.type,\n                label: contribution.label || contribution.type\n            });\n            console.log(`Debugger contribution has been registered: ${contribution.type}`);\n        });\n    }\n\n    get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n        return this.onDidReceiveDebugSessionCustomEmitter.event;\n    }\n\n    get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n        return this.onDidChangeActiveDebugSessionEmitter.event;\n    }\n\n    get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidTerminateDebugSessionEmitter.event;\n    }\n\n    get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidStartDebugSessionEmitter.event;\n    }\n\n    get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n        return this.onDidChangeBreakpointsEmitter.event;\n    }\n\n    addBreakpoints(breakpoints: theia.Breakpoint[]): void {\n        const added: theia.Breakpoint[] = [];\n        for (const b of breakpoints) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.set(b.id, b);\n            added.push(b);\n        }\n        if (added.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added, removed: [], changed: [] });\n            this.proxy.$addBreakpoints(added);\n        }\n    }\n\n    removeBreakpoints(breakpoints: theia.Breakpoint[]): void {\n        const removed: theia.Breakpoint[] = [];\n        const removedIds: string[] = [];\n        for (const b of breakpoints) {\n            if (!this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.delete(b.id);\n            removed.push(b);\n            removedIds.push(b.id);\n        }\n        if (removed.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added: [], removed, changed: [] });\n            this.proxy.$removeBreakpoints(removedIds);\n        }\n    }\n\n    startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration): PromiseLike<boolean> {\n        return this.proxy.$startDebugging(folder, nameOrConfiguration);\n    }\n\n    registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n        if (this.descriptorFactories.has(debugType)) {\n            throw new Error(`Descriptor factory for ${debugType} has been already registered`);\n        }\n        this.descriptorFactories.set(debugType, factory);\n        return Disposable.create(() => this.descriptorFactories.delete(debugType));\n    }\n\n    registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n        if (!factory) {\n            return Disposable.create(() => { });\n        }\n\n        this.trackerFactories.push([debugType, factory]);\n        return Disposable.create(() => {\n            this.trackerFactories = this.trackerFactories.filter(tuple => tuple[1] !== factory);\n        });\n    }\n\n    registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider): Disposable {\n        console.log(`Debug configuration provider has been registered: ${debugType}`);\n        const providers = this.configurationProviders.get(debugType) || new Set<theia.DebugConfigurationProvider>();\n        this.configurationProviders.set(debugType, providers);\n        providers.add(provider);\n\n        return Disposable.create(() => {\n            // eslint-disable-next-line no-shadow\n            const providers = this.configurationProviders.get(debugType);\n            if (providers) {\n                providers.delete(provider);\n                if (providers.size === 0) {\n                    this.configurationProviders.delete(debugType);\n                }\n            }\n        });\n    }\n\n    async $onSessionCustomEvent(sessionId: string, event: string, body?: any): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidReceiveDebugSessionCustomEmitter.fire({ event, body, session });\n        }\n    }\n\n    async $sessionDidCreate(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidStartDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidDestroy(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidTerminateDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidChange(sessionId: string | undefined): Promise<void> {\n        this.activeDebugSession = sessionId ? this.sessions.get(sessionId) : undefined;\n        this.onDidChangeActiveDebugSessionEmitter.fire(this.activeDebugSession);\n    }\n\n    async $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): Promise<void> {\n        const a: theia.Breakpoint[] = [];\n        const r: theia.Breakpoint[] = [];\n        const c: theia.Breakpoint[] = [];\n        for (const b of added) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            const bExt = this.toBreakpointExt(b);\n            if (bExt) {\n                this._breakpoints.set(bExt.id, bExt);\n                a.push(bExt);\n            }\n        }\n        for (const id of removed) {\n            const bExt = this._breakpoints.get(id);\n            if (bExt) {\n                this._breakpoints.delete(id);\n                r.push(bExt);\n            }\n        }\n        for (const b of changed) {\n            const bExt = this._breakpoints.get(b.id);\n            if (bExt) {\n                const { functionName, location, enabled, condition, hitCondition, logMessage } = b;\n                if (bExt instanceof FunctionBreakpoint && functionName) {\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, functionName });\n                } else if (bExt instanceof SourceBreakpoint && location) {\n                    const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, location: new Location(URI.revive(location.uri), range) });\n                }\n                c.push(bExt);\n            }\n        }\n        this.onDidChangeBreakpointsEmitter.fire({ added: a, removed: r, changed: c });\n    }\n\n    protected toBreakpointExt({ functionName, location, enabled, condition, hitCondition, logMessage }: Breakpoint): BreakpointExt | undefined {\n        if (location) {\n            const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n            return new SourceBreakpoint(new Location(URI.revive(location.uri), range), enabled, condition, hitCondition, logMessage);\n        }\n        if (functionName) {\n            return new FunctionBreakpoint(functionName!, enabled, condition, hitCondition, logMessage);\n        }\n        return undefined;\n    }\n\n    async $createDebugSession(debugConfiguration: theia.DebugConfiguration): Promise<string> {\n        const sessionId = uuid.v4();\n\n        const theiaSession: theia.DebugSession = {\n            id: sessionId,\n            type: debugConfiguration.type,\n            name: debugConfiguration.name,\n            configuration: debugConfiguration,\n            customRequest: (command: string, args?: any) => this.proxy.$customRequest(sessionId, command, args)\n        };\n\n        const tracker = await this.createDebugAdapterTracker(theiaSession);\n        const communicationProvider = await this.createCommunicationProvider(theiaSession, debugConfiguration);\n\n        const debugAdapterSession = new PluginDebugAdapterSession(communicationProvider, tracker, theiaSession);\n        this.sessions.set(sessionId, debugAdapterSession);\n\n        const connection = await this.connectionExt!.ensureConnection(sessionId);\n        debugAdapterSession.start(new PluginWebSocketChannel(connection));\n\n        return sessionId;\n    }\n\n    async $terminateDebugSession(sessionId: string): Promise<void> {\n        const debugAdapterSession = this.sessions.get(sessionId);\n        if (debugAdapterSession) {\n            await debugAdapterSession.stop();\n            this.sessions.delete(sessionId);\n        }\n    }\n\n    async $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return this.doGetTerminalCreationOptions(debugType);\n    }\n\n    async doGetTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return undefined;\n    }\n\n    async $provideDebugConfigurations(debugType: string, workspaceFolderUri: string | undefined): Promise<theia.DebugConfiguration[]> {\n        let result: theia.DebugConfiguration[] = [];\n\n        const providers = this.configurationProviders.get(debugType);\n        if (providers) {\n            for (const provider of providers) {\n                if (provider.provideDebugConfigurations) {\n                    result = result.concat(await provider.provideDebugConfigurations(this.toWorkspaceFolder(workspaceFolderUri)) || []);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    async $resolveDebugConfigurations(debugConfiguration: theia.DebugConfiguration, workspaceFolderUri: string | undefined): Promise<theia.DebugConfiguration | undefined> {\n        let current = debugConfiguration;\n\n        for (const providers of [this.configurationProviders.get(debugConfiguration.type), this.configurationProviders.get('*')]) {\n            if (providers) {\n                for (const provider of providers) {\n                    if (provider.resolveDebugConfiguration) {\n                        try {\n                            const next = await provider.resolveDebugConfiguration(this.toWorkspaceFolder(workspaceFolderUri), current);\n                            if (next) {\n                                current = next;\n                            } else {\n                                return current;\n                            }\n                        } catch (e) {\n                            console.error(e);\n                        }\n                    }\n                }\n            }\n        }\n\n        return current;\n    }\n\n    protected async createDebugAdapterTracker(session: theia.DebugSession): Promise<theia.DebugAdapterTracker> {\n        return PluginDebugAdapterTracker.create(session, this.trackerFactories);\n    }\n\n    protected async createCommunicationProvider(session: theia.DebugSession, debugConfiguration: theia.DebugConfiguration): Promise<CommunicationProvider> {\n        const executable = await this.resolveDebugAdapterExecutable(debugConfiguration);\n        const descriptorFactory = this.descriptorFactories.get(session.type);\n        if (descriptorFactory) {\n            // 'createDebugAdapterDescriptor' is called at the start of a debug session to provide details about the debug adapter to use.\n            // These details must be returned as objects of type [DebugAdapterDescriptor](#DebugAdapterDescriptor).\n            // Currently two types of debug adapters are supported:\n            // - a debug adapter executable is specified as a command path and arguments (see [DebugAdapterExecutable](#DebugAdapterExecutable)),\n            // - a debug adapter server reachable via a communication port (see [DebugAdapterServer](#DebugAdapterServer)).\n            // If the method is not implemented the default behavior is this:\n            //   createDebugAdapter(session: DebugSession, executable: DebugAdapterExecutable) {\n            //      if (typeof session.configuration.debugServer === 'number') {\n            //         return new DebugAdapterServer(session.configuration.debugServer);\n            //      }\n            //      return executable;\n            //   }\n            //  @param session The [debug session](#DebugSession) for which the debug adapter will be used.\n            //  @param executable The debug adapter's executable information as specified in the package.json (or undefined if no such information exists).\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if ('port' in descriptor) {\n                    return connectDebugAdapter(descriptor);\n                } else {\n                    return startDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        if ('debugServer' in debugConfiguration) {\n            return connectDebugAdapter({ port: debugConfiguration.debugServer });\n        } else {\n            if (!executable) {\n                throw new Error('It is not possible to provide debug adapter executable.');\n            }\n            return startDebugAdapter(executable);\n        }\n    }\n\n    protected async resolveDebugAdapterExecutable(debugConfiguration: theia.DebugConfiguration): Promise<theia.DebugAdapterExecutable | undefined> {\n        const { type } = debugConfiguration;\n        const contribution = this.debuggersContributions.get(type);\n        if (contribution) {\n            if (contribution.adapterExecutableCommand) {\n                const executable = await this.commandRegistryExt.executeCommand<theia.DebugAdapterExecutable>(contribution.adapterExecutableCommand);\n                if (executable) {\n                    return executable;\n                }\n            } else {\n                const contributionPath = this.contributionPaths.get(type);\n                if (contributionPath) {\n                    return resolveDebugAdapterExecutable(contributionPath, contribution);\n                }\n            }\n        }\n\n        throw new Error(`It is not possible to provide debug adapter executable for '${debugConfiguration.type}'.`);\n    }\n\n    private toWorkspaceFolder(folder: string | undefined): theia.WorkspaceFolder | undefined {\n        if (!folder) {\n            return undefined;\n        }\n\n        const uri = URI.parse(folder);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: 0\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as path from 'path';\nimport * as theia from '@theia/plugin';\nimport { PlatformSpecificAdapterContribution, PluginPackageDebuggersContribution } from '../../../common';\nimport { isWindows, isOSX } from '@theia/core/lib/common/os';\n\n/**\n * Resolves [DebugAdapterExecutable](#DebugAdapterExecutable) based on contribution.\n */\nexport async function resolveDebugAdapterExecutable(\n    pluginPath: string, debuggerContribution: PluginPackageDebuggersContribution): Promise<theia.DebugAdapterExecutable | undefined> {\n    const info = toPlatformInfo(debuggerContribution);\n    let program = (info && info.program || debuggerContribution.program);\n    if (!program) {\n        return undefined;\n    }\n    program = path.join(pluginPath, program);\n    const programArgs = info && info.args || debuggerContribution.args || [];\n    let runtime = info && info.runtime || debuggerContribution.runtime;\n    if (runtime && runtime.indexOf('./') === 0) {\n        runtime = path.join(pluginPath, runtime);\n    }\n    const runtimeArgs = info && info.runtimeArgs || debuggerContribution.runtimeArgs || [];\n    const command = runtime ? runtime : program;\n    const args = runtime ? [...runtimeArgs, program, ...programArgs] : programArgs;\n    return {\n        command,\n        args\n    };\n}\n\nfunction toPlatformInfo(executable: PluginPackageDebuggersContribution): PlatformSpecificAdapterContribution | undefined {\n    if (isWindows && !process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432')) {\n        return executable.winx86 || executable.win || executable.windows;\n    }\n    if (isWindows) {\n        return executable.win || executable.windows;\n    }\n    if (isOSX) {\n        return executable.osx;\n    }\n    return executable.linux;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CommunicationProvider } from '@theia/debug/lib/common/debug-model';\nimport { DebugAdapterSessionImpl } from '@theia/debug/lib/node/debug-adapter-session';\nimport * as theia from '@theia/plugin';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Server debug adapter session.\n */\nexport class PluginDebugAdapterSession extends DebugAdapterSessionImpl implements theia.DebugSession {\n    readonly type: string;\n    readonly name: string;\n    readonly configuration: theia.DebugConfiguration;\n\n    constructor(\n        protected readonly communicationProvider: CommunicationProvider,\n        protected readonly tracker: theia.DebugAdapterTracker,\n        protected readonly theiaSession: theia.DebugSession) {\n\n        super(theiaSession.id, communicationProvider);\n\n        this.type = theiaSession.type;\n        this.name = theiaSession.name;\n        this.configuration = theiaSession.configuration;\n    }\n\n    async start(channel: IWebSocket): Promise<void> {\n        if (this.tracker.onWillStartSession) {\n            this.tracker.onWillStartSession();\n        }\n        await super.start(channel);\n    }\n\n    async stop(): Promise<void> {\n        if (this.tracker.onWillStopSession) {\n            this.tracker.onWillStopSession();\n        }\n        await super.stop();\n    }\n\n    async customRequest(command: string, args?: any): Promise<any> {\n        return this.theiaSession.customRequest(command, args);\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        if (this.tracker.onError) {\n            this.tracker.onError(error);\n        }\n        super.onDebugAdapterError(error);\n    }\n\n    protected send(message: string): void {\n        try {\n            super.send(message);\n        } finally {\n            if (this.tracker.onDidSendMessage) {\n                this.tracker.onDidSendMessage(message);\n            }\n        }\n    }\n\n    protected write(message: string): void {\n        if (this.tracker.onWillReceiveMessage) {\n            this.tracker.onWillReceiveMessage(message);\n        }\n        super.write(message);\n    }\n\n    protected onDebugAdapterExit(exitCode: number, signal: string | undefined): void {\n        if (this.tracker.onExit) {\n            this.tracker.onExit(exitCode, signal);\n        }\n        super.onDebugAdapterExit(exitCode, signal);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Some entities copied and modified from https://github.com/Microsoft/vscode-debugadapter-node/blob/master/adapter/src/protocol.ts\n\nimport {\n    CommunicationProvider,\n    DebugAdapterSession,\n} from '../common/debug-model';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\n\n/**\n * [DebugAdapterSession](#DebugAdapterSession) implementation.\n */\nexport class DebugAdapterSessionImpl implements DebugAdapterSession {\n\n    private static TWO_CRLF = '\\r\\n\\r\\n';\n    private static CONTENT_LENGTH = 'Content-Length';\n\n    private readonly toDispose = new DisposableCollection();\n    private channel: IWebSocket | undefined;\n    private contentLength: number;\n    private buffer: Buffer;\n\n    constructor(\n        readonly id: string,\n        protected readonly communicationProvider: CommunicationProvider\n    ) {\n        this.contentLength = -1;\n        this.buffer = Buffer.alloc(0);\n        this.toDispose.pushAll([\n            this.communicationProvider,\n            Disposable.create(() => this.write(JSON.stringify({ seq: -1, type: 'request', command: 'disconnect' }))),\n            Disposable.create(() => this.write(JSON.stringify({ seq: -1, type: 'request', command: 'terminate' })))\n        ]);\n    }\n\n    async start(channel: IWebSocket): Promise<void> {\n        if (this.channel) {\n            throw new Error('The session has already been started, id: ' + this.id);\n        }\n        this.channel = channel;\n        this.channel.onMessage((message: string) => this.write(message));\n        this.channel.onClose(() => this.channel = undefined);\n\n        this.communicationProvider.output.on('data', (data: Buffer) => this.handleData(data));\n        this.communicationProvider.output.on('close', () => this.onDebugAdapterExit(1, undefined)); // FIXME pass a proper exit code\n        this.communicationProvider.output.on('error', error => this.onDebugAdapterError(error));\n        this.communicationProvider.input.on('error', error => this.onDebugAdapterError(error));\n    }\n\n    protected onDebugAdapterExit(exitCode: number, signal: string | undefined): void {\n        const event: DebugProtocol.ExitedEvent = {\n            type: 'event',\n            event: 'exited',\n            seq: -1,\n            body: {\n                exitCode\n            }\n        };\n        this.send(JSON.stringify(event));\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        const event: DebugProtocol.Event = {\n            type: 'event',\n            event: 'error',\n            seq: -1,\n            body: error\n        };\n        this.send(JSON.stringify(event));\n    }\n\n    protected handleData(data: Buffer): void {\n        this.buffer = Buffer.concat([this.buffer, data]);\n\n        while (true) {\n            if (this.contentLength >= 0) {\n                if (this.buffer.length >= this.contentLength) {\n                    const message = this.buffer.toString('utf8', 0, this.contentLength);\n                    this.buffer = this.buffer.slice(this.contentLength);\n                    this.contentLength = -1;\n\n                    if (message.length > 0) {\n                        this.send(message);\n                    }\n                    continue;\t// there may be more complete messages to process\n                }\n            } else {\n                let idx = this.buffer.indexOf(DebugAdapterSessionImpl.CONTENT_LENGTH);\n                if (idx > 0) {\n                    // log unrecognized output\n                    const output = this.buffer.slice(0, idx);\n                    console.log(output.toString('utf-8'));\n\n                    this.buffer = this.buffer.slice(idx);\n                }\n\n                idx = this.buffer.indexOf(DebugAdapterSessionImpl.TWO_CRLF);\n                if (idx !== -1) {\n                    const header = this.buffer.toString('utf8', 0, idx);\n                    const lines = header.split('\\r\\n');\n                    for (let i = 0; i < lines.length; i++) {\n                        const pair = lines[i].split(/: +/);\n                        if (pair[0] === DebugAdapterSessionImpl.CONTENT_LENGTH) {\n                            this.contentLength = +pair[1];\n                        }\n                    }\n                    this.buffer = this.buffer.slice(idx + DebugAdapterSessionImpl.TWO_CRLF.length);\n                    continue;\n                }\n            }\n            break;\n        }\n    }\n\n    protected send(message: string): void {\n        if (this.channel) {\n            this.channel.send(message);\n        }\n    }\n\n    protected write(message: string): void {\n        this.communicationProvider.input.write(`Content-Length: ${Buffer.byteLength(message, 'utf8')}\\r\\n\\r\\n${message}`, 'utf8');\n    }\n\n    async stop(): Promise<void> {\n        this.toDispose.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as net from 'net';\nimport * as theia from '@theia/plugin';\nimport { CommunicationProvider } from '@theia/debug/lib/common/debug-model';\nimport { ChildProcess, spawn, fork, ForkOptions } from 'child_process';\n\n/**\n * Starts debug adapter process.\n */\nexport function startDebugAdapter(executable: theia.DebugAdapterExecutable): CommunicationProvider {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const options: any = { stdio: ['pipe', 'pipe', 2] };\n\n    if (executable.options) {\n        options.cwd = executable.options.cwd;\n\n        // The additional environment of the executed program or shell. If omitted\n        // the parent process' environment is used. If provided it is merged with\n        // the parent process' environment.\n        options.env = Object.assign({}, process.env);\n        Object.assign(options.env, executable.options.env);\n    }\n\n    let childProcess: ChildProcess;\n    const { command, args } = executable;\n    if (command === 'node') {\n        if (Array.isArray(args) && args.length > 0) {\n            const isElectron = !!process.env['ELECTRON_RUN_AS_NODE'];\n            const forkOptions: ForkOptions = {\n                env: options.env,\n                execArgv: isElectron ? ['-e', 'delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])'] : [],\n                silent: true\n            };\n            if (options.cwd) {\n                forkOptions.cwd = options.cwd;\n            }\n            options.stdio.push('ipc');\n            forkOptions.stdio = options.stdio;\n            childProcess = fork(args[0], args.slice(1), forkOptions);\n        } else {\n            throw new Error(`It is not possible to launch debug adapter with the command: ${JSON.stringify(executable)}`);\n        }\n    } else {\n        childProcess = spawn(command, args, options);\n    }\n\n    return {\n        input: childProcess.stdin,\n        output: childProcess.stdout,\n        dispose: () => childProcess.kill()\n    };\n}\n\n/**\n * Connects to a remote debug server.\n */\nexport function connectDebugAdapter(server: theia.DebugAdapterServer): CommunicationProvider {\n    const socket = net.createConnection(server.port, server.host);\n    return {\n        input: socket,\n        output: socket,\n        dispose: () => socket.end()\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as theia from '@theia/plugin';\n\nexport class PluginDebugAdapterTracker implements theia.DebugAdapterTracker {\n    constructor(protected readonly trackers: theia.DebugAdapterTracker[]) { }\n\n    static async create(session: theia.DebugSession, trackerFactories: [string, theia.DebugAdapterTrackerFactory][]): Promise<PluginDebugAdapterTracker> {\n        const trackers: theia.DebugAdapterTracker[] = [];\n\n        const factories = trackerFactories.filter(tuple => tuple[0] === '*' || tuple[0] === session.type).map(tuple => tuple[1]);\n        for (const factory of factories) {\n            const tracker = await factory.createDebugAdapterTracker(session);\n            if (tracker) {\n                trackers.push(tracker);\n            }\n        }\n\n        return new PluginDebugAdapterTracker(trackers);\n    }\n\n    onWillStartSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStartSession) {\n                tracker.onWillStartSession();\n            }\n        });\n    }\n\n    onWillReceiveMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillReceiveMessage) {\n                tracker.onWillReceiveMessage(message);\n            }\n        });\n    }\n\n    onDidSendMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onDidSendMessage) {\n                tracker.onDidSendMessage(message);\n            }\n        });\n    }\n\n    onWillStopSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStopSession) {\n                tracker.onWillStopSession();\n            }\n        });\n    }\n\n    onError(error: Error): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onError) {\n                tracker.onError(error);\n            }\n        });\n    }\n\n    onExit(code: number | undefined, signal: string | undefined): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onExit) {\n                tracker.onExit(code, signal);\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EditorsAndDocumentsExt, EditorsAndDocumentsDelta, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { TextEditorExt } from './text-editor';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DocumentDataExt } from './document-data';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\nimport { dispose } from '../common/disposable-util';\nimport URI from 'vscode-uri';\n\nexport class EditorsAndDocumentsExtImpl implements EditorsAndDocumentsExt {\n    private activeEditorId: string | undefined;\n\n    private readonly _onDidAddDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidRemoveDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<TextEditorExt[]>();\n    private readonly _onDidChangeActiveTextEditors = new Emitter<TextEditorExt | undefined>();\n\n    readonly onDidAddDocuments: Event<DocumentDataExt[]> = this._onDidAddDocuments.event;\n    readonly onDidRemoveDocuments: Event<DocumentDataExt[]> = this._onDidRemoveDocuments.event;\n    readonly onDidChangeVisibleTextEditors: Event<TextEditorExt[]> = this._onDidChangeVisibleTextEditors.event;\n    readonly onDidChangeActiveTextEditor: Event<TextEditorExt | undefined> = this._onDidChangeActiveTextEditors.event;\n\n    private readonly documents = new Map<string, DocumentDataExt>();\n    private readonly editors = new Map<string, TextEditorExt>();\n\n    constructor(private readonly rpc: RPCProtocol) {\n    }\n\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void {\n        const removedDocuments = new Array<DocumentDataExt>();\n        const addedDocuments = new Array<DocumentDataExt>();\n        const removedEditors = new Array<TextEditorExt>();\n\n        if (delta.removedDocuments) {\n            for (const uriComponent of delta.removedDocuments) {\n                const uri = URI.revive(uriComponent);\n                const id = uri.toString();\n                const data = this.documents.get(id);\n                this.documents.delete(id);\n                if (data) {\n                    removedDocuments.push(data);\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const data of delta.addedDocuments) {\n                const resource = URI.revive(data.uri);\n                ok(!this.documents.has(resource.toString()), `document '${resource}' already exists!`);\n                const documentData = new DocumentDataExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN),\n                    resource,\n                    data.lines,\n                    data.EOL,\n                    data.modeId,\n                    data.versionId,\n                    data.isDirty\n                );\n                this.documents.set(resource.toString(), documentData);\n                addedDocuments.push(documentData);\n            }\n        }\n\n        if (delta.removedEditors) {\n            for (const id of delta.removedEditors) {\n                const editor = this.editors.get(id);\n                this.editors.delete(id);\n                if (editor) {\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const data of delta.addedEditors) {\n                const resource = URI.revive(data.documentUri);\n                ok(this.documents.has(resource.toString()), `document '${resource}' doesn't exist`);\n                ok(!this.editors.has(data.id), `editor '${data.id}' already exists!`);\n\n                const documentData = this.documents.get(resource.toString());\n                const editor = new TextEditorExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN),\n                    data.id,\n                    documentData!,\n                    data.selections.map(Converter.toSelection),\n                    data.options,\n                    data.visibleRanges.map(Converter.toRange),\n                    Converter.toViewColumn(data.editorPosition)\n                );\n                this.editors.set(data.id, editor);\n            }\n        }\n\n        if (this.activeEditorId && delta.removedEditors && delta.removedEditors.indexOf(this.activeEditorId) !== -1 && this.editors.size !== 0) {\n            // to be compatible with VSCode, when active editor is closed onDidChangeActiveTextEditor\n            // should be triggered with undefined before next editor, if any, become active.\n            this._onDidChangeActiveTextEditors.fire(undefined);\n        }\n\n        if (delta.removedDocuments) {\n            this._onDidRemoveDocuments.fire(removedDocuments);\n        }\n\n        dispose(removedDocuments);\n        dispose(removedEditors);\n\n        if (delta.addedDocuments) {\n            this._onDidAddDocuments.fire(addedDocuments);\n        }\n\n        if ((delta.removedEditors && delta.removedEditors.length > 0) || (delta.addedEditors && delta.addedEditors.length > 0)) {\n            this._onDidChangeVisibleTextEditors.fire(this.allEditors());\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            ok(delta.newActiveEditor === null || this.editors.has(delta.newActiveEditor), `active editor '${delta.newActiveEditor}' doesn't exist`);\n            // do not fire event if focus returns to the same editor\n            if (delta.newActiveEditor !== this.activeEditorId) {\n                this.activeEditorId = delta.newActiveEditor;\n                this._onDidChangeActiveTextEditors.fire(this.activeEditor());\n            }\n        } else if (this.editors.size === 0 && delta.removedEditors) {\n            this.activeEditorId = undefined;\n            this._onDidChangeActiveTextEditors.fire(undefined);\n        }\n    }\n\n    allEditors(): TextEditorExt[] {\n        const result = new Array<TextEditorExt>();\n        this.editors.forEach(editor => result.push(editor));\n        return result;\n    }\n\n    activeEditor(): TextEditorExt | undefined {\n        if (!this.activeEditorId) {\n            return undefined;\n        } else {\n            return this.editors.get(this.activeEditorId);\n        }\n    }\n\n    allDocuments(): DocumentDataExt[] {\n        const result = new Array<DocumentDataExt>();\n        this.documents.forEach(data => result.push(data));\n        return result;\n    }\n\n    getDocument(uri: string): DocumentDataExt | undefined {\n        return this.documents.get(uri);\n    }\n\n    getEditor(id: string): TextEditorExt | undefined {\n        return this.editors.get(id);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { TextEditorConfiguration, TextEditorsMain, TextEditorConfigurationUpdate, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { Range as ApiRange } from '../common/plugin-api-rpc-model';\nimport { Selection, Range, TextEditorLineNumbersStyle, SnippetString, Position, TextEditorRevealType, EndOfLine } from './types-impl';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt } from './document-data';\nimport { readonly, illegalArgument } from '../common/errors';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\n\nexport class TextEditorExt implements theia.TextEditor {\n    private _viewColumn: theia.ViewColumn | undefined;\n    private _document: DocumentDataExt;\n    private _options: TextEditorOptionsExt;\n    private disposed = false;\n    constructor(\n        private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        document: DocumentDataExt,\n        private _selections: Selection[],\n        options: TextEditorConfiguration,\n        private _visibleRanges: Range[],\n        viewColumn: theia.ViewColumn | undefined) {\n        this._options = new TextEditorOptionsExt(proxy, id, options);\n        this._viewColumn = viewColumn;\n        this._document = document;\n    }\n\n    get document(): theia.TextDocument {\n        return this._document.document;\n    }\n\n    set document(doc) {\n        throw readonly('Document');\n    }\n\n    acceptViewColumn(val: theia.ViewColumn): void {\n        this._viewColumn = val;\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get options(): theia.TextEditorOptions {\n        return this._options;\n    }\n\n    set options(val: theia.TextEditorOptions) {\n        if (!this.disposed) {\n            this._options.assign(val);\n        }\n    }\n\n    acceptOptions(options: TextEditorConfiguration): void {\n        ok(!this.disposed);\n        this._options.accept(options);\n    }\n\n    get selection(): Selection {\n        return this._selections && this._selections[0];\n    }\n\n    set selection(val: Selection) {\n        if (!(val instanceof Selection)) {\n            throw illegalArgument('selection');\n        }\n        this._selections = [val];\n        this.trySetSelection();\n    }\n\n    private trySetSelection(): Promise<theia.TextEditor | undefined> {\n        const selection = this._selections.map(Converter.fromSelection);\n        return this.runOnProxy(() => this.proxy.$trySetSelections(this.id, selection));\n    }\n\n    get selections(): Selection[] {\n        return this._selections;\n    }\n\n    set selections(val: Selection[]) {\n        if (!Array.isArray(val) || val.some(s => !(s instanceof Selection))) {\n            throw illegalArgument('selections');\n        }\n\n        this._selections = val;\n        this.trySetSelection();\n    }\n\n    acceptSelections(selections: Selection[]): void {\n        ok(!this.disposed);\n        this._selections = selections;\n    }\n\n    get visibleRanges(): Range[] {\n        return this._visibleRanges;\n    }\n\n    set visibleRanges(val: Range[]) {\n        throw readonly('visibleRanges');\n    }\n\n    acceptVisibleRanges(range: Range[]): void {\n        ok(!this.disposed);\n        this._visibleRanges = range;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        return this._viewColumn;\n    }\n\n    set viewColumn(value) {\n        throw readonly('viewColumn');\n    }\n\n    _acceptViewColumn(value: theia.ViewColumn): void {\n        ok(!this.disposed);\n        this._viewColumn = value;\n    }\n\n    // eslint-disable-next-line max-len\n    edit(callback: (editBuilder: theia.TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editor'));\n        }\n\n        const edit = new TextEditorEdit(this._document.document, options);\n        callback(edit);\n        return this.applyEdit(edit);\n    }\n    // eslint-disable-next-line max-len\n    insertSnippet(snippet: SnippetString, location?: Position | Range | Position[] | Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n        }\n        let ranges: ApiRange[];\n\n        if (!location || (Array.isArray(location) && location.length === 0)) {\n            ranges = this._selections.map(s => Converter.fromRange(s)!);\n\n        } else if (location instanceof Position) {\n            const { lineNumber, column } = Converter.fromPosition(location);\n            ranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n        } else if (location instanceof Range) {\n            ranges = [Converter.fromRange(location)!];\n        } else {\n            ranges = [];\n            for (const posOrRange of location) {\n                if (posOrRange instanceof Range) {\n                    ranges.push(Converter.fromRange(posOrRange)!);\n                } else {\n                    const { lineNumber, column } = Converter.fromPosition(posOrRange);\n                    ranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n                }\n            }\n        }\n\n        return this.proxy.$tryInsertSnippet(this.id, snippet.value, ranges, options);\n    }\n    setDecorations(decorationType: theia.TextEditorDecorationType, rangesOrOptions: Range[] | theia.DecorationOptions[]): void {\n        this.runOnProxy(() => {\n            if (Converter.isDecorationOptionsArr(rangesOrOptions)) {\n                return this.proxy.$trySetDecorations(\n                    this.id,\n                    decorationType.key,\n                    Converter.fromRangeOrRangeWithMessage(rangesOrOptions)\n                );\n            } else {\n                const ranges: number[] = new Array<number>(4 * rangesOrOptions.length);\n                const len = rangesOrOptions.length;\n                for (let i = 0; i < len; i++) {\n                    const range = rangesOrOptions[i];\n                    ranges[4 * i] = range.start.line + 1;\n                    ranges[4 * i + 1] = range.start.character + 1;\n                    ranges[4 * i + 2] = range.end.line + 1;\n                    ranges[4 * i + 3] = range.end.character + 1;\n                }\n                return this.proxy.$trySetDecorationsFast(\n                    this.id,\n                    decorationType.key,\n                    ranges\n                );\n            }\n        });\n    }\n\n    revealRange(range: Range, revealType?: theia.TextEditorRevealType): void {\n        this.runOnProxy(() => this.proxy.$tryRevealRange(this.id, Converter.fromRange(range)!, (revealType || TextEditorRevealType.Default)));\n    }\n\n    private applyEdit(edit: TextEditorEdit): Promise<boolean> {\n        const editData = edit.finalize();\n\n        const editRanges = editData.edits.map(e => e.range);\n\n        editRanges.sort((a, b) => {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n\n        const count = editRanges.length - 1;\n        for (let i = 0; i < count; i++) {\n            const rangeEnd = editRanges[i].end;\n            const nextRangeStart = editRanges[i + 1].start;\n\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                return Promise.reject(\n                    new Error('Overlapping ranges are not allowed!')\n                );\n            }\n        }\n\n        // prepare data for serialization\n        const edits: SingleEditOperation[] = editData.edits.map(e =>\n            ({\n                range: Converter.fromRange(e.range)!,\n                text: e.text,\n                forceMoveMarkers: e.forceMoveMarkers\n            }));\n\n        return this.proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n            setEndOfLine: editData.setEndOfLine,\n            undoStopBefore: editData.undoStopBefore,\n            undoStopAfter: editData.undoStopAfter\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private runOnProxy(callback: () => Promise<any>): Promise<TextEditorExt | undefined> {\n        if (this.disposed) {\n            console.warn('TextEditor is disposed!');\n            return Promise.resolve(undefined);\n        }\n\n        return callback().then(() => this, err => {\n            if (!(err instanceof Error && err.name === 'DISPOSED')) {\n                console.warn(err);\n            }\n            return undefined;\n        });\n    }\n}\n\nexport class TextEditorOptionsExt implements theia.TextEditorOptions {\n    private _tabSize?: number;\n    private _insertSpace: boolean;\n    private _cursorStyle: TextEditorCursorStyle;\n    private _lineNumbers: TextEditorLineNumbersStyle;\n    constructor(private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        source: TextEditorConfiguration) {\n        this.accept(source);\n    }\n\n    accept(source: TextEditorConfiguration): void {\n        this._tabSize = source.tabSize;\n        this._insertSpace = source.insertSpaces;\n        this._cursorStyle = source.cursorStyle;\n        this._lineNumbers = source.lineNumbers;\n    }\n\n    get tabSize(): number | string | undefined {\n        return this._tabSize;\n    }\n\n    set tabSize(val: number | string | undefined) {\n        const tabSize = this.validateTabSize(val);\n        if (!tabSize) {\n            return; // ignore invalid values\n        }\n\n        if (typeof tabSize === 'number') {\n            if (this.tabSize === tabSize) {\n                return;\n            }\n            this.tabSize = tabSize;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, {\n            tabSize\n        }));\n    }\n\n    private validateTabSize(val: number | string | undefined): number | 'auto' | undefined {\n        if (val === 'auto') {\n            return 'auto';\n        }\n\n        if (typeof val === 'number') {\n            const r = Math.floor(val);\n            return r > 0 ? r : undefined;\n        }\n        if (typeof val === 'string') {\n            const r = parseInt(val, undefined);\n            if (isNaN(r)) {\n                return undefined;\n            }\n            return r > 0 ? r : undefined;\n        }\n        return undefined;\n    }\n\n    get insertSpaces(): boolean | string {\n        return this._insertSpace;\n    }\n\n    set insertSpaces(val: boolean | string) {\n        const insertSpaces = this.validateInsertSpaces(val);\n        if (typeof insertSpaces === 'boolean') {\n            if (this._insertSpace === insertSpaces) {\n                return;\n            }\n            this._insertSpace = insertSpaces;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, { insertSpaces }));\n    }\n\n    private validateInsertSpaces(val: boolean | string): boolean | 'auto' {\n        if (val === 'auto') {\n            return 'auto';\n        }\n        return val === 'false' ? false : Boolean(val);\n    }\n\n    get cursorStyle(): TextEditorCursorStyle {\n        return this._cursorStyle;\n    }\n\n    set cursorStyle(val: TextEditorCursorStyle) {\n        if (this._cursorStyle === val) {\n            return;\n        }\n        this._cursorStyle = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { cursorStyle: val }));\n    }\n\n    get lineNumbers(): TextEditorLineNumbersStyle {\n        return this._lineNumbers;\n    }\n    set lineNumbers(val: TextEditorLineNumbersStyle) {\n        if (this._lineNumbers === val) {\n            return;\n        }\n        this._lineNumbers = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { lineNumbers: val }));\n    }\n\n    public assign(newOptions: theia.TextEditorOptions): void {\n        const configurationUpdate: TextEditorConfigurationUpdate = {};\n        let hasUpdate = false;\n\n        if (typeof newOptions.tabSize !== 'undefined') {\n            const tabSize = this.validateTabSize(newOptions.tabSize);\n            if (tabSize === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            } else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n                this._tabSize = tabSize;\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            }\n        }\n\n        if (typeof newOptions.insertSpaces !== 'undefined') {\n            const insertSpaces = this.validateInsertSpaces(newOptions.insertSpaces);\n            if (insertSpaces === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            } else if (this.insertSpaces !== insertSpaces) {\n                this.insertSpaces = insertSpaces;\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            }\n        }\n\n        if (typeof newOptions.cursorStyle !== 'undefined') {\n            if (this._cursorStyle !== newOptions.cursorStyle) {\n                this._cursorStyle = newOptions.cursorStyle;\n                hasUpdate = true;\n                configurationUpdate.cursorStyle = newOptions.cursorStyle;\n            }\n        }\n\n        if (typeof newOptions.lineNumbers !== 'undefined') {\n            if (this._lineNumbers !== newOptions.lineNumbers) {\n                this._lineNumbers = newOptions.lineNumbers;\n                hasUpdate = true;\n                configurationUpdate.lineNumbers = newOptions.lineNumbers;\n            }\n        }\n\n        if (hasUpdate) {\n            warnOnError(this.proxy.$trySetOptions(this.id, configurationUpdate));\n        }\n    }\n\n}\n\nexport interface TextEditOperation {\n    range: theia.Range;\n    text?: string;\n    forceMoveMarkers: boolean;\n}\n\nexport interface EditData {\n    documentVersionId: number;\n    edits: TextEditOperation[];\n    setEndOfLine: EndOfLine;\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n    private readonly documentVersionId: number;\n    private collectedEdits: TextEditOperation[];\n    private eol: EndOfLine;\n    private readonly undoStopBefore: boolean;\n    private readonly undoStopAfter: boolean;\n    constructor(private document: theia.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean }) {\n        this.documentVersionId = document.version;\n        this.collectedEdits = [];\n        this.eol = 0;\n        this.undoStopBefore = options.undoStopBefore;\n        this.undoStopAfter = options.undoStopAfter;\n    }\n\n    finalize(): EditData {\n        return {\n            documentVersionId: this.documentVersionId,\n            edits: this.collectedEdits,\n            setEndOfLine: this.eol,\n            undoStopAfter: this.undoStopAfter,\n            undoStopBefore: this.undoStopBefore\n        };\n    }\n\n    replace(location: Position | Range | Selection, val: string): void {\n        let range: Range;\n        if (location instanceof Position) {\n            range = new Range(location, location);\n        } else if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, val, false);\n    }\n\n    insert(location: Position, val: string): void {\n        this.addEdit(new Range(location, location), val, true);\n    }\n\n    delete(location: Range | Selection): void {\n        let range: Range;\n        if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, undefined, true);\n    }\n\n    setEndOfLine(endOfLine: EndOfLine): void {\n        if (endOfLine !== EndOfLine.CRLF && endOfLine !== EndOfLine.LF) {\n            throw illegalArgument('endOfLine');\n        }\n\n        this.eol = endOfLine;\n    }\n\n    private addEdit(range: Range, text: string | undefined, moveMarkers: boolean): void {\n        const validatedRange = this.document.validateRange(range);\n        this.collectedEdits.push({\n            range: validatedRange,\n            forceMoveMarkers: moveMarkers,\n            text: text\n        });\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction warnOnError(promise: Promise<any>): void {\n    promise.then(undefined, err => {\n        console.warn(err);\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport function dispose<T extends Disposable>(disposable: T): T | undefined;\nexport function dispose<T extends Disposable>(...disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(first: T | T[], ...rest: T[]): T | T[] | undefined {\n    if (Array.isArray(first)) {\n        first.forEach(d => d && d.dispose());\n        return [];\n    } else if (rest.length === 0) {\n        if (first) {\n            first.dispose();\n            return first;\n        }\n        return undefined;\n    } else {\n        dispose(first);\n        dispose(rest);\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/workspace/node/workspaceEditingService.ts\n\nimport * as paths from 'path';\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    WorkspaceExt,\n    WorkspaceFolderPickOptionsMain,\n    WorkspaceMain,\n    PLUGIN_RPC_CONTEXT as Ext,\n    MainMessageType\n} from '../common/plugin-api-rpc';\nimport { Path } from '@theia/core/lib/common/path';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { WorkspaceRootsChangeEvent, FileChangeEvent, FileMoveEvent, FileWillMoveEvent } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { InPluginFileSystemWatcherProxy } from './in-plugin-filesystem-watcher-proxy';\nimport URI from 'vscode-uri';\nimport { FileStat } from '@theia/filesystem/lib/common';\nimport { normalize } from '@theia/languages/lib/common/language-selector/paths';\nimport { relative } from '../common/paths-util';\nimport { Schemes } from '../common/uri-components';\nimport { toWorkspaceFolder } from './type-converters';\nimport { MessageRegistryExt } from './message-registry';\n\nexport class WorkspaceExtImpl implements WorkspaceExt {\n\n    private proxy: WorkspaceMain;\n    private fileSystemWatcherManager: InPluginFileSystemWatcherProxy;\n\n    private workspaceFoldersChangedEmitter = new Emitter<theia.WorkspaceFoldersChangeEvent>();\n    public readonly onDidChangeWorkspaceFolders: Event<theia.WorkspaceFoldersChangeEvent> = this.workspaceFoldersChangedEmitter.event;\n\n    private folders: theia.WorkspaceFolder[] | undefined;\n    private documentContentProviders = new Map<string, theia.TextDocumentContentProvider>();\n\n    constructor(rpc: RPCProtocol,\n        private editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private messageService: MessageRegistryExt) {\n        this.proxy = rpc.getProxy(Ext.WORKSPACE_MAIN);\n        this.fileSystemWatcherManager = new InPluginFileSystemWatcherProxy(this.proxy);\n    }\n\n    get rootPath(): string | undefined {\n        const folder = this.folders && this.folders[0];\n        return folder && folder.uri.fsPath;\n    }\n\n    get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n        return this.folders;\n    }\n\n    get name(): string | undefined {\n        if (this.workspaceFolders && this.workspaceFolders.length > 0) {\n            return new Path(this.workspaceFolders[0].uri.path).base;\n        }\n\n        return undefined;\n    }\n\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void {\n        const newRoots = event.roots || [];\n        const newFolders = newRoots.map((root, index) => this.toWorkspaceFolder(root, index));\n        const delta = this.deltaFolders(this.folders, newFolders);\n\n        this.folders = newFolders;\n\n        this.workspaceFoldersChangedEmitter.fire(delta);\n    }\n\n    private deltaFolders(currentFolders: theia.WorkspaceFolder[] = [], newFolders: theia.WorkspaceFolder[] = []): {\n        added: theia.WorkspaceFolder[]\n        removed: theia.WorkspaceFolder[]\n    } {\n        const added = this.foldersDiff(newFolders, currentFolders);\n        const removed = this.foldersDiff(currentFolders, newFolders);\n        return { added, removed };\n    }\n\n    private foldersDiff(folder1: theia.WorkspaceFolder[] = [], folder2: theia.WorkspaceFolder[] = []): theia.WorkspaceFolder[] {\n        const map = new Map();\n        folder1.forEach(folder => map.set(folder.uri.toString(), folder));\n        folder2.forEach(folder => map.delete(folder.uri.toString()));\n\n        return folder1.filter(folder => map.has(folder.uri.toString()));\n    }\n\n    private toWorkspaceFolder(root: FileStat, index: number): theia.WorkspaceFolder {\n        const uri = URI.parse(root.uri);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: index\n        };\n    }\n\n    pickWorkspaceFolder(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            const optionsMain: WorkspaceFolderPickOptionsMain = {\n                placeHolder: options && options.placeHolder ? options.placeHolder : undefined,\n                ignoreFocusOut: options && options.ignoreFocusOut\n            };\n\n            this.proxy.$pickWorkspaceFolder(optionsMain).then(value => {\n                resolve(value);\n            });\n        });\n    }\n\n    findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number,\n        token: CancellationToken = CancellationToken.None): PromiseLike<URI[]> {\n        let includePattern: string;\n        let includeFolderUri: string | undefined;\n        if (include) {\n            if (typeof include === 'string') {\n                includePattern = include;\n            } else {\n                includePattern = include.pattern;\n                includeFolderUri = URI.file(include.base).toString();\n            }\n        } else {\n            includePattern = '';\n        }\n\n        let excludePatternOrDisregardExcludes: string | false;\n        if (exclude === undefined) {\n            excludePatternOrDisregardExcludes = ''; // default excludes\n        } else if (exclude) {\n            if (typeof exclude === 'string') {\n                excludePatternOrDisregardExcludes = exclude;\n            } else {\n                excludePatternOrDisregardExcludes = exclude.pattern;\n            }\n        } else {\n            excludePatternOrDisregardExcludes = false; // no excludes\n        }\n\n        if (token && token.isCancellationRequested) {\n            return Promise.resolve([]);\n        }\n\n        return this.proxy.$startFileSearch(includePattern, includeFolderUri, excludePatternOrDisregardExcludes, maxResults, token)\n            .then(data => Array.isArray(data) ? data.map(uri => URI.revive(uri)) : []);\n    }\n\n    createFileSystemWatcher(globPattern: theia.GlobPattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): theia.FileSystemWatcher {\n        return this.fileSystemWatcherManager.createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    $fileChanged(event: FileChangeEvent): void {\n        this.fileSystemWatcherManager.onFileSystemEvent(event.subscriberId, URI.revive(event.uri), event.type);\n    }\n\n    registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n        // `file` and `untitled` schemas are reserved by `workspace.openTextDocument` API:\n        // `file`-scheme for opening a file\n        // `untitled`-scheme for opening a new file that should be saved\n        if (scheme === Schemes.FILE || scheme === Schemes.UNTITLED || this.documentContentProviders.has(scheme)) {\n            throw new Error(`Text Content Document Provider for scheme '${scheme}' is already registered`);\n        }\n\n        this.documentContentProviders.set(scheme, provider);\n        this.proxy.$registerTextDocumentContentProvider(scheme);\n\n        let onDidChangeSubscription: theia.Disposable;\n        if (typeof provider.onDidChange === 'function') {\n            onDidChangeSubscription = provider.onDidChange(async uri => {\n                if (uri.scheme === scheme && this.editorsAndDocuments.getDocument(uri.toString())) {\n                    const content = await this.$provideTextDocumentContent(uri.toString());\n                    if (content) {\n                        this.proxy.$onTextDocumentContentChange(uri.toString(), content);\n                    }\n                }\n            });\n        }\n\n        const instance = this;\n        return {\n            dispose(): void {\n                if (instance.documentContentProviders.delete(scheme)) {\n                    instance.proxy.$unregisterTextDocumentContentProvider(scheme);\n                }\n\n                if (onDidChangeSubscription) {\n                    onDidChangeSubscription.dispose();\n                }\n            }\n        };\n    }\n\n    async $provideTextDocumentContent(documentURI: string): Promise<string | undefined> {\n        const uri = URI.parse(documentURI);\n        const provider = this.documentContentProviders.get(uri.scheme);\n        if (provider) {\n            return provider.provideTextDocumentContent(uri, CancellationToken.None);\n        }\n\n        return undefined;\n    }\n\n    getWorkspaceFolder(uri: theia.Uri, resolveParent?: boolean): theia.WorkspaceFolder | undefined {\n        if (!this.folders || !this.folders.length) {\n            return undefined;\n        }\n\n        function dirname(resource: URI): URI {\n            if (resource.scheme === 'file') {\n                return URI.file(paths.dirname(resource.fsPath));\n            }\n            return resource.with({\n                path: paths.dirname(resource.path)\n            });\n        }\n\n        if (resolveParent && this.hasFolder(uri)) {\n            uri = dirname(uri);\n        }\n\n        const resourcePath = uri.toString();\n\n        let workspaceFolder: theia.WorkspaceFolder | undefined;\n        for (let i = 0; i < this.folders.length; i++) {\n            const folder = this.folders[i];\n            const folderPath = folder.uri.toString();\n\n            if (resourcePath === folderPath) {\n                return toWorkspaceFolder(folder);\n            }\n\n            if (resourcePath.startsWith(folderPath)\n                && resourcePath[folderPath.length] === '/'\n                && (!workspaceFolder || folderPath.length > workspaceFolder.uri.toString().length)) {\n                workspaceFolder = folder;\n            }\n        }\n        return workspaceFolder;\n    }\n\n    private hasFolder(uri: URI): boolean {\n        if (!this.folders) {\n            return false;\n        }\n        return this.folders.some(folder => folder.uri.toString() === uri.toString());\n    }\n\n    getRelativePath(pathOrUri: string | theia.Uri, includeWorkspace?: boolean): string | undefined {\n        let path: string | undefined;\n        if (typeof pathOrUri === 'string') {\n            path = pathOrUri;\n        } else if (typeof pathOrUri !== 'undefined') {\n            path = pathOrUri.fsPath;\n        }\n\n        if (!path) {\n            return path;\n        }\n\n        const folder = this.getWorkspaceFolder(\n            typeof pathOrUri === 'string' ? URI.file(pathOrUri) : pathOrUri,\n            true\n        ) as theia.WorkspaceFolder;\n\n        if (!folder) {\n            return path;\n        }\n\n        if (typeof includeWorkspace === 'undefined') {\n            includeWorkspace = this.folders!.length > 1;\n        }\n\n        let result = relative(folder.uri.fsPath, path);\n        if (includeWorkspace) {\n            result = `${folder.name}/${result}`;\n        }\n        return normalize(result, true);\n    }\n\n    updateWorkspaceFolders(start: number, deleteCount: number, ...workspaceFoldersToAdd: { uri: theia.Uri, name?: string }[]): boolean {\n        const rootsToAdd = new Set<string>();\n        if (Array.isArray(workspaceFoldersToAdd)) {\n            workspaceFoldersToAdd.forEach(folderToAdd => {\n                const uri = URI.isUri(folderToAdd.uri) && folderToAdd.uri.toString();\n                if (uri && !rootsToAdd.has(uri)) {\n                    rootsToAdd.add(uri);\n                }\n            });\n        }\n\n        if ([start, deleteCount].some(i => typeof i !== 'number' || i < 0)) {\n            return false; // validate numbers\n        }\n\n        if (deleteCount === 0 && rootsToAdd.size === 0) {\n            return false; // nothing to delete or add\n        }\n\n        const currentWorkspaceFolders = this.workspaceFolders || [];\n        if (start + deleteCount > currentWorkspaceFolders.length) {\n            return false; // cannot delete more than we have\n        }\n\n        // Simulate the updateWorkspaceFolders method on our data to do more validation\n        const newWorkspaceFolders = currentWorkspaceFolders.slice(0);\n        newWorkspaceFolders.splice(start, deleteCount, ...[...rootsToAdd].map(uri => ({ uri: URI.parse(uri), name: undefined!, index: undefined! })));\n\n        for (let i = 0; i < newWorkspaceFolders.length; i++) {\n            const folder = newWorkspaceFolders[i];\n            if (newWorkspaceFolders.some((otherFolder, index) => index !== i && folder.uri.toString() === otherFolder.uri.toString())) {\n                return false; // cannot add the same folder multiple times\n            }\n        }\n\n        const { added, removed } = this.deltaFolders(currentWorkspaceFolders, newWorkspaceFolders);\n        if (added.length === 0 && removed.length === 0) {\n            return false; // nothing actually changed\n        }\n\n        // Trigger on main side\n        this.proxy.$updateWorkspaceFolders(start, deleteCount, ...rootsToAdd).then(undefined, error =>\n            this.messageService.showMessage(MainMessageType.Error, `Failed to update workspace folders: ${error}`)\n        );\n\n        return true;\n    }\n\n    // Experimental API https://github.com/eclipse-theia/theia/issues/4167\n    private workspaceWillRenameFileEmitter = new Emitter<theia.FileWillRenameEvent>();\n    private workspaceDidRenameFileEmitter = new Emitter<theia.FileRenameEvent>();\n\n    /**\n     * Adds a listener for an event that is emitted when a workspace file is going to be renamed.\n     */\n    public readonly onWillRenameFile: Event<theia.FileWillRenameEvent> = this.workspaceWillRenameFileEmitter.event;\n\n    /**\n     * Adds a listener for an event that is emitted when a workspace file is renamed.\n     */\n    public readonly onDidRenameFile: Event<theia.FileRenameEvent> = this.workspaceDidRenameFileEmitter.event;\n\n    $onFileRename(event: FileMoveEvent): void {\n        this.workspaceDidRenameFileEmitter.fire(Object.freeze({ oldUri: URI.revive(event.oldUri), newUri: URI.revive(event.newUri) }));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $onWillRename(event: FileWillMoveEvent): Promise<any> {\n        return this.workspaceWillRenameFileEmitter.fire({\n            oldUri: URI.revive(event.oldUri),\n            newUri: URI.revive(event.newUri),\n            waitUntil: (thenable: Promise<theia.WorkspaceEdit>): void => { }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { WorkspaceMain } from '../common/plugin-api-rpc';\nimport { FileWatcherSubscriberOptions, FileChangeEventType } from '../common/plugin-api-rpc-model';\nimport URI from 'vscode-uri';\n\n/**\n * This class is responsible for file watchers subscription registering and file system events proxying.\n * It contains no logic, only communicates with main side to add / remove subscription and\n * delivers file system events to corresponding subscribers.\n */\nexport class InPluginFileSystemWatcherProxy {\n\n    private proxy: WorkspaceMain;\n    private subscribers: Map<string, Emitter<FileSystemEvent>>;\n\n    constructor(proxy: WorkspaceMain) {\n        this.proxy = proxy;\n        this.subscribers = new Map<string, Emitter<FileSystemEvent>>();\n    }\n\n    createFileSystemWatcher(\n        globPattern: theia.GlobPattern,\n        ignoreCreateEvents?: boolean,\n        ignoreChangeEvents?: boolean,\n        ignoreDeleteEvents?: boolean): theia.FileSystemWatcher {\n\n        const perSubscriberEventEmitter = new Emitter<FileSystemEvent>();\n        const subscriberPrivateData: SubscriberData = {\n            event: perSubscriberEventEmitter.event\n        };\n        const fileWatcherSubscriberOptions: FileWatcherSubscriberOptions = { globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents };\n        // ids are generated by server side to be able handle several subscribers.\n        this.proxy.$registerFileSystemWatcher(fileWatcherSubscriberOptions).then((id: string) => {\n            // this is safe, because actual subscription happens on server side and response is\n            // sent right after actual subscription, so no events are possible in between.\n            this.subscribers.set(id, perSubscriberEventEmitter);\n            subscriberPrivateData.unsubscribe = () => this.proxy.$unregisterFileSystemWatcher(id);\n        });\n        return new FileSystemWatcher(subscriberPrivateData, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    onFileSystemEvent(id: string, uri: URI, type: FileChangeEventType): void {\n        const perSubscriberEventEmitter: Emitter<FileSystemEvent> | undefined = this.subscribers.get(id);\n        if (perSubscriberEventEmitter) {\n            perSubscriberEventEmitter.fire({ uri, type });\n        } else {\n            // shouldn't happen\n            // if it happens then a message was lost, unsubscribe to make state consistent\n            this.proxy.$unregisterFileSystemWatcher(id);\n        }\n    }\n}\n\nclass FileSystemWatcher implements theia.FileSystemWatcher {\n    private subscriberData: SubscriberData;\n\n    private onDidCreateEmitter: Emitter<theia.Uri>;\n    private onDidChangeEmitter: Emitter<theia.Uri>;\n    private onDidDeleteEmitter: Emitter<theia.Uri>;\n\n    constructor(\n        subscriberData: SubscriberData,\n        private isIgnoreCreateEvents: boolean = false,\n        private isIgnoreChangeEvents: boolean = false,\n        private isIgnoreDeleteEvents: boolean = false\n    ) {\n        this.onDidCreateEmitter = new Emitter<theia.Uri>();\n        this.onDidChangeEmitter = new Emitter<theia.Uri>();\n        this.onDidDeleteEmitter = new Emitter<theia.Uri>();\n\n        this.subscriberData = subscriberData;\n        subscriberData.event((event: FileSystemEvent) => {\n            // Here ignore event flags are not analyzed because all the logic is\n            // moved to server side to avoid unneeded data transfer via network.\n            // The flags are present just to be read only accessible for user.\n            switch (event.type) {\n                case 'updated':\n                    this.onDidChangeEmitter.fire(event.uri);\n                    break;\n                case 'created':\n                    this.onDidCreateEmitter.fire(event.uri);\n                    break;\n                case 'deleted':\n                    this.onDidDeleteEmitter.fire(event.uri);\n                    break;\n            }\n        });\n    }\n\n    get ignoreCreateEvents(): boolean {\n        return this.isIgnoreCreateEvents;\n    }\n\n    get ignoreChangeEvents(): boolean {\n        return this.isIgnoreChangeEvents;\n    }\n\n    get ignoreDeleteEvents(): boolean {\n        return this.isIgnoreDeleteEvents;\n    }\n\n    get onDidCreate(): Event<theia.Uri> {\n        return this.onDidCreateEmitter.event;\n    }\n\n    get onDidChange(): Event<theia.Uri> {\n        return this.onDidChangeEmitter.event;\n    }\n\n    get onDidDelete(): Event<theia.Uri> {\n        return this.onDidDeleteEmitter.event;\n    }\n\n    dispose(): void {\n        this.onDidCreateEmitter.dispose();\n        this.onDidChangeEmitter.dispose();\n        this.onDidDeleteEmitter.dispose();\n        if (this.subscriberData.unsubscribe) {\n            this.subscriberData.unsubscribe();\n        }\n    }\n\n}\n\ninterface FileSystemEvent {\n    uri: URI,\n    type: FileChangeEventType\n}\n\ninterface SubscriberData {\n    event: Event<FileSystemEvent>\n    unsubscribe?: () => void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, MessageRegistryMain, MainMessageOptions, MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageItem, MessageOptions } from '@theia/plugin';\n\nexport class MessageRegistryExt {\n\n    private proxy: MessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.MESSAGE_REGISTRY_MAIN);\n    }\n\n    async showMessage(type: MainMessageType, message: string,\n        optionsOrFirstItem?: MessageOptions | string | MessageItem,\n        ...rest: (string | MessageItem)[]): Promise<string | MessageItem | undefined> {\n        const options: MainMessageOptions = {};\n        const actions: string[] = [];\n        const items: (string | MessageItem)[] = [];\n        const pushItem = (item: string | MessageItem) => {\n            items.push(item);\n            if (typeof item === 'string') {\n                actions.push(item);\n            } else {\n                actions.push(item.title);\n                if (item.isCloseAffordance) {\n                    options.onCloseActionHandle = actions.length - 1;\n                }\n            }\n        };\n        if (optionsOrFirstItem) {\n            if (typeof optionsOrFirstItem === 'string' || 'title' in optionsOrFirstItem) {\n                pushItem(optionsOrFirstItem);\n            } else {\n                if ('modal' in optionsOrFirstItem) {\n                    options.modal = optionsOrFirstItem.modal;\n                }\n            }\n        }\n        for (const item of rest) {\n            pushItem(item);\n        }\n        const actionHandle = await this.proxy.$showMessage(type, message, options, actions);\n        return actionHandle !== undefined ? items[actionHandle] : undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EnvExtImpl } from '../../../plugin/env';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/**\n * Worker specific implementation not returning any FileSystem details\n * Extending the common class\n */\nexport class WorkerEnvExtImpl extends EnvExtImpl {\n\n    constructor(rpc: RPCProtocol) {\n        super(rpc);\n    }\n\n    /**\n     * Throw error for app-root as there is no filesystem in worker context\n     */\n    get appRoot(): string {\n        throw new Error('There is no app root in worker context');\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { EnvMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { QueryParameters } from '../common/env';\nimport { v4 } from 'uuid';\n\nexport abstract class EnvExtImpl {\n    private proxy: EnvMain;\n    private queryParameters: QueryParameters;\n    private lang: string;\n    private defaultShell: string;\n    private envMachineId: string;\n    private envSessionId: string;\n\n    public static readonly APP_NAME = 'Eclipse Theia';\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.ENV_MAIN);\n        this.envSessionId = v4();\n        this.envMachineId = v4();\n    }\n\n    getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.proxy.$getEnvVariable(envVarName).then(x => {\n            if (x === null) {\n                return undefined;\n            }\n            return x;\n        });\n    }\n\n    getQueryParameter(queryParamName: string): string | string[] | undefined {\n        return this.queryParameters[queryParamName];\n    }\n\n    getQueryParameters(): QueryParameters {\n        return this.queryParameters;\n    }\n\n    setQueryParameters(queryParams: QueryParameters): void {\n        this.queryParameters = queryParams;\n    }\n\n    setLanguage(lang: string): void {\n        this.lang = lang;\n    }\n\n    setShell(shell: string): void {\n        this.defaultShell = shell;\n    }\n\n    getClientOperatingSystem(): Promise<theia.OperatingSystem> {\n        return this.proxy.$getClientOperatingSystem();\n    }\n\n    get appName(): string {\n        return EnvExtImpl.APP_NAME;\n    }\n\n    abstract get appRoot(): string;\n\n    get language(): string {\n        return this.lang;\n    }\n    get machineId(): string {\n        return this.envMachineId;\n    }\n    get sessionId(): string {\n        return this.envSessionId;\n    }\n    get uriScheme(): string {\n        return 'theia';\n    }\n    get shell(): string {\n        return this.defaultShell;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, ClipboardMain } from '../common';\n\nexport class ClipboardExt implements theia.Clipboard {\n\n    protected readonly proxy: ClipboardMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN);\n    }\n\n    readText(): Promise<string> {\n        return this.proxy.$readText();\n    }\n\n    writeText(value: string): Promise<void> {\n        return this.proxy.$writeText(value);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { v4 } from 'uuid';\nimport { WebviewsExt, WebviewPanelViewState, WebviewsMain, PLUGIN_RPC_CONTEXT, WebviewInitData, /* WebviewsMain, PLUGIN_RPC_CONTEXT  */ } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\nimport URI from 'vscode-uri';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { fromViewColumn, toViewColumn, toWebviewPanelShowOptions } from './type-converters';\nimport { Disposable, WebviewPanelTargetArea } from './types-impl';\nimport { WorkspaceExtImpl } from './workspace';\nimport { PluginIconPath } from './plugin-icon-path';\n\nexport class WebviewsExtImpl implements WebviewsExt {\n    private readonly proxy: WebviewsMain;\n    private readonly webviewPanels = new Map<string, WebviewPanelImpl>();\n    private readonly serializers = new Map<string, {\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    }>();\n    private initData: WebviewInitData | undefined;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl,\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN);\n    }\n\n    init(initData: WebviewInitData): void {\n        this.initData = initData;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $onMessage(handle: string, message: any): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.webview.onMessageEmitter.fire(message);\n        }\n    }\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            const viewColumn = toViewColumn(newState.position);\n            if (panel.active !== newState.active || panel.visible !== newState.visible || panel.viewColumn !== viewColumn) {\n                panel.setActive(newState.active);\n                panel.setVisible(newState.visible);\n                panel.setViewColumn(viewColumn!);\n                panel.onDidChangeViewStateEmitter.fire({ webviewPanel: panel });\n            }\n        }\n    }\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void> {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.dispose();\n            this.webviewPanels.delete(handle);\n        }\n        return Promise.resolve();\n    }\n    $deserializeWebviewPanel(viewId: string,\n        viewType: string,\n        title: string,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void> {\n        if (!this.initData) {\n            return Promise.reject(new Error('Webviews are not initialized'));\n        }\n        const entry = this.serializers.get(viewType);\n        if (!entry) {\n            return Promise.reject(new Error(`No serializer found for '${viewType}'`));\n        }\n        const { serializer, plugin } = entry;\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const revivedPanel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, toViewColumn(viewState.position)!, options, webview);\n        revivedPanel.setActive(viewState.active);\n        revivedPanel.setVisible(viewState.visible);\n        this.webviewPanels.set(viewId, revivedPanel);\n        return serializer.deserializeWebviewPanel(revivedPanel, state);\n    }\n\n    createWebview(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin\n    ): theia.WebviewPanel {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const viewId = v4();\n        this.proxy.$createWebviewPanel(viewId, viewType, title, webviewShowOptions, WebviewImpl.toWebviewOptions(options, this.workspace, plugin));\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const panel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, webviewShowOptions, options, webview);\n        this.webviewPanels.set(viewId, panel);\n        return panel;\n    }\n\n    registerWebviewPanelSerializer(\n        viewType: string,\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    ): theia.Disposable {\n        if (this.serializers.has(viewType)) {\n            throw new Error(`Serializer for '${viewType}' already registered`);\n        }\n\n        this.serializers.set(viewType, { serializer, plugin });\n        this.proxy.$registerSerializer(viewType);\n\n        return new Disposable(() => {\n            this.serializers.delete(viewType);\n            this.proxy.$unregisterSerializer(viewType);\n        });\n    }\n\n    private getWebviewPanel(viewId: string): WebviewPanelImpl | undefined {\n        if (this.webviewPanels.has(viewId)) {\n            return this.webviewPanels.get(viewId);\n        }\n        return undefined;\n    }\n}\n\nexport class WebviewImpl implements theia.Webview {\n    private isDisposed = false;\n    private _html: string;\n    private _options: theia.WebviewOptions;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onMessageEmitter = new Emitter<any>();\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onDidReceiveMessage: Event<any> = this.onMessageEmitter.event;\n\n    constructor(\n        private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        options: theia.WebviewOptions,\n        private readonly initData: WebviewInitData,\n        private readonly workspace: WorkspaceExtImpl,\n        readonly plugin: Plugin\n    ) {\n        this._options = options;\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.onMessageEmitter.dispose();\n    }\n\n    asWebviewUri(resource: theia.Uri): theia.Uri {\n        const uri = this.initData.webviewResourceRoot\n            // Make sure we preserve the scheme of the resource but convert it into a normal path segment\n            // The scheme is important as we need to know if we are requesting a local or a remote resource.\n            .replace('{{resource}}', resource.scheme + resource.toString().replace(/^\\S+?:/, ''))\n            .replace('{{uuid}}', this.viewId);\n        return URI.parse(uri);\n    }\n\n    get cspSource(): string {\n        return this.initData.webviewCspSource.replace('{{uuid}}', this.viewId);\n    }\n\n    get html(): string {\n        this.checkIsDisposed();\n        return this._html;\n    }\n\n    set html(value: string) {\n        this.checkIsDisposed();\n        if (this._html !== value) {\n            this._html = value;\n            this.proxy.$setHtml(this.viewId, value);\n        }\n    }\n\n    get options(): theia.WebviewOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    set options(newOptions: theia.WebviewOptions) {\n        this.checkIsDisposed();\n        this.proxy.$setOptions(this.viewId, WebviewImpl.toWebviewOptions(newOptions, this.workspace, this.plugin));\n        this._options = newOptions;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This Webview is disposed!');\n        }\n    }\n\n    static toWebviewOptions(options: theia.WebviewOptions, workspace: WorkspaceExtImpl, plugin: Plugin): theia.WebviewOptions {\n        return {\n            ...options,\n            localResourceRoots: options.localResourceRoots || [\n                ...(workspace.workspaceFolders || []).map(x => x.uri),\n                URI.file(plugin.pluginFolder)\n            ]\n        };\n    }\n}\n\nexport class WebviewPanelImpl implements theia.WebviewPanel {\n\n    private isDisposed = false;\n    private _active = true;\n    private _visible = true;\n    private _showOptions: theia.WebviewPanelShowOptions;\n    private _iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined;\n\n    readonly onDisposeEmitter = new Emitter<void>();\n    public readonly onDidDispose: Event<void> = this.onDisposeEmitter.event;\n\n    readonly onDidChangeViewStateEmitter = new Emitter<theia.WebviewPanelOnDidChangeViewStateEvent>();\n    public readonly onDidChangeViewState: Event<theia.WebviewPanelOnDidChangeViewStateEvent> = this.onDidChangeViewStateEmitter.event;\n\n    constructor(private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        private readonly _viewType: string,\n        private _title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        private readonly _options: theia.WebviewPanelOptions,\n        private readonly _webview: WebviewImpl\n    ) {\n        this._showOptions = typeof showOptions === 'object' ? showOptions : { viewColumn: showOptions as theia.ViewColumn };\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        this.isDisposed = true;\n        this.onDisposeEmitter.fire(undefined);\n\n        this.proxy.$disposeWebview(this.viewId);\n        this._webview.dispose();\n\n        this.onDisposeEmitter.dispose();\n        this.onDidChangeViewStateEmitter.dispose();\n    }\n\n    get viewType(): string {\n        this.checkIsDisposed();\n        return this._viewType;\n    }\n\n    get title(): string {\n        this.checkIsDisposed();\n        return this._title;\n    }\n\n    set title(newTitle: string) {\n        this.checkIsDisposed();\n        if (this._title !== newTitle) {\n            this._title = newTitle;\n            this.proxy.$setTitle(this.viewId, newTitle);\n        }\n    }\n\n    get iconPath(): theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined {\n        return this._iconPath;\n    }\n\n    set iconPath(iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined) {\n        this.checkIsDisposed();\n        if (this._iconPath !== iconPath) {\n            this._iconPath = iconPath;\n            this.proxy.$setIconPath(this.viewId, PluginIconPath.toUrl(iconPath, this._webview.plugin));\n        }\n    }\n\n    get webview(): WebviewImpl {\n        this.checkIsDisposed();\n        return this._webview;\n    }\n\n    get options(): theia.WebviewPanelOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        this.checkIsDisposed();\n        return this._showOptions.viewColumn;\n    }\n\n    setViewColumn(value: theia.ViewColumn | undefined): void {\n        this.checkIsDisposed();\n        this._showOptions.viewColumn = value;\n    }\n\n    get showOptions(): theia.WebviewPanelShowOptions {\n        this.checkIsDisposed();\n        return this._showOptions;\n    }\n\n    setShowOptions(value: theia.WebviewPanelShowOptions): void {\n        this.checkIsDisposed();\n        this._showOptions = value;\n    }\n\n    get active(): boolean {\n        this.checkIsDisposed();\n        return this._active;\n    }\n\n    setActive(value: boolean): void {\n        this.checkIsDisposed();\n        this._active = value;\n    }\n\n    get visible(): boolean {\n        this.checkIsDisposed();\n        return this._visible;\n    }\n\n    setVisible(value: boolean): void {\n        this.checkIsDisposed();\n        this._visible = value;\n    }\n\n    reveal(arg0?: theia.ViewColumn | WebviewPanelTargetArea, arg1?: theia.ViewColumn | boolean, arg2?: boolean): void {\n        let area: WebviewPanelTargetArea | undefined = undefined;\n        let viewColumn: theia.ViewColumn | undefined = undefined;\n        let preserveFocus: boolean | undefined = undefined;\n        if (typeof arg0 === 'number') {\n            viewColumn = arg0;\n        } else {\n            area = arg0;\n        }\n        if (typeof arg1 === 'number') {\n            viewColumn = arg1;\n        } else {\n            preserveFocus = arg1;\n        }\n        if (typeof arg2 === 'boolean') {\n            preserveFocus = arg2;\n        }\n        this.checkIsDisposed();\n        this.proxy.$reveal(this.viewId, {\n            area,\n            viewColumn: viewColumn ? fromViewColumn(viewColumn) : undefined,\n            preserveFocus\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This WebviewPanel is disposed!');\n        }\n    }\n}\n"],"sourceRoot":""}